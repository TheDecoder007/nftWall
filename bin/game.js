"use strict";const getGlobalThis=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==this)return this;throw new Error("Unable to locate global `this`")},globalObject=getGlobalThis();var loader;!function(_t){let Ft=0;const Lt=[],Yt=[],Kt={baseUrl:""},Zt={};function c(_t,Lt,Yt){let Kt=null,le={},ve=null;"function"==typeof _t?le=_t:"string"==typeof _t?(Kt=_t,"function"==typeof Lt?le=Lt:Lt instanceof Array&&(ve=Lt,le=Yt)):_t instanceof Array&&(ve=_t,"function"==typeof Lt&&(le=Lt)),ve=ve||["require","exports","module"],null===Kt&&(Kt="unnamed-module-"+Ft++),Kt=g(Kt),ve=(ve||[]).map((_t=>function(_t,Ft){return _t?b(Ft,_t):Ft}(Kt,_t))),Zt[Kt]||(Zt[Kt]={name:Kt,parent:null,dclamd:1,dependencies:ve,handlers:[],exports:{},dependants:new Set}),Zt[Kt].dependencies=ve,p(ve,(function(_t){const Ft=Zt[Kt];if(!Ft)throw new Error("Could not access registered module "+Kt);let Lt=Ft.exports;Lt="function"==typeof le?le.apply(globalObject,_t)||Lt:le,Ft.exports=Lt,d(Kt)}),(_t=>{if("function"!=typeof onerror)throw _t;onerror(_t)}),Kt)}function d(_t){const Ft=Zt[_t];if(!Ft)throw new Error("Could not access registered module "+_t);Ft.dclamd=2;const Lt=Ft.handlers;if(Lt&&Lt.length)for(let Ft=0;Ft<Lt.length;Ft++)Lt[Ft](Zt[_t])}function u(_t,Ft,Lt){if(!Zt[_t])return null;if(_t===Ft||50===Lt)return[_t];const Yt=Zt[_t].dependencies;for(let Kt=0,Zt=Yt.length;Kt<Zt;Kt++){const Zt=u(Yt[Kt],Ft,Lt+1);if(null!==Zt)return Zt.push(_t),Zt}return null}function a(_t,Ft){const Lt=Zt[_t];if(!Lt)return!1;const Yt={};for(const _t in Zt)Yt[_t]=!1;const Kt=[];for(Kt.push(Lt),Yt[_t]=!0;Kt.length>0;){const _t=Kt.shift().dependencies;if(_t)for(let Lt=0,le=_t.length;Lt<le;Lt++){const le=_t[Lt];if(le===Ft)return!0;const ve=Zt[le];ve&&!Yt[le]&&(Yt[le]=!0,Kt.push(ve))}}return!1}function p(_t,Ft,Lt,Kt){const le=new Array(_t.length).fill(null);let ve=0,Ce=!1;if("string"==typeof _t){if(Zt[_t]){if(1===Zt[_t].dclamd)throw new Error(`Trying to load ${_t} from ${Kt}. The first module is still loading.`);return Zt[_t]}throw new Error(_t+" has not been defined. Please include it as a dependency in "+Kt+"'s define()")}const Se=_t.length;for(let Ie=0;Ie<Se;Ie++)switch(_t[Ie]){case"require":const h=function(_t,Ft,Lt){return p(_t,Ft,Lt,Kt)};h.toUrl=function(_t){return b(_t,Kt)},le[Ie]=h,ve++;break;case"exports":if(!Zt[Kt])throw new Error("Parent module "+Kt+" not registered yet");le[Ie]=Zt[Kt].exports,ve++;break;case"module":le[Ie]={id:Kt,uri:b(Kt)},ve++;break;default:{const Ne=_t[Ie],m=()=>{le[Ie]=Zt[Ne].exports,ve++,ve===Se&&Ft&&(Ce=!0,Ft(le))};if(a(Ne,Kt)){const _t=u(Ne,Kt,0);_t&&(_t.reverse(),_t.push(Ne),Yt.push(_t)),w(Ne,(()=>{}),Lt,Kt),m()}else w(Ne,m,Lt,Kt);break}}!Ce&&ve===Se&&Ft&&Ft(le)}function h(_t,Ft){return function(){return dcl.callRpc(_t,Ft.name,Lt.slice.call(arguments,0))}}function w(_t,Ft,Lt,Yt){if(Zt[_t])return Zt[_t].dependants.add(Yt),void(1===Zt[_t].dclamd?Ft&&Zt[_t].handlers.push(Ft):Ft&&Ft(Zt[_t]));if(Zt[_t]={name:_t,parent:Yt,dclamd:1,handlers:[Ft],dependencies:[],dependants:new Set([Yt]),exports:{}},0===_t.indexOf("@")){const Ft=Zt[_t].exports;if("function"!=typeof dcl.loadModule)throw new Error("Asynchronous modules will not work because loadModule function is not present");dcl.loadModule(_t,Ft).then((Lt=>{for(const _t in Lt.methods){const Yt=Lt.methods[_t];Ft[Yt.name]=h(Lt.rpcHandle,Yt)}d(_t)})).catch((_t=>{Lt(_t)}))}}function g(_t){let Ft,Lt=_t;for(Ft=/\/\.\//;Ft.test(Lt);)Lt=Lt.replace(Ft,"/");for(Lt=Lt.replace(/^\.\//g,""),Ft=/\/(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//;Ft.test(Lt);)Lt=Lt.replace(Ft,"/");return Lt=Lt.replace(/^(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//,""),Lt=Lt.replace(/^\//g,""),Lt}function b(_t,Ft){switch(_t){case"require":case"exports":case"module":return _t}return Ft?function(_t,Ft){let Lt=_t;if(!Lt.startsWith("@")&&(Lt.startsWith("./")||Lt.startsWith("../"))){const _t=Ft.split("/");_t.pop(),Lt=g(_t.join("/")+"/"+Lt)}return Lt}(_t,Ft):g(_t)}_t.config=function(_t){if("object"==typeof _t)for(const Ft in _t)_t.hasOwnProperty(Ft)&&(Kt[Ft]=_t[Ft])},_t.define=c,function(_t){_t.amd={},_t.modules=Zt}(c=_t.define||(_t.define={})),_t.require=p,"undefined"!=typeof dcl&&dcl.onStart((()=>{const _t=new Set,Ft=[];for(const Lt in Zt)Zt[Lt]&&(1===Zt[Lt].dclamd&&Ft.push(Zt[Lt]),Zt[Lt].dependencies.forEach((Ft=>{"require"!==Ft&&"exports"!==Ft&&"module"!==Ft&&(Zt[Ft]||_t.add(Ft))})));const Lt=[];if(Yt.length&&Lt.push(`\n> Cyclic dependencies: ${Yt.map((_t=>"\n  - "+_t.join(" -> "))).join("")}`),_t.size&&Lt.push(`\n> Undeclared/unknown modules: ${Array.from(_t).map((_t=>"\n  - "+_t)).join("")}`),Ft.length&&Lt.push(`\n> These modules didn't load: ${Ft.map((_t=>"\n  - "+_t.name)).join("")}.\n`),Lt.length)throw new Error(Lt.join("\n"))})),p.toUrl=b}(loader||(loader={})),globalObject.define=loader.define,globalObject.dclamd=loader,function(_t){var Ft=function(){function t(){}return t.AVATAR={getEntityRepresentation:function(_t){return _t.avatarEntity}},t.FIRST_PERSON_CAMERA={getEntityRepresentation:function(_t){return _t.firstPersonCameraEntity}},t}(),n=function(_t,Ft){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Ft){_t.__proto__=Ft}||function(_t,Ft){for(var Lt in Ft)Object.prototype.hasOwnProperty.call(Ft,Lt)&&(_t[Lt]=Ft[Lt])})(_t,Ft)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function i(_t,Ft){if("function"!=typeof Ft&&null!==Ft)throw new TypeError("Class extends value "+String(Ft)+" is not a constructor or null");function i(){this.constructor=_t}n(_t,Ft),_t.prototype=null===Ft?Object.create(Ft):(i.prototype=Ft.prototype,new i)}var o=function(){return(o=Object.assign||function(_t){for(var Ft,Lt=1,Yt=arguments.length;Lt<Yt;Lt++)for(var Kt in Ft=arguments[Lt])Object.prototype.hasOwnProperty.call(Ft,Kt)&&(_t[Kt]=Ft[Kt]);return _t}).apply(this,arguments)};function r(_t,Ft,Lt,Yt){var Kt,Zt=arguments.length,le=Zt<3?Ft:null===Yt?Yt=Object.getOwnPropertyDescriptor(Ft,Lt):Yt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(_t,Ft,Lt,Yt);else for(var ve=_t.length-1;ve>=0;ve--)(Kt=_t[ve])&&(le=(Zt<3?Kt(le):Zt>3?Kt(Ft,Lt,le):Kt(Ft,Lt))||le);return Zt>3&&le&&Object.defineProperty(Ft,Lt,le),le}function s(_t,Ft){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(_t,Ft)}function h(_t){var Ft="function"==typeof Symbol&&Symbol.iterator,Lt=Ft&&_t[Ft],Yt=0;if(Lt)return Lt.call(_t);if(_t&&"number"==typeof _t.length)return{next:function(){return _t&&Yt>=_t.length&&(_t=void 0),{value:_t&&_t[Yt++],done:!_t}}};throw new TypeError(Ft?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(_t,Ft){var Lt="function"==typeof Symbol&&_t[Symbol.iterator];if(!Lt)return _t;var Yt,Kt,Zt=Lt.call(_t),le=[];try{for(;(void 0===Ft||Ft-- >0)&&!(Yt=Zt.next()).done;)le.push(Yt.value)}catch(_t){Kt={error:_t}}finally{try{Yt&&!Yt.done&&(Lt=Zt.return)&&Lt.call(Zt)}finally{if(Kt)throw Kt.error}}return le}function p(_t,Ft){for(var Lt=0,Yt=Ft.length,Kt=_t.length;Lt<Yt;Lt++,Kt++)_t[Kt]=Ft[Lt];return _t}var Lt=0;function c(){for(var _t=[],Ft=0;Ft<arguments.length;Ft++)_t[Ft]=arguments[Ft];"undefined"!=typeof dcl?dcl.log.apply(dcl,p([],l(_t))):console.log.apply(console,p(["DEBUG:"],l(_t)))}function y(_t,Ft){"undefined"!=typeof dcl?dcl.error(_t,Ft):console.error("ERROR:",_t,Ft)}function f(_t){if(Lt++,0===_t.length)throw new Error("newId(type: string): type cannot be empty");return _t+Lt.toString(36)}function m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(_t){var Ft=16*Math.random()|0;return("x"===_t?Ft:3&Ft|8).toString(16)}))}var Yt=[];function _(_t){if(!("__event_name__"in _t)||"string"!=typeof _t.__event_name__)throw new Error("The EventConstructor is not registered");return _t.__event_name__}var Kt=function(){function t(){this.listeners={}}return t.prototype.addListener=function(_t,Ft,Lt){if(!_t||"function"!=typeof _t)throw new Error("Invalid EventConstructor");var Yt=_(_t),Kt=this.listeners[Yt];Kt||(Kt=this.listeners[Yt]=[]);for(var Zt=0;Zt<Kt.length;Zt++)if(Kt[Zt].listener===Ft)throw new Error("The provided listener is already registered");return Kt.push({listener:Ft,fn:Lt}),this},t.prototype.removeListener=function(_t,Ft){if(!Ft||"function"!=typeof Ft)throw new Error("Invalid EventConstructor");var Lt=_(Ft),Yt=this.listeners[Lt];if(!Yt)return!1;for(var Kt=0;Kt<Yt.length;Kt++)if(Yt[Kt].listener===_t)return Yt.splice(Kt,1),!0;return!1},t.prototype.fireEvent=function(_t){var Ft=_(_t.constructor),Lt=this.listeners[Ft];if(Lt)for(var Yt=0;Yt<Lt.length;Yt++)try{var Kt=Lt[Yt];Kt.fn.call(Kt.listener,_t)}catch(_t){y(_t)}return this},t}();function x(){var _t=f("EV");if(-1!==Yt.indexOf(_t))throw new Error("The event name "+_t+" is already taken");return Yt.push(_t),function(Ft){return Ft.__event_name__=_t,Ft}}var Zt,le=r([x(),s("design:paramtypes",[Object,String,Object])],(function(_t,Ft,Lt){this.entity=_t,this.componentName=Ft,this.component=Lt})),ve=r([x(),s("design:paramtypes",[Object,String,Object])],(function(_t,Ft,Lt){this.entity=_t,this.componentName=Ft,this.classId=Lt})),Ce=r([x(),s("design:paramtypes",[Object,Object])],(function(_t,Ft){this.entity=_t,this.parent=Ft}));_t.UIValueType=void 0,(Zt=_t.UIValueType||(_t.UIValueType={}))[Zt.PERCENT=0]="PERCENT",Zt[Zt.PIXELS=1]="PIXELS";var Se=function(){function e(Ft){if(this.type=_t.UIValueType.PIXELS,"string"==typeof Ft){var Lt=Ft;Lt.indexOf("px")>-1?this.type=_t.UIValueType.PIXELS:Lt.indexOf("%")>-1&&(this.type=_t.UIValueType.PERCENT),this.value=parseFloat(Lt)}else this.value=Ft}return e.prototype.toString=function(){var Ft=this.value.toString();return this.type===_t.UIValueType.PERCENT?Ft+="%":Ft+="px",Ft},e}(),Ie="__name__symbol_",Ne="__classId__symbol_",Fe="__component__id_",Re=r([x(),s("design:paramtypes",[String,String,Number])],(function(_t,Ft,Lt){this.componentId=_t,this.componentName=Ft,this.classId=Lt})),Pe=r([x(),s("design:paramtypes",[String])],(function(_t){this.componentId=_t})),Le=r([x(),s("design:paramtypes",[String,Object])],(function(_t,Ft){this.componentId=_t,this.component=Ft}));function P(_t,Ft){return function(Lt){if(Lt.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+Lt.originalClassName+" with: "+_t);var Yt=Lt,o=function(){var Lt=Array.prototype.slice.call(arguments),Kt=new(Yt.bind.apply(Yt,p([void 0],l(Lt))));return Object.defineProperty(Kt,Ie,{enumerable:!1,writable:!1,configurable:!1,value:_t}),void 0!==Ft&&Object.defineProperty(Kt,Ne,{enumerable:!1,writable:!1,configurable:!1,value:Ft}),Kt};return void 0!==Ft&&(o.__classId__symbol_=Ft),o.__name__symbol_=_t,o.isComponent=!0,o.originalClassName=_t,(o.prototype=Lt.prototype).constructor=Lt,o}}function N(_t,Ft){return function(Lt){if(Lt.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+Lt.originalClassName+" with: "+_t);if("number"!=typeof Ft||isNaN(Ft))throw new Error("classId: "+Ft+" is an invalid integer");var Yt=Lt,o=function(){if(!N.engine)throw new Error("You need to set a DisposableComponent.engine before creating disposable components");var Lt=Array.prototype.slice.call(arguments),Kt=new(Yt.bind.apply(Yt,p([void 0],l(Lt)))),Zt=f("C");return Object.defineProperty(Kt,Ie,{enumerable:!1,writable:!1,configurable:!1,value:_t}),Object.defineProperty(Kt,Fe,{enumerable:!1,writable:!1,configurable:!1,value:Zt}),void 0!==Ft&&Object.defineProperty(Kt,Ne,{enumerable:!1,writable:!1,configurable:!1,value:Ft}),N.engine&&N.engine.registerComponent(Kt),Kt};return void 0!==Ft&&(o.__classId__symbol_=Ft),o.__name__symbol_=_t,o.isComponent=!0,o.isDisposableComponent=!0,o.originalClassName=_t,(o.prototype=Lt.prototype).constructor=Lt,o}}function F(_t){if(!_t)throw new TypeError(_t+" is not a component.");if(_t.__name__symbol_)return _t.__name__symbol_;throw new TypeError(_t+" is not a registered component.")}function L(_t){if(!_t)throw new TypeError(_t+" is not a component.");if(_t.__classId__symbol_)return _t.__classId__symbol_;if(!_t.__name__symbol_)throw new TypeError(_t+" is not a registered component.");return null}function D(_t){if(!_t)throw new TypeError(_t+" is not a component.");if(_t.__component__id_)return _t.__component__id_;throw new TypeError(_t+" is not a registered disposable component.")}!function(_t){_t.engine=null}(N||(N={}));var Ue=function(){function t(){this.dirty=!1,this.data={},this.subscriptions=[]}return t.component=function(_t,Ft){if(delete _t[Ft]){var Lt=Ft+"_"+Math.random();_t[Lt]=void 0,Object.defineProperty(_t,Lt,o(o({},Object.getOwnPropertyDescriptor(_t,Lt)),{enumerable:!1})),Object.defineProperty(_t,Ft.toString(),{get:function(){return this[Lt]},set:function(_t){var Yt=this[Lt];if(this.data[Ft]=_t?D(_t):null,this[Lt]=_t,_t!==Yt){this.dirty=!0;for(var Kt=0;Kt<this.subscriptions.length;Kt++)this.subscriptions[Kt](Ft,_t,Yt)}},enumerable:!0})}},t.field=function(_t,Ft){delete _t[Ft]&&Object.defineProperty(_t,Ft.toString(),{get:function(){return this.data[Ft]},set:function(_t){var Lt=this.data[Ft];if(this.data[Ft]=_t,_t!==Lt){this.dirty=!0;for(var Yt=0;Yt<this.subscriptions.length;Yt++)this.subscriptions[Yt](Ft,_t,Lt)}},enumerable:!0})},t.uiValue=function(_t,Ft){delete _t[Ft]&&Object.defineProperty(_t,Ft.toString(),{get:function(){return this.data[Ft].toString()},set:function(_t){var Lt=this.data[Ft],Yt=new Se(_t);if(this.data[Ft]=Yt,Yt!==Lt){this.dirty=!0;for(var Kt=0;Kt<this.subscriptions.length;Kt++)this.subscriptions[Kt](Ft,Yt,Lt)}},enumerable:!0})},t.readonly=function(_t,Ft){delete _t[Ft]&&Object.defineProperty(_t,Ft.toString(),{get:function(){if(Ft in this.data==0)throw new Error("The field "+Ft+" is uninitialized");return this.data[Ft]},set:function(_t){if(Ft in this.data)throw new Error("The field "+Ft+" is readonly");this.data[Ft]=_t,this.dirty=!0},enumerable:!0,configurable:!1})},t.prototype.onChange=function(_t){return this.subscriptions.push(_t),this},t.prototype.toJSON=function(){return this.data},t}();function U(_t){return Fe in _t}var He=function(){function t(){for(var _t=[],Ft=0;Ft<arguments.length;Ft++)_t[Ft]=arguments[Ft];if(this.entities=[],this.active=!1,this._requiresNames=[],!_t)throw new Error("ComponentGroup: Could not load the requires list");if(!(_t instanceof Array))throw new Error("ComponentGroup: requires list is not an Array");Object.defineProperty(this,"requires",{get:function(){return _t.slice()}}),Object.defineProperty(this,"requiresNames",{get:function(){return this._requiresNames.slice()}});for(var n=function(Ft){var Yt=_t[Ft],Kt=null;if(!Yt)throw new Error("ComponentGroup: the required component at location "+Ft+" is invalid");try{Kt=F(Yt)}catch(_t){throw new Error("ComponentGroup: the required component at location "+Ft+" is not registered as a @Component. Remember to provide the class of the component, not the name")}if(Lt._requiresNames.some((function(_t){return _t===Kt})))throw new Error("ComponentGroup: the required component list has a repeated name "+Kt);Lt._requiresNames.push(Kt)},Lt=this,Yt=0;Yt<_t.length;Yt++)n(Yt)}return t.prototype.hasEntity=function(_t){return!!_t.isAddedToEngine()&&-1!==this.entities.indexOf(_t)},t.prototype.addEntity=function(_t){if(!_t.isAddedToEngine())throw new TypeError("ComponentGroup: Cannot add a entity that is not added to the engine");-1===this.entities.indexOf(_t)&&this.entities.push(_t)},t.prototype.removeEntity=function(_t){var Ft=this.entities.indexOf(_t);-1!==Ft&&this.entities.splice(Ft,1)},t.prototype.componentRemoved=function(_t,Ft){-1!==this._requiresNames.indexOf(Ft)&&this.removeEntity(_t)},t.prototype.meetsRequirements=function(_t){for(var Ft=0;Ft<this._requiresNames.length;Ft++)if(!(this._requiresNames[Ft]in _t.components))return!1;return!0},t}(),qe=function(){function t(_t){this.name=_t,this.children={},this.eventManager=null,this.alive=!1,this.uuid=f("E"),this.components={},this.engine=null,this._parent=null}return t.prototype.addComponentOrReplace=function(_t){if("function"==typeof _t)throw new Error("You passed a function or class as a component, an instance of component is expected");if("object"!=typeof _t)throw new Error("You passed a "+typeof _t+", an instance of component is expected");var Ft=F(_t);if(this.components[Ft]){if(this.components[Ft]===_t)return _t;this.removeComponent(this.components[Ft],!1)}return this.addComponent(_t)},t.prototype.hasComponent=function(_t){var Ft=typeof _t;if("string"!==Ft&&"object"!==Ft&&"function"!==Ft)throw new Error("Entity#has(component): component is not a class, name or instance");if(null===_t)return!1;var Lt="string"===Ft?_t:F(_t),Yt=this.components[Lt];return!!Yt&&("object"===Ft?Yt===_t:"function"!==Ft||Yt instanceof _t)},t.prototype.getComponent=function(_t){var Ft=typeof _t;if("string"!==Ft&&"function"!==Ft)throw new Error("Entity#get(component): component is not a class or name");var Lt="string"===Ft?_t:F(_t),Yt=this.components[Lt];if(!Yt)throw new Error('Can not get component "'+Lt+'" from entity "'+this.identifier+'"');if("function"===Ft){if(Yt instanceof _t)return Yt;throw new Error('Can not get component "'+Lt+'" from entity "'+this.identifier+'" (by instance)')}return Yt},t.prototype.getComponentOrNull=function(_t){var Ft=typeof _t;if("string"!==Ft&&"function"!==Ft)throw new Error("Entity#getOrNull(component): component is not a class or name");var Lt="string"===Ft?_t:F(_t),Yt=this.components[Lt];return Yt?"function"===Ft?Yt instanceof _t?Yt:null:Yt:null},t.prototype.getComponentOrCreate=function(_t){if("function"!=typeof _t)throw new Error("Entity#getOrCreate(component): component is not a class");var Ft=this.getComponentOrNull(_t);return Ft||(F(Ft=new _t),this.addComponentOrReplace(Ft)),Ft},t.prototype.addComponent=function(_t){if("object"!=typeof _t)throw new Error("Entity#add(component): You passed a function or class as a component, an instance of component is expected");var Ft=F(_t),Lt=L(_t);if(this.components[Ft])throw new Error('A component of type "'+Ft+'" is already present in entity "'+this.identifier+'"');this.components[Ft]=_t,this.eventManager&&this.eventManager.fireEvent(new ve(this,Ft,Lt));var Yt=_t;return"function"==typeof Yt.addedToEntity&&Yt.addedToEntity(this),_t},t.prototype.removeComponent=function(_t,Ft){void 0===Ft&&(Ft=!0);var Lt=typeof _t;if("string"!==Lt&&"function"!==Lt&&"object"!==Lt)throw new Error("Entity#remove(component): component is not a class, class or name");var Yt="string"===Lt?_t:F(_t),Kt=this.components[Yt];if(Kt){if("function"===Lt)return Kt instanceof _t?(delete this.components[Yt],void(Kt&&(Ft&&this.eventManager&&this.eventManager.fireEvent(new le(this,Yt,Kt)),"function"==typeof Kt.removedFromEntity&&Kt.removedFromEntity(this)))):void c('Entity Warning: Trying to remove wrong (by constructor) component "'+Yt+'" from entity "'+this.identifier+'"');delete this.components[Yt],Kt&&(Ft&&this.eventManager&&this.eventManager.fireEvent(new le(this,Yt,Kt)),"function"==typeof Kt.removedFromEntity&&Kt.removedFromEntity(this))}else c('Entity Warning: Trying to remove inexisting component "'+Yt+'" from entity "'+this.identifier+'"')},t.prototype.isAddedToEngine=function(){return!(!this.engine||!(this.uuid in this.engine.entities)&&this.engine.rootEntity!==this)},t.prototype.setParent=function(_t){var Ft;if(_t&&"getEntityRepresentation"in _t){if(!this.engine)throw new Error("In order to set an attachable as parent, you first need to add the entity to the engine.");Ft=_t.getEntityRepresentation(this.engine)}else Ft=!_t&&this.engine?this.engine.rootEntity:_t;var Lt=this.getParent();if(Ft===this)throw new Error('Failed to set parent for entity "'+this.identifier+"\": An entity can't set itself as a its own parent");if(Ft===Lt)return this;var Yt=this.getCircularAncestor(Ft);if(Yt)throw new Error('Failed to set parent for entity "'+this.identifier+'": Circular parent references are not allowed (See entity "'+Yt+'")');return Lt&&delete Lt.children[this.uuid],null!==Ft&&"0"!==Ft.uuid&&(!Ft.isAddedToEngine()&&this.isAddedToEngine()&&this.engine.removeEntity(this),Ft.isAddedToEngine()&&!this.isAddedToEngine()&&Ft.engine.addEntity(this)),this._parent=Ft||null,this.registerAsChild(),this.eventManager&&this.engine&&this.eventManager.fireEvent(new Ce(this,Ft)),this},t.prototype.getParent=function(){return this._parent},Object.defineProperty(t.prototype,"identifier",{get:function(){return this.name||this.uuid},enumerable:!1,configurable:!0}),t.prototype.getCircularAncestor=function(_t){for(var Ft=this.engine?this.engine.rootEntity:null,Lt=_t;Lt&&Lt!==Ft;){var Yt=Lt.getParent();if(Yt===this)return Lt.uuid;Lt=Yt}return null},t.prototype.registerAsChild=function(){var _t=this.getParent();this.uuid&&_t&&(_t.children[this.uuid]=this)},t}(),We=function(){function t(_t){this.eventManager=new Kt,this.systems=[],this.entityLists={},this.addedSystems=[],this._entities={},this._disposableComponents={},this._componentGroups={},this.simpleSystems=[],this.eventManager.addListener(ve,this,this.componentAddedHandler),this.eventManager.addListener(le,this,this.componentRemovedHandler),this.rootEntity=_t,this.firstPersonCameraEntity=new qe,this.firstPersonCameraEntity.uuid="FirstPersonCameraEntityReference",this.addEntity(this.firstPersonCameraEntity),this.avatarEntity=new qe,this.avatarEntity.uuid="AvatarEntityReference",this.addEntity(this.avatarEntity)}return Object.defineProperty(t.prototype,"entities",{get:function(){return this._entities},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disposableComponents",{get:function(){return this._disposableComponents},enumerable:!1,configurable:!0}),t.prototype.addEntity=function(_t){var Ft=_t.getParent();if(_t.isAddedToEngine())return _t;for(var Lt in _t.eventManager=this.eventManager,_t.engine=this,this._entities[_t.uuid]=_t,this.checkRequirementsAndAdd(_t),Ft?Ft.isAddedToEngine()||Ft===this.rootEntity||c("Engine: warning, added an entity with a parent not present in the engine. Parent id: "+Ft.uuid):_t.setParent(this.rootEntity),_t.alive=!0,_t.children){var Yt=_t.children[Lt];Yt&&(Yt.isAddedToEngine()||this.addEntity(Yt))}return _t},t.prototype.removeEntity=function(_t){var Ft=_t.uuid;if(_t.isAddedToEngine()){for(var Lt in _t.components){var Yt=this._componentGroups[Lt];if(Yt)for(var Kt in Yt)Yt[Kt].removeEntity(_t);delete this.entityLists[Lt][Ft]}for(var Zt=0;Zt<this.simpleSystems.length;Zt++){var le=this.simpleSystems[Zt];le.onRemoveEntity&&le.onRemoveEntity(_t)}for(var Zt in _t.children){var ve=_t.children[Zt];ve&&this.removeEntity(ve)}return _t.alive=!1,_t.eventManager=null,delete this._entities[Ft],!0}for(var Lt in c("Engine: Trying to remove non existent entity from engine."),_t.isAddedToEngine()?c("Engine: Entity id: "+Ft):c('Engine: Entity "'+_t.uuid+'" has not been added to any engine yet.'),c("Engine: Entity's components:"),_t.components)c(Lt);return!1},t.prototype.addSystem=function(_t,Ft){if(void 0===Ft&&(Ft=0),-1!==this.addedSystems.indexOf(_t))return c("Engine: Trying to add a system that is already added. Aborting"),_t;if(this.systems.length>0)for(var Lt=0;Lt<this.systems.length;Lt++){var Yt=this.systems[Lt],Kt=Lt===this.systems.length-1;if(Yt.priority>Ft){this.addedSystems.push(_t),this.systems.splice(Lt,0,{system:_t,priority:Ft});break}if(Kt){this.addedSystems.push(_t),this.systems.splice(Lt+1,0,{system:_t,priority:Ft});break}}else this.addedSystems.push(_t),this.systems.splice(1,0,{system:_t,priority:Ft});return this.registerSystem(_t),_t},t.prototype.removeSystem=function(_t){var Ft=this.addedSystems.indexOf(_t);if(-1!==Ft){_t.active=!1,_t.deactivate&&_t.deactivate(),this.addedSystems.splice(Ft,1);for(var Lt=0;Lt<this.systems.length;Lt++)this.systems[Lt].system===_t&&this.systems.splice(Lt,1);return!0}return!1},t.prototype.update=function(_t){for(var Ft in this.systems){var Lt=this.systems[Ft].system;if(Lt.active&&Lt.update)try{Lt.update(_t)}catch(_t){y(_t)}}return this},t.prototype.getEntitiesWithComponent=function(_t){var Ft="string"==typeof _t?_t:F(_t);return Ft in this.entityLists?this.entityLists[Ft]:this.entityLists[Ft]={}},t.prototype.registerComponent=function(_t){var Ft=D(_t),Lt=F(_t),Yt=L(_t);this._disposableComponents[Ft]=_t,null!==Yt&&(this.eventManager.fireEvent(new Re(Ft,Lt,Yt)),this.eventManager.fireEvent(new Le(Ft,_t)))},t.prototype.disposeComponent=function(_t){var Ft=D(_t);return delete this._disposableComponents[Ft]&&(this.eventManager.fireEvent(new Pe(Ft)),_t.onDispose&&_t.onDispose(),!0)},t.prototype.updateComponent=function(_t){this.eventManager.fireEvent(new Le(D(_t),_t))},t.prototype.getComponentGroup=function(){for(var _t=[],Ft=0;Ft<arguments.length;Ft++)_t[Ft]=arguments[Ft];var Lt=void 0;if(_t.length>0&&(Ce=this._componentGroups[F(_t[0])]))for(var Yt=_t.slice(),Kt=0;Kt<Ce.length;Kt++){var Zt=Ce[Kt];if(Yt.length===Zt.requires.length){for(var le=0;le<Yt.length&&-1!==Zt.requires.indexOf(Yt[le]);le++)le===Yt.length-1&&(Lt=Zt);if(Lt)break}}if(Lt)return Lt;(Lt=new(He.bind.apply(He,p([void 0],l(_t))))).active=!0;var ve=Lt.requiresNames;for(Kt=0;Kt<ve.length;Kt++){var Ce,Se=ve[Kt];(Ce=this._componentGroups[Se])||(this._componentGroups[Se]=Ce=[]),-1===Ce.indexOf(Lt)&&Ce.push(Lt)}for(var Ie in this._entities)this.checkRequirements(this._entities[Ie],Lt);return Lt},t.prototype.removeComponentGroup=function(_t){if(_t.active){_t.active=!1;for(var Ft=_t.requiresNames,Lt=0;Lt<Ft.length;Lt++){var Yt=Ft[Lt],Kt=this._componentGroups[Yt];if(Kt){var Zt=Kt.indexOf(_t);-1!==Zt&&Kt.splice(Zt,1)}}return!0}return!1},t.prototype.registerSystem=function(_t){_t.active=!0,_t.activate&&_t.activate(this),this.simpleSystems.push(_t)},t.prototype.checkRequirementsAndAdd=function(_t){if(_t.isAddedToEngine()){for(var Ft in _t.components){Ft in this.entityLists||(this.entityLists[Ft]={}),this.entityLists[Ft][_t.uuid]=_t;var Lt=this._componentGroups[Ft];if(Lt)for(var Yt in Lt)this.checkRequirements(_t,Lt[Yt])}for(var Kt=0;Kt<this.simpleSystems.length;Kt++){var Zt=this.simpleSystems[Kt];Zt.onAddEntity&&Zt.onAddEntity(_t)}}},t.prototype.checkRequirements=function(_t,Ft){Ft.meetsRequirements(_t)?Ft.hasEntity(_t)||Ft.addEntity(_t):Ft.hasEntity(_t)&&Ft.removeEntity(_t)},t.prototype.componentAddedHandler=function(_t){var Ft,Lt=_t.entity,Yt=_t.componentName;if(Lt.isAddedToEngine()){this.entityLists[Yt]?this.entityLists[Yt][Lt.uuid]=Lt:this.entityLists[Yt]=((Ft={})[Lt.uuid]=Lt,Ft);var Kt=this._componentGroups[Yt];if(Kt)for(var Zt in Kt)this.checkRequirements(Lt,Kt[Zt])}},t.prototype.componentRemovedHandler=function(_t){var Ft=_t.entity,Lt=_t.componentName;if(Ft.isAddedToEngine()){delete this.entityLists[Lt][Ft.uuid];var Yt=this._componentGroups[Lt];if(Yt)for(var Kt in Yt)this.checkRequirements(Ft,Yt[Kt])}},t}(),Ge=Promise.resolve().then.bind(Promise.resolve());function G(_t){var Ft=Ge(_t);return Ft.isComplete=!1,Ft.then((function(_t){Ft.isComplete=!0,Ft.result=_t,Ft.didFail=!1})).catch((function(_t){Ft.isComplete=!0,Ft.error=_t,Ft.didFail=!0,y("executeTask: FAILED "+_t.toString(),_t)})),Ft}var Ve,$e,Xe=function(){function t(_t,Ft,Lt,Yt){void 0===Ft&&(Ft=!1),this.initalize(_t,Ft,Lt,Yt)}return t.prototype.initalize=function(_t,Ft,Lt,Yt){return void 0===Ft&&(Ft=!1),this.mask=_t,this.skipNextObservers=Ft,this.target=Lt,this.currentTarget=Yt,this},t}(),Y=function(_t,Ft,Lt){void 0===Lt&&(Lt=null),this.callback=_t,this.mask=Ft,this.scope=Lt,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1},Ye=function(){function t(){this._observers=null,this._observables=null}return t.Watch=function(_t,Ft,Lt,Yt){var Kt,Zt;void 0===Lt&&(Lt=-1),void 0===Yt&&(Yt=null);var le=new t;le._observers=new Array,le._observables=_t;try{for(var ve=h(_t),Ce=ve.next();!Ce.done;Ce=ve.next()){var Se=Ce.value.add(Ft,Lt,!1,Yt);Se&&le._observers.push(Se)}}catch(_t){Kt={error:_t}}finally{try{Ce&&!Ce.done&&(Zt=ve.return)&&Zt.call(ve)}finally{if(Kt)throw Kt.error}}return le},t.prototype.dispose=function(){if(this._observers&&this._observables)for(var _t=0;_t<this._observers.length;_t++)this._observables[_t].remove(this._observers[_t]);this._observers=null,this._observables=null},t}(),Je=function(){function t(_t){this._observers=new Array,this._onObserverAdded=null,this._eventState=new Xe(0),_t&&(this._onObserverAdded=_t)}return t.prototype.add=function(_t,Ft,Lt,Yt,Kt){if(void 0===Ft&&(Ft=-1),void 0===Lt&&(Lt=!1),void 0===Yt&&(Yt=null),void 0===Kt&&(Kt=!1),!_t)return null;var Zt=new Y(_t,Ft,Yt);return Zt.unregisterOnNextCall=Kt,Lt?this._observers.unshift(Zt):this._observers.push(Zt),this._onObserverAdded&&this._onObserverAdded(Zt),Zt},t.prototype.addOnce=function(_t){return this.add(_t,void 0,void 0,void 0,!0)},t.prototype.remove=function(_t){return!!_t&&-1!==this._observers.indexOf(_t)&&(this._deferUnregister(_t),!0)},t.prototype.removeCallback=function(_t,Ft){for(var Lt=0;Lt<this._observers.length;Lt++)if(this._observers[Lt].callback===_t&&(!Ft||Ft===this._observers[Lt].scope))return this._deferUnregister(this._observers[Lt]),!0;return!1},t.prototype.notifyObservers=function(_t,Ft,Lt,Yt){var Kt,Zt;if(void 0===Ft&&(Ft=-1),!this._observers.length)return!0;var le=this._eventState;le.mask=Ft,le.target=Lt,le.currentTarget=Yt,le.skipNextObservers=!1,le.lastReturnValue=_t;try{for(var ve=h(this._observers),Ce=ve.next();!Ce.done;Ce=ve.next()){var Se=Ce.value;if(!Se._willBeUnregistered&&(Se.mask&Ft&&(Se.scope?le.lastReturnValue=Se.callback.apply(Se.scope,[_t,le]):le.lastReturnValue=Se.callback(_t,le),Se.unregisterOnNextCall&&this._deferUnregister(Se)),le.skipNextObservers))return!1}}catch(_t){Kt={error:_t}}finally{try{Ce&&!Ce.done&&(Zt=ve.return)&&Zt.call(ve)}finally{if(Kt)throw Kt.error}}return!0},t.prototype.notifyObserversWithPromise=function(_t,Ft,Lt,Yt){var Kt=this;void 0===Ft&&(Ft=-1);var Zt=Promise.resolve(_t);if(!this._observers.length)return Zt;var le=this._eventState;return le.mask=Ft,le.target=Lt,le.currentTarget=Yt,le.skipNextObservers=!1,this._observers.forEach((function(Lt){le.skipNextObservers||Lt._willBeUnregistered||Lt.mask&Ft&&(Zt=Lt.scope?Zt.then((function(Ft){return le.lastReturnValue=Ft,Lt.callback.apply(Lt.scope,[_t,le])})):Zt.then((function(Ft){return le.lastReturnValue=Ft,Lt.callback(_t,le)})),Lt.unregisterOnNextCall&&Kt._deferUnregister(Lt))})),Zt.then((function(){return _t}))},t.prototype.notifyObserver=function(_t,Ft,Lt){void 0===Lt&&(Lt=-1);var Yt=this._eventState;Yt.mask=Lt,Yt.skipNextObservers=!1,_t.callback(Ft,Yt)},t.prototype.hasObservers=function(){return this._observers.length>0},t.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},t.prototype.clone=function(){var _t=new t;return _t._observers=this._observers.slice(0),_t},t.prototype.hasSpecificMask=function(_t){var Ft,Lt;void 0===_t&&(_t=-1);try{for(var Yt=h(this._observers),Kt=Yt.next();!Kt.done;Kt=Yt.next()){var Zt=Kt.value;if(Zt.mask&_t||Zt.mask===_t)return!0}}catch(_t){Ft={error:_t}}finally{try{Kt&&!Kt.done&&(Lt=Yt.return)&&Lt.call(Yt)}finally{if(Ft)throw Ft.error}}return!1},t.prototype._deferUnregister=function(_t){var Ft=this;_t.unregisterOnNextCall=!1,_t._willBeUnregistered=!0,G((function(){return function(_t,Ft,Lt,Yt){return new(Lt||(Lt=Promise))((function(Ft,Kt){function s(_t){try{d(Yt.next(_t))}catch(_t){Kt(_t)}}function a(_t){try{d(Yt.throw(_t))}catch(_t){Kt(_t)}}function d(_t){var Yt;_t.done?Ft(_t.value):(Yt=_t.value,Yt instanceof Lt?Yt:new Lt((function(_t){_t(Yt)}))).then(s,a)}d((Yt=Yt.apply(_t,[])).next())}))}(Ft,0,void 0,(function(){return function(_t,Ft){var Lt,Yt,Kt,Zt,le={label:0,sent:function(){if(1&Kt[0])throw Kt[1];return Kt[1]},trys:[],ops:[]};return Zt={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(Zt[Symbol.iterator]=function(){return this}),Zt;function a(Zt){return function(ve){return function(Zt){if(Lt)throw new TypeError("Generator is already executing.");for(;le;)try{if(Lt=1,Yt&&(Kt=2&Zt[0]?Yt.return:Zt[0]?Yt.throw||((Kt=Yt.return)&&Kt.call(Yt),0):Yt.next)&&!(Kt=Kt.call(Yt,Zt[1])).done)return Kt;switch(Yt=0,Kt&&(Zt=[2&Zt[0],Kt.value]),Zt[0]){case 0:case 1:Kt=Zt;break;case 4:return le.label++,{value:Zt[1],done:!1};case 5:le.label++,Yt=Zt[1],Zt=[0];continue;case 7:Zt=le.ops.pop(),le.trys.pop();continue;default:if(!((Kt=(Kt=le.trys).length>0&&Kt[Kt.length-1])||6!==Zt[0]&&2!==Zt[0])){le=0;continue}if(3===Zt[0]&&(!Kt||Zt[1]>Kt[0]&&Zt[1]<Kt[3])){le.label=Zt[1];break}if(6===Zt[0]&&le.label<Kt[1]){le.label=Kt[1],Kt=Zt;break}if(Kt&&le.label<Kt[2]){le.label=Kt[2],le.ops.push(Zt);break}Kt[2]&&le.ops.pop(),le.trys.pop();continue}Zt=Ft.call(_t,le)}catch(_t){Zt=[6,_t],Yt=0}finally{Lt=Kt=0}if(5&Zt[0])throw Zt[1];return{value:Zt[0]?Zt[1]:void 0,done:!0}}([Zt,ve])}}}(this,(function(Ft){return[2,this._remove(_t)]}))}))}))},t.prototype._remove=function(_t){if(!_t)return!1;var Ft=this._observers.indexOf(_t);return-1!==Ft&&(this._observers.splice(Ft,1),!0)},t}(),Qe=r([x(),s("design:paramtypes",[String,Object])],(function(_t,Ft){this.uuid=_t,this.payload=Ft})),Ze=r([x(),s("design:paramtypes",[Object])],(function(_t){this.payload=_t})),tn=r([x(),s("design:paramtypes",[Object])],(function(_t){this.payload=_t}));function tt(_t){return function(){$e&&$e.subscribe(_t)}}var nn=new Je(tt("cameraModeChanged")),rn=new Je(tt("idleStateChanged")),on=new Je(tt("onEnterScene")),sn=on,an=new Je(tt("onLeaveScene")),cn=an,un=new Je(tt("sceneStart")),ln=new Je(tt("playerExpression")),dn=new Je(tt("onPointerLock")),hn=new Je(tt("videoEvent")),pn=new Je(tt("profileChanged")),fn=new Je(tt("playerConnected")),mn=new Je(tt("playerDisconnected")),yn=new Je(tt("onRealmChanged")),gn=new Je(tt("playerClicked"));function mt(_t){($e=_t)&&$e.onEvent((function(_t){switch(_t.type){case"onEnterScene":return void on.notifyObservers(_t.data);case"onLeaveScene":return void an.notifyObservers(_t.data);case"cameraModeChanged":return void nn.notifyObservers(_t.data);case"idleStateChanged":return void rn.notifyObservers(_t.data);case"sceneStart":return void un.notifyObservers(_t.data);case"playerExpression":return void ln.notifyObservers(_t.data);case"videoEvent":var Ft=_t.data,Lt=N.engine.disposableComponents[Ft.componentId];return Lt&&Lt.update(Ft),void hn.notifyObservers(Ft);case"profileChanged":return void pn.notifyObservers(_t.data);case"onPointerLock":return void dn.notifyObservers(_t.data);case"playerConnected":return void fn.notifyObservers(_t.data);case"playerDisconnected":return void mn.notifyObservers(_t.data);case"onRealmChanged":return void yn.notifyObservers(_t.data);case"playerClicked":return void gn.notifyObservers(_t.data)}}))}var bn=function(){function t(_t){this.dcl=_t,this.cachedComponents={}}return t.prototype.activate=function(_t){var Ft=this;this.engine=_t,_t.eventManager.addListener(ve,this,this.componentAdded),_t.eventManager.addListener(le,this,this.componentRemoved),_t.eventManager.addListener(Re,this,this.disposableComponentCreated),_t.eventManager.addListener(Pe,this,this.disposableComponentRemoved),_t.eventManager.addListener(Le,this,this.disposableComponentUpdated),_t.eventManager.addListener(Ce,this,this.parentChanged);var Lt=_t.rootEntity.uuid;this.dcl.addEntity(Lt),this.dcl.onUpdate((function(Lt){_t.update(Lt),Ft.presentEntities()})),this.dcl.onEvent((function(Ft){var Lt=Ft.data;switch(Ft.type){case"uuidEvent":_t.eventManager.fireEvent(new Qe(Lt.uuid,Lt.payload));break;case"raycastResponse":("HitFirst"===Lt.queryType||"HitAll"===Lt.queryType)&&_t.eventManager.fireEvent(new Ze(Lt));break;case"actionButtonEvent":_t.eventManager.fireEvent(new tn(Lt.payload))}}))},t.prototype.onAddEntity=function(_t){if(_t&&_t.isAddedToEngine()){var Ft=_t.uuid,Lt=_t.getParent();for(var Yt in this.dcl.addEntity(Ft),Lt&&this.dcl.setParent(Ft,Lt.uuid),this.cachedComponents[Ft]={},_t.components){var Kt=_t.components[Yt],Zt=L(Kt);if(null!==Zt)if(U(Kt))this.dcl.attachEntityComponent(_t.uuid,Yt,D(Kt));else{var le=JSON.stringify(Kt);this.dcl.updateEntityComponent(Ft,Yt,Zt,le),this.cachedComponents[Ft][Yt]=le}}}},t.prototype.onRemoveEntity=function(_t){if(_t.isAddedToEngine()){var Ft=_t.uuid;this.dcl.removeEntity(Ft),delete this.cachedComponents[Ft]}},t.prototype.presentEntities=function(){for(var _t in this.engine.entities){var Ft=this.engine.entities[_t];for(var Lt in Ft.components){var Yt=L(le=Ft.components[Lt]);if(null!==Yt&&!U(le)){var Kt=this.getJsonIfDirty(Ft.uuid,Lt,le);Kt&&(this.dcl.updateEntityComponent(Ft.uuid,Lt,Yt,Kt),this.clearDirty(Ft.uuid,Lt,le,Kt))}}}for(var Zt in this.engine.disposableComponents){var le;(le=this.engine.disposableComponents[Zt])instanceof Ue&&le.dirty&&(this.dcl.componentUpdated(Zt,JSON.stringify(le)),le.dirty=!1)}},t.prototype.componentAdded=function(_t){if(_t.entity.isAddedToEngine()){var Ft=_t.entity.components[_t.componentName];if(U(Ft))this.dcl.attachEntityComponent(_t.entity.uuid,_t.componentName,D(Ft));else if(null!==_t.classId){var Lt=JSON.stringify(Ft);this.dcl.updateEntityComponent(_t.entity.uuid,_t.componentName,_t.classId,Lt),this.cachedComponents[_t.entity.uuid][_t.componentName]=Lt}}},t.prototype.componentRemoved=function(_t){_t.entity.isAddedToEngine()&&(this.dcl.removeEntityComponent(_t.entity.uuid,_t.componentName),delete this.cachedComponents[_t.entity.uuid][_t.componentName])},t.prototype.disposableComponentCreated=function(_t){this.dcl.componentCreated(_t.componentId,_t.componentName,_t.classId)},t.prototype.disposableComponentRemoved=function(_t){this.dcl.componentDisposed(_t.componentId)},t.prototype.disposableComponentUpdated=function(_t){this.dcl.componentUpdated(_t.componentId,JSON.stringify(_t.component))},t.prototype.parentChanged=function(_t){this.dcl.setParent(_t.entity.uuid,_t.parent?_t.parent.uuid:"0")},t.prototype.getJsonIfDirty=function(_t,Ft,Lt){var Yt=JSON.stringify(Lt);return Yt!==this.cachedComponents[_t][Ft]&&Yt},t.prototype.clearDirty=function(_t,Ft,Lt,Yt){this.cachedComponents[_t][Ft]=Yt},t}(),vn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wn={},Tn={};!function(_t){var Ft,Lt;Object.defineProperty(_t,"__esModule",{value:!0}),_t.RAD2DEG=_t.DEG2RAD=_t.Epsilon=_t.ToLinearSpace=_t.ToGammaSpace=_t.Space=_t.Orientation=void 0,(Ft=_t.Orientation||(_t.Orientation={}))[Ft.CW=0]="CW",Ft[Ft.CCW=1]="CCW",(Lt=_t.Space||(_t.Space={}))[Lt.LOCAL=0]="LOCAL",Lt[Lt.WORLD=1]="WORLD",Lt[Lt.BONE=2]="BONE",_t.ToGammaSpace=1/2.2,_t.ToLinearSpace=2.2,_t.Epsilon=1e-6,_t.DEG2RAD=Math.PI/180,_t.RAD2DEG=360/(2*Math.PI)}(Tn);var xn={},An={};Object.defineProperty(An,"__esModule",{value:!0}),An.buildArray=void 0,An.buildArray=function(_t,Ft){const Lt=[];for(let Yt=0;Yt<_t;++Yt)Lt.push(Ft());return Lt};var Cn={},_n={},Sn={},En={},kn={};Object.defineProperty(kn,"__esModule",{value:!0}),kn.Scalar=void 0;class Et{static WithinEpsilon(_t,Ft,Lt=1401298e-51){const Yt=_t-Ft;return-Lt<=Yt&&Yt<=Lt}static ToHex(_t){const Ft=_t.toString(16);return _t<=15?("0"+Ft).toUpperCase():Ft.toUpperCase()}static Sign(_t){const Ft=+_t;return 0===Ft||isNaN(Ft)?Ft:Ft>0?1:-1}static Clamp(_t,Ft=0,Lt=1){return Math.min(Lt,Math.max(Ft,_t))}static Log2(_t){return Math.log(_t)*Math.LOG2E}static Repeat(_t,Ft){return _t-Math.floor(_t/Ft)*Ft}static Normalize(_t,Ft,Lt){return(_t-Ft)/(Lt-Ft)}static Denormalize(_t,Ft,Lt){return _t*(Lt-Ft)+Ft}static DeltaAngle(_t,Ft){let Lt=Et.Repeat(Ft-_t,360);return Lt>180&&(Lt-=360),Lt}static PingPong(_t,Ft){const Lt=Et.Repeat(_t,2*Ft);return Ft-Math.abs(Lt-Ft)}static SmoothStep(_t,Ft,Lt){let Yt=Et.Clamp(Lt);return Yt=-2*Yt*Yt*Yt+3*Yt*Yt,Ft*Yt+_t*(1-Yt)}static MoveTowards(_t,Ft,Lt){let Yt=0;return Yt=Math.abs(Ft-_t)<=Lt?Ft:_t+Et.Sign(Ft-_t)*Lt,Yt}static MoveTowardsAngle(_t,Ft,Lt){const Yt=Et.DeltaAngle(_t,Ft);let Kt=0;return Kt=-Lt<Yt&&Yt<Lt?Ft:Et.MoveTowards(_t,_t+Yt,Lt),Kt}static Lerp(_t,Ft,Lt){return _t+(Ft-_t)*Lt}static LerpAngle(_t,Ft,Lt){let Yt=Et.Repeat(Ft-_t,360);return Yt>180&&(Yt-=360),_t+Yt*Et.Clamp(Lt)}static InverseLerp(_t,Ft,Lt){let Yt=0;return Yt=_t!==Ft?Et.Clamp((Lt-_t)/(Ft-_t)):0,Yt}static Hermite(_t,Ft,Lt,Yt,Kt){const Zt=Kt*Kt,le=Kt*Zt;return _t*(2*le-3*Zt+1)+Lt*(-2*le+3*Zt)+Ft*(le-2*Zt+Kt)+Yt*(le-Zt)}static RandomRange(_t,Ft){return _t===Ft?_t:Math.random()*(Ft-_t)+_t}static RangeToPercent(_t,Ft,Lt){return(_t-Ft)/(Lt-Ft)}static PercentToRange(_t,Ft,Lt){return(Lt-Ft)*_t+Ft}static NormalizeRadians(_t){return _t-Et.TwoPi*Math.floor((_t+Math.PI)/Et.TwoPi)}}kn.Scalar=Et,Et.TwoPi=2*Math.PI,Object.defineProperty(En,"__esModule",{value:!0}),En.Vector4=void 0;const In=Tn,Nn=kn,Bn=Cn;class Mt{constructor(_t,Ft,Lt,Yt){this.x=_t,this.y=Ft,this.z=Lt,this.w=Yt}static Add(_t,Ft){return new Mt(_t.x,_t.y,_t.z,_t.w).addInPlace(Ft)}static FromArray(_t,Ft=0){return new Mt(_t[Ft],_t[Ft+1],_t[Ft+2],_t[Ft+3])}static FromArrayToRef(_t,Ft,Lt){Lt.x=_t[Ft],Lt.y=_t[Ft+1],Lt.z=_t[Ft+2],Lt.w=_t[Ft+3]}static FromFloatArrayToRef(_t,Ft,Lt){Mt.FromArrayToRef(_t,Ft,Lt)}static FromFloatsToRef(_t,Ft,Lt,Yt,Kt){Kt.x=_t,Kt.y=Ft,Kt.z=Lt,Kt.w=Yt}static Zero(){return new Mt(0,0,0,0)}static One(){return new Mt(1,1,1,1)}static Normalize(_t){const Ft=Mt.Zero();return Mt.NormalizeToRef(_t,Ft),Ft}static NormalizeToRef(_t,Ft){Ft.copyFrom(_t),Ft.normalize()}static Minimize(_t,Ft){const Lt=new Mt(_t.x,_t.y,_t.z,_t.w);return Lt.minimizeInPlace(Ft),Lt}static Maximize(_t,Ft){const Lt=new Mt(_t.x,_t.y,_t.z,_t.w);return Lt.maximizeInPlace(Ft),Lt}static Distance(_t,Ft){return Math.sqrt(Mt.DistanceSquared(_t,Ft))}static DistanceSquared(_t,Ft){const Lt=_t.x-Ft.x,Yt=_t.y-Ft.y,Kt=_t.z-Ft.z,Zt=_t.w-Ft.w;return Lt*Lt+Yt*Yt+Kt*Kt+Zt*Zt}static Center(_t,Ft){const Lt=Mt.Add(_t,Ft);return Lt.scaleInPlace(.5),Lt}static TransformNormal(_t,Ft){const Lt=Mt.Zero();return Mt.TransformNormalToRef(_t,Ft,Lt),Lt}static TransformNormalToRef(_t,Ft,Lt){const Yt=Ft.m,Kt=_t.x*Yt[0]+_t.y*Yt[4]+_t.z*Yt[8],Zt=_t.x*Yt[1]+_t.y*Yt[5]+_t.z*Yt[9],le=_t.x*Yt[2]+_t.y*Yt[6]+_t.z*Yt[10];Lt.x=Kt,Lt.y=Zt,Lt.z=le,Lt.w=_t.w}static TransformNormalFromFloatsToRef(_t,Ft,Lt,Yt,Kt,Zt){const le=Kt.m;Zt.x=_t*le[0]+Ft*le[4]+Lt*le[8],Zt.y=_t*le[1]+Ft*le[5]+Lt*le[9],Zt.z=_t*le[2]+Ft*le[6]+Lt*le[10],Zt.w=Yt}toString(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"}getClassName(){return"Vector4"}getHashCode(){let _t=this.x||0;return _t=397*_t^(this.y||0),_t=397*_t^(this.z||0),_t=397*_t^(this.w||0),_t}asArray(){const _t=new Array;return this.toArray(_t,0),_t}toArray(_t,Ft=0){return _t[Ft]=this.x,_t[Ft+1]=this.y,_t[Ft+2]=this.z,_t[Ft+3]=this.w,this}addInPlace(_t){return this.x+=_t.x,this.y+=_t.y,this.z+=_t.z,this.w+=_t.w,this}add(_t){return new Mt(this.x+_t.x,this.y+_t.y,this.z+_t.z,this.w+_t.w)}addToRef(_t,Ft){return Ft.x=this.x+_t.x,Ft.y=this.y+_t.y,Ft.z=this.z+_t.z,Ft.w=this.w+_t.w,this}subtractInPlace(_t){return this.x-=_t.x,this.y-=_t.y,this.z-=_t.z,this.w-=_t.w,this}subtract(_t){return new Mt(this.x-_t.x,this.y-_t.y,this.z-_t.z,this.w-_t.w)}subtractToRef(_t,Ft){return Ft.x=this.x-_t.x,Ft.y=this.y-_t.y,Ft.z=this.z-_t.z,Ft.w=this.w-_t.w,this}subtractFromFloats(_t,Ft,Lt,Yt){return new Mt(this.x-_t,this.y-Ft,this.z-Lt,this.w-Yt)}subtractFromFloatsToRef(_t,Ft,Lt,Yt,Kt){return Kt.x=this.x-_t,Kt.y=this.y-Ft,Kt.z=this.z-Lt,Kt.w=this.w-Yt,this}negate(){return new Mt(-this.x,-this.y,-this.z,-this.w)}scaleInPlace(_t){return this.x*=_t,this.y*=_t,this.z*=_t,this.w*=_t,this}scale(_t){return new Mt(this.x*_t,this.y*_t,this.z*_t,this.w*_t)}scaleToRef(_t,Ft){return Ft.x=this.x*_t,Ft.y=this.y*_t,Ft.z=this.z*_t,Ft.w=this.w*_t,this}scaleAndAddToRef(_t,Ft){return Ft.x+=this.x*_t,Ft.y+=this.y*_t,Ft.z+=this.z*_t,Ft.w+=this.w*_t,this}equals(_t){return _t&&this.x===_t.x&&this.y===_t.y&&this.z===_t.z&&this.w===_t.w}equalsWithEpsilon(_t,Ft=In.Epsilon){return _t&&Nn.Scalar.WithinEpsilon(this.x,_t.x,Ft)&&Nn.Scalar.WithinEpsilon(this.y,_t.y,Ft)&&Nn.Scalar.WithinEpsilon(this.z,_t.z,Ft)&&Nn.Scalar.WithinEpsilon(this.w,_t.w,Ft)}equalsToFloats(_t,Ft,Lt,Yt){return this.x===_t&&this.y===Ft&&this.z===Lt&&this.w===Yt}multiplyInPlace(_t){return this.x*=_t.x,this.y*=_t.y,this.z*=_t.z,this.w*=_t.w,this}multiply(_t){return new Mt(this.x*_t.x,this.y*_t.y,this.z*_t.z,this.w*_t.w)}multiplyToRef(_t,Ft){return Ft.x=this.x*_t.x,Ft.y=this.y*_t.y,Ft.z=this.z*_t.z,Ft.w=this.w*_t.w,this}multiplyByFloats(_t,Ft,Lt,Yt){return new Mt(this.x*_t,this.y*Ft,this.z*Lt,this.w*Yt)}divide(_t){return new Mt(this.x/_t.x,this.y/_t.y,this.z/_t.z,this.w/_t.w)}divideToRef(_t,Ft){return Ft.x=this.x/_t.x,Ft.y=this.y/_t.y,Ft.z=this.z/_t.z,Ft.w=this.w/_t.w,this}divideInPlace(_t){return this.divideToRef(_t,this)}minimizeInPlace(_t){return _t.x<this.x&&(this.x=_t.x),_t.y<this.y&&(this.y=_t.y),_t.z<this.z&&(this.z=_t.z),_t.w<this.w&&(this.w=_t.w),this}maximizeInPlace(_t){return _t.x>this.x&&(this.x=_t.x),_t.y>this.y&&(this.y=_t.y),_t.z>this.z&&(this.z=_t.z),_t.w>this.w&&(this.w=_t.w),this}floor(){return new Mt(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}fract(){return new Mt(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}normalize(){const _t=this.length();return 0===_t?this:this.scaleInPlace(1/_t)}toVector3(){return new Bn.Vector3(this.x,this.y,this.z)}clone(){return new Mt(this.x,this.y,this.z,this.w)}copyFrom(_t){return this.x=_t.x,this.y=_t.y,this.z=_t.z,this.w=_t.w,this}copyFromFloats(_t,Ft,Lt,Yt){return this.x=_t,this.y=Ft,this.z=Lt,this.w=Yt,this}set(_t,Ft,Lt,Yt){return this.copyFromFloats(_t,Ft,Lt,Yt)}setAll(_t){return this.x=this.y=this.z=this.w=_t,this}}En.Vector4=Mt,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.Matrix=void 0;const Fn=Cn,On=_n,Rn=xn,Pn=En;class Dt{constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}get m(){return this._m}static get IdentityReadOnly(){return Dt._identityReadOnly}static FromArray(_t,Ft=0){const Lt=new Dt;return Dt.FromArrayToRef(_t,Ft,Lt),Lt}static FromArrayToRef(_t,Ft,Lt){for(let Yt=0;Yt<16;Yt++)Lt._m[Yt]=_t[Yt+Ft];Lt._markAsUpdated()}static FromFloatArrayToRefScaled(_t,Ft,Lt,Yt){for(let Kt=0;Kt<16;Kt++)Yt._m[Kt]=_t[Kt+Ft]*Lt;Yt._markAsUpdated()}static FromValuesToRef(_t,Ft,Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Ne,Fe,Re,Pe,Le,Ue){const He=Ue._m;He[0]=_t,He[1]=Ft,He[2]=Lt,He[3]=Yt,He[4]=Kt,He[5]=Zt,He[6]=le,He[7]=ve,He[8]=Ce,He[9]=Se,He[10]=Ie,He[11]=Ne,He[12]=Fe,He[13]=Re,He[14]=Pe,He[15]=Le,Ue._markAsUpdated()}static FromValues(_t,Ft,Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Ne,Fe,Re,Pe,Le){const Ue=new Dt,He=Ue._m;return He[0]=_t,He[1]=Ft,He[2]=Lt,He[3]=Yt,He[4]=Kt,He[5]=Zt,He[6]=le,He[7]=ve,He[8]=Ce,He[9]=Se,He[10]=Ie,He[11]=Ne,He[12]=Fe,He[13]=Re,He[14]=Pe,He[15]=Le,Ue._markAsUpdated(),Ue}static Compose(_t,Ft,Lt){const Yt=new Dt;return Dt.ComposeToRef(_t,Ft,Lt,Yt),Yt}static ComposeToRef(_t,Ft,Lt,Yt){Dt.ScalingToRef(_t.x,_t.y,_t.z,Rn.MathTmp.Matrix[1]),Ft.toRotationMatrix(Rn.MathTmp.Matrix[0]),Rn.MathTmp.Matrix[1].multiplyToRef(Rn.MathTmp.Matrix[0],Yt),Yt.setTranslation(Lt)}static Identity(){const _t=Dt.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return _t._updateIdentityStatus(!0),_t}static IdentityToRef(_t){Dt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,_t),_t._updateIdentityStatus(!0)}static Zero(){const _t=Dt.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return _t._updateIdentityStatus(!1),_t}static RotationX(_t){const Ft=new Dt;return Dt.RotationXToRef(_t,Ft),Ft}static Invert(_t){const Ft=new Dt;return _t.invertToRef(Ft),Ft}static RotationXToRef(_t,Ft){const Lt=Math.sin(_t),Yt=Math.cos(_t);Dt.FromValuesToRef(1,0,0,0,0,Yt,Lt,0,0,-Lt,Yt,0,0,0,0,1,Ft),Ft._updateIdentityStatus(1===Yt&&0===Lt)}static RotationY(_t){const Ft=new Dt;return Dt.RotationYToRef(_t,Ft),Ft}static RotationYToRef(_t,Ft){const Lt=Math.sin(_t),Yt=Math.cos(_t);Dt.FromValuesToRef(Yt,0,-Lt,0,0,1,0,0,Lt,0,Yt,0,0,0,0,1,Ft),Ft._updateIdentityStatus(1===Yt&&0===Lt)}static RotationZ(_t){const Ft=new Dt;return Dt.RotationZToRef(_t,Ft),Ft}static RotationZToRef(_t,Ft){const Lt=Math.sin(_t),Yt=Math.cos(_t);Dt.FromValuesToRef(Yt,Lt,0,0,-Lt,Yt,0,0,0,0,1,0,0,0,0,1,Ft),Ft._updateIdentityStatus(1===Yt&&0===Lt)}static RotationAxis(_t,Ft){const Lt=new Dt;return Dt.RotationAxisToRef(_t,Ft,Lt),Lt}static RotationAxisToRef(_t,Ft,Lt){const Yt=Math.sin(-Ft),Kt=Math.cos(-Ft),Zt=1-Kt;_t.normalize();const le=Lt._m;le[0]=_t.x*_t.x*Zt+Kt,le[1]=_t.x*_t.y*Zt-_t.z*Yt,le[2]=_t.x*_t.z*Zt+_t.y*Yt,le[3]=0,le[4]=_t.y*_t.x*Zt+_t.z*Yt,le[5]=_t.y*_t.y*Zt+Kt,le[6]=_t.y*_t.z*Zt-_t.x*Yt,le[7]=0,le[8]=_t.z*_t.x*Zt-_t.y*Yt,le[9]=_t.z*_t.y*Zt+_t.x*Yt,le[10]=_t.z*_t.z*Zt+Kt,le[11]=0,le[12]=0,le[13]=0,le[14]=0,le[15]=1,Lt._markAsUpdated()}static RotationYawPitchRoll(_t,Ft,Lt){const Yt=new Dt;return Dt.RotationYawPitchRollToRef(_t,Ft,Lt,Yt),Yt}static RotationYawPitchRollToRef(_t,Ft,Lt,Yt){On.Quaternion.RotationYawPitchRollToRef(_t,Ft,Lt,Rn.MathTmp.Quaternion[0]),Rn.MathTmp.Quaternion[0].toRotationMatrix(Yt)}static Scaling(_t,Ft,Lt){const Yt=new Dt;return Dt.ScalingToRef(_t,Ft,Lt,Yt),Yt}static ScalingToRef(_t,Ft,Lt,Yt){Dt.FromValuesToRef(_t,0,0,0,0,Ft,0,0,0,0,Lt,0,0,0,0,1,Yt),Yt._updateIdentityStatus(1===_t&&1===Ft&&1===Lt)}static Translation(_t,Ft,Lt){const Yt=new Dt;return Dt.TranslationToRef(_t,Ft,Lt,Yt),Yt}static TranslationToRef(_t,Ft,Lt,Yt){Dt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,_t,Ft,Lt,1,Yt),Yt._updateIdentityStatus(0===_t&&0===Ft&&0===Lt)}static Lerp(_t,Ft,Lt){const Yt=new Dt;return Dt.LerpToRef(_t,Ft,Lt,Yt),Yt}static LerpToRef(_t,Ft,Lt,Yt){for(let Kt=0;Kt<16;Kt++)Yt._m[Kt]=_t._m[Kt]*(1-Lt)+Ft._m[Kt]*Lt;Yt._markAsUpdated()}static DecomposeLerp(_t,Ft,Lt){const Yt=new Dt;return Dt.DecomposeLerpToRef(_t,Ft,Lt,Yt),Yt}static DecomposeLerpToRef(_t,Ft,Lt,Yt){const Kt=Rn.MathTmp.Vector3[0],Zt=Rn.MathTmp.Quaternion[0],le=Rn.MathTmp.Vector3[1];_t.decompose(Kt,Zt,le);const ve=Rn.MathTmp.Vector3[2],Ce=Rn.MathTmp.Quaternion[1],Se=Rn.MathTmp.Vector3[3];Ft.decompose(ve,Ce,Se);const Ie=Rn.MathTmp.Vector3[4];Fn.Vector3.LerpToRef(Kt,ve,Lt,Ie);const Ne=Rn.MathTmp.Quaternion[2];On.Quaternion.SlerpToRef(Zt,Ce,Lt,Ne);const Fe=Rn.MathTmp.Vector3[5];Fn.Vector3.LerpToRef(le,Se,Lt,Fe),Dt.ComposeToRef(Ie,Ne,Fe,Yt)}static LookAtLH(_t,Ft,Lt){const Yt=new Dt;return Dt.LookAtLHToRef(_t,Ft,Lt,Yt),Yt}static LookAtLHToRef(_t,Ft,Lt,Yt){const Kt=Rn.MathTmp.Vector3[0],Zt=Rn.MathTmp.Vector3[1],le=Rn.MathTmp.Vector3[2];Ft.subtractToRef(_t,le),le.normalize(),Fn.Vector3.CrossToRef(Lt,le,Kt);const ve=Kt.lengthSquared();0===ve?Kt.x=1:Kt.normalizeFromLength(Math.sqrt(ve)),Fn.Vector3.CrossToRef(le,Kt,Zt),Zt.normalize();const Ce=-Fn.Vector3.Dot(Kt,_t),Se=-Fn.Vector3.Dot(Zt,_t),Ie=-Fn.Vector3.Dot(le,_t);Dt.FromValuesToRef(Kt.x,Zt.x,le.x,0,Kt.y,Zt.y,le.y,0,Kt.z,Zt.z,le.z,0,Ce,Se,Ie,1,Yt)}static LookAtRH(_t,Ft,Lt){const Yt=new Dt;return Dt.LookAtRHToRef(_t,Ft,Lt,Yt),Yt}static LookAtRHToRef(_t,Ft,Lt,Yt){const Kt=Rn.MathTmp.Vector3[0],Zt=Rn.MathTmp.Vector3[1],le=Rn.MathTmp.Vector3[2];_t.subtractToRef(Ft,le),le.normalize(),Fn.Vector3.CrossToRef(Lt,le,Kt);const ve=Kt.lengthSquared();0===ve?Kt.x=1:Kt.normalizeFromLength(Math.sqrt(ve)),Fn.Vector3.CrossToRef(le,Kt,Zt),Zt.normalize();const Ce=-Fn.Vector3.Dot(Kt,_t),Se=-Fn.Vector3.Dot(Zt,_t),Ie=-Fn.Vector3.Dot(le,_t);Dt.FromValuesToRef(Kt.x,Zt.x,le.x,0,Kt.y,Zt.y,le.y,0,Kt.z,Zt.z,le.z,0,Ce,Se,Ie,1,Yt)}static OrthoLH(_t,Ft,Lt,Yt){const Kt=new Dt;return Dt.OrthoLHToRef(_t,Ft,Lt,Yt,Kt),Kt}static OrthoLHToRef(_t,Ft,Lt,Yt,Kt){const Zt=2/_t,le=2/Ft,ve=2/(Yt-Lt),Ce=-(Yt+Lt)/(Yt-Lt);Dt.FromValuesToRef(Zt,0,0,0,0,le,0,0,0,0,ve,0,0,0,Ce,1,Kt),Kt._updateIdentityStatus(1===Zt&&1===le&&1===ve&&0===Ce)}static OrthoOffCenterLH(_t,Ft,Lt,Yt,Kt,Zt){const le=new Dt;return Dt.OrthoOffCenterLHToRef(_t,Ft,Lt,Yt,Kt,Zt,le),le}static OrthoOffCenterLHToRef(_t,Ft,Lt,Yt,Kt,Zt,le){const ve=2/(Ft-_t),Ce=2/(Yt-Lt),Se=2/(Zt-Kt),Ie=-(Zt+Kt)/(Zt-Kt),Ne=(_t+Ft)/(_t-Ft),Fe=(Yt+Lt)/(Lt-Yt);Dt.FromValuesToRef(ve,0,0,0,0,Ce,0,0,0,0,Se,0,Ne,Fe,Ie,1,le),le._markAsUpdated()}static OrthoOffCenterRH(_t,Ft,Lt,Yt,Kt,Zt){const le=new Dt;return Dt.OrthoOffCenterRHToRef(_t,Ft,Lt,Yt,Kt,Zt,le),le}static OrthoOffCenterRHToRef(_t,Ft,Lt,Yt,Kt,Zt,le){Dt.OrthoOffCenterLHToRef(_t,Ft,Lt,Yt,Kt,Zt,le),le._m[10]*=-1}static PerspectiveLH(_t,Ft,Lt,Yt){const Kt=new Dt,Zt=2*Lt/_t,le=2*Lt/Ft,ve=(Yt+Lt)/(Yt-Lt),Ce=-2*Yt*Lt/(Yt-Lt);return Dt.FromValuesToRef(Zt,0,0,0,0,le,0,0,0,0,ve,1,0,0,Ce,0,Kt),Kt._updateIdentityStatus(!1),Kt}static PerspectiveFovLH(_t,Ft,Lt,Yt){const Kt=new Dt;return Dt.PerspectiveFovLHToRef(_t,Ft,Lt,Yt,Kt),Kt}static PerspectiveFovLHToRef(_t,Ft,Lt,Yt,Kt,Zt=!0){const le=Lt,ve=Yt,Ce=1/Math.tan(.5*_t),Se=Zt?Ce/Ft:Ce,Ie=Zt?Ce:Ce*Ft,Ne=(ve+le)/(ve-le),Fe=-2*ve*le/(ve-le);Dt.FromValuesToRef(Se,0,0,0,0,Ie,0,0,0,0,Ne,1,0,0,Fe,0,Kt),Kt._updateIdentityStatus(!1)}static PerspectiveFovRH(_t,Ft,Lt,Yt){const Kt=new Dt;return Dt.PerspectiveFovRHToRef(_t,Ft,Lt,Yt,Kt),Kt}static PerspectiveFovRHToRef(_t,Ft,Lt,Yt,Kt,Zt=!0){const le=Lt,ve=Yt,Ce=1/Math.tan(.5*_t),Se=Zt?Ce/Ft:Ce,Ie=Zt?Ce:Ce*Ft,Ne=-(ve+le)/(ve-le),Fe=-2*ve*le/(ve-le);Dt.FromValuesToRef(Se,0,0,0,0,Ie,0,0,0,0,Ne,-1,0,0,Fe,0,Kt),Kt._updateIdentityStatus(!1)}static PerspectiveFovWebVRToRef(_t,Ft,Lt,Yt,Kt=!1){const Zt=Kt?-1:1,le=Math.tan(_t.upDegrees*Math.PI/180),ve=Math.tan(_t.downDegrees*Math.PI/180),Ce=Math.tan(_t.leftDegrees*Math.PI/180),Se=Math.tan(_t.rightDegrees*Math.PI/180),Ie=2/(Ce+Se),Ne=2/(le+ve),Fe=Yt._m;Fe[0]=Ie,Fe[1]=Fe[2]=Fe[3]=Fe[4]=0,Fe[5]=Ne,Fe[6]=Fe[7]=0,Fe[8]=(Ce-Se)*Ie*.5,Fe[9]=-(le-ve)*Ne*.5,Fe[10]=-Lt/(Ft-Lt),Fe[11]=1*Zt,Fe[12]=Fe[13]=Fe[15]=0,Fe[14]=-2*Lt*Ft/(Lt-Ft),Yt._markAsUpdated()}static GetAsMatrix2x2(_t){return[_t._m[0],_t._m[1],_t._m[4],_t._m[5]]}static GetAsMatrix3x3(_t){return[_t._m[0],_t._m[1],_t._m[2],_t._m[4],_t._m[5],_t._m[6],_t._m[8],_t._m[9],_t._m[10]]}static Transpose(_t){const Ft=new Dt;return Dt.TransposeToRef(_t,Ft),Ft}static TransposeToRef(_t,Ft){const Lt=Ft._m,Yt=_t._m;Lt[0]=Yt[0],Lt[1]=Yt[4],Lt[2]=Yt[8],Lt[3]=Yt[12],Lt[4]=Yt[1],Lt[5]=Yt[5],Lt[6]=Yt[9],Lt[7]=Yt[13],Lt[8]=Yt[2],Lt[9]=Yt[6],Lt[10]=Yt[10],Lt[11]=Yt[14],Lt[12]=Yt[3],Lt[13]=Yt[7],Lt[14]=Yt[11],Lt[15]=Yt[15],Ft._updateIdentityStatus(_t._isIdentity,_t._isIdentityDirty)}static Reflection(_t){const Ft=new Dt;return Dt.ReflectionToRef(_t,Ft),Ft}static ReflectionToRef(_t,Ft){_t.normalize();const Lt=_t.normal.x,Yt=_t.normal.y,Kt=_t.normal.z,Zt=-2*Lt,le=-2*Yt,ve=-2*Kt;Dt.FromValuesToRef(Zt*Lt+1,le*Lt,ve*Lt,0,Zt*Yt,le*Yt+1,ve*Yt,0,Zt*Kt,le*Kt,ve*Kt+1,0,Zt*_t.d,le*_t.d,ve*_t.d,1,Ft)}static FromXYZAxesToRef(_t,Ft,Lt,Yt){Dt.FromValuesToRef(_t.x,_t.y,_t.z,0,Ft.x,Ft.y,Ft.z,0,Lt.x,Lt.y,Lt.z,0,0,0,0,1,Yt)}static FromQuaternionToRef(_t,Ft){const Lt=_t.x*_t.x,Yt=_t.y*_t.y,Kt=_t.z*_t.z,Zt=_t.x*_t.y,le=_t.z*_t.w,ve=_t.z*_t.x,Ce=_t.y*_t.w,Se=_t.y*_t.z,Ie=_t.x*_t.w;Ft._m[0]=1-2*(Yt+Kt),Ft._m[1]=2*(Zt+le),Ft._m[2]=2*(ve-Ce),Ft._m[3]=0,Ft._m[4]=2*(Zt-le),Ft._m[5]=1-2*(Kt+Lt),Ft._m[6]=2*(Se+Ie),Ft._m[7]=0,Ft._m[8]=2*(ve+Ce),Ft._m[9]=2*(Se-Ie),Ft._m[10]=1-2*(Yt+Lt),Ft._m[11]=0,Ft._m[12]=0,Ft._m[13]=0,Ft._m[14]=0,Ft._m[15]=1,Ft._markAsUpdated()}_markAsUpdated(){this.updateFlag=Dt._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;const _t=this._m;this._isIdentity=1===_t[0]&&0===_t[1]&&0===_t[2]&&0===_t[3]&&0===_t[4]&&1===_t[5]&&0===_t[6]&&0===_t[7]&&0===_t[8]&&0===_t[9]&&1===_t[10]&&0===_t[11]&&0===_t[12]&&0===_t[13]&&0===_t[14]&&1===_t[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;const _t=this._m,Ft=_t[0],Lt=_t[1],Yt=_t[2],Kt=_t[3],Zt=_t[4],le=_t[5],ve=_t[6],Ce=_t[7],Se=_t[8],Ie=_t[9],Ne=_t[10],Fe=_t[11],Re=_t[12],Pe=_t[13],Le=_t[14],Ue=_t[15],He=Ne*Ue-Le*Fe,qe=Ie*Ue-Pe*Fe,We=Ie*Le-Pe*Ne,Ge=Se*Ue-Re*Fe,Ve=Se*Le-Ne*Re,$e=Se*Pe-Re*Ie;return Ft*+(le*He-ve*qe+Ce*We)+Lt*-(Zt*He-ve*Ge+Ce*Ve)+Yt*+(Zt*qe-le*Ge+Ce*$e)+Kt*-(Zt*We-le*Ve+ve*$e)}toArray(){return this._m}asArray(){return this._m}invert(){return this.invertToRef(this),this}reset(){return Dt.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(_t){const Ft=new Dt;return this.addToRef(_t,Ft),Ft}addToRef(_t,Ft){for(let Lt=0;Lt<16;Lt++)Ft._m[Lt]=this._m[Lt]+_t._m[Lt];return Ft._markAsUpdated(),this}addToSelf(_t){for(let Ft=0;Ft<16;Ft++)this._m[Ft]+=_t._m[Ft];return this._markAsUpdated(),this}invertToRef(_t){if(!0===this._isIdentity)return Dt.IdentityToRef(_t),this;const Ft=this._m,Lt=Ft[0],Yt=Ft[1],Kt=Ft[2],Zt=Ft[3],le=Ft[4],ve=Ft[5],Ce=Ft[6],Se=Ft[7],Ie=Ft[8],Ne=Ft[9],Fe=Ft[10],Re=Ft[11],Pe=Ft[12],Le=Ft[13],Ue=Ft[14],He=Ft[15],qe=Fe*He-Ue*Re,We=Ne*He-Le*Re,Ge=Ne*Ue-Le*Fe,Ve=Ie*He-Pe*Re,$e=Ie*Ue-Fe*Pe,Xe=Ie*Le-Pe*Ne,Ye=+(ve*qe-Ce*We+Se*Ge),Je=-(le*qe-Ce*Ve+Se*$e),Qe=+(le*We-ve*Ve+Se*Xe),Ze=-(le*Ge-ve*$e+Ce*Xe),tn=Lt*Ye+Yt*Je+Kt*Qe+Zt*Ze;if(0===tn)return _t.copyFrom(this),this;const nn=1/tn,rn=Ce*He-Ue*Se,on=ve*He-Le*Se,sn=ve*Ue-Le*Ce,an=le*He-Pe*Se,cn=le*Ue-Pe*Ce,un=le*Le-Pe*ve,ln=Ce*Re-Fe*Se,dn=ve*Re-Ne*Se,hn=ve*Fe-Ne*Ce,pn=le*Re-Ie*Se,fn=le*Fe-Ie*Ce,mn=le*Ne-Ie*ve,yn=-(Yt*qe-Kt*We+Zt*Ge),gn=+(Lt*qe-Kt*Ve+Zt*$e),bn=-(Lt*We-Yt*Ve+Zt*Xe),vn=+(Lt*Ge-Yt*$e+Kt*Xe),wn=+(Yt*rn-Kt*on+Zt*sn),Tn=-(Lt*rn-Kt*an+Zt*cn),xn=+(Lt*on-Yt*an+Zt*un),An=-(Lt*sn-Yt*cn+Kt*un),Cn=-(Yt*ln-Kt*dn+Zt*hn),_n=+(Lt*ln-Kt*pn+Zt*fn),Sn=-(Lt*dn-Yt*pn+Zt*mn),En=+(Lt*hn-Yt*fn+Kt*mn);return Dt.FromValuesToRef(Ye*nn,yn*nn,wn*nn,Cn*nn,Je*nn,gn*nn,Tn*nn,_n*nn,Qe*nn,bn*nn,xn*nn,Sn*nn,Ze*nn,vn*nn,An*nn,En*nn,_t),this}addAtIndex(_t,Ft){return this._m[_t]+=Ft,this._markAsUpdated(),this}multiplyAtIndex(_t,Ft){return this._m[_t]*=Ft,this._markAsUpdated(),this}setTranslationFromFloats(_t,Ft,Lt){return this._m[12]=_t,this._m[13]=Ft,this._m[14]=Lt,this._markAsUpdated(),this}setTranslation(_t){return this.setTranslationFromFloats(_t.x,_t.y,_t.z)}getTranslation(){return new Fn.Vector3(this._m[12],this._m[13],this._m[14])}getTranslationToRef(_t){return _t.x=this._m[12],_t.y=this._m[13],_t.z=this._m[14],this}removeRotationAndScaling(){const _t=this.m;return Dt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,_t[12],_t[13],_t[14],_t[15],this),this._updateIdentityStatus(0===_t[12]&&0===_t[13]&&0===_t[14]&&1===_t[15]),this}multiply(_t){const Ft=new Dt;return this.multiplyToRef(_t,Ft),Ft}copyFrom(_t){_t.copyToArray(this._m);const Ft=_t;return this._updateIdentityStatus(Ft._isIdentity,Ft._isIdentityDirty,Ft._isIdentity3x2,Ft._isIdentity3x2Dirty),this}copyToArray(_t,Ft=0){for(let Lt=0;Lt<16;Lt++)_t[Ft+Lt]=this._m[Lt];return this}multiplyToRef(_t,Ft){return this._isIdentity?(Ft.copyFrom(_t),this):_t._isIdentity?(Ft.copyFrom(this),this):(this.multiplyToArray(_t,Ft._m,0),Ft._markAsUpdated(),this)}multiplyToArray(_t,Ft,Lt){const Yt=this._m,Kt=_t.m,Zt=Yt[0],le=Yt[1],ve=Yt[2],Ce=Yt[3],Se=Yt[4],Ie=Yt[5],Ne=Yt[6],Fe=Yt[7],Re=Yt[8],Pe=Yt[9],Le=Yt[10],Ue=Yt[11],He=Yt[12],qe=Yt[13],We=Yt[14],Ge=Yt[15],Ve=Kt[0],$e=Kt[1],Xe=Kt[2],Ye=Kt[3],Je=Kt[4],Qe=Kt[5],Ze=Kt[6],tn=Kt[7],nn=Kt[8],rn=Kt[9],on=Kt[10],sn=Kt[11],an=Kt[12],cn=Kt[13],un=Kt[14],ln=Kt[15];return Ft[Lt]=Zt*Ve+le*Je+ve*nn+Ce*an,Ft[Lt+1]=Zt*$e+le*Qe+ve*rn+Ce*cn,Ft[Lt+2]=Zt*Xe+le*Ze+ve*on+Ce*un,Ft[Lt+3]=Zt*Ye+le*tn+ve*sn+Ce*ln,Ft[Lt+4]=Se*Ve+Ie*Je+Ne*nn+Fe*an,Ft[Lt+5]=Se*$e+Ie*Qe+Ne*rn+Fe*cn,Ft[Lt+6]=Se*Xe+Ie*Ze+Ne*on+Fe*un,Ft[Lt+7]=Se*Ye+Ie*tn+Ne*sn+Fe*ln,Ft[Lt+8]=Re*Ve+Pe*Je+Le*nn+Ue*an,Ft[Lt+9]=Re*$e+Pe*Qe+Le*rn+Ue*cn,Ft[Lt+10]=Re*Xe+Pe*Ze+Le*on+Ue*un,Ft[Lt+11]=Re*Ye+Pe*tn+Le*sn+Ue*ln,Ft[Lt+12]=He*Ve+qe*Je+We*nn+Ge*an,Ft[Lt+13]=He*$e+qe*Qe+We*rn+Ge*cn,Ft[Lt+14]=He*Xe+qe*Ze+We*on+Ge*un,Ft[Lt+15]=He*Ye+qe*tn+We*sn+Ge*ln,this}equals(_t){const Ft=_t;if(!Ft)return!1;if((this._isIdentity||Ft._isIdentity)&&!this._isIdentityDirty&&!Ft._isIdentityDirty)return this._isIdentity&&Ft._isIdentity;const Lt=this.m,Yt=Ft.m;return Lt[0]===Yt[0]&&Lt[1]===Yt[1]&&Lt[2]===Yt[2]&&Lt[3]===Yt[3]&&Lt[4]===Yt[4]&&Lt[5]===Yt[5]&&Lt[6]===Yt[6]&&Lt[7]===Yt[7]&&Lt[8]===Yt[8]&&Lt[9]===Yt[9]&&Lt[10]===Yt[10]&&Lt[11]===Yt[11]&&Lt[12]===Yt[12]&&Lt[13]===Yt[13]&&Lt[14]===Yt[14]&&Lt[15]===Yt[15]}clone(){const _t=new Dt;return _t.copyFrom(this),_t}getClassName(){return"Matrix"}getHashCode(){let _t=this._m[0]||0;for(let Ft=1;Ft<16;Ft++)_t=397*_t^(this._m[Ft]||0);return _t}decompose(_t,Ft,Lt){if(this._isIdentity)return Lt&&Lt.setAll(0),_t&&_t.setAll(1),Ft&&Ft.copyFromFloats(0,0,0,1),!0;const Yt=this._m;Lt&&Lt.copyFromFloats(Yt[12],Yt[13],Yt[14]);const Kt=_t||Rn.MathTmp.Vector3[0];if(Kt.x=Math.sqrt(Yt[0]*Yt[0]+Yt[1]*Yt[1]+Yt[2]*Yt[2]),Kt.y=Math.sqrt(Yt[4]*Yt[4]+Yt[5]*Yt[5]+Yt[6]*Yt[6]),Kt.z=Math.sqrt(Yt[8]*Yt[8]+Yt[9]*Yt[9]+Yt[10]*Yt[10]),this.determinant()<=0&&(Kt.y*=-1),0===Kt.x||0===Kt.y||0===Kt.z)return Ft&&Ft.copyFromFloats(0,0,0,1),!1;if(Ft){const _t=1/Kt.x,Lt=1/Kt.y,Zt=1/Kt.z;Dt.FromValuesToRef(Yt[0]*_t,Yt[1]*_t,Yt[2]*_t,0,Yt[4]*Lt,Yt[5]*Lt,Yt[6]*Lt,0,Yt[8]*Zt,Yt[9]*Zt,Yt[10]*Zt,0,0,0,0,1,Rn.MathTmp.Matrix[0]),On.Quaternion.FromRotationMatrixToRef(Rn.MathTmp.Matrix[0],Ft)}return!0}getRow(_t){if(_t<0||_t>3)return null;const Ft=4*_t;return new Pn.Vector4(this._m[Ft+0],this._m[Ft+1],this._m[Ft+2],this._m[Ft+3])}setRow(_t,Ft){return this.setRowFromFloats(_t,Ft.x,Ft.y,Ft.z,Ft.w)}transpose(){return Dt.Transpose(this)}transposeToRef(_t){return Dt.TransposeToRef(this,_t),this}setRowFromFloats(_t,Ft,Lt,Yt,Kt){if(_t<0||_t>3)return this;const Zt=4*_t;return this._m[Zt+0]=Ft,this._m[Zt+1]=Lt,this._m[Zt+2]=Yt,this._m[Zt+3]=Kt,this._markAsUpdated(),this}scale(_t){const Ft=new Dt;return this.scaleToRef(_t,Ft),Ft}scaleToRef(_t,Ft){for(let Lt=0;Lt<16;Lt++)Ft._m[Lt]=this._m[Lt]*_t;return Ft._markAsUpdated(),this}scaleAndAddToRef(_t,Ft){for(let Lt=0;Lt<16;Lt++)Ft._m[Lt]+=this._m[Lt]*_t;return Ft._markAsUpdated(),this}toNormalMatrix(_t){const Ft=Rn.MathTmp.Matrix[0];this.invertToRef(Ft),Ft.transposeToRef(_t);const Lt=_t._m;Dt.FromValuesToRef(Lt[0],Lt[1],Lt[2],0,Lt[4],Lt[5],Lt[6],0,Lt[8],Lt[9],Lt[10],0,0,0,0,1,_t)}getRotationMatrix(){const _t=new Dt;return this.getRotationMatrixToRef(_t),_t}getRotationMatrixToRef(_t){const Ft=Rn.MathTmp.Vector3[0];if(!this.decompose(Ft))return Dt.IdentityToRef(_t),this;const Lt=this._m,Yt=1/Ft.x,Kt=1/Ft.y,Zt=1/Ft.z;return Dt.FromValuesToRef(Lt[0]*Yt,Lt[1]*Yt,Lt[2]*Yt,0,Lt[4]*Kt,Lt[5]*Kt,Lt[6]*Kt,0,Lt[8]*Zt,Lt[9]*Zt,Lt[10]*Zt,0,0,0,0,1,_t),this}toggleModelMatrixHandInPlace(){const _t=this._m;_t[2]*=-1,_t[6]*=-1,_t[8]*=-1,_t[9]*=-1,_t[14]*=-1,this._markAsUpdated()}toggleProjectionMatrixHandInPlace(){const _t=this._m;_t[8]*=-1,_t[9]*=-1,_t[10]*=-1,_t[11]*=-1,this._markAsUpdated()}_updateIdentityStatus(_t,Ft=!1,Lt=!1,Yt=!0){this.updateFlag=Dt._updateFlagSeed++,this._isIdentity=_t,this._isIdentity3x2=_t||Lt,this._isIdentityDirty=!this._isIdentity&&Ft,this._isIdentity3x2Dirty=!this._isIdentity3x2&&Yt}}Sn.Matrix=Dt,Dt._updateFlagSeed=0,Dt._identityReadOnly=Dt.Identity(),Object.defineProperty(_n,"__esModule",{value:!0}),_n.Quaternion=void 0;const Mn=Sn,Ln=Cn,zn=xn,Dn=Tn,Un=kn;class jt{constructor(_t=0,Ft=0,Lt=0,Yt=1){this.x=_t,this.y=Ft,this.z=Lt,this.w=Yt}static FromRotationMatrix(_t){const Ft=new jt;return jt.FromRotationMatrixToRef(_t,Ft),Ft}static FromRotationMatrixToRef(_t,Ft){const Lt=_t.m,Yt=Lt[0],Kt=Lt[4],Zt=Lt[8],le=Lt[1],ve=Lt[5],Ce=Lt[9],Se=Lt[2],Ie=Lt[6],Ne=Lt[10],Fe=Yt+ve+Ne;let Re;Fe>0?(Re=.5/Math.sqrt(Fe+1),Ft.w=.25/Re,Ft.x=(Ie-Ce)*Re,Ft.y=(Zt-Se)*Re,Ft.z=(le-Kt)*Re):Yt>ve&&Yt>Ne?(Re=2*Math.sqrt(1+Yt-ve-Ne),Ft.w=(Ie-Ce)/Re,Ft.x=.25*Re,Ft.y=(Kt+le)/Re,Ft.z=(Zt+Se)/Re):ve>Ne?(Re=2*Math.sqrt(1+ve-Yt-Ne),Ft.w=(Zt-Se)/Re,Ft.x=(Kt+le)/Re,Ft.y=.25*Re,Ft.z=(Ce+Ie)/Re):(Re=2*Math.sqrt(1+Ne-Yt-ve),Ft.w=(le-Kt)/Re,Ft.x=(Zt+Se)/Re,Ft.y=(Ce+Ie)/Re,Ft.z=.25*Re)}static Dot(_t,Ft){return _t.x*Ft.x+_t.y*Ft.y+_t.z*Ft.z+_t.w*Ft.w}static AreClose(_t,Ft){return jt.Dot(_t,Ft)>=0}static Zero(){return new jt(0,0,0,0)}static Inverse(_t){return new jt(-_t.x,-_t.y,-_t.z,_t.w)}static IsIdentity(_t){return _t&&0===_t.x&&0===_t.y&&0===_t.z&&1===_t.w}static RotationAxis(_t,Ft){const Lt=Ft*Dn.DEG2RAD;return jt.RotationAxisToRef(_t,Lt,new jt)}static RotationAxisToRef(_t,Ft,Lt){const Yt=Ft*Dn.DEG2RAD,Kt=Math.sin(Yt/2);return _t.normalize(),Lt.w=Math.cos(Yt/2),Lt.x=_t.x*Kt,Lt.y=_t.y*Kt,Lt.z=_t.z*Kt,Lt}static FromArray(_t,Ft=0){return new jt(_t[Ft],_t[Ft+1],_t[Ft+2],_t[Ft+3])}static FromEulerAnglesRef(_t,Ft,Lt,Yt){return jt.RotationYawPitchRollToRef(Ft*Dn.DEG2RAD,_t*Dn.DEG2RAD,Lt*Dn.DEG2RAD,Yt)}static RotationYawPitchRoll(_t,Ft,Lt){const Yt=new jt;return jt.RotationYawPitchRollToRef(_t,Ft,Lt,Yt),Yt}static RotationYawPitchRollToRef(_t,Ft,Lt,Yt){const Kt=.5*Ft,Zt=.5*_t,le=.5*Lt,ve=Math.cos(Kt),Ce=Math.cos(Zt),Se=Math.cos(le),Ie=Math.sin(Kt),Ne=Math.sin(Zt),Fe=Math.sin(le);Yt.x=Ce*Ie*Se+Ne*ve*Fe,Yt.y=Ne*ve*Se-Ce*Ie*Fe,Yt.z=Ce*ve*Fe-Ne*Ie*Se,Yt.w=Ce*ve*Se+Ne*Ie*Fe}static RotationAlphaBetaGamma(_t,Ft,Lt){const Yt=new jt;return jt.RotationAlphaBetaGammaToRef(_t,Ft,Lt,Yt),Yt}static RotationAlphaBetaGammaToRef(_t,Ft,Lt,Yt){const Kt=.5*(Lt+_t),Zt=.5*(Lt-_t),le=.5*Ft;Yt.x=Math.cos(Zt)*Math.sin(le),Yt.y=Math.sin(Zt)*Math.sin(le),Yt.z=Math.sin(Kt)*Math.cos(le),Yt.w=Math.cos(Kt)*Math.cos(le)}static RotationQuaternionFromAxis(_t,Ft,Lt){const Yt=new jt(0,0,0,0);return jt.RotationQuaternionFromAxisToRef(_t,Ft,Lt,Yt),Yt}static RotationQuaternionFromAxisToRef(_t,Ft,Lt,Yt){const Kt=zn.MathTmp.Matrix[0];Mn.Matrix.FromXYZAxesToRef(_t.normalize(),Ft.normalize(),Lt.normalize(),Kt),jt.FromRotationMatrixToRef(Kt,Yt)}static Slerp(_t,Ft,Lt){const Yt=jt.Identity;return jt.SlerpToRef(_t,Ft,Lt,Yt),Yt}static SlerpToRef(_t,Ft,Lt,Yt){let Kt,Zt,le=_t.x*Ft.x+_t.y*Ft.y+_t.z*Ft.z+_t.w*Ft.w,ve=!1;if(le<0&&(ve=!0,le=-le),le>.999999)Zt=1-Lt,Kt=ve?-Lt:Lt;else{const _t=Math.acos(le),Ft=1/Math.sin(_t);Zt=Math.sin((1-Lt)*_t)*Ft,Kt=ve?-Math.sin(Lt*_t)*Ft:Math.sin(Lt*_t)*Ft}Yt.x=Zt*_t.x+Kt*Ft.x,Yt.y=Zt*_t.y+Kt*Ft.y,Yt.z=Zt*_t.z+Kt*Ft.z,Yt.w=Zt*_t.w+Kt*Ft.w}static Hermite(_t,Ft,Lt,Yt,Kt){const Zt=Kt*Kt,le=Kt*Zt,ve=2*le-3*Zt+1,Ce=-2*le+3*Zt,Se=le-2*Zt+Kt,Ie=le-Zt,Ne=_t.x*ve+Lt.x*Ce+Ft.x*Se+Yt.x*Ie,Fe=_t.y*ve+Lt.y*Ce+Ft.y*Se+Yt.y*Ie,Re=_t.z*ve+Lt.z*Ce+Ft.z*Se+Yt.z*Ie,Pe=_t.w*ve+Lt.w*Ce+Ft.w*Se+Yt.w*Ie;return new jt(Ne,Fe,Re,Pe)}static get Identity(){return new jt(0,0,0,1)}static Angle(_t,Ft){const Lt=jt.Dot(_t,Ft);return 2*Math.acos(Math.min(Math.abs(Lt),1))*Dn.RAD2DEG}static Euler(_t,Ft,Lt){return jt.RotationYawPitchRoll(Ft*Dn.DEG2RAD,_t*Dn.DEG2RAD,Lt*Dn.DEG2RAD)}static LookRotation(_t,Ft=zn.MathTmp.staticUp){const Lt=Ln.Vector3.Normalize(_t),Yt=Ln.Vector3.Normalize(Ln.Vector3.Cross(Ft,Lt)),Kt=Ln.Vector3.Cross(Lt,Yt),Zt=Yt.x,le=Yt.y,ve=Yt.z,Ce=Kt.x,Se=Kt.y,Ie=Kt.z,Ne=Lt.x,Fe=Lt.y,Re=Lt.z,Pe=Zt+Se+Re,Le=new jt;if(Pe>0){let _t=Math.sqrt(Pe+1);return Le.w=.5*_t,_t=.5/_t,Le.x=(Ie-Fe)*_t,Le.y=(Ne-ve)*_t,Le.z=(le-Ce)*_t,Le}if(Zt>=Se&&Zt>=Re){const _t=Math.sqrt(1+Zt-Se-Re),Ft=.5/_t;return Le.x=.5*_t,Le.y=(le+Ce)*Ft,Le.z=(ve+Ne)*Ft,Le.w=(Ie-Fe)*Ft,Le}if(Se>Re){const _t=Math.sqrt(1+Se-Zt-Re),Ft=.5/_t;return Le.x=(Ce+le)*Ft,Le.y=.5*_t,Le.z=(Fe+Ie)*Ft,Le.w=(Ne-ve)*Ft,Le}const Ue=Math.sqrt(1+Re-Zt-Se),He=.5/Ue;return Le.x=(Ne+ve)*He,Le.y=(Fe+Ie)*He,Le.z=.5*Ue,Le.w=(le-Ce)*He,Le}static RotateTowards(_t,Ft,Lt){const Yt=jt.Angle(_t,Ft);if(0===Yt)return Ft;const Kt=Math.min(1,Lt/Yt);return jt.Slerp(_t,Ft,Kt)}static FromToRotation(_t,Ft,Lt=zn.MathTmp.staticUp){const Yt=_t.normalize(),Kt=Ft.normalize(),Zt=Ln.Vector3.Cross(Yt,Kt),le=Math.sqrt(Yt.lengthSquared()*Kt.lengthSquared())+Ln.Vector3.Dot(Yt,Kt);return Zt.lengthSquared()<1e-4?Math.abs(le)<1e-4?new jt(Lt.x,Lt.y,Lt.z,0).normalized:jt.Identity:new jt(Zt.x,Zt.y,Zt.z,le).normalized}get normalized(){return this.normalize()}setFromToRotation(_t,Ft,Lt=zn.MathTmp.staticUp){const Yt=jt.FromToRotation(_t,Ft,Lt);this.x=Yt.x,this.y=Yt.y,this.z=Yt.z,this.w=Yt.w}set eulerAngles(_t){this.setEuler(_t.x,_t.y,_t.z)}get eulerAngles(){const _t=new Ln.Vector3,Ft=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w,Lt=this.x*this.w-this.y*this.z;return Lt>.4995*Ft?(_t.x=Math.PI/2,_t.y=2*Math.atan2(this.y,this.x),_t.z=0):Lt<-.4995*Ft?(_t.x=-Math.PI/2,_t.y=-2*Math.atan2(this.y,this.x),_t.z=0):(_t.x=Math.asin(2*(this.w*this.x-this.y*this.z)),_t.y=Math.atan2(2*this.w*this.y+2*this.z*this.x,1-2*(this.x*this.x+this.y*this.y)),_t.z=Math.atan2(2*this.w*this.z+2*this.x*this.y,1-2*(this.z*this.z+this.x*this.x))),_t.x*=Dn.RAD2DEG,_t.y*=Dn.RAD2DEG,_t.z*=Dn.RAD2DEG,_t.x=Un.Scalar.Repeat(_t.x,360),_t.y=Un.Scalar.Repeat(_t.y,360),_t.z=Un.Scalar.Repeat(_t.z,360),_t}toString(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`}get length(){return Math.sqrt(this.lengthSquared)}get lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}getClassName(){return"Quaternion"}getHashCode(){let _t=this.x||0;return _t=397*_t^(this.y||0),_t=397*_t^(this.z||0),_t=397*_t^(this.w||0),_t}asArray(){return[this.x,this.y,this.z,this.w]}equals(_t){return _t&&this.x===_t.x&&this.y===_t.y&&this.z===_t.z&&this.w===_t.w}clone(){return new jt(this.x,this.y,this.z,this.w)}copyFrom(_t){return this.x=_t.x,this.y=_t.y,this.z=_t.z,this.w=_t.w,this}copyFromFloats(_t,Ft,Lt,Yt){return this.x=_t,this.y=Ft,this.z=Lt,this.w=Yt,this}set(_t,Ft,Lt,Yt){return this.copyFromFloats(_t,Ft,Lt,Yt)}setEuler(_t,Ft,Lt){return jt.RotationYawPitchRollToRef(Ft*Dn.DEG2RAD,_t*Dn.DEG2RAD,Lt*Dn.DEG2RAD,this),this}add(_t){return new jt(this.x+_t.x,this.y+_t.y,this.z+_t.z,this.w+_t.w)}addInPlace(_t){return this.x+=_t.x,this.y+=_t.y,this.z+=_t.z,this.w+=_t.w,this}subtract(_t){return new jt(this.x-_t.x,this.y-_t.y,this.z-_t.z,this.w-_t.w)}scale(_t){return new jt(this.x*_t,this.y*_t,this.z*_t,this.w*_t)}scaleToRef(_t,Ft){return Ft.x=this.x*_t,Ft.y=this.y*_t,Ft.z=this.z*_t,Ft.w=this.w*_t,this}scaleInPlace(_t){return this.x*=_t,this.y*=_t,this.z*=_t,this.w*=_t,this}scaleAndAddToRef(_t,Ft){return Ft.x+=this.x*_t,Ft.y+=this.y*_t,Ft.z+=this.z*_t,Ft.w+=this.w*_t,this}multiply(_t){const Ft=new jt(0,0,0,1);return this.multiplyToRef(_t,Ft),Ft}multiplyToRef(_t,Ft){const Lt=this.x*_t.w+this.y*_t.z-this.z*_t.y+this.w*_t.x,Yt=-this.x*_t.z+this.y*_t.w+this.z*_t.x+this.w*_t.y,Kt=this.x*_t.y-this.y*_t.x+this.z*_t.w+this.w*_t.z,Zt=-this.x*_t.x-this.y*_t.y-this.z*_t.z+this.w*_t.w;return Ft.copyFromFloats(Lt,Yt,Kt,Zt),this}multiplyInPlace(_t){return this.multiplyToRef(_t,this),this}conjugateToRef(_t){return _t.copyFromFloats(-this.x,-this.y,-this.z,this.w),this}conjugateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this}conjugate(){return new jt(-this.x,-this.y,-this.z,this.w)}normalize(){const _t=1/this.length;return this.x*=_t,this.y*=_t,this.z*=_t,this.w*=_t,this}angleAxis(_t,Ft){if(0===Ft.lengthSquared())return jt.Identity;const Lt=jt.Identity;let Yt=_t*Dn.DEG2RAD;Yt*=.5;let Kt=Ft.normalize();return Kt=Ft.scaleInPlace(Math.sin(Yt)),Lt.x=Kt.x,Lt.y=Kt.y,Lt.z=Kt.z,Lt.w=Math.cos(Yt),Lt.normalize()}toRotationMatrix(_t){return Mn.Matrix.FromQuaternionToRef(this,_t),this}fromRotationMatrix(_t){return jt.FromRotationMatrixToRef(_t,this),this}}_n.Quaternion=jt,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.Vector3=void 0;const Hn=xn,qn=Tn,Wn=_n,jn=kn;class Xt{constructor(_t=0,Ft=0,Lt=0){this.x=_t,this.y=Ft,this.z=Lt}get isNonUniform(){const _t=Math.abs(this.x),Ft=Math.abs(this.y);if(_t!==Ft)return!0;const Lt=Math.abs(this.z);return _t!==Lt||Ft!==Lt}static Add(_t,Ft){return new Xt(_t.x,_t.y,_t.z).addInPlace(Ft)}static GetClipFactor(_t,Ft,Lt,Yt){const Kt=Xt.Dot(_t,Lt)-Yt;return Kt/(Kt-(Xt.Dot(Ft,Lt)-Yt))}static GetAngleBetweenVectors(_t,Ft,Lt){const Yt=_t.normalizeToRef(Hn.MathTmp.Vector3[1]),Kt=Ft.normalizeToRef(Hn.MathTmp.Vector3[2]),Zt=Xt.Dot(Yt,Kt),le=Hn.MathTmp.Vector3[3];return Xt.CrossToRef(Yt,Kt,le),Xt.Dot(le,Lt)>0?Math.acos(Zt):-Math.acos(Zt)}static FromArray(_t,Ft=0){return new Xt(_t[Ft],_t[Ft+1],_t[Ft+2])}static FromFloatArray(_t,Ft){return Xt.FromArray(_t,Ft)}static FromArrayToRef(_t,Ft,Lt){Lt.x=_t[Ft],Lt.y=_t[Ft+1],Lt.z=_t[Ft+2]}static FromFloatArrayToRef(_t,Ft,Lt){return Xt.FromArrayToRef(_t,Ft,Lt)}static FromFloatsToRef(_t,Ft,Lt,Yt){Yt.copyFromFloats(_t,Ft,Lt)}static Zero(){return new Xt(0,0,0)}static One(){return new Xt(1,1,1)}static Up(){return new Xt(0,1,0)}static Down(){return new Xt(0,-1,0)}static Forward(){return new Xt(0,0,1)}static Backward(){return new Xt(0,0,-1)}static Right(){return new Xt(1,0,0)}static Left(){return new Xt(-1,0,0)}static TransformCoordinates(_t,Ft){const Lt=Xt.Zero();return Xt.TransformCoordinatesToRef(_t,Ft,Lt),Lt}static TransformCoordinatesToRef(_t,Ft,Lt){return Xt.TransformCoordinatesFromFloatsToRef(_t.x,_t.y,_t.z,Ft,Lt)}static TransformCoordinatesFromFloatsToRef(_t,Ft,Lt,Yt,Kt){const Zt=Yt.m,le=_t*Zt[0]+Ft*Zt[4]+Lt*Zt[8]+Zt[12],ve=_t*Zt[1]+Ft*Zt[5]+Lt*Zt[9]+Zt[13],Ce=_t*Zt[2]+Ft*Zt[6]+Lt*Zt[10]+Zt[14],Se=1/(_t*Zt[3]+Ft*Zt[7]+Lt*Zt[11]+Zt[15]);Kt.x=le*Se,Kt.y=ve*Se,Kt.z=Ce*Se}static TransformNormal(_t,Ft){const Lt=Xt.Zero();return Xt.TransformNormalToRef(_t,Ft,Lt),Lt}static TransformNormalToRef(_t,Ft,Lt){this.TransformNormalFromFloatsToRef(_t.x,_t.y,_t.z,Ft,Lt)}static TransformNormalFromFloatsToRef(_t,Ft,Lt,Yt,Kt){const Zt=Yt.m;Kt.x=_t*Zt[0]+Ft*Zt[4]+Lt*Zt[8],Kt.y=_t*Zt[1]+Ft*Zt[5]+Lt*Zt[9],Kt.z=_t*Zt[2]+Ft*Zt[6]+Lt*Zt[10]}static CatmullRom(_t,Ft,Lt,Yt,Kt){const Zt=Kt*Kt,le=Kt*Zt,ve=.5*(2*Ft.x+(-_t.x+Lt.x)*Kt+(2*_t.x-5*Ft.x+4*Lt.x-Yt.x)*Zt+(-_t.x+3*Ft.x-3*Lt.x+Yt.x)*le),Ce=.5*(2*Ft.y+(-_t.y+Lt.y)*Kt+(2*_t.y-5*Ft.y+4*Lt.y-Yt.y)*Zt+(-_t.y+3*Ft.y-3*Lt.y+Yt.y)*le),Se=.5*(2*Ft.z+(-_t.z+Lt.z)*Kt+(2*_t.z-5*Ft.z+4*Lt.z-Yt.z)*Zt+(-_t.z+3*Ft.z-3*Lt.z+Yt.z)*le);return new Xt(ve,Ce,Se)}static Clamp(_t,Ft,Lt){const Yt=new Xt;return Xt.ClampToRef(_t,Ft,Lt,Yt),Yt}static ClampToRef(_t,Ft,Lt,Yt){let Kt=_t.x;Kt=Kt>Lt.x?Lt.x:Kt,Kt=Kt<Ft.x?Ft.x:Kt;let Zt=_t.y;Zt=Zt>Lt.y?Lt.y:Zt,Zt=Zt<Ft.y?Ft.y:Zt;let le=_t.z;le=le>Lt.z?Lt.z:le,le=le<Ft.z?Ft.z:le,Yt.copyFromFloats(Kt,Zt,le)}static Hermite(_t,Ft,Lt,Yt,Kt){const Zt=Kt*Kt,le=Kt*Zt,ve=2*le-3*Zt+1,Ce=-2*le+3*Zt,Se=le-2*Zt+Kt,Ie=le-Zt,Ne=_t.x*ve+Lt.x*Ce+Ft.x*Se+Yt.x*Ie,Fe=_t.y*ve+Lt.y*Ce+Ft.y*Se+Yt.y*Ie,Re=_t.z*ve+Lt.z*Ce+Ft.z*Se+Yt.z*Ie;return new Xt(Ne,Fe,Re)}static Lerp(_t,Ft,Lt){const Yt=new Xt(0,0,0);return Xt.LerpToRef(_t,Ft,Lt,Yt),Yt}static LerpToRef(_t,Ft,Lt,Yt){Yt.x=_t.x+(Ft.x-_t.x)*Lt,Yt.y=_t.y+(Ft.y-_t.y)*Lt,Yt.z=_t.z+(Ft.z-_t.z)*Lt}static Dot(_t,Ft){return _t.x*Ft.x+_t.y*Ft.y+_t.z*Ft.z}static Cross(_t,Ft){const Lt=Xt.Zero();return Xt.CrossToRef(_t,Ft,Lt),Lt}static CrossToRef(_t,Ft,Lt){const Yt=_t.y*Ft.z-_t.z*Ft.y,Kt=_t.z*Ft.x-_t.x*Ft.z,Zt=_t.x*Ft.y-_t.y*Ft.x;Lt.copyFromFloats(Yt,Kt,Zt)}static Normalize(_t){const Ft=Xt.Zero();return Xt.NormalizeToRef(_t,Ft),Ft}static NormalizeToRef(_t,Ft){_t.normalizeToRef(Ft)}static Minimize(_t,Ft){const Lt=new Xt(_t.x,_t.y,_t.z);return Lt.minimizeInPlace(Ft),Lt}static Maximize(_t,Ft){const Lt=new Xt(_t.x,_t.y,_t.z);return Lt.maximizeInPlace(Ft),Lt}static Distance(_t,Ft){return Math.sqrt(Xt.DistanceSquared(_t,Ft))}static DistanceSquared(_t,Ft){const Lt=_t.x-Ft.x,Yt=_t.y-Ft.y,Kt=_t.z-Ft.z;return Lt*Lt+Yt*Yt+Kt*Kt}static Center(_t,Ft){const Lt=Xt.Add(_t,Ft);return Lt.scaleInPlace(.5),Lt}static RotationFromAxis(_t,Ft,Lt){const Yt=Xt.Zero();return Xt.RotationFromAxisToRef(_t,Ft,Lt,Yt),Yt}static RotationFromAxisToRef(_t,Ft,Lt,Yt){const Kt=Hn.MathTmp.Quaternion[0];Wn.Quaternion.RotationQuaternionFromAxisToRef(_t,Ft,Lt,Kt),Yt.copyFrom(Kt.eulerAngles)}toString(){return`(${this.x}, ${this.y}, ${this.z})`}getClassName(){return"Vector3"}getHashCode(){let _t=this.x||0;return _t=397*_t^(this.y||0),_t=397*_t^(this.z||0),_t}asArray(){const _t=[];return this.toArray(_t,0),_t}toArray(_t,Ft=0){return _t[Ft]=this.x,_t[Ft+1]=this.y,_t[Ft+2]=this.z,this}toQuaternion(){return Wn.Quaternion.Identity.setEuler(this.y,this.x,this.z)}addInPlace(_t){return this.addInPlaceFromFloats(_t.x,_t.y,_t.z)}addInPlaceFromFloats(_t,Ft,Lt){return this.x+=_t,this.y+=Ft,this.z+=Lt,this}add(_t){return new Xt(this.x+_t.x,this.y+_t.y,this.z+_t.z)}addToRef(_t,Ft){return Ft.copyFromFloats(this.x+_t.x,this.y+_t.y,this.z+_t.z)}subtractInPlace(_t){return this.x-=_t.x,this.y-=_t.y,this.z-=_t.z,this}subtract(_t){return new Xt(this.x-_t.x,this.y-_t.y,this.z-_t.z)}subtractToRef(_t,Ft){return this.subtractFromFloatsToRef(_t.x,_t.y,_t.z,Ft)}subtractFromFloats(_t,Ft,Lt){return new Xt(this.x-_t,this.y-Ft,this.z-Lt)}subtractFromFloatsToRef(_t,Ft,Lt,Yt){return Yt.copyFromFloats(this.x-_t,this.y-Ft,this.z-Lt)}applyMatrix4(_t){this.applyMatrix4ToRef(_t,this)}applyMatrix4ToRef(_t,Ft){const{x:Lt,y:Yt,z:Kt}=this,{m:Zt}=_t,le=1/(Zt[3]*Lt+Zt[7]*Yt+Zt[11]*Kt+Zt[15]);return Ft.x=(Zt[0]*Lt+Zt[4]*Yt+Zt[8]*Kt+Zt[12])*le,Ft.y=(Zt[1]*Lt+Zt[5]*Yt+Zt[9]*Kt+Zt[13])*le,Ft.z=(Zt[2]*Lt+Zt[6]*Yt+Zt[10]*Kt+Zt[14])*le,Ft}rotate(_t){return this.rotateToRef(_t,this)}rotateToRef(_t,Ft){const{x:Lt,y:Yt,z:Kt}=this,{x:Zt,y:le,z:ve,w:Ce}=_t,Se=Ce*Lt+le*Kt-ve*Yt,Ie=Ce*Yt+ve*Lt-Zt*Kt,Ne=Ce*Kt+Zt*Yt-le*Lt,Fe=-Zt*Lt-le*Yt-ve*Kt;return Ft.x=Se*Ce+Fe*-Zt+Ie*-ve-Ne*-le,Ft.y=Ie*Ce+Fe*-le+Ne*-Zt-Se*-ve,Ft.z=Ne*Ce+Fe*-ve+Se*-le-Ie*-Zt,Ft}negate(){return new Xt(-this.x,-this.y,-this.z)}scaleInPlace(_t){return this.x*=_t,this.y*=_t,this.z*=_t,this}scale(_t){return new Xt(this.x*_t,this.y*_t,this.z*_t)}scaleToRef(_t,Ft){return Ft.copyFromFloats(this.x*_t,this.y*_t,this.z*_t)}scaleAndAddToRef(_t,Ft){return Ft.addInPlaceFromFloats(this.x*_t,this.y*_t,this.z*_t)}equals(_t){return _t&&this.x===_t.x&&this.y===_t.y&&this.z===_t.z}equalsWithEpsilon(_t,Ft=qn.Epsilon){return _t&&jn.Scalar.WithinEpsilon(this.x,_t.x,Ft)&&jn.Scalar.WithinEpsilon(this.y,_t.y,Ft)&&jn.Scalar.WithinEpsilon(this.z,_t.z,Ft)}equalsToFloats(_t,Ft,Lt){return this.x===_t&&this.y===Ft&&this.z===Lt}multiplyInPlace(_t){return this.x*=_t.x,this.y*=_t.y,this.z*=_t.z,this}multiply(_t){return this.multiplyByFloats(_t.x,_t.y,_t.z)}multiplyToRef(_t,Ft){return Ft.copyFromFloats(this.x*_t.x,this.y*_t.y,this.z*_t.z)}multiplyByFloats(_t,Ft,Lt){return new Xt(this.x*_t,this.y*Ft,this.z*Lt)}divide(_t){return new Xt(this.x/_t.x,this.y/_t.y,this.z/_t.z)}divideToRef(_t,Ft){return Ft.copyFromFloats(this.x/_t.x,this.y/_t.y,this.z/_t.z)}divideInPlace(_t){return this.divideToRef(_t,this)}minimizeInPlace(_t){return this.minimizeInPlaceFromFloats(_t.x,_t.y,_t.z)}maximizeInPlace(_t){return this.maximizeInPlaceFromFloats(_t.x,_t.y,_t.z)}minimizeInPlaceFromFloats(_t,Ft,Lt){return _t<this.x&&(this.x=_t),Ft<this.y&&(this.y=Ft),Lt<this.z&&(this.z=Lt),this}maximizeInPlaceFromFloats(_t,Ft,Lt){return _t>this.x&&(this.x=_t),Ft>this.y&&(this.y=Ft),Lt>this.z&&(this.z=Lt),this}floor(){return new Xt(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))}fract(){return new Xt(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.normalizeFromLength(this.length())}normalizeFromLength(_t){return 0===_t||1===_t?this:this.scaleInPlace(1/_t)}normalizeToNew(){const _t=new Xt(0,0,0);return this.normalizeToRef(_t),_t}normalizeToRef(_t){const Ft=this.length();return 0===Ft||1===Ft?_t.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/Ft,_t)}clone(){return new Xt(this.x,this.y,this.z)}copyFrom(_t){return this.copyFromFloats(_t.x,_t.y,_t.z)}copyFromFloats(_t,Ft,Lt){return this.x=_t,this.y=Ft,this.z=Lt,this}set(_t,Ft,Lt){return this.copyFromFloats(_t,Ft,Lt)}setAll(_t){return this.x=this.y=this.z=_t,this}}Cn.Vector3=Xt,Object.defineProperty(xn,"__esModule",{value:!0}),xn.MathTmp=void 0;const Gn=An,Vn=Cn,$n=_n,Xn=Sn;xn.MathTmp={Vector3:(0,Gn.buildArray)(6,Vn.Vector3.Zero),Matrix:(0,Gn.buildArray)(2,Xn.Matrix.Identity),Quaternion:(0,Gn.buildArray)(3,$n.Quaternion.Zero),staticUp:Vn.Vector3.Up(),tmpMatrix:Xn.Matrix.Zero()};var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.Angle=void 0;class te{constructor(_t){this._radians=_t,this._radians<0&&(this._radians+=2*Math.PI)}static BetweenTwoPoints(_t,Ft){const Lt=Ft.subtract(_t),Yt=Math.atan2(Lt.y,Lt.x);return new te(Yt)}static FromRadians(_t){return new te(_t)}static FromDegrees(_t){return new te(_t*Math.PI/180)}degrees(){return 180*this._radians/Math.PI}radians(){return this._radians}}Yn.Angle=te;var Kn={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.Vector2=void 0;const Qn=Tn,Zn=kn;class re{constructor(_t=0,Ft=0){this.x=_t,this.y=Ft}static Zero(){return new re(0,0)}static One(){return new re(1,1)}static Add(_t,Ft){return new re(_t.x,_t.y).addInPlace(Ft)}static FromArray(_t,Ft=0){return new re(_t[Ft],_t[Ft+1])}static FromArrayToRef(_t,Ft,Lt){Lt.x=_t[Ft],Lt.y=_t[Ft+1]}static CatmullRom(_t,Ft,Lt,Yt,Kt){const Zt=Kt*Kt,le=Kt*Zt,ve=.5*(2*Ft.x+(-_t.x+Lt.x)*Kt+(2*_t.x-5*Ft.x+4*Lt.x-Yt.x)*Zt+(-_t.x+3*Ft.x-3*Lt.x+Yt.x)*le),Ce=.5*(2*Ft.y+(-_t.y+Lt.y)*Kt+(2*_t.y-5*Ft.y+4*Lt.y-Yt.y)*Zt+(-_t.y+3*Ft.y-3*Lt.y+Yt.y)*le);return new re(ve,Ce)}static Clamp(_t,Ft,Lt){let Yt=_t.x;Yt=Yt>Lt.x?Lt.x:Yt,Yt=Yt<Ft.x?Ft.x:Yt;let Kt=_t.y;return Kt=Kt>Lt.y?Lt.y:Kt,Kt=Kt<Ft.y?Ft.y:Kt,new re(Yt,Kt)}static Hermite(_t,Ft,Lt,Yt,Kt){const Zt=Kt*Kt,le=Kt*Zt,ve=2*le-3*Zt+1,Ce=-2*le+3*Zt,Se=le-2*Zt+Kt,Ie=le-Zt,Ne=_t.x*ve+Lt.x*Ce+Ft.x*Se+Yt.x*Ie,Fe=_t.y*ve+Lt.y*Ce+Ft.y*Se+Yt.y*Ie;return new re(Ne,Fe)}static Lerp(_t,Ft,Lt){const Yt=_t.x+(Ft.x-_t.x)*Lt,Kt=_t.y+(Ft.y-_t.y)*Lt;return new re(Yt,Kt)}static Dot(_t,Ft){return _t.x*Ft.x+_t.y*Ft.y}static Normalize(_t){const Ft=new re(_t.x,_t.y);return Ft.normalize(),Ft}static Minimize(_t,Ft){const Lt=_t.x<Ft.x?_t.x:Ft.x,Yt=_t.y<Ft.y?_t.y:Ft.y;return new re(Lt,Yt)}static Maximize(_t,Ft){const Lt=_t.x>Ft.x?_t.x:Ft.x,Yt=_t.y>Ft.y?_t.y:Ft.y;return new re(Lt,Yt)}static Transform(_t,Ft){const Lt=re.Zero();return re.TransformToRef(_t,Ft,Lt),Lt}static TransformToRef(_t,Ft,Lt){const Yt=Ft.m,Kt=_t.x*Yt[0]+_t.y*Yt[4]+Yt[12],Zt=_t.x*Yt[1]+_t.y*Yt[5]+Yt[13];Lt.x=Kt,Lt.y=Zt}static PointInTriangle(_t,Ft,Lt,Yt){const Kt=.5*(-Lt.y*Yt.x+Ft.y*(-Lt.x+Yt.x)+Ft.x*(Lt.y-Yt.y)+Lt.x*Yt.y),Zt=Kt<0?-1:1,le=(Ft.y*Yt.x-Ft.x*Yt.y+(Yt.y-Ft.y)*_t.x+(Ft.x-Yt.x)*_t.y)*Zt,ve=(Ft.x*Lt.y-Ft.y*Lt.x+(Ft.y-Lt.y)*_t.x+(Lt.x-Ft.x)*_t.y)*Zt;return le>0&&ve>0&&le+ve<2*Kt*Zt}static Distance(_t,Ft){return Math.sqrt(re.DistanceSquared(_t,Ft))}static DistanceSquared(_t,Ft){const Lt=_t.x-Ft.x,Yt=_t.y-Ft.y;return Lt*Lt+Yt*Yt}static Center(_t,Ft){const Lt=re.Add(_t,Ft);return Lt.scaleInPlace(.5),Lt}static DistanceOfPointFromSegment(_t,Ft,Lt){const Yt=re.DistanceSquared(Ft,Lt);if(0===Yt)return re.Distance(_t,Ft);const Kt=Lt.subtract(Ft),Zt=Math.max(0,Math.min(1,re.Dot(_t.subtract(Ft),Kt)/Yt)),le=Ft.add(Kt.multiplyByFloats(Zt,Zt));return re.Distance(_t,le)}toString(){return"{X: "+this.x+" Y:"+this.y+"}"}getClassName(){return"Vector2"}getHashCode(){let _t=this.x||0;return _t=397*_t^(this.y||0),_t}toArray(_t,Ft=0){return _t[Ft]=this.x,_t[Ft+1]=this.y,this}asArray(){const _t=new Array;return this.toArray(_t,0),_t}copyFrom(_t){return this.x=_t.x,this.y=_t.y,this}copyFromFloats(_t,Ft){return this.x=_t,this.y=Ft,this}set(_t,Ft){return this.copyFromFloats(_t,Ft)}add(_t){return new re(this.x+_t.x,this.y+_t.y)}addToRef(_t,Ft){return Ft.x=this.x+_t.x,Ft.y=this.y+_t.y,this}addInPlace(_t){return this.x+=_t.x,this.y+=_t.y,this}addVector3(_t){return new re(this.x+_t.x,this.y+_t.y)}subtract(_t){return new re(this.x-_t.x,this.y-_t.y)}subtractToRef(_t,Ft){return Ft.x=this.x-_t.x,Ft.y=this.y-_t.y,this}subtractInPlace(_t){return this.x-=_t.x,this.y-=_t.y,this}multiplyInPlace(_t){return this.x*=_t.x,this.y*=_t.y,this}multiply(_t){return new re(this.x*_t.x,this.y*_t.y)}multiplyToRef(_t,Ft){return Ft.x=this.x*_t.x,Ft.y=this.y*_t.y,this}multiplyByFloats(_t,Ft){return new re(this.x*_t,this.y*Ft)}divide(_t){return new re(this.x/_t.x,this.y/_t.y)}divideToRef(_t,Ft){return Ft.x=this.x/_t.x,Ft.y=this.y/_t.y,this}divideInPlace(_t){return this.divideToRef(_t,this)}negate(){return new re(-this.x,-this.y)}scaleInPlace(_t){return this.x*=_t,this.y*=_t,this}scale(_t){const Ft=new re(0,0);return this.scaleToRef(_t,Ft),Ft}scaleToRef(_t,Ft){return Ft.x=this.x*_t,Ft.y=this.y*_t,this}scaleAndAddToRef(_t,Ft){return Ft.x+=this.x*_t,Ft.y+=this.y*_t,this}equals(_t){return _t&&this.x===_t.x&&this.y===_t.y}equalsWithEpsilon(_t,Ft=Qn.Epsilon){return _t&&Zn.Scalar.WithinEpsilon(this.x,_t.x,Ft)&&Zn.Scalar.WithinEpsilon(this.y,_t.y,Ft)}floor(){return new re(Math.floor(this.x),Math.floor(this.y))}fract(){return new re(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){const _t=this.length();if(0===_t)return this;const Ft=1/_t;return this.x*=Ft,this.y*=Ft,this}clone(){return new re(this.x,this.y)}}Jn.Vector2=re,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.Arc2=void 0;const ti=Yn,ei=Jn,ni=Tn;Kn.Arc2=class{constructor(_t,Ft,Lt){this.startPoint=_t,this.midPoint=Ft,this.endPoint=Lt;const Yt=Math.pow(Ft.x,2)+Math.pow(Ft.y,2),Kt=(Math.pow(_t.x,2)+Math.pow(_t.y,2)-Yt)/2,Zt=(Yt-Math.pow(Lt.x,2)-Math.pow(Lt.y,2))/2,le=(_t.x-Ft.x)*(Ft.y-Lt.y)-(Ft.x-Lt.x)*(_t.y-Ft.y);this.centerPoint=new ei.Vector2((Kt*(Ft.y-Lt.y)-Zt*(_t.y-Ft.y))/le,((_t.x-Ft.x)*Zt-(Ft.x-Lt.x)*Kt)/le),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=ti.Angle.BetweenTwoPoints(this.centerPoint,this.startPoint);const ve=this.startAngle.degrees();let Ce=ti.Angle.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),Se=ti.Angle.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();Ce-ve>180&&(Ce-=360),Ce-ve<-180&&(Ce+=360),Se-Ce>180&&(Se-=360),Se-Ce<-180&&(Se+=360),this.orientation=Ce-ve<0?ni.Orientation.CW:ni.Orientation.CCW,this.angle=ti.Angle.FromDegrees(this.orientation===ni.Orientation.CW?ve-Se:Se-ve)}};var ii={};Object.defineProperty(ii,"__esModule",{value:!0}),ii.Axis=void 0;const ri=Cn;class pe{}ii.Axis=pe,pe.X=new ri.Vector3(1,0,0),pe.Y=new ri.Vector3(0,1,0),pe.Z=new ri.Vector3(0,0,1);var oi={};Object.defineProperty(oi,"__esModule",{value:!0}),oi.BezierCurve=void 0,oi.BezierCurve=class{static Interpolate(_t,Ft,Lt,Yt,Kt){const Zt=1-3*Yt+3*Ft,le=3*Yt-6*Ft,ve=3*Ft;let Ce=_t;for(let Ft=0;Ft<5;Ft++){const Ft=Ce*Ce;Ce-=1/(3*Zt*Ft+2*le*Ce+ve)*(Zt*(Ft*Ce)+le*Ft+ve*Ce-_t),Ce=Math.min(1,Math.max(0,Ce))}return 3*Math.pow(1-Ce,2)*Ce*Lt+3*(1-Ce)*Math.pow(Ce,2)*Kt+Math.pow(Ce,3)}};var si={},ai={};Object.defineProperty(ai,"__esModule",{value:!0}),ai.Color4=void 0;const ci=kn,ui=Tn;class ge{constructor(_t=0,Ft=0,Lt=0,Yt=1){this.r=_t,this.g=Ft,this.b=Lt,this.a=Yt}static FromHexString(_t){if("#"!==_t.substring(0,1)||9!==_t.length)return new ge(0,0,0,0);const Ft=parseInt(_t.substring(1,3),16),Lt=parseInt(_t.substring(3,5),16),Yt=parseInt(_t.substring(5,7),16),Kt=parseInt(_t.substring(7,9),16);return ge.FromInts(Ft,Lt,Yt,Kt)}static Lerp(_t,Ft,Lt){const Yt=new ge(0,0,0,0);return ge.LerpToRef(_t,Ft,Lt,Yt),Yt}static LerpToRef(_t,Ft,Lt,Yt){Yt.r=_t.r+(Ft.r-_t.r)*Lt,Yt.g=_t.g+(Ft.g-_t.g)*Lt,Yt.b=_t.b+(Ft.b-_t.b)*Lt,Yt.a=_t.a+(Ft.a-_t.a)*Lt}static Red(){return new ge(1,0,0,1)}static Green(){return new ge(0,1,0,1)}static Blue(){return new ge(0,0,1,1)}static Black(){return new ge(0,0,0,1)}static White(){return new ge(1,1,1,1)}static Purple(){return new ge(.5,0,.5,1)}static Magenta(){return new ge(1,0,1,1)}static Yellow(){return new ge(1,1,0,1)}static Gray(){return new ge(.5,.5,.5,1)}static Teal(){return new ge(0,1,1,1)}static Clear(){return new ge(0,0,0,0)}static FromColor3(_t,Ft=1){return new ge(_t.r,_t.g,_t.b,Ft)}static FromArray(_t,Ft=0){return new ge(_t[Ft],_t[Ft+1],_t[Ft+2],_t[Ft+3])}static FromInts(_t,Ft,Lt,Yt){return new ge(_t/255,Ft/255,Lt/255,Yt/255)}static CheckColors4(_t,Ft){if(_t.length===3*Ft){const Ft=[];for(let Lt=0;Lt<_t.length;Lt+=3){const Yt=Lt/3*4;Ft[Yt]=_t[Lt],Ft[Yt+1]=_t[Lt+1],Ft[Yt+2]=_t[Lt+2],Ft[Yt+3]=1}return Ft}return _t}addInPlace(_t){return this.r+=_t.r,this.g+=_t.g,this.b+=_t.b,this.a+=_t.a,this}asArray(){const _t=new Array;return this.toArray(_t,0),_t}toArray(_t,Ft=0){return _t[Ft]=this.r,_t[Ft+1]=this.g,_t[Ft+2]=this.b,_t[Ft+3]=this.a,this}add(_t){return new ge(this.r+_t.r,this.g+_t.g,this.b+_t.b,this.a+_t.a)}subtract(_t){return new ge(this.r-_t.r,this.g-_t.g,this.b-_t.b,this.a-_t.a)}subtractToRef(_t,Ft){return Ft.r=this.r-_t.r,Ft.g=this.g-_t.g,Ft.b=this.b-_t.b,Ft.a=this.a-_t.a,this}scale(_t){return new ge(this.r*_t,this.g*_t,this.b*_t,this.a*_t)}scaleToRef(_t,Ft){return Ft.r=this.r*_t,Ft.g=this.g*_t,Ft.b=this.b*_t,Ft.a=this.a*_t,this}scaleAndAddToRef(_t,Ft){return Ft.r+=this.r*_t,Ft.g+=this.g*_t,Ft.b+=this.b*_t,Ft.a+=this.a*_t,this}clampToRef(_t=0,Ft=1,Lt){return Lt.r=ci.Scalar.Clamp(this.r,_t,Ft),Lt.g=ci.Scalar.Clamp(this.g,_t,Ft),Lt.b=ci.Scalar.Clamp(this.b,_t,Ft),Lt.a=ci.Scalar.Clamp(this.a,_t,Ft),this}multiply(_t){return new ge(this.r*_t.r,this.g*_t.g,this.b*_t.b,this.a*_t.a)}multiplyToRef(_t,Ft){return Ft.r=this.r*_t.r,Ft.g=this.g*_t.g,Ft.b=this.b*_t.b,Ft.a=this.a*_t.a,Ft}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"}getClassName(){return"Color4"}getHashCode(){let _t=this.r||0;return _t=397*_t^(this.g||0),_t=397*_t^(this.b||0),_t=397*_t^(this.a||0),_t}clone(){return new ge(this.r,this.g,this.b,this.a)}copyFrom(_t){return this.r=_t.r,this.g=_t.g,this.b=_t.b,this.a=_t.a,this}copyFromFloats(_t,Ft,Lt,Yt){return this.r=_t,this.g=Ft,this.b=Lt,this.a=Yt,this}set(_t,Ft,Lt,Yt){return this.copyFromFloats(_t,Ft,Lt,Yt)}toHexString(){const _t=255*this.r|0,Ft=255*this.g|0,Lt=255*this.b|0,Yt=255*this.a|0;return"#"+ci.Scalar.ToHex(_t)+ci.Scalar.ToHex(Ft)+ci.Scalar.ToHex(Lt)+ci.Scalar.ToHex(Yt)}toLinearSpace(){const _t=new ge;return this.toLinearSpaceToRef(_t),_t}toLinearSpaceToRef(_t){return _t.r=Math.pow(this.r,ui.ToLinearSpace),_t.g=Math.pow(this.g,ui.ToLinearSpace),_t.b=Math.pow(this.b,ui.ToLinearSpace),_t.a=this.a,this}toGammaSpace(){const _t=new ge;return this.toGammaSpaceToRef(_t),_t}toGammaSpaceToRef(_t){return _t.r=Math.pow(this.r,ui.ToGammaSpace),_t.g=Math.pow(this.g,ui.ToGammaSpace),_t.b=Math.pow(this.b,ui.ToGammaSpace),_t.a=this.a,this}}ai.Color4=ge,Object.defineProperty(si,"__esModule",{value:!0}),si.Color3=void 0;const li=Tn,di=ai,hi=kn;class xe{constructor(_t=0,Ft=0,Lt=0){this.r=_t,this.g=Ft,this.b=Lt}static FromHexString(_t){if("#"!==_t.substring(0,1)||7!==_t.length)return new xe(0,0,0);const Ft=parseInt(_t.substring(1,3),16),Lt=parseInt(_t.substring(3,5),16),Yt=parseInt(_t.substring(5,7),16);return xe.FromInts(Ft,Lt,Yt)}static FromArray(_t,Ft=0){return new xe(_t[Ft],_t[Ft+1],_t[Ft+2])}static FromInts(_t,Ft,Lt){return new xe(_t/255,Ft/255,Lt/255)}static Lerp(_t,Ft,Lt){const Yt=new xe(0,0,0);return xe.LerpToRef(_t,Ft,Lt,Yt),Yt}static LerpToRef(_t,Ft,Lt,Yt){Yt.r=_t.r+(Ft.r-_t.r)*Lt,Yt.g=_t.g+(Ft.g-_t.g)*Lt,Yt.b=_t.b+(Ft.b-_t.b)*Lt}static Red(){return new xe(1,0,0)}static Green(){return new xe(0,1,0)}static Blue(){return new xe(0,0,1)}static Black(){return new xe(0,0,0)}static White(){return new xe(1,1,1)}static Purple(){return new xe(.5,0,.5)}static Magenta(){return new xe(1,0,1)}static Yellow(){return new xe(1,1,0)}static Gray(){return new xe(.5,.5,.5)}static Teal(){return new xe(0,1,1)}static Random(){return new xe(Math.random(),Math.random(),Math.random())}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"}getClassName(){return"Color3"}getHashCode(){let _t=this.r||0;return _t=397*_t^(this.g||0),_t=397*_t^(this.b||0),_t}toArray(_t,Ft=0){return _t[Ft]=this.r,_t[Ft+1]=this.g,_t[Ft+2]=this.b,this}toColor4(_t=1){return new di.Color4(this.r,this.g,this.b,_t)}asArray(){const _t=new Array;return this.toArray(_t,0),_t}toLuminance(){return.3*this.r+.59*this.g+.11*this.b}multiply(_t){return new xe(this.r*_t.r,this.g*_t.g,this.b*_t.b)}multiplyToRef(_t,Ft){return Ft.r=this.r*_t.r,Ft.g=this.g*_t.g,Ft.b=this.b*_t.b,this}equals(_t){return _t&&this.r===_t.r&&this.g===_t.g&&this.b===_t.b}equalsFloats(_t,Ft,Lt){return this.r===_t&&this.g===Ft&&this.b===Lt}scale(_t){return new xe(this.r*_t,this.g*_t,this.b*_t)}scaleToRef(_t,Ft){return Ft.r=this.r*_t,Ft.g=this.g*_t,Ft.b=this.b*_t,this}scaleAndAddToRef(_t,Ft){return Ft.r+=this.r*_t,Ft.g+=this.g*_t,Ft.b+=this.b*_t,this}clampToRef(_t=0,Ft=1,Lt){return Lt.r=hi.Scalar.Clamp(this.r,_t,Ft),Lt.g=hi.Scalar.Clamp(this.g,_t,Ft),Lt.b=hi.Scalar.Clamp(this.b,_t,Ft),this}add(_t){return new xe(this.r+_t.r,this.g+_t.g,this.b+_t.b)}addToRef(_t,Ft){return Ft.r=this.r+_t.r,Ft.g=this.g+_t.g,Ft.b=this.b+_t.b,this}subtract(_t){return new xe(this.r-_t.r,this.g-_t.g,this.b-_t.b)}subtractToRef(_t,Ft){return Ft.r=this.r-_t.r,Ft.g=this.g-_t.g,Ft.b=this.b-_t.b,this}clone(){return new xe(this.r,this.g,this.b)}copyFrom(_t){return this.r=_t.r,this.g=_t.g,this.b=_t.b,this}copyFromFloats(_t,Ft,Lt){return this.r=_t,this.g=Ft,this.b=Lt,this}set(_t,Ft,Lt){return this.copyFromFloats(_t,Ft,Lt)}toHexString(){const _t=255*this.r|0,Ft=255*this.g|0,Lt=255*this.b|0;return"#"+hi.Scalar.ToHex(_t)+hi.Scalar.ToHex(Ft)+hi.Scalar.ToHex(Lt)}toLinearSpace(){const _t=new xe;return this.toLinearSpaceToRef(_t),_t}toLinearSpaceToRef(_t){return _t.r=Math.pow(this.r,li.ToLinearSpace),_t.g=Math.pow(this.g,li.ToLinearSpace),_t.b=Math.pow(this.b,li.ToLinearSpace),this}toGammaSpace(){const _t=new xe;return this.toGammaSpaceToRef(_t),_t}toGammaSpaceToRef(_t){return _t.r=Math.pow(this.r,li.ToGammaSpace),_t.g=Math.pow(this.g,li.ToGammaSpace),_t.b=Math.pow(this.b,li.ToGammaSpace),this}toJSON(){return{r:this.r,g:this.g,b:this.b}}}si.Color3=xe;var pi={};Object.defineProperty(pi,"__esModule",{value:!0}),pi.Curve3=void 0;const fi=Cn;class Ae{constructor(_t){this._length=0,this._points=_t,this._length=this._computeLength(_t)}static CreateQuadraticBezier(_t,Ft,Lt,Yt){Yt=Yt>2?Yt:3;const Kt=new Array,r=(_t,Ft,Lt,Yt)=>(1-_t)*(1-_t)*Ft+2*_t*(1-_t)*Lt+_t*_t*Yt;for(let Zt=0;Zt<=Yt;Zt++)Kt.push(new fi.Vector3(r(Zt/Yt,_t.x,Ft.x,Lt.x),r(Zt/Yt,_t.y,Ft.y,Lt.y),r(Zt/Yt,_t.z,Ft.z,Lt.z)));return new Ae(Kt)}static CreateCubicBezier(_t,Ft,Lt,Yt,Kt){Kt=Kt>3?Kt:4;const Zt=new Array,s=(_t,Ft,Lt,Yt,Kt)=>(1-_t)*(1-_t)*(1-_t)*Ft+3*_t*(1-_t)*(1-_t)*Lt+3*_t*_t*(1-_t)*Yt+_t*_t*_t*Kt;for(let le=0;le<=Kt;le++)Zt.push(new fi.Vector3(s(le/Kt,_t.x,Ft.x,Lt.x,Yt.x),s(le/Kt,_t.y,Ft.y,Lt.y,Yt.y),s(le/Kt,_t.z,Ft.z,Lt.z,Yt.z)));return new Ae(Zt)}static CreateHermiteSpline(_t,Ft,Lt,Yt,Kt){const Zt=new Array,le=1/Kt;for(let ve=0;ve<=Kt;ve++)Zt.push(fi.Vector3.Hermite(_t,Ft,Lt,Yt,ve*le));return new Ae(Zt)}static CreateCatmullRomSpline(_t,Ft,Lt){const Yt=new Array,Kt=1/Ft;let Zt=0;if(Lt){const Lt=_t.length;for(let le=0;le<Lt;le++){Zt=0;for(let ve=0;ve<Ft;ve++)Yt.push(fi.Vector3.CatmullRom(_t[le%Lt],_t[(le+1)%Lt],_t[(le+2)%Lt],_t[(le+3)%Lt],Zt)),Zt+=Kt}Yt.push(Yt[0])}else{const Lt=new Array;Lt.push(_t[0].clone()),Array.prototype.push.apply(Lt,_t),Lt.push(_t[_t.length-1].clone());let le=0;for(le=0;le<Lt.length-3;le++){Zt=0;for(let _t=0;_t<Ft;_t++)Yt.push(fi.Vector3.CatmullRom(Lt[le],Lt[le+1],Lt[le+2],Lt[le+3],Zt)),Zt+=Kt}le--,Yt.push(fi.Vector3.CatmullRom(Lt[le],Lt[le+1],Lt[le+2],Lt[le+3],Zt))}return new Ae(Yt)}getPoints(){return this._points}length(){return this._length}continue(_t){const Ft=this._points[this._points.length-1],Lt=this._points.slice(),Yt=_t.getPoints();for(let _t=1;_t<Yt.length;_t++)Lt.push(Yt[_t].subtract(Yt[0]).add(Ft));return new Ae(Lt)}_computeLength(_t){let Ft=0;for(let Lt=1;Lt<_t.length;Lt++)Ft+=_t[Lt].subtract(_t[Lt-1]).length();return Ft}}pi.Curve3=Ae;var mi={},yi={};Object.defineProperty(yi,"__esModule",{value:!0}),yi.Plane=void 0;const gi=Cn,bi=Sn,vi=xn;class ze{constructor(_t,Ft,Lt,Yt){this.normal=new gi.Vector3(_t,Ft,Lt),this.d=Yt}static FromArray(_t){return new ze(_t[0],_t[1],_t[2],_t[3])}static FromPoints(_t,Ft,Lt){const Yt=new ze(0,0,0,0);return Yt.copyFromPoints(_t,Ft,Lt),Yt}static FromPositionAndNormal(_t,Ft){const Lt=new ze(0,0,0,0);return Ft.normalize(),Lt.normal=Ft,Lt.d=-(Ft.x*_t.x+Ft.y*_t.y+Ft.z*_t.z),Lt}static SignedDistanceToPlaneFromPositionAndNormal(_t,Ft,Lt){const Yt=-(Ft.x*_t.x+Ft.y*_t.y+Ft.z*_t.z);return gi.Vector3.Dot(Lt,Ft)+Yt}asArray(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new ze(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let _t=this.normal.getHashCode();return _t=397*_t^(this.d||0),_t}normalize(){const _t=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let Ft=0;return 0!==_t&&(Ft=1/_t),this.normal.x*=Ft,this.normal.y*=Ft,this.normal.z*=Ft,this.d*=Ft,this}transform(_t){const Ft=vi.MathTmp.Matrix[0];bi.Matrix.TransposeToRef(_t,Ft);const Lt=Ft.m,Yt=this.normal.x,Kt=this.normal.y,Zt=this.normal.z,le=this.d,ve=Yt*Lt[0]+Kt*Lt[1]+Zt*Lt[2]+le*Lt[3],Ce=Yt*Lt[4]+Kt*Lt[5]+Zt*Lt[6]+le*Lt[7],Se=Yt*Lt[8]+Kt*Lt[9]+Zt*Lt[10]+le*Lt[11],Ie=Yt*Lt[12]+Kt*Lt[13]+Zt*Lt[14]+le*Lt[15];return new ze(ve,Ce,Se,Ie)}dotCoordinate(_t){return this.normal.x*_t.x+this.normal.y*_t.y+this.normal.z*_t.z+this.d}copyFromPoints(_t,Ft,Lt){const Yt=Ft.x-_t.x,Kt=Ft.y-_t.y,Zt=Ft.z-_t.z,le=Lt.x-_t.x,ve=Lt.y-_t.y,Ce=Lt.z-_t.z,Se=Kt*Ce-Zt*ve,Ie=Zt*le-Yt*Ce,Ne=Yt*ve-Kt*le,Fe=Math.sqrt(Se*Se+Ie*Ie+Ne*Ne);let Re;return Re=0!==Fe?1/Fe:0,this.normal.x=Se*Re,this.normal.y=Ie*Re,this.normal.z=Ne*Re,this.d=-(this.normal.x*_t.x+this.normal.y*_t.y+this.normal.z*_t.z),this}isFrontFacingTo(_t,Ft){return gi.Vector3.Dot(this.normal,_t)<=Ft}signedDistanceTo(_t){return gi.Vector3.Dot(_t,this.normal)+this.d}}yi.Plane=ze,Object.defineProperty(mi,"__esModule",{value:!0}),mi.Frustum=void 0;const wi=yi;class Me{static GetPlanes(_t){const Ft=[];for(let _t=0;_t<6;_t++)Ft.push(new wi.Plane(0,0,0,0));return Me.GetPlanesToRef(_t,Ft),Ft}static GetNearPlaneToRef(_t,Ft){const Lt=_t.m;Ft.normal.x=Lt[3]+Lt[2],Ft.normal.y=Lt[7]+Lt[6],Ft.normal.z=Lt[11]+Lt[10],Ft.d=Lt[15]+Lt[14],Ft.normalize()}static GetFarPlaneToRef(_t,Ft){const Lt=_t.m;Ft.normal.x=Lt[3]-Lt[2],Ft.normal.y=Lt[7]-Lt[6],Ft.normal.z=Lt[11]-Lt[10],Ft.d=Lt[15]-Lt[14],Ft.normalize()}static GetLeftPlaneToRef(_t,Ft){const Lt=_t.m;Ft.normal.x=Lt[3]+Lt[0],Ft.normal.y=Lt[7]+Lt[4],Ft.normal.z=Lt[11]+Lt[8],Ft.d=Lt[15]+Lt[12],Ft.normalize()}static GetRightPlaneToRef(_t,Ft){const Lt=_t.m;Ft.normal.x=Lt[3]-Lt[0],Ft.normal.y=Lt[7]-Lt[4],Ft.normal.z=Lt[11]-Lt[8],Ft.d=Lt[15]-Lt[12],Ft.normalize()}static GetTopPlaneToRef(_t,Ft){const Lt=_t.m;Ft.normal.x=Lt[3]-Lt[1],Ft.normal.y=Lt[7]-Lt[5],Ft.normal.z=Lt[11]-Lt[9],Ft.d=Lt[15]-Lt[13],Ft.normalize()}static GetBottomPlaneToRef(_t,Ft){const Lt=_t.m;Ft.normal.x=Lt[3]+Lt[1],Ft.normal.y=Lt[7]+Lt[5],Ft.normal.z=Lt[11]+Lt[9],Ft.d=Lt[15]+Lt[13],Ft.normalize()}static GetPlanesToRef(_t,Ft){Me.GetNearPlaneToRef(_t,Ft[0]),Me.GetFarPlaneToRef(_t,Ft[1]),Me.GetLeftPlaneToRef(_t,Ft[2]),Me.GetRightPlaneToRef(_t,Ft[3]),Me.GetTopPlaneToRef(_t,Ft[4]),Me.GetBottomPlaneToRef(_t,Ft[5])}}mi.Frustum=Me;var Ti={};Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Path2=void 0;const xi=Jn,Ai=Kn,Ci=Tn;class De{constructor(_t,Ft){this.closed=!1,this._points=new Array,this._length=0,this._points.push(new xi.Vector2(_t,Ft))}static StartingAt(_t,Ft){return new De(_t,Ft)}addLineTo(_t,Ft){if(this.closed)return this;const Lt=new xi.Vector2(_t,Ft),Yt=this._points[this._points.length-1];return this._points.push(Lt),this._length+=Lt.subtract(Yt).length(),this}addArcTo(_t,Ft,Lt,Yt,Kt=36){if(this.closed)return this;const Zt=this._points[this._points.length-1],le=new xi.Vector2(_t,Ft),ve=new xi.Vector2(Lt,Yt),Ce=new Ai.Arc2(Zt,le,ve);let Se=Ce.angle.radians()/Kt;Ce.orientation===Ci.Orientation.CW&&(Se*=-1);let Ie=Ce.startAngle.radians()+Se;for(let _t=0;_t<Kt;_t++){const _t=Math.cos(Ie)*Ce.radius+Ce.centerPoint.x,Ft=Math.sin(Ie)*Ce.radius+Ce.centerPoint.y;this.addLineTo(_t,Ft),Ie+=Se}return this}close(){return this.closed=!0,this}length(){let _t=this._length;if(!this.closed){const Ft=this._points[this._points.length-1];_t+=this._points[0].subtract(Ft).length()}return _t}getPoints(){return this._points}getPointAtLengthPosition(_t){if(_t<0||_t>1)return xi.Vector2.Zero();const Ft=_t*this.length();let Lt=0;for(let _t=0;_t<this._points.length;_t++){const Yt=(_t+1)%this._points.length,Kt=this._points[_t],Zt=this._points[Yt].subtract(Kt),le=Zt.length()+Lt;if(Ft>=Lt&&Ft<=le){const _t=Zt.normalize(),Yt=Ft-Lt;return new xi.Vector2(Kt.x+_t.x*Yt,Kt.y+_t.y*Yt)}Lt=le}return xi.Vector2.Zero()}}Ti.Path2=De;var _i={};Object.defineProperty(_i,"__esModule",{value:!0}),_i.Path3D=void 0;const Si=Cn,Ei=Tn,ki=kn;_i.Path3D=class{constructor(_t,Ft=null,Lt){this.path=_t,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(let Ft=0;Ft<_t.length;Ft++)this._curve[Ft]=_t[Ft].clone();this._raw=Lt||!1,this._compute(Ft)}getCurve(){return this._curve}getTangents(){return this._tangents}getNormals(){return this._normals}getBinormals(){return this._binormals}getDistances(){return this._distances}update(_t,Ft=null){for(let Ft=0;Ft<_t.length;Ft++)this._curve[Ft].x=_t[Ft].x,this._curve[Ft].y=_t[Ft].y,this._curve[Ft].z=_t[Ft].z;return this._compute(Ft),this}_compute(_t){const Ft=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[Ft-1]=this._curve[Ft-1].subtract(this._curve[Ft-2]),this._raw||this._tangents[Ft-1].normalize();const Lt=this._tangents[0],Yt=this._normalVector(this._curve[0],Lt,_t);let Kt,Zt,le,ve;this._normals[0]=Yt,this._raw||this._normals[0].normalize(),this._binormals[0]=Si.Vector3.Cross(Lt,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(let _t=1;_t<Ft;_t++)Kt=this._getLastNonNullVector(_t),_t<Ft-1&&(Zt=this._getFirstNonNullVector(_t),this._tangents[_t]=Kt.add(Zt),this._tangents[_t].normalize()),this._distances[_t]=this._distances[_t-1]+Kt.length(),le=this._tangents[_t],ve=this._binormals[_t-1],this._normals[_t]=Si.Vector3.Cross(ve,le),this._raw||this._normals[_t].normalize(),this._binormals[_t]=Si.Vector3.Cross(le,this._normals[_t]),this._raw||this._binormals[_t].normalize()}_getFirstNonNullVector(_t){let Ft=1,Lt=this._curve[_t+Ft].subtract(this._curve[_t]);for(;0===Lt.length()&&_t+Ft+1<this._curve.length;)Ft++,Lt=this._curve[_t+Ft].subtract(this._curve[_t]);return Lt}_getLastNonNullVector(_t){let Ft=1,Lt=this._curve[_t].subtract(this._curve[_t-Ft]);for(;0===Lt.length()&&_t>Ft+1;)Ft++,Lt=this._curve[_t].subtract(this._curve[_t-Ft]);return Lt}_normalVector(_t,Ft,Lt){let Yt,Kt=Ft.length();if(0===Kt&&(Kt=1),null==Lt){let _t;_t=ki.Scalar.WithinEpsilon(Math.abs(Ft.y)/Kt,1,Ei.Epsilon)?ki.Scalar.WithinEpsilon(Math.abs(Ft.x)/Kt,1,Ei.Epsilon)?ki.Scalar.WithinEpsilon(Math.abs(Ft.z)/Kt,1,Ei.Epsilon)?Si.Vector3.Zero():new Si.Vector3(0,0,1):new Si.Vector3(1,0,0):new Si.Vector3(0,-1,0),Yt=Si.Vector3.Cross(Ft,_t)}else Yt=Si.Vector3.Cross(Ft,Lt),Si.Vector3.CrossToRef(Yt,Ft,Yt);return Yt.normalize(),Yt}};var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Size=void 0;class je{constructor(_t,Ft){this.width=_t,this.height=Ft}get surface(){return this.width*this.height}static Zero(){return new je(0,0)}static Lerp(_t,Ft,Lt){const Yt=_t.width+(Ft.width-_t.width)*Lt,Kt=_t.height+(Ft.height-_t.height)*Lt;return new je(Yt,Kt)}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let _t=this.width||0;return _t=397*_t^(this.height||0),_t}copyFrom(_t){this.width=_t.width,this.height=_t.height}copyFromFloats(_t,Ft){return this.width=_t,this.height=Ft,this}set(_t,Ft){return this.copyFromFloats(_t,Ft)}multiplyByFloats(_t,Ft){return new je(this.width*_t,this.height*Ft)}clone(){return new je(this.width,this.height)}equals(_t){return!!_t&&this.width===_t.width&&this.height===_t.height}add(_t){return new je(this.width+_t.width,this.height+_t.height)}subtract(_t){return new je(this.width-_t.width,this.height-_t.height)}}Ii.Size=je,function(_t){var Ft=vn&&vn.__createBinding||(Object.create?function(_t,Ft,Lt,Yt){void 0===Yt&&(Yt=Lt),Object.defineProperty(_t,Yt,{enumerable:!0,get:function(){return Ft[Lt]}})}:function(_t,Ft,Lt,Yt){void 0===Yt&&(Yt=Lt),_t[Yt]=Ft[Lt]}),Lt=vn&&vn.__exportStar||function(_t,Lt){for(var Yt in _t)"default"===Yt||Object.prototype.hasOwnProperty.call(Lt,Yt)||Ft(Lt,_t,Yt)};Object.defineProperty(_t,"__esModule",{value:!0}),Lt(Tn,_t),Lt(xn,_t),Lt(Yn,_t),Lt(Kn,_t),Lt(ii,_t),Lt(oi,_t),Lt(si,_t),Lt(ai,_t),Lt(pi,_t),Lt(mi,_t),Lt(Sn,_t),Lt(Ti,_t),Lt(_i,_t),Lt(yi,_t),Lt(_n,_t),Lt(kn,_t),Lt(Ii,_t),Lt(Jn,_t),Lt(Cn,_t),Lt(En,_t),Lt(wn,_t)}(wn);var Ni,Bi,Fi,Oi,Pi={looping:!0,speed:1,weight:1,layer:0},Mi=function(_t){function e(Ft,Lt){void 0===Lt&&(Lt=Pi);var Yt=_t.call(this)||this;return Yt.isAnimationClip=!0,Yt.looping=Pi.looping,Yt.weight=Pi.weight,Yt.playing=!1,Yt.shouldReset=!1,Yt.speed=Pi.speed,Yt.name=f("AnimClip"),Yt.layer=Pi.layer,Yt.clip=Ft,Yt.setParams(o({},Lt)),Yt}return i(e,_t),e.prototype.setParams=function(_t){return this.looping=void 0!==_t.looping?_t.looping:this.looping,this.speed=_t.speed||this.speed,this.weight=_t.weight||this.weight,this.layer=_t.layer||this.layer,this},e.prototype.toJSON=function(){var Ft=JSON.parse(JSON.stringify(_t.prototype.toJSON.call(this)));return this.shouldReset&&(this.shouldReset=!1),Ft},e.prototype.play=function(_t){var Ft;void 0===_t&&(_t=!1),null===(Ft=this.owner)||void 0===Ft||Ft.play(this,_t)},e.prototype.pause=function(){var _t;null===(_t=this.owner)||void 0===_t||_t.pause(this)},e.prototype.reset=function(){this.shouldReset=!0},e.prototype.stop=function(){var _t;null===(_t=this.owner)||void 0===_t||_t.stop(this)},r([Ue.readonly,s("design:type",String)],e.prototype,"clip",void 0),r([Ue.field,s("design:type",Boolean)],e.prototype,"looping",void 0),r([Ue.field,s("design:type",Number)],e.prototype,"weight",void 0),r([Ue.field,s("design:type",Boolean)],e.prototype,"playing",void 0),r([Ue.field,s("design:type",Boolean)],e.prototype,"shouldReset",void 0),r([Ue.field,s("design:type",Number)],e.prototype,"speed",void 0),r([Ue.readonly,s("design:type",String)],e.prototype,"name",void 0),e}(Ue);_t.InputEventType=void 0,(Ni=_t.InputEventType||(_t.InputEventType={}))[Ni.DOWN=0]="DOWN",Ni[Ni.UP=1]="UP",_t.CameraMode=void 0,(Bi=_t.CameraMode||(_t.CameraMode={}))[Bi.FirstPerson=0]="FirstPerson",Bi[Bi.ThirdPerson=1]="ThirdPerson",Bi[Bi.BuildingToolGodMode=2]="BuildingToolGodMode",_t.LandRole=void 0,(Fi=_t.LandRole||(_t.LandRole={})).OWNER="owner",Fi.OPERATOR="operator",_t.ActionButton=void 0,(Oi=_t.ActionButton||(_t.ActionButton={})).POINTER="POINTER",Oi.PRIMARY="PRIMARY",Oi.SECONDARY="SECONDARY",Oi.ANY="ANY",Oi.FORWARD="FORWARD",Oi.BACKWARD="BACKWARD",Oi.RIGHT="RIGHT",Oi.LEFT="LEFT",Oi.JUMP="JUMP",Oi.WALK="WALK",Oi.ACTION_3="ACTION_3",Oi.ACTION_4="ACTION_4",Oi.ACTION_5="ACTION_5",Oi.ACTION_6="ACTION_6";var Li,zi,Ke=function(_t){if(this.callback=_t,!_t||!("apply"in _t)||!("call"in _t))throw new Error("Callback is not a function");Hi.ensureInstance()},Di=function(_t){function e(){return null!==_t&&_t.apply(this,arguments)||this}return i(e,_t),r([P("pointerDown")],e)}(Ke),Ui=function(_t){function e(){return null!==_t&&_t.apply(this,arguments)||this}return i(e,_t),r([P("pointerUp")],e)}(Ke),en=function(_t,Ft){this.fn=_t,this.useRaycast=Ft},Hi=function(){function e(){this.buttonIdMapping=[_t.ActionButton.POINTER,_t.ActionButton.PRIMARY,_t.ActionButton.SECONDARY,_t.ActionButton.ANY,_t.ActionButton.FORWARD,_t.ActionButton.BACKWARD,_t.ActionButton.RIGHT,_t.ActionButton.LEFT,_t.ActionButton.JUMP,_t.ActionButton.WALK,_t.ActionButton.ACTION_3,_t.ActionButton.ACTION_4,_t.ActionButton.ACTION_5,_t.ActionButton.ACTION_6],this.subscriptions=this.buttonIdMapping.reduce((function(_t,Ft){var Lt;return o(o({},_t),((Lt={})[Ft]={BUTTON_DOWN:[],BUTTON_UP:[]},Lt))}),{}),this.internalState=this.buttonIdMapping.reduce((function(_t,Ft){var Lt;return o(o({},_t),((Lt={})[Ft]={BUTTON_DOWN:!1},Lt))}),{})}return Object.defineProperty(e,"instance",{get:function(){return e.ensureInstance(),e._instance},enumerable:!1,configurable:!0}),e.ensureInstance=function(){e._instance||(e._instance=new e)},e.prototype.isButtonPressed=function(_t){return this.internalState[_t]},e.prototype.subscribe=function(_t,Ft,Lt,Yt){var Kt=this;return this.subscriptions[Ft][_t].push(new en(Yt,Lt)),function(){Kt.unsubscribe(_t,Ft,Yt)}},e.prototype.unsubscribe=function(_t,Ft,Lt){var Yt=this.getSubscriptionId(_t,Ft,Lt);return Yt>-1&&this.subscriptions[Ft][_t].splice(Yt,1)},e.prototype.handlePointerEvent=function(Ft){var Lt=this.getPointerById(Ft.buttonId);if(Lt){var Yt=o(o({},Ft),{button:Lt,direction:(new wn.Vector3).copyFrom(Ft.direction),origin:(new wn.Vector3).copyFrom(Ft.origin),hit:void 0}),Kt=Ft.hit?o(o({},Ft.hit),{hitPoint:(new wn.Vector3).copyFrom(Ft.hit.hitPoint),normal:(new wn.Vector3).copyFrom(Ft.hit.normal),worldNormal:(new wn.Vector3).copyFrom(Ft.hit.worldNormal)}):void 0;if(Ft.type===_t.InputEventType.DOWN){this.internalState[Lt].BUTTON_DOWN=!0;for(var Zt=0;Zt<this.subscriptions[Lt].BUTTON_DOWN.length;Zt++)(le=this.subscriptions[Lt].BUTTON_DOWN[Zt]).useRaycast?Yt.hit=Kt:Yt.hit=void 0,le.fn(Yt);Kt&&Kt.entityId&&N.engine&&(Ce=(ve=N.engine.entities[Kt.entityId])&&ve.getComponentOrNull(Di))&&(Yt.hit=Kt,Ce.callback(Yt))}else{for(this.internalState[Lt].BUTTON_DOWN=!1,Zt=0;Zt<this.subscriptions[Lt].BUTTON_UP.length;Zt++){var le;(le=this.subscriptions[Lt].BUTTON_UP[Zt]).useRaycast?Yt.hit=Kt:Yt.hit=void 0,le.fn(Yt)}var ve,Ce;Kt&&Kt.entityId&&N.engine&&(Ce=(ve=N.engine.entities[Kt.entityId])&&ve.getComponentOrNull(Ui))&&(Yt.hit=Kt,Ce.callback(Yt))}}},e.prototype.getSubscriptionId=function(_t,Ft,Lt){for(var Yt=0;Yt<this.subscriptions[Ft][_t].length;Yt++)if(this.subscriptions[Ft][_t][Yt].fn===Lt)return Yt;return-1},e.prototype.getPointerById=function(Ft){if(Ft<0||Ft>=this.buttonIdMapping.length)return null;var Lt=this.buttonIdMapping[Ft];return Lt===_t.ActionButton.ANY?null:Lt},e}();_t.CLASS_ID=void 0,(Li=_t.CLASS_ID||(_t.CLASS_ID={}))[Li.TRANSFORM=1]="TRANSFORM",Li[Li.UUID_CALLBACK=8]="UUID_CALLBACK",Li[Li.BOX_SHAPE=16]="BOX_SHAPE",Li[Li.SPHERE_SHAPE=17]="SPHERE_SHAPE",Li[Li.PLANE_SHAPE=18]="PLANE_SHAPE",Li[Li.CONE_SHAPE=19]="CONE_SHAPE",Li[Li.CYLINDER_SHAPE=20]="CYLINDER_SHAPE",Li[Li.TEXT_SHAPE=21]="TEXT_SHAPE",Li[Li.NFT_SHAPE=22]="NFT_SHAPE",Li[Li.UI_WORLD_SPACE_SHAPE=23]="UI_WORLD_SPACE_SHAPE",Li[Li.UI_SCREEN_SPACE_SHAPE=24]="UI_SCREEN_SPACE_SHAPE",Li[Li.UI_CONTAINER_RECT=25]="UI_CONTAINER_RECT",Li[Li.UI_CONTAINER_STACK=26]="UI_CONTAINER_STACK",Li[Li.UI_TEXT_SHAPE=27]="UI_TEXT_SHAPE",Li[Li.UI_INPUT_TEXT_SHAPE=28]="UI_INPUT_TEXT_SHAPE",Li[Li.UI_IMAGE_SHAPE=29]="UI_IMAGE_SHAPE",Li[Li.UI_SLIDER_SHAPE=30]="UI_SLIDER_SHAPE",Li[Li.CIRCLE_SHAPE=31]="CIRCLE_SHAPE",Li[Li.BILLBOARD=32]="BILLBOARD",Li[Li.ANIMATION=33]="ANIMATION",Li[Li.FONT=34]="FONT",Li[Li.UI_FULLSCREEN_SHAPE=40]="UI_FULLSCREEN_SHAPE",Li[Li.UI_BUTTON_SHAPE=41]="UI_BUTTON_SHAPE",Li[Li.GLTF_SHAPE=54]="GLTF_SHAPE",Li[Li.OBJ_SHAPE=55]="OBJ_SHAPE",Li[Li.AVATAR_SHAPE=56]="AVATAR_SHAPE",Li[Li.BASIC_MATERIAL=64]="BASIC_MATERIAL",Li[Li.PBR_MATERIAL=65]="PBR_MATERIAL",Li[Li.HIGHLIGHT_ENTITY=66]="HIGHLIGHT_ENTITY",Li[Li.SOUND=67]="SOUND",Li[Li.TEXTURE=68]="TEXTURE",Li[Li.VIDEO_CLIP=70]="VIDEO_CLIP",Li[Li.VIDEO_TEXTURE=71]="VIDEO_TEXTURE",Li[Li.AVATAR_TEXTURE=72]="AVATAR_TEXTURE",Li[Li.AUDIO_CLIP=200]="AUDIO_CLIP",Li[Li.AUDIO_SOURCE=201]="AUDIO_SOURCE",Li[Li.AUDIO_STREAM=202]="AUDIO_STREAM",Li[Li.GIZMOS=203]="GIZMOS",Li[Li.SMART_ITEM=204]="SMART_ITEM",Li[Li.AVATAR_MODIFIER_AREA=205]="AVATAR_MODIFIER_AREA",Li[Li.AVATAR_ATTACH=206]="AVATAR_ATTACH",Li[Li.CAMERA_MODE_AREA=207]="CAMERA_MODE_AREA",Li[Li.NAME=300]="NAME",Li[Li.LOCKED_ON_EDIT=301]="LOCKED_ON_EDIT",Li[Li.VISIBLE_ON_EDIT=302]="VISIBLE_ON_EDIT",_t.AvatarModifiers=void 0,(zi=_t.AvatarModifiers||(_t.AvatarModifiers={})).HIDE_AVATARS="HIDE_AVATARS",zi.DISABLE_PASSPORTS="DISABLE_PASSPORTS";var qi,Wi=function(Ft){function n(_t){var Lt=Ft.call(this)||this;return Lt.area=_t.area,Lt.modifiers=_t.modifiers,Lt.excludeIds=_t.excludeIds,Lt}return i(n,Ft),r([Ue.field,s("design:type",Object)],n.prototype,"area",void 0),r([Ue.field,s("design:type",Array)],n.prototype,"modifiers",void 0),r([Ue.field,s("design:type",Array)],n.prototype,"excludeIds",void 0),r([P("engine.avatarModifierArea",_t.CLASS_ID.AVATAR_MODIFIER_AREA),s("design:paramtypes",[Object])],n)}(Ue),ji=function(Ft){function n(_t){void 0===_t&&(_t={});var Lt=Ft.call(this)||this;return Lt.position=_t.position||wn.Vector3.Zero(),Lt.rotation=_t.rotation||wn.Quaternion.Identity,Lt.scale=_t.scale||new wn.Vector3(1,1,1),Lt}return i(n,Ft),Object.defineProperty(n.prototype,"eulerAngles",{get:function(){return this.rotation.eulerAngles},enumerable:!1,configurable:!0}),n.prototype.lookAt=function(_t,Ft){void 0===Ft&&(Ft=wn.MathTmp.staticUp);var Lt=new wn.Matrix;return wn.Matrix.LookAtLHToRef(this.position,_t,Ft,Lt),Lt.invert(),wn.Quaternion.FromRotationMatrixToRef(Lt,this.rotation),this},n.prototype.rotate=function(_t,Ft){return this.rotation.multiplyInPlace(this.rotation.angleAxis(Ft,_t)),this},n.prototype.translate=function(_t){return this.position.addInPlace(_t),this},r([Ue.field,s("design:type",wn.Vector3)],n.prototype,"position",void 0),r([Ue.field,s("design:type",wn.Quaternion)],n.prototype,"rotation",void 0),r([Ue.field,s("design:type",wn.Vector3)],n.prototype,"scale",void 0),r([P("engine.transform",_t.CLASS_ID.TRANSFORM),s("design:paramtypes",[Object])],n)}(Ue);_t.AttachToAvatarAnchorPointId=void 0,(qi=_t.AttachToAvatarAnchorPointId||(_t.AttachToAvatarAnchorPointId={}))[qi.Position=0]="Position",qi[qi.NameTag=1]="NameTag",qi[qi.LeftHand=2]="LeftHand",qi[qi.RightHand=3]="RightHand";var Gi,Vi=function(Ft){function n(Lt){void 0===Lt&&(Lt={});var Yt=Ft.call(this)||this;return Yt.avatarId=Lt.avatarId||"",Yt.anchorPointId=Lt.anchorPointId||_t.AttachToAvatarAnchorPointId.Position,Yt}return i(n,Ft),r([Ue.field,s("design:type",String)],n.prototype,"avatarId",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"anchorPointId",void 0),r([Ue.field,s("design:type",String)],n.prototype,"avatarSceneId",void 0),r([P("engine.transform",_t.CLASS_ID.AVATAR_ATTACH),s("design:paramtypes",[Object])],n)}(Ue),$i=function(Ft){function n(_t,Lt,Yt){void 0===_t&&(_t=!0),void 0===Lt&&(Lt=!0),void 0===Yt&&(Yt=!0);var Kt=Ft.call(this)||this;return Kt.x=!0,Kt.y=!0,Kt.z=!0,Kt.x=_t,Kt.y=Lt,Kt.z=Yt,Kt}return i(n,Ft),r([Ue.field,s("design:type",Boolean)],n.prototype,"x",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"y",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"z",void 0),r([P("engine.billboard",_t.CLASS_ID.BILLBOARD),s("design:paramtypes",[Boolean,Boolean,Boolean])],n)}(Ue),Xi=function(_t){function e(){var Ft=null!==_t&&_t.apply(this,arguments)||this;return Ft.withCollisions=!0,Ft.isPointerBlocker=!0,Ft.visible=!0,Ft}return i(e,_t),r([Ue.field,s("design:type",Boolean)],e.prototype,"withCollisions",void 0),r([Ue.field,s("design:type",Boolean)],e.prototype,"isPointerBlocker",void 0),r([Ue.field,s("design:type",Boolean)],e.prototype,"visible",void 0),e}(Ue),Yi=function(Ft){function n(){return null!==Ft&&Ft.apply(this,arguments)||this}return i(n,Ft),r([Ue.field,s("design:type",Array)],n.prototype,"uvs",void 0),r([N("engine.shape",_t.CLASS_ID.BOX_SHAPE)],n)}(Xi),Ki=function(Ft){function n(){return null!==Ft&&Ft.apply(this,arguments)||this}return i(n,Ft),r([N("engine.shape",_t.CLASS_ID.SPHERE_SHAPE)],n)}(Xi),Ji=function(Ft){function n(){return null!==Ft&&Ft.apply(this,arguments)||this}return i(n,Ft),r([Ue.field,s("design:type",Number)],n.prototype,"segments",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"arc",void 0),r([N("engine.shape",_t.CLASS_ID.CIRCLE_SHAPE)],n)}(Xi),Qi=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.width=1,_t.height=1,_t}return i(n,Ft),r([Ue.field,s("design:type",Number)],n.prototype,"width",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"height",void 0),r([Ue.field,s("design:type",Array)],n.prototype,"uvs",void 0),r([N("engine.shape",_t.CLASS_ID.PLANE_SHAPE)],n)}(Xi),Zi=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.radiusTop=0,_t.radiusBottom=1,_t.segmentsHeight=1,_t.segmentsRadial=36,_t.openEnded=!1,_t.radius=null,_t.arc=360,_t}return i(n,Ft),r([Ue.field,s("design:type",Number)],n.prototype,"radiusTop",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"radiusBottom",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"segmentsHeight",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"segmentsRadial",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"openEnded",void 0),r([Ue.field,s("design:type",Object)],n.prototype,"radius",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"arc",void 0),r([N("engine.shape",_t.CLASS_ID.CONE_SHAPE)],n)}(Xi),tr=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.radiusTop=1,_t.radiusBottom=1,_t.segmentsHeight=1,_t.segmentsRadial=36,_t.openEnded=!1,_t.radius=null,_t.arc=360,_t}return i(n,Ft),r([Ue.field,s("design:type",Number)],n.prototype,"radiusTop",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"radiusBottom",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"segmentsHeight",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"segmentsRadial",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"openEnded",void 0),r([Ue.field,s("design:type",Object)],n.prototype,"radius",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"arc",void 0),r([N("engine.shape",_t.CLASS_ID.CYLINDER_SHAPE)],n)}(Xi),er=function(Ft){function n(_t){var Lt=Ft.call(this)||this;return Lt.src=_t,Lt}return i(n,Ft),r([Xi.readonly,s("design:type",String)],n.prototype,"src",void 0),r([N("engine.shape",_t.CLASS_ID.GLTF_SHAPE),s("design:paramtypes",[String])],n)}(Xi);_t.PictureFrameStyle=void 0,(Gi=_t.PictureFrameStyle||(_t.PictureFrameStyle={}))[Gi.Classic=0]="Classic",Gi[Gi.Baroque_Ornament=1]="Baroque_Ornament",Gi[Gi.Diamond_Ornament=2]="Diamond_Ornament",Gi[Gi.Minimal_Wide=3]="Minimal_Wide",Gi[Gi.Minimal_Grey=4]="Minimal_Grey",Gi[Gi.Blocky=5]="Blocky",Gi[Gi.Gold_Edges=6]="Gold_Edges",Gi[Gi.Gold_Carved=7]="Gold_Carved",Gi[Gi.Gold_Wide=8]="Gold_Wide",Gi[Gi.Gold_Rounded=9]="Gold_Rounded",Gi[Gi.Metal_Medium=10]="Metal_Medium",Gi[Gi.Metal_Wide=11]="Metal_Wide",Gi[Gi.Metal_Slim=12]="Metal_Slim",Gi[Gi.Metal_Rounded=13]="Metal_Rounded",Gi[Gi.Pins=14]="Pins",Gi[Gi.Minimal_Black=15]="Minimal_Black",Gi[Gi.Minimal_White=16]="Minimal_White",Gi[Gi.Tape=17]="Tape",Gi[Gi.Wood_Slim=18]="Wood_Slim",Gi[Gi.Wood_Wide=19]="Wood_Wide",Gi[Gi.Wood_Twigs=20]="Wood_Twigs",Gi[Gi.Canvas=21]="Canvas",Gi[Gi.None=22]="None";var nr,ir=function(Ft){function n(Lt,Yt){void 0===Yt&&(Yt={});var Kt=Ft.call(this)||this;Kt.src=Lt;var Zt=new wn.Color3(.6404918,.611472,.8584906),le=_t.PictureFrameStyle.Classic;return"r"in Yt?Zt=Yt:null!==Yt&&(Yt.color&&(Zt=Yt.color),Yt.style&&(le=Yt.style)),Kt.color=Zt,Kt.style=le,Kt}return i(n,Ft),r([Xi.readonly,s("design:type",String)],n.prototype,"src",void 0),r([Xi.readonly,s("design:type",Number)],n.prototype,"style",void 0),r([Ue.field,s("design:type",wn.Color3)],n.prototype,"color",void 0),r([N("engine.shape",_t.CLASS_ID.NFT_SHAPE),s("design:paramtypes",[String,Object])],n)}(Xi),rr=function(Ft){function n(_t,Lt){var Yt=Ft.call(this)||this,Kt=new RegExp("data:[a-z-]+/[a-z-]+;base64");if((_t.length>2048||Kt.test(_t))&&c(" Base64 textures will be deprecated in version 7 of decentraland-ecs"),Yt.src=_t,Lt)for(var Zt in Lt)Yt[Zt]=Lt[Zt];return Yt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"src",void 0),r([Ue.readonly,s("design:type",Number)],n.prototype,"samplingMode",void 0),r([Ue.readonly,s("design:type",Number)],n.prototype,"wrap",void 0),r([Ue.readonly,s("design:type",Boolean)],n.prototype,"hasAlpha",void 0),r([N("engine.texture",_t.CLASS_ID.TEXTURE),s("design:paramtypes",[String,Object])],n)}(Ue),or=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.states=[],_t}return i(n,Ft),n.prototype.addClip=function(_t){var Ft=this;return this.states.push(_t),_t.onChange((function(){Ft.dirty=!0})),_t.owner=this,this},n.prototype.getClip=function(_t){for(var Ft=0;Ft<this.states.length;Ft++){var Lt=this.states[Ft];if(Lt.clip===_t)return Lt}var Yt=new Mi(_t);return this.addClip(Yt),Yt},n.prototype.stop=function(_t){if(_t)_t.playing=!1,_t.shouldReset=!0;else for(var Ft=0;Ft<this.states.length;Ft++){var Lt=this.states[Ft];this.stop(Lt)}},n.prototype.play=function(_t,Ft){void 0===Ft&&(Ft=!1);for(var Lt=0;Lt<this.states.length;Lt++){var Yt=this.states[Lt];Yt.layer===_t.layer&&_t!==Yt&&this.pause(Yt)}Ft&&(_t.shouldReset=!0),_t.playing=!0,_t.dirty=!0,_t.data.nonce=Math.random()},n.prototype.pause=function(_t){if(_t)_t.playing=!1;else for(var Ft=0;Ft<this.states.length;Ft++){var Lt=this.states[Ft];this.pause(Lt)}},r([Ue.readonly,s("design:type",Array)],n.prototype,"states",void 0),r([P("engine.animator",_t.CLASS_ID.ANIMATION)],n)}(Xi),sr=function(Ft){function n(_t){var Lt=Ft.call(this)||this;return Lt.src=_t,Lt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"src",void 0),r([N("engine.shape",_t.CLASS_ID.OBJ_SHAPE),s("design:paramtypes",[String])],n)}(Xi),ar=function(Ft){function n(_t){void 0===_t&&(_t="");var Lt=Ft.call(this)||this;return Lt.src=_t,Lt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"src",void 0),r([N("engine.font",_t.CLASS_ID.FONT),s("design:paramtypes",[String])],n)}(Ue);_t.Fonts=void 0,(nr=_t.Fonts||(_t.Fonts={})).SanFrancisco="builtin:SF-UI-Text-Regular SDF",nr.SanFrancisco_Heavy="builtin:SF-UI-Text-Heavy SDF",nr.SanFrancisco_Semibold="builtin:SF-UI-Text-Semibold SDF",nr.LiberationSans="builtin:LiberationSans SDF",nr.SansSerif="SansSerif",nr.SansSerif_Heavy="SansSerif_Heavy",nr.SansSerif_Bold="SansSerif_Bold",nr.SansSerif_SemiBold="SansSerif_SemiBold";var cr,ur=function(Ft){function n(_t){var Lt=Ft.call(this)||this;return Lt.outlineWidth=0,Lt.outlineColor=new wn.Color3(1,1,1),Lt.color=new wn.Color3(1,1,1),Lt.fontSize=10,Lt.opacity=1,Lt.value="",Lt.lineSpacing="0px",Lt.lineCount=0,Lt.textWrapping=!1,Lt.shadowBlur=0,Lt.shadowOffsetX=0,Lt.shadowOffsetY=0,Lt.shadowColor=new wn.Color3(1,1,1),Lt.hTextAlign="center",Lt.vTextAlign="center",Lt.width=1,Lt.height=1,Lt.paddingTop=0,Lt.paddingRight=0,Lt.paddingBottom=0,Lt.paddingLeft=0,Lt.billboard=!1,Lt.visible=!0,_t&&(Lt.value=_t),Lt}return i(n,Ft),r([Ue.field,s("design:type",Number)],n.prototype,"outlineWidth",void 0),r([Ue.field,s("design:type",wn.Color3)],n.prototype,"outlineColor",void 0),r([Ue.field,s("design:type",wn.Color3)],n.prototype,"color",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([Ue.component,s("design:type",ar)],n.prototype,"font",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"opacity",void 0),r([Ue.field,s("design:type",String)],n.prototype,"value",void 0),r([Ue.field,s("design:type",String)],n.prototype,"lineSpacing",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"lineCount",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"textWrapping",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([Ue.field,s("design:type",wn.Color3)],n.prototype,"shadowColor",void 0),r([Ue.field,s("design:type",String)],n.prototype,"hTextAlign",void 0),r([Ue.field,s("design:type",String)],n.prototype,"vTextAlign",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"width",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"height",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"billboard",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"visible",void 0),r([P("engine.text",_t.CLASS_ID.TEXT_SHAPE),s("design:paramtypes",[String])],n)}(Ue);_t.TransparencyMode=void 0,(cr=_t.TransparencyMode||(_t.TransparencyMode={}))[cr.OPAQUE=0]="OPAQUE",cr[cr.ALPHA_TEST=1]="ALPHA_TEST",cr[cr.ALPHA_BLEND=2]="ALPHA_BLEND",cr[cr.ALPHA_TEST_AND_BLEND=3]="ALPHA_TEST_AND_BLEND",cr[cr.AUTO=4]="AUTO";var lr,dr=function(Ft){function n(){var Lt=null!==Ft&&Ft.apply(this,arguments)||this;return Lt.alphaTest=.5,Lt.castShadows=!0,Lt.transparencyMode=_t.TransparencyMode.AUTO,Lt}return i(n,Ft),r([Ue.field,s("design:type",Number)],n.prototype,"alphaTest",void 0),r([Ue.field,s("design:type",Object)],n.prototype,"albedoColor",void 0),r([Ue.field,s("design:type",wn.Color3)],n.prototype,"emissiveColor",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"metallic",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"roughness",void 0),r([Ue.field,s("design:type",wn.Color3)],n.prototype,"reflectivityColor",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"directIntensity",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"microSurface",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"emissiveIntensity",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"specularIntensity",void 0),r([Ue.component,s("design:type",Object)],n.prototype,"albedoTexture",void 0),r([Ue.component,s("design:type",Object)],n.prototype,"alphaTexture",void 0),r([Ue.component,s("design:type",Object)],n.prototype,"emissiveTexture",void 0),r([Ue.component,s("design:type",Object)],n.prototype,"bumpTexture",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"castShadows",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"transparencyMode",void 0),r([N("engine.material",_t.CLASS_ID.PBR_MATERIAL)],n)}(Ue),hr=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.alphaTest=.5,_t.castShadows=!0,_t}return i(n,Ft),r([Ue.component,s("design:type",Object)],n.prototype,"texture",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"alphaTest",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"castShadows",void 0),r([N("engine.material",_t.CLASS_ID.BASIC_MATERIAL)],n)}(Ue),pr=function(_t){function e(Ft){var Lt=_t.call(this)||this;if(Lt.uuid=f("UUID"),!Ft||!("apply"in Ft)||!("call"in Ft))throw new Error("Callback is not a function");return Lt.callback=Ft,Lt}return i(e,_t),e.uuidEvent=function(_t,Ft){if(delete _t[Ft]){var Lt=Ft+"_"+Math.random();_t[Lt]=void 0,Object.defineProperty(_t,Lt,o(o({},Object.getOwnPropertyDescriptor(_t,Lt)),{enumerable:!1})),Object.defineProperty(_t,Ft.toString(),{get:function(){return this[Lt]},set:function(_t){var Yt=this[Lt];if(_t){if(!(_t instanceof e))throw new Error("value is not an OnUUIDEvent");this.data[Ft]=_t.uuid}else this.data[Ft]=null;if(this[Lt]=_t,_t!==Yt){this.dirty=!0;for(var Kt=0;Kt<this.subscriptions.length;Kt++)this.subscriptions[Kt](Ft,_t,Yt)}},enumerable:!0})}},e.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type}},r([Ue.field,s("design:type",Function)],e.prototype,"callback",void 0),e}(Ue),fr=function(Ft){function n(){var Lt=null!==Ft&&Ft.apply(this,arguments)||this;return Lt.button=_t.ActionButton.ANY,Lt.hoverText="Interact",Lt.distance=10,Lt.showFeedback=!0,Lt}return i(n,Ft),n.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type,button:this.button,hoverText:this.hoverText,distance:this.distance,showFeedback:this.showFeedback}},r([Ue.field,s("design:type",String)],n.prototype,"button",void 0),r([Ue.field,s("design:type",String)],n.prototype,"hoverText",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"distance",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"showFeedback",void 0),n}(pr),mr=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.type="onPointerLock",_t}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onPointerLock",_t.CLASS_ID.UUID_CALLBACK)],n)}(pr),yr=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.type="onAnimationEnd",_t}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onAnimationEnd",_t.CLASS_ID.UUID_CALLBACK)],n)}(pr),gr=function(Ft){function n(){return null!==Ft&&Ft.apply(this,arguments)||this}return i(n,Ft),r([P("engine.smartItem",_t.CLASS_ID.SMART_ITEM)],n)}(Ue),br=function(Ft){function n(_t){var Lt=Ft.call(this)||this;return Lt.url=_t,Lt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"url",void 0),r([N("engine.VideoClip",_t.CLASS_ID.VIDEO_CLIP),s("design:paramtypes",[String])],n)}(Ue);_t.VideoStatus=void 0,(lr=_t.VideoStatus||(_t.VideoStatus={}))[lr.NONE=0]="NONE",lr[lr.ERROR=1]="ERROR",lr[lr.LOADING=2]="LOADING",lr[lr.READY=3]="READY",lr[lr.PLAYING=4]="PLAYING",lr[lr.BUFFERING=5]="BUFFERING";var vr,wr=function(Ft){function n(Lt,Yt){var Kt=Ft.call(this)||this;if(Kt.volume=1,Kt.playbackRate=1,Kt.loop=!1,Kt.seek=-1,Kt._position=-1,Kt._videoLength=-1,Kt._status=_t.VideoStatus.NONE,Kt.playing=!1,!(Lt instanceof br))throw new Error("Trying to create VideoTexture(VideoClip) with an invalid VideoClip");if(Kt.videoClipId=D(Lt),Yt)for(var Zt in Yt)Kt[Zt]=Yt[Zt];return Kt}return i(n,Ft),n.prototype.play=function(){this.playing=!0},n.prototype.pause=function(){this.playing=!1},n.prototype.reset=function(){this.seekTime(0),this.pause()},n.prototype.seekTime=function(_t){this.seek=_t,this.dirty=!0,this.data.nonce=Math.random()},n.prototype.toJSON=function(){if(this.seek>=0){var _t=JSON.parse(JSON.stringify(Ft.prototype.toJSON.call(this)));return this.seek=-1,_t}return Ft.prototype.toJSON.call(this)},n.prototype.update=function(Ft){Ft.videoClipId===this.videoClipId&&(this._status=Ft.videoStatus||_t.VideoStatus.NONE,this._videoLength=Ft.totalVideoLength,this._position=Ft.currentOffset)},Object.defineProperty(n.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"videoLength",{get:function(){return this._videoLength},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),r([Ue.readonly,s("design:type",String)],n.prototype,"videoClipId",void 0),r([Ue.readonly,s("design:type",Number)],n.prototype,"samplingMode",void 0),r([Ue.readonly,s("design:type",Number)],n.prototype,"wrap",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"volume",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"playbackRate",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"loop",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"seek",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"playing",void 0),r([N("engine.VideoTexture",_t.CLASS_ID.VIDEO_TEXTURE),s("design:paramtypes",[br,Object])],n)}(Ue),Tr=function(Ft){function n(_t){var Lt=Ft.call(this)||this;return Lt.area=_t.area,Lt.cameraMode=_t.cameraMode,Lt}return i(n,Ft),r([Ue.field,s("design:type",Object)],n.prototype,"area",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"cameraMode",void 0),r([P("engine.cameraModeArea",_t.CLASS_ID.CAMERA_MODE_AREA),s("design:paramtypes",[Object])],n)}(Ue),xr=function(Ft){function n(_t,Lt){var Yt=Ft.call(this)||this;if(Yt.userId=_t,Lt)for(var Kt in Lt)Yt[Kt]=Lt[Kt];return Yt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"userId",void 0),r([Ue.readonly,s("design:type",Number)],n.prototype,"samplingMode",void 0),r([Ue.readonly,s("design:type",Number)],n.prototype,"wrap",void 0),r([Ue.readonly,s("design:type",Boolean)],n.prototype,"hasAlpha",void 0),r([N("engine.texture",_t.CLASS_ID.AVATAR_TEXTURE),s("design:paramtypes",[String,Object])],n)}(Ue),Ar=function(){function e(){var Ft=this;this.position=new wn.Vector3,this.rotation=new wn.Quaternion,this.feetPosition=new wn.Vector3,this.worldPosition=new wn.Vector3,this.lastEventPosition={x:0,y:0,z:0},this.lastEventWorldPosition={x:0,y:0,z:0},this.lastEventRotation={x:0,y:0,z:0,w:1},this._playerHeight=1.6,this._cameraMode=_t.CameraMode.ThirdPerson,"undefined"!=typeof dcl&&(dcl.subscribe("positionChanged"),dcl.subscribe("rotationChanged"),dcl.subscribe("cameraModeChanged"),dcl.onEvent((function(_t){switch(_t.type){case"positionChanged":Ft.positionChanged(_t.data);break;case"rotationChanged":Ft.rotationChanged(_t.data);break;case"cameraModeChanged":Ft.cameraModeChanged(_t.data)}}))),Object.defineProperty(this.position,"x",{get:function(){return Ft.lastEventPosition.x}}),Object.defineProperty(this.position,"y",{get:function(){return Ft.lastEventPosition.y}}),Object.defineProperty(this.position,"z",{get:function(){return Ft.lastEventPosition.z}}),Object.defineProperty(this.worldPosition,"x",{get:function(){return Ft.lastEventWorldPosition.x}}),Object.defineProperty(this.worldPosition,"y",{get:function(){return Ft.lastEventWorldPosition.y}}),Object.defineProperty(this.worldPosition,"z",{get:function(){return Ft.lastEventWorldPosition.z}}),Object.defineProperty(this.feetPosition,"x",{get:function(){return Ft.lastEventPosition.x}}),Object.defineProperty(this.feetPosition,"y",{get:function(){return Ft.lastEventPosition.y-Ft.playerHeight}}),Object.defineProperty(this.feetPosition,"z",{get:function(){return Ft.lastEventPosition.z}}),Object.defineProperty(this.rotation,"x",{get:function(){return Ft.lastEventRotation.x}}),Object.defineProperty(this.rotation,"y",{get:function(){return Ft.lastEventRotation.y}}),Object.defineProperty(this.rotation,"z",{get:function(){return Ft.lastEventRotation.z}}),Object.defineProperty(this.rotation,"w",{get:function(){return Ft.lastEventRotation.w}})}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerHeight",{get:function(){return this._playerHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cameraMode",{get:function(){return this._cameraMode},enumerable:!1,configurable:!0}),e.prototype.positionChanged=function(_t){this.lastEventPosition=_t.position,this.lastEventWorldPosition=_t.cameraPosition,this._playerHeight=_t.playerHeight},e.prototype.rotationChanged=function(_t){this.lastEventRotation=_t.quaternion},e.prototype.cameraModeChanged=function(_t){this._cameraMode=_t.cameraMode},e}();!function(_t){_t.HitFirst="rqhf",_t.HitAll="rqha"}(vr||(vr={}));var Cr,_r=function(){function t(){this.queries={}}return Object.defineProperty(t,"instance",{get:function(){return t.ensureInstance(),t._instance},enumerable:!1,configurable:!0}),t.ensureInstance=function(){t._instance||(t._instance=new t)},t.prototype.getRayFromCamera=function(_t){var Ft=Ar.instance.rotation,Lt=wn.Matrix.Identity();Ft.toRotationMatrix(Lt);var Yt=wn.Vector3.TransformCoordinates(wn.Vector3.Forward(),Lt);return{origin:Ar.instance.position,direction:Yt,distance:_t}},t.prototype.getRayFromPositions=function(_t,Ft){var Lt=Ft.subtract(_t),Yt=Lt.length();return{origin:_t,direction:Lt.normalize(),distance:Yt}},t.prototype.hitFirst=function(_t,Ft,Lt){var Yt="number"==typeof Lt?vr.HitFirst+Lt:m();this.queries[Yt]=Ft,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:Yt,queryType:"HitFirst",ray:_t})},t.prototype.hitAll=function(_t,Ft,Lt){var Yt="number"==typeof Lt?vr.HitAll+Lt:m();this.queries[Yt]=Ft,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:Yt,queryType:"HitAll",ray:_t})},t.prototype.hitFirstAvatar=function(_t,Ft){c("not implemented yet")},t.prototype.hitAllAvatars=function(_t,Ft){c("not implemented yet")},t.prototype.handleRaycastHitFirstResponse=function(_t){this.queries[_t.payload.queryId](_t.payload.payload),delete this.queries[_t.payload.queryId]},t.prototype.handleRaycastHitAllResponse=function(_t){this.queries[_t.payload.queryId](_t.payload.payload),delete this.queries[_t.payload.queryId]},t}(),Sr=function(){function t(){}return t.prototype.activate=function(_t){_t.eventManager.addListener(Ze,this,(function(_t){"HitFirst"===_t.payload.queryType?_r.instance.handleRaycastHitFirstResponse(_t):"HitAll"===_t.payload.queryType&&_r.instance.handleRaycastHitAllResponse(_t)})),"undefined"!=typeof dcl&&dcl.subscribe("raycastResponse")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("raycastResponse")},t}(),Er=function(){function t(){}return t.prototype.activate=function(_t){_t.eventManager.addListener(tn,this,(function(_t){Hi.instance.handlePointerEvent(_t.payload)})),"undefined"!=typeof dcl&&(dcl.subscribe("pointerUp"),dcl.subscribe("pointerDown"),dcl.subscribe("actionButtonEvent"))},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&(dcl.unsubscribe("pointerUp"),dcl.unsubscribe("pointerDown"),dcl.unsubscribe("actionButtonEvent"))},t}(),kr=function(){function t(){this.handlerMap={}}return t.prototype.activate=function(_t){_t.eventManager.addListener(Qe,this,this.handleEvent),_t.eventManager.addListener(ve,this,this.componentAdded),_t.eventManager.addListener(le,this,this.componentRemoved),"undefined"!=typeof dcl&&dcl.subscribe("uuidEvent")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("uuidEvent")},t.prototype.onAddEntity=function(_t){for(var Ft in _t.components){var Lt=_t.components[Ft];Lt instanceof pr&&(this.handlerMap[Lt.uuid]=Lt)}},t.prototype.onRemoveEntity=function(_t){for(var Ft in _t.components){var Lt=_t.components[Ft];Lt instanceof pr&&delete this.handlerMap[Lt.uuid]}},t.prototype.componentAdded=function(_t){if(_t.entity.isAddedToEngine()){var Ft=_t.entity.components[_t.componentName];Ft instanceof pr&&(this.handlerMap[Ft.uuid]=Ft)}},t.prototype.componentRemoved=function(_t){_t.entity.isAddedToEngine()&&_t.component instanceof pr&&delete this.handlerMap[_t.component.uuid]},t.prototype.handleEvent=function(_t){if(_t.uuid in this.handlerMap){var Ft=this.handlerMap[_t.uuid];Ft&&Ft.callback&&"call"in Ft.callback&&Ft.callback(_t.payload)}},t}(),Ir=new Sr,Nr=new Er,Br=new kr,Fr=function(Ft){function n(_t){var Lt=Ft.call(this)||this;return Lt.loop=!1,Lt.volume=1,Lt.url=_t,Lt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"url",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"loop",void 0),r([Ue.field,s("design:type",String)],n.prototype,"loadingCompleteEventId",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"volume",void 0),r([N("engine.AudioClip",_t.CLASS_ID.AUDIO_CLIP),s("design:paramtypes",[String])],n)}(Ue),Or=function(Ft){function n(_t){var Lt=Ft.call(this)||this;if(Lt.audioClip=_t,Lt.loop=!1,Lt.volume=1,Lt.playing=!1,Lt.pitch=1,Lt.playedAtTimestamp=Date.now(),!(_t instanceof Fr))throw new Error("Trying to create AudioSource(AudioClip) with an invalid AudioClip");return Lt.audioClipId=D(_t),Lt}return i(n,Ft),n.prototype.playOnce=function(){return this.playing=!0,this.dirty=!0,this.playedAtTimestamp=Date.now(),this.data.nonce=Math.random(),this},r([Ue.readonly,s("design:type",String)],n.prototype,"audioClipId",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"loop",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"volume",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"playing",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"pitch",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"playedAtTimestamp",void 0),r([P("engine.AudioSource",_t.CLASS_ID.AUDIO_SOURCE),s("design:paramtypes",[Fr])],n)}(Ue),Rr=function(Ft){function n(_t){var Lt=Ft.call(this)||this;return Lt.playing=!1,Lt.volume=1,Lt.url=_t,Lt.playing=!0,Lt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"url",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"playing",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"volume",void 0),r([P("engine.AudioStream",_t.CLASS_ID.AUDIO_STREAM),s("design:paramtypes",[String])],n)}(Ue);_t.Gizmo=void 0,(Cr=_t.Gizmo||(_t.Gizmo={})).MOVE="MOVE",Cr.ROTATE="ROTATE",Cr.SCALE="SCALE",Cr.NONE="NONE";var Pr,Mr=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.type="gizmoEvent",_t}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.gizmoEvent",_t.CLASS_ID.UUID_CALLBACK)],n)}(pr),Lr=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.position=!0,_t.rotation=!0,_t.scale=!0,_t.cycle=!0,_t.localReference=!1,_t}return i(n,Ft),r([Ue.field,s("design:type",Boolean)],n.prototype,"position",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"rotation",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"scale",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"cycle",void 0),r([Ue.field,s("design:type",String)],n.prototype,"selectedGizmo",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"localReference",void 0),r([P("engine.gizmos",_t.CLASS_ID.GIZMOS)],n)}(Ue),zr=function(Ft){function n(_t){var Lt=Ft.call(this,_t)||this;return Lt.type="onFocus",Br.handlerMap[Lt.uuid]=Lt,Lt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onFocus",_t.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(pr),Dr=function(Ft){function n(_t){var Lt=Ft.call(this,_t)||this;return Lt.type="onTextSubmit",Br.handlerMap[Lt.uuid]=Lt,Lt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onTextSubmit",_t.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(pr),Ur=function(Ft){function n(_t){var Lt=Ft.call(this,_t)||this;return Lt.type="onBlur",Br.handlerMap[Lt.uuid]=Lt,Lt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onBlur",_t.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(pr),Hr=function(Ft){function n(_t){var Lt=Ft.call(this,_t)||this;return Lt.type="onEnter",Br.handlerMap[Lt.uuid]=Lt,Lt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onEnter",_t.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(pr),qr=function(Ft){function n(_t){var Lt=Ft.call(this,_t)||this;return Lt.type="onChange",Br.handlerMap[Lt.uuid]=Lt,Lt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onChange",_t.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(pr),Wr=function(Ft){function n(_t,Lt){var Yt=Ft.call(this,_t)||this;return Yt.type="onClick",Br.handlerMap[Yt.uuid]=Yt,Lt&&(Yt.showFeedback=!(!1===Lt.showFeedback),Lt.button&&(Yt.button=Lt.button),Lt.hoverText&&(Yt.hoverText=Lt.hoverText),Lt.distance&&(Yt.distance=Lt.distance)),Yt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onClick",_t.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(fr),jr=function(Ft){function n(_t,Lt){var Yt=Ft.call(this,_t)||this;return Yt.type="pointerDown",Br.handlerMap[Yt.uuid]=Yt,Lt&&(Yt.showFeedback=!(!1===Lt.showFeedback),Lt.button&&(Yt.button=Lt.button),Lt.hoverText&&(Yt.hoverText=Lt.hoverText),Lt.distance&&(Yt.distance=Lt.distance)),Yt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerDown",_t.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(fr),Gr=function(Ft){function n(_t,Lt){var Yt=Ft.call(this,_t)||this;return Yt.type="pointerUp",Br.handlerMap[Yt.uuid]=Yt,Lt&&(Yt.showFeedback=!(!1===Lt.showFeedback),Lt.button&&(Yt.button=Lt.button),Lt.hoverText&&(Yt.hoverText=Lt.hoverText),Lt.distance&&(Yt.distance=Lt.distance)),Yt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerUp",_t.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(fr),Vr=function(Ft){function n(_t,Lt){var Yt=Ft.call(this,_t)||this;return Yt.type="pointerHoverEnter",Br.handlerMap[Yt.uuid]=Yt,Lt&&Lt.distance&&(Yt.distance=Lt.distance),Yt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerHoverEnter",_t.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(fr),$r=function(Ft){function n(_t){var Lt=Ft.call(this,_t)||this;return Lt.type="pointerHoverExit",Br.handlerMap[Lt.uuid]=Lt,Lt.distance=160,Lt}return i(n,Ft),r([Ue.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerHoverExit",_t.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(fr),Xr=function(_t){function e(Ft){var Lt=_t.call(this)||this;return Lt.name=null,Lt.visible=!0,Lt.opacity=1,Lt.hAlign="center",Lt.vAlign="center",Lt.width="100px",Lt.height="50px",Lt.positionX="0px",Lt.positionY="0px",Lt.isPointerBlocker=!0,Ft&&(Lt._parent=Ft,Lt.data.parentComponent=D(Ft)),Lt}return i(e,_t),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentComponent",{get:function(){return this.data.parentComponent},enumerable:!1,configurable:!0}),r([Ue.field,s("design:type",Object)],e.prototype,"name",void 0),r([Ue.field,s("design:type",Boolean)],e.prototype,"visible",void 0),r([Ue.field,s("design:type",Number)],e.prototype,"opacity",void 0),r([Ue.field,s("design:type",String)],e.prototype,"hAlign",void 0),r([Ue.field,s("design:type",String)],e.prototype,"vAlign",void 0),r([Ue.uiValue,s("design:type",Object)],e.prototype,"width",void 0),r([Ue.uiValue,s("design:type",Object)],e.prototype,"height",void 0),r([Ue.uiValue,s("design:type",Object)],e.prototype,"positionX",void 0),r([Ue.uiValue,s("design:type",Object)],e.prototype,"positionY",void 0),r([Ue.field,s("design:type",Boolean)],e.prototype,"isPointerBlocker",void 0),e}(Ue),Yr=function(Ft){function n(){return Ft.call(this,null)||this}return i(n,Ft),r([N("engine.shape",_t.CLASS_ID.UI_FULLSCREEN_SHAPE),s("design:paramtypes",[])],n)}(Xr),Kr=function(Ft){function n(){return Ft.call(this,null)||this}return i(n,Ft),r([N("engine.shape",_t.CLASS_ID.UI_WORLD_SPACE_SHAPE),s("design:paramtypes",[])],n)}(Xr),Jr=function(Ft){function n(){return Ft.call(this,null)||this}return i(n,Ft),r([N("engine.shape",_t.CLASS_ID.UI_SCREEN_SPACE_SHAPE),s("design:paramtypes",[])],n)}(Xr),Qr=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.thickness=0,_t.color=wn.Color4.Clear(),_t.alignmentUsesSize=!0,_t}return i(n,Ft),r([Ue.field,s("design:type",Number)],n.prototype,"thickness",void 0),r([Ue.field,s("design:type",wn.Color4)],n.prototype,"color",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"alignmentUsesSize",void 0),r([N("engine.shape",_t.CLASS_ID.UI_CONTAINER_RECT)],n)}(Xr);_t.UIStackOrientation=void 0,(Pr=_t.UIStackOrientation||(_t.UIStackOrientation={}))[Pr.VERTICAL=0]="VERTICAL",Pr[Pr.HORIZONTAL=1]="HORIZONTAL";var Zr=function(Ft){function n(){var Lt=null!==Ft&&Ft.apply(this,arguments)||this;return Lt.adaptWidth=!0,Lt.adaptHeight=!0,Lt.color=wn.Color4.Clear(),Lt.stackOrientation=_t.UIStackOrientation.VERTICAL,Lt.spacing=0,Lt}return i(n,Ft),r([Ue.field,s("design:type",Boolean)],n.prototype,"adaptWidth",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"adaptHeight",void 0),r([Ue.field,s("design:type",wn.Color4)],n.prototype,"color",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"stackOrientation",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"spacing",void 0),r([N("engine.shape",_t.CLASS_ID.UI_CONTAINER_STACK)],n)}(Xr),to=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.fontSize=10,_t.fontWeight="normal",_t.thickness=0,_t.cornerRadius=0,_t.color=wn.Color4.White(),_t.background=wn.Color4.White(),_t.paddingTop=0,_t.paddingRight=0,_t.paddingBottom=0,_t.paddingLeft=0,_t.shadowBlur=0,_t.shadowOffsetX=0,_t.shadowOffsetY=0,_t.shadowColor=wn.Color4.Black(),_t.text="button",_t}return i(n,Ft),r([Ue.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([Ue.field,s("design:type",String)],n.prototype,"fontWeight",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"thickness",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"cornerRadius",void 0),r([Ue.field,s("design:type",wn.Color4)],n.prototype,"color",void 0),r([Ue.field,s("design:type",wn.Color4)],n.prototype,"background",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([Ue.field,s("design:type",wn.Color4)],n.prototype,"shadowColor",void 0),r([Ue.field,s("design:type",String)],n.prototype,"text",void 0),r([N("engine.shape",_t.CLASS_ID.UI_BUTTON_SHAPE)],n)}(Xr),eo=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.outlineWidth=0,_t.outlineColor=wn.Color4.White(),_t.color=wn.Color4.White(),_t.fontSize=10,_t.fontAutoSize=!1,_t.value="",_t.lineSpacing=0,_t.lineCount=0,_t.adaptWidth=!1,_t.adaptHeight=!1,_t.textWrapping=!1,_t.shadowBlur=0,_t.shadowOffsetX=0,_t.shadowOffsetY=0,_t.shadowColor=wn.Color4.Black(),_t.hTextAlign="left",_t.vTextAlign="bottom",_t.paddingTop=0,_t.paddingRight=0,_t.paddingBottom=0,_t.paddingLeft=0,_t}return i(n,Ft),r([Ue.field,s("design:type",Number)],n.prototype,"outlineWidth",void 0),r([Ue.field,s("design:type",wn.Color4)],n.prototype,"outlineColor",void 0),r([Ue.field,s("design:type",wn.Color4)],n.prototype,"color",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"fontAutoSize",void 0),r([Ue.component,s("design:type",ar)],n.prototype,"font",void 0),r([Ue.field,s("design:type",String)],n.prototype,"value",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"lineSpacing",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"lineCount",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"adaptWidth",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"adaptHeight",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"textWrapping",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([Ue.field,s("design:type",wn.Color4)],n.prototype,"shadowColor",void 0),r([Ue.field,s("design:type",String)],n.prototype,"hTextAlign",void 0),r([Ue.field,s("design:type",String)],n.prototype,"vTextAlign",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([N("engine.shape",_t.CLASS_ID.UI_TEXT_SHAPE)],n)}(Xr),no=function(Ft){function n(_t){var Lt=Ft.call(this,_t)||this;return Lt.outlineWidth=0,Lt.outlineColor=wn.Color4.Black(),Lt.color=wn.Color4.Clear(),Lt.fontSize=10,Lt.value="",Lt.placeholder="",Lt.margin=10,Lt.hTextAlign="left",Lt.vTextAlign="bottom",Lt.focusedBackground=wn.Color4.Black(),Lt.textWrapping=!1,Lt.shadowBlur=0,Lt.shadowOffsetX=0,Lt.shadowOffsetY=0,Lt.shadowColor=wn.Color4.White(),Lt.paddingTop=0,Lt.paddingRight=0,Lt.paddingBottom=0,Lt.paddingLeft=0,Lt.onTextSubmit=null,Lt.onChanged=null,Lt.onFocus=null,Lt.onBlur=null,Lt.onTextChanged=new qr((function(_t){var Ft=_t.value,Yt=Ft.value,Kt=Ft.isSubmit,Zt=Lt.dirty;if(Lt.value=Yt,Lt.dirty=Zt,Kt&&Lt.onTextSubmit){var le={text:Yt};Lt.onTextSubmit.callback(le)}else if(!Kt&&Lt.onChanged){var ve={value:Yt,pointerId:_t.pointerId};Lt.onChanged.callback(ve)}})),Lt}return i(n,Ft),r([Ue.field,s("design:type",Number)],n.prototype,"outlineWidth",void 0),r([Ue.field,s("design:type",wn.Color4)],n.prototype,"outlineColor",void 0),r([Ue.field,s("design:type",wn.Color4)],n.prototype,"color",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([Ue.component,s("design:type",ar)],n.prototype,"font",void 0),r([Ue.field,s("design:type",String)],n.prototype,"value",void 0),r([Ue.field,s("design:type",String)],n.prototype,"placeholder",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"margin",void 0),r([Ue.field,s("design:type",String)],n.prototype,"hTextAlign",void 0),r([Ue.field,s("design:type",String)],n.prototype,"vTextAlign",void 0),r([Ue.field,s("design:type",wn.Color4)],n.prototype,"focusedBackground",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"textWrapping",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([Ue.field,s("design:type",wn.Color4)],n.prototype,"shadowColor",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([pr.uuidEvent,s("design:type",qr)],n.prototype,"onTextChanged",void 0),r([pr.uuidEvent,s("design:type",Object)],n.prototype,"onFocus",void 0),r([pr.uuidEvent,s("design:type",Object)],n.prototype,"onBlur",void 0),r([N("engine.shape",_t.CLASS_ID.UI_INPUT_TEXT_SHAPE),s("design:paramtypes",[Object])],n)}(Xr),io=function(Ft){function n(_t,Lt){var Yt=Ft.call(this,_t)||this;return Yt.sourceLeft=0,Yt.sourceTop=0,Yt.sourceWidth=1,Yt.sourceHeight=1,Yt.paddingTop=0,Yt.paddingRight=0,Yt.paddingBottom=0,Yt.paddingLeft=0,Yt.sizeInPixels=!0,Yt.onClick=null,Yt.source=Lt,Yt}return i(n,Ft),r([Ue.field,s("design:type",Number)],n.prototype,"sourceLeft",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"sourceTop",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"sourceWidth",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"sourceHeight",void 0),r([Ue.component,s("design:type",Object)],n.prototype,"source",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"sizeInPixels",void 0),r([pr.uuidEvent,s("design:type",Object)],n.prototype,"onClick",void 0),r([N("engine.shape",_t.CLASS_ID.UI_IMAGE_SHAPE),s("design:paramtypes",[Xr,Object])],n)}(Xr),ro=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.valueX=0,_t.valueY=0,_t.backgroundColor=wn.Color4.Clear(),_t.isHorizontal=!1,_t.isVertical=!1,_t.paddingTop=0,_t.paddingRight=0,_t.paddingBottom=0,_t.paddingLeft=0,_t.onChanged=null,_t}return i(n,Ft),r([Ue.field,s("design:type",Number)],n.prototype,"valueX",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"valueY",void 0),r([Ue.field,s("design:type",wn.Color4)],n.prototype,"backgroundColor",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"isHorizontal",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"isVertical",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([pr.uuidEvent,s("design:type",Object)],n.prototype,"onChanged",void 0),r([N("engine.shape",_t.CLASS_ID.UI_SLIDER_SHAPE)],n)}(Xr),oo=function(Ft){function n(){var _t=null!==Ft&&Ft.apply(this,arguments)||this;return _t.useDummyModel=!1,_t.talking=!1,_t}var Lt;return i(n,Ft),Lt=n,n.Dummy=function(){var _t=new Lt;return _t.useDummyModel=!0,_t},r([Ue.field,s("design:type",String)],n.prototype,"id",void 0),r([Ue.field,s("design:type",String)],n.prototype,"name",void 0),r([Ue.field,s("design:type",String)],n.prototype,"expressionTriggerId",void 0),r([Ue.field,s("design:type",Number)],n.prototype,"expressionTriggerTimestamp",void 0),r([Ue.field,s("design:type",String)],n.prototype,"bodyShape",void 0),r([Ue.field,s("design:type",Array)],n.prototype,"wearables",void 0),r([Ue.field,s("design:type",Object)],n.prototype,"skinColor",void 0),r([Ue.field,s("design:type",Object)],n.prototype,"hairColor",void 0),r([Ue.field,s("design:type",Object)],n.prototype,"eyeColor",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"useDummyModel",void 0),r([Ue.field,s("design:type",Boolean)],n.prototype,"talking",void 0),Lt=r([P("engine.avatarShape",_t.CLASS_ID.AVATAR_SHAPE)],n)}(Ue),so=null,ao=null,co=null;function Ri(){return co||(co=new Je),co}var uo=function(){function t(){var _t=this;this.messageQueue=[],this.connected=!1,this.flushing=!1,function(){if(!ao){(ao=dcl.loadModule("@decentraland/CommunicationsController",{})).then((function(_t){so=_t}));var _t=Ri();dcl.subscribe("comms"),dcl.onEvent((function(Ft){"comms"===Ft.type&&_t.notifyObservers(Ft.data)}))}return ao}().then((function(){_t.connected=!0,_t.flush()}))}return t.prototype.on=function(_t,Ft){return Ri().add((function(Lt){try{var Yt=JSON.parse(Lt.message);Yt.message===_t&&Ft(Yt.payload,Lt.sender)}catch(Lt){dcl.error("Error parsing comms message "+(Lt.message||""),Lt)}}))},t.prototype.sendRaw=function(_t){this.messageQueue.push(_t),this.connected&&this.flush()},t.prototype.emit=function(_t,Ft){var Lt=JSON.stringify({message:_t,payload:Ft});this.sendRaw(Lt),Ri().notifyObservers({message:Lt,sender:"self"})},t.prototype.flush=function(){var _t=this;if(0!==this.messageQueue.length&&this.connected&&so&&!this.flushing){var Ft=this.messageQueue.shift();this.flushing=!0,dcl.callRpc(so.rpcHandle,"send",[Ft]).then((function(Ft){_t.flushing=!1,_t.flush()}),(function(Ft){_t.flushing=!1,y("Error flushing MessageBus",Ft)}))}},t}(),lo=new qe("scene");lo.uuid="0";var ho=new We(lo);N.engine=ho,"undefined"!=typeof dcl&&(ho.addSystem(new bn(dcl),1/0),mt(dcl)),ho.addSystem(Br),ho.addSystem(Nr),ho.addSystem(Ir),_t.AVATAR_OBSERVABLE="AVATAR_OBSERVABLE",_t.Angle=wn.Angle,_t.AnimationState=Mi,_t.Animator=or,_t.Arc2=wn.Arc2,_t.AttachToAvatar=Vi,_t.Attachable=Ft,_t.AudioClip=Fr,_t.AudioSource=Or,_t.AudioStream=Rr,_t.AvatarModifierArea=Wi,_t.AvatarShape=oo,_t.AvatarTexture=xr,_t.Axis=wn.Axis,_t.BasicMaterial=hr,_t.BezierCurve=wn.BezierCurve,_t.Billboard=$i,_t.BoxShape=Yi,_t.Camera=Ar,_t.CameraModeArea=Tr,_t.CircleShape=Ji,_t.Color3=wn.Color3,_t.Color4=wn.Color4,_t.Component=P,_t.ComponentAdded=ve,_t.ComponentGroup=He,_t.ComponentRemoved=le,_t.ConeShape=Zi,_t.Curve3=wn.Curve3,_t.CylinderShape=tr,_t.DEG2RAD=wn.DEG2RAD,_t.DisposableComponent=N,_t.DisposableComponentCreated=Re,_t.DisposableComponentRemoved=Pe,_t.DisposableComponentUpdated=Le,_t.Engine=We,_t.Entity=qe,_t.Epsilon=wn.Epsilon,_t.EventConstructor=x,_t.EventManager=Kt,_t.Font=ar,_t.Frustum=wn.Frustum,_t.GLTFShape=er,_t.Gizmos=Lr,_t.GlobalPointerDown=Di,_t.GlobalPointerUp=Ui,_t.Input=Hi,_t.Material=dr,_t.Matrix=wn.Matrix,_t.MessageBus=uo,_t.MultiObserver=Ye,_t.NFTShape=ir,_t.OBJShape=sr,_t.Observable=Je,_t.ObservableComponent=Ue,_t.Observer=Y,_t.ObserverEventState=Xe,_t.OnAnimationEnd=yr,_t.OnBlur=Ur,_t.OnChanged=qr,_t.OnClick=Wr,_t.OnEnter=Hr,_t.OnFocus=zr,_t.OnGizmoEvent=Mr,_t.OnPointerDown=jr,_t.OnPointerHoverEnter=Vr,_t.OnPointerHoverExit=$r,_t.OnPointerLock=mr,_t.OnPointerUUIDEvent=fr,_t.OnPointerUp=Gr,_t.OnTextSubmit=Dr,_t.OnUUIDEvent=pr,_t.Orientation=wn.Orientation,_t.ParentChanged=Ce,_t.Path2=wn.Path2,_t.Path3D=wn.Path3D,_t.PhysicsCast=_r,_t.Plane=wn.Plane,_t.PlaneShape=Qi,_t.PointerEvent=tn,_t.PointerEventComponent=Ke,_t.PointerEventSystem=Er,_t.Quaternion=wn.Quaternion,_t.RAD2DEG=wn.RAD2DEG,_t.RaycastEventSystem=Sr,_t.RaycastResponse=Ze,_t.Scalar=wn.Scalar,_t.Shape=Xi,_t.Size=wn.Size,_t.SmartItem=gr,_t.Space=wn.Space,_t.SphereShape=Ki,_t.Subscription=en,_t.TextShape=ur,_t.Texture=rr,_t.ToGammaSpace=wn.ToGammaSpace,_t.ToLinearSpace=wn.ToLinearSpace,_t.Transform=ji,_t.UIButton=to,_t.UICanvas=Jr,_t.UIContainerRect=Qr,_t.UIContainerStack=Zr,_t.UIFullScreen=Yr,_t.UIImage=io,_t.UIInputText=no,_t.UIScrollRect=ro,_t.UIShape=Xr,_t.UIText=eo,_t.UIValue=Se,_t.UIWorldSpace=Kr,_t.UUIDEvent=Qe,_t.UUIDEventSystem=kr,_t.Vector2=wn.Vector2,_t.Vector3=wn.Vector3,_t.Vector4=wn.Vector4,_t.VideoClip=br,_t.VideoTexture=wr,_t._initEventObservables=mt,_t.buildArray=function(_t,Ft){for(var Lt=[],Yt=0;Yt<_t;++Yt)Lt.push(Ft());return Lt},_t.engine=ho,_t.error=y,_t.executeTask=G,_t.getComponentClassId=L,_t.getComponentId=D,_t.getComponentName=F,_t.getMessageObserver=Ri,_t.isDisposableComponent=U,_t.log=c,_t.newId=f,_t.onCameraModeChangedObservable=nn,_t.onEnterScene=sn,_t.onEnterSceneObservable=on,_t.onIdleStateChangedObservable=rn,_t.onLeaveScene=cn,_t.onLeaveSceneObservable=an,_t.onPlayerClickedObservable=gn,_t.onPlayerConnectedObservable=fn,_t.onPlayerDisconnectedObservable=mn,_t.onPlayerExpressionObservable=ln,_t.onPointerLockedStateChange=dn,_t.onProfileChanged=pn,_t.onRealmChangedObservable=yn,_t.onSceneReadyObservable=un,_t.onVideoEvent=hn,_t.openExternalURL=function(_t){"undefined"!=typeof dcl?dcl.openExternalUrl(_t):y("ERROR: openExternalURL dcl is undefined")},_t.openNFTDialog=function(_t,Ft){if(void 0===Ft&&(Ft=null),"undefined"!=typeof dcl){var Lt=_t.match(/ethereum:\/\/(.+)\/(.+)/);if(!Lt||Lt.length<3)return;dcl.openNFTDialog(Lt[1],Lt[2],Ft)}else y("ERROR: openNFTDialog dcl is undefined")},_t.pointerEventSystem=Nr,_t.raycastEventSystem=Ir,_t.teleportTo=function(_t){var Ft;Ft=[_t],void 0===Ve&&"undefined"!=typeof dcl&&(Ve=dcl.loadModule("@decentraland/UserActionModule",{})),void 0!==Ve&&"undefined"!=typeof dcl&&Ve.then((function(_t){dcl.callRpc(_t.rpcHandle,"requestTeleport",Ft)}))},_t.uuid=m,_t.uuidEventSystem=Br,Object.defineProperty(_t,"__esModule",{value:!0})}(this.self=this.self||{}),define("@dcl/crypto-scene-utils",["exports","@decentraland/EthereumController","@decentraland/EnvironmentAPI","eth-connect","@decentraland/web3-provider","@dcl/ecs-scene-utils"],(function(_t,Ft,Lt,Yt,Kt,Zt){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var le,ve,Ce,Se,Ie,Ne,p=function(){return(p=Object.assign||function(_t){for(var Ft,Lt=1,Yt=arguments.length;Lt<Yt;Lt++)for(var Kt in Ft=arguments[Lt])Object.prototype.hasOwnProperty.call(Ft,Kt)&&(_t[Kt]=Ft[Kt]);return _t}).apply(this,arguments)};function y(_t,Ft,Lt,Yt){return new(Lt||(Lt=Promise))((function(Kt,Zt){function r(_t){try{o(Yt.next(_t))}catch(_t){Zt(_t)}}function d(_t){try{o(Yt.throw(_t))}catch(_t){Zt(_t)}}function o(_t){var Ft;_t.done?Kt(_t.value):(Ft=_t.value,Ft instanceof Lt?Ft:new Lt((function(_t){_t(Ft)}))).then(r,d)}o((Yt=Yt.apply(_t,Ft||[])).next())}))}function b(_t,Ft){var Lt,Yt,Kt,Zt,le={label:0,sent:function(){if(1&Kt[0])throw Kt[1];return Kt[1]},trys:[],ops:[]};return Zt={next:d(0),throw:d(1),return:d(2)},"function"==typeof Symbol&&(Zt[Symbol.iterator]=function(){return this}),Zt;function d(Zt){return function(ve){return function(Zt){if(Lt)throw new TypeError("Generator is already executing.");for(;le;)try{if(Lt=1,Yt&&(Kt=2&Zt[0]?Yt.return:Zt[0]?Yt.throw||((Kt=Yt.return)&&Kt.call(Yt),0):Yt.next)&&!(Kt=Kt.call(Yt,Zt[1])).done)return Kt;switch(Yt=0,Kt&&(Zt=[2&Zt[0],Kt.value]),Zt[0]){case 0:case 1:Kt=Zt;break;case 4:return le.label++,{value:Zt[1],done:!1};case 5:le.label++,Yt=Zt[1],Zt=[0];continue;case 7:Zt=le.ops.pop(),le.trys.pop();continue;default:if(!((Kt=(Kt=le.trys).length>0&&Kt[Kt.length-1])||6!==Zt[0]&&2!==Zt[0])){le=0;continue}if(3===Zt[0]&&(!Kt||Zt[1]>Kt[0]&&Zt[1]<Kt[3])){le.label=Zt[1];break}if(6===Zt[0]&&le.label<Kt[1]){le.label=Kt[1],Kt=Zt;break}if(Kt&&le.label<Kt[2]){le.label=Kt[2],le.ops.push(Zt);break}Kt[2]&&le.ops.pop(),le.trys.pop();continue}Zt=Ft.call(_t,le)}catch(_t){Zt=[6,_t],Yt=0}finally{Lt=Kt=0}if(5&Zt[0])throw Zt[1];return{value:Zt[0]?Zt[1]:void 0,done:!0}}([Zt,ve])}}}function m(_t){var Ft="function"==typeof Symbol&&Symbol.iterator,Lt=Ft&&_t[Ft],Yt=0;if(Lt)return Lt.call(_t);if(_t&&"number"==typeof _t.length)return{next:function(){return _t&&Yt>=_t.length&&(_t=void 0),{value:_t&&_t[Yt++],done:!_t}}};throw new TypeError(Ft?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(_t,Ft){var Lt="function"==typeof Symbol&&_t[Symbol.iterator];if(!Lt)return _t;var Yt,Kt,Zt=Lt.call(_t),le=[];try{for(;(void 0===Ft||Ft-- >0)&&!(Yt=Zt.next()).done;)le.push(Yt.value)}catch(_t){Kt={error:_t}}finally{try{Yt&&!Yt.done&&(Lt=Zt.return)&&Lt.call(Zt)}finally{if(Kt)throw Kt.error}}return le}function x(){for(var _t=[],Ft=0;Ft<arguments.length;Ft++)_t=_t.concat(f(arguments[Ft]));return _t}function v(){return Lt.getCurrentRealm().then((function(_t){return"http://127.0.0.1:8000"!=_t.domain?_t.domain:"https://peer.decentraland.org"}))}function g(_t,Ft){var Lt=Ft.id,Yt=Ft.data,Kt=Ft.rarity,Zt=Ft.i18n,le=Ft.thumbnail,ve=Ft.image,Ce=Yt.category,Se=Yt.tags,Ne=Yt.hides,Fe=Yt.replaces,Re=Yt.representations.map(T),Pe=le.substring(le.lastIndexOf("/")+1),Le=ve?ve.substring(ve.lastIndexOf("/")+1):void 0;return{id:Lt,type:Ie.Wearable,category:Ce,tags:Se,hides:Ne,replaces:Fe,rarity:Kt,representations:Re,i18n:Zt,thumbnail:Pe,image:Le,baseUrl:_t+"/content/contents/"}}function T(_t){var Ft=_t.contents,Lt=_t.bodyShapes,Yt=function(_t,Ft){var Lt={};for(var Yt in _t)Object.prototype.hasOwnProperty.call(_t,Yt)&&Ft.indexOf(Yt)<0&&(Lt[Yt]=_t[Yt]);if(null!=_t&&"function"==typeof Object.getOwnPropertySymbols){var Kt=0;for(Yt=Object.getOwnPropertySymbols(_t);Kt<Yt.length;Kt++)Ft.indexOf(Yt[Kt])<0&&Object.prototype.propertyIsEnumerable.call(_t,Yt[Kt])&&(Lt[Yt[Kt]]=_t[Yt[Kt]])}return Lt}(_t,["contents","bodyShapes"]),Kt=Ft.map((function(_t){var Ft=_t.key,Lt=_t.url;return{file:Ft,hash:Lt.substring(Lt.lastIndexOf("/")+1)}}));return p(p({},Yt),{bodyShapes:Lt,contents:Kt})}function h(_t){return y(this,void 0,void 0,(function(){var Lt,Yt;return b(this,(function(Kt){switch(Kt.label){case 0:return _t?(Yt="https://peer.decentraland.org",[3,3]):[3,1];case 1:return[4,v()];case 2:Yt=Kt.sent(),Kt.label=3;case 3:return Lt=Yt,_t?[3,5]:[4,Ft.getUserAccount().then((function(_t){return _t.toLowerCase()}))];case 4:_t=Kt.sent(),Kt.label=5;case 5:return[4,fetch(Lt+"/content/entities/profiles?pointer="+(null==_t?void 0:_t.toLowerCase())).then((function(_t){return _t.json()})).then((function(_t){return _t.length?_t[0]:_t}))];case 6:return[2,Kt.sent()]}}))}))}function _(_t){return y(this,void 0,void 0,(function(){var Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Ne,Fe;return b(this,(function(Re){switch(Re.label){case 0:return _t?[3,2]:[4,Ft.getUserAccount()];case 1:_t=Re.sent(),Re.label=2;case 2:return[4,v()];case 3:return Lt=Re.sent(),[4,fetch(Lt+"/lambdas/collections/wearables-by-owner/"+_t)];case 4:return[4,Re.sent().json()];case 5:Yt=Re.sent(),Kt=[];try{for(Zt=m(Yt),le=Zt.next();!le.done;le=Zt.next())for(ve=le.value,Ce=ve.urn,Se=ve.amount,Ie=0;Ie<Se;Ie++)Kt.push(Ce)}catch(_t){Ne={error:_t}}finally{try{le&&!le.done&&(Fe=Zt.return)&&Fe.call(Zt)}finally{if(Ne)throw Ne.error}}return[2,Kt]}}))}))}function w(_t){return y(this,void 0,void 0,(function(){var Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Ne,Fe,Re;return b(this,(function(Pe){switch(Pe.label){case 0:return _t?[3,2]:[4,Ft.getUserAccount()];case 1:_t=Pe.sent(),Pe.label=2;case 2:return[4,v()];case 3:return Lt=Pe.sent(),[4,fetch(Lt+"/lambdas/collections/wearables-by-owner/"+_t+"?includeDefinitions")];case 4:return[4,Pe.sent().json()];case 5:Yt=Pe.sent(),Kt=[];try{for(Zt=m(Yt),le=Zt.next();!le.done;le=Zt.next())if(ve=le.value,Ce=ve.definition,Se=ve.amount,Ce)for(Ie=g(Lt,Ce),Ne=0;Ne<Se;Ne++)Kt.push(Ie)}catch(_t){Fe={error:_t}}finally{try{le&&!le.done&&(Re=Zt.return)&&Re.call(Zt)}finally{if(Fe)throw Fe.error}}return[2,Kt]}}))}))}function A(_t,Ft){return void 0===Ft&&(Ft=!1),y(this,void 0,void 0,(function(){var Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Ne,Fe,Re,Pe;return b(this,(function(Le){switch(Le.label){case 0:return Lt=_t.map(I),Ft?[4,M()]:[3,2];case 1:Yt=Le.sent(),Kt=Yt.map(I);try{for(Zt=m(Kt),le=Zt.next();!le.done;le=Zt.next())if(Ie=le.value,-1!=Lt.indexOf(Ie))return[2,!0]}catch(_t){Ne={error:_t}}finally{try{le&&!le.done&&(Fe=Zt.return)&&Fe.call(Zt)}finally{if(Ne)throw Ne.error}}return[3,4];case 2:return[4,_()];case 3:ve=Le.sent();try{for(Ce=m(ve),Se=Ce.next();!Se.done;Se=Ce.next())if(Ie=Se.value,-1!=Lt.indexOf(Ie))return[2,!0]}catch(_t){Re={error:_t}}finally{try{Se&&!Se.done&&(Pe=Ce.return)&&Pe.call(Ce)}finally{if(Re)throw Re.error}}Le.label=4;case 4:return[2,!1]}}))}))}function M(){var _t;return y(this,void 0,void 0,(function(){var Ft;return b(this,(function(Lt){switch(Lt.label){case 0:return[4,h()];case 1:return Ft=Lt.sent(),[2,null===(_t=Ft.metadata.avatars[0])||void 0===_t?void 0:_t.avatar.wearables]}}))}))}!function(_t){_t.BodyShape="body_shape",_t.Earring="earring",_t.Empty="",_t.Eyebrows="eyebrows",_t.Eyes="eyes",_t.Eyewear="eyewear",_t.FacialHair="facial_hair",_t.Feet="feet",_t.Hair="hair",_t.Hat="hat",_t.Head="head",_t.Helmet="helmet",_t.LowerBody="lower_body",_t.Mask="mask",_t.Mouth="mouth",_t.Tiara="tiara",_t.TopHead="top_head",_t.UpperBody="upper_body"}(le||(le={})),function(_t){_t.En="en",_t.Es="es"}(ve||(ve={})),function(_t){_t.Unique="unique",_t.Legendary="legendary",_t.Mythic="mythic",_t.Epic="epic",_t.Rare="rare",_t.Uncommon="uncommon",_t.Common="common"}(Ce||(Ce={})),function(_t){_t.Basefemale="Basefemale",_t.DCLBaseAvatarsBaseFemale="dcl://base-avatars/BaseFemale",_t.DCLBaseAvatarsBaseMale="dcl://base-avatars/BaseMale"}(Se||(Se={})),function(_t){_t.Wearable="wearable"}(Ie||(Ie={})),function(_t){_t[_t.none=0]="none",_t[_t.common=1]="common",_t[_t.uncommon=2]="uncommon",_t[_t.rare=3]="rare",_t[_t.epic=4]="epic",_t[_t.mythic=5]="mythic",_t[_t.legendary=6]="legendary",_t[_t.unique=7]="unique"}(Ne||(Ne={}));var Fe=0;function k(_t){var Ft=0;switch(_t){case"common":Ft=1;break;case"uncommon":Ft=2;break;case"rare":Ft=3;break;case"epic":Ft=4;break;case"mythic":Ft=5;break;case"legendary":Ft=6;break;case"unique":Ft=7}Ft>Fe&&(Fe=Ft)}function I(_t){if(_t.indexOf("dcl://")<0)return _t;var Ft=f(_t.replace("dcl://","").split("/"),2),Lt=Ft[0],Yt=Ft[1];return"base-avatars"===Lt?"urn:decentraland:off-chain:base-avatars:"+Yt:"urn:decentraland:ethereum:collections-v1:"+Lt+":"+Yt}var Re=Object.freeze({__proto__:null,getUserInfo:h,getUserInventory:_,getUserFullInventory:w,itemInInventory:function(_t,Ft){return void 0===Ft&&(Ft=!1),A([_t],Ft)},itemsInInventory:A,equipedItems:M,rarestItem:function(_t){var Ft;return void 0===_t&&(_t=!1),y(this,void 0,void 0,(function(){var Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Re,Pe,Le,Ue,He,qe,We;return b(this,(function(Ge){switch(Ge.label){case 0:return[4,h()];case 1:return Lt=Ge.sent(),[4,w()];case 2:if(Yt=Ge.sent(),!Lt||!Yt)return[2,Ne.none];if(_t)try{for(Kt=m(null===(Ft=Lt.metadata.avatars[0])||void 0===Ft?void 0:Ft.avatar.wearables),Zt=Kt.next();!Zt.done;Zt=Kt.next()){le=Zt.value;try{for(Ue=void 0,ve=m(Yt),Ce=ve.next();!Ce.done;Ce=ve.next())Re=Ce.value,le==Re.id&&Re.rarity&&k(Re.rarity)}catch(_t){Ue={error:_t}}finally{try{Ce&&!Ce.done&&(He=ve.return)&&He.call(ve)}finally{if(Ue)throw Ue.error}}}}catch(_t){Pe={error:_t}}finally{try{Zt&&!Zt.done&&(Le=Kt.return)&&Le.call(Kt)}finally{if(Pe)throw Pe.error}}else try{for(Se=m(Yt),Ie=Se.next();!Ie.done;Ie=Se.next())(Re=Ie.value).rarity&&k(Re.rarity)}catch(_t){qe={error:_t}}finally{try{Ie&&!Ie.done&&(We=Se.return)&&We.call(Se)}finally{if(qe)throw qe.error}}return log(Ne[Fe]),[2,Fe]}}))}))},updateRarity:k,getPlayerSnapshots:function(_t){return y(this,void 0,void 0,(function(){var Ft,Lt;return b(this,(function(Yt){switch(Yt.label){case 0:return _t?[3,2]:[4,h()];case 1:Ft=Yt.sent(),_t=Ft.id,Yt.label=2;case 2:return[4,v()];case 3:return Lt=Yt.sent(),[4,fetch(Lt+"/lambdas/profiles?field=snapshots&id="+_t.toLowerCase()).then((function(_t){return _t.json()})).then((function(_t){return _t[0].avatars.length?_t[0].avatars[0].avatar.snapshots:null}))];case 4:return[2,Yt.sent()]}}))}))}}),Pe=Object.freeze({__proto__:null,signMessage:function(_t){return y(this,void 0,void 0,(function(){var Lt,Yt,Kt,Zt;return b(this,(function(le){switch(le.label){case 0:return[4,Ft.convertMessageToObject(_t)];case 1:return Lt=le.sent(),[4,Ft.signMessage(Lt)];case 2:return Yt=le.sent(),Kt=Yt.message,Zt=Yt.signature,[2,{message:Kt,signature:Zt}]}}))}))}}),Le=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];function S(_t){return new Promise((function(Ft,Lt){var Yt=new Entity;engine.addEntity(Yt),Yt.addComponent(new Zt.Delay(_t,(function(){Ft(),engine.removeEntity(Yt)})))}))}function N(_t){return y(this,void 0,void 0,(function(){var Ft,Lt;return b(this,(function(Zt){switch(Zt.label){case 0:return[4,Kt.getProvider()];case 1:return Ft=Zt.sent(),Lt=new Yt.RequestManager(Ft),[4,new Yt.ContractFactory(Lt,Le).at(_t)];case 2:return[2,{contract:Zt.sent(),provider:Ft,requestManager:Lt}]}}))}))}function L(_t,Lt,Yt,Kt){return void 0===Kt&&(Kt=!1),y(this,void 0,void 0,(function(){var Zt,le,ve,Ce,Se,Ie;return b(this,(function(Ne){switch(Ne.label){case 0:return[4,N(_t)];case 1:return Zt=Ne.sent(),le=Zt.contract,ve=Zt.requestManager,[4,Ft.getUserAccount()];case 2:return Ce=Ne.sent(),[4,le.transfer(Lt.toLowerCase(),Yt,{from:Ce})];case 3:if(Se=Ne.sent(),Ie=null,!Kt)return[3,8];Ne.label=4;case 4:return null!=Ie?[3,7]:[4,S(2e3)];case 5:return Ne.sent(),[4,ve.eth_getTransactionReceipt(Se.toString())];case 6:return Ie=Ne.sent(),[3,4];case 7:return[2,Ie];case 8:return[2,Se]}}))}))}function D(_t,Ft,Lt){return y(this,void 0,void 0,(function(){return b(this,(function(Yt){switch(Yt.label){case 0:return[4,N(_t)];case 1:return[4,Yt.sent().contract.allowance(Ft,Lt)];case 2:return[2,+Yt.sent()>1e24]}}))}))}function P(_t,Lt,Yt,Kt){return void 0===Yt&&(Yt=!1),void 0===Kt&&(Kt="0x0000000000000000001000000000000000000000000000000000000000000000"),y(this,void 0,void 0,(function(){var Zt,le,ve,Ce,Se,Ie;return b(this,(function(Ne){switch(Ne.label){case 0:return[4,N(_t)];case 1:return Zt=Ne.sent(),le=Zt.contract,ve=Zt.requestManager,[4,Ft.getUserAccount()];case 2:return Ce=Ne.sent(),[4,le.approve(Lt,Kt,{from:Ce})];case 3:if(Se=Ne.sent(),Ie=null,!Yt)return[3,8];Ne.label=4;case 4:return null!=Ie?[3,7]:[4,S(2e3)];case 5:return Ne.sent(),[4,ve.eth_getTransactionReceipt(Se.toString())];case 6:return Ie=Ne.sent(),[3,4];case 7:return[2,Ie];case 8:return[2,Se]}}))}))}function B(_t,Ft,Lt){return y(this,void 0,void 0,(function(){return b(this,(function(Yt){switch(Yt.label){case 0:return[4,N(_t)];case 1:return[4,Yt.sent().contract.allowance(Ft,Lt)];case 2:return[2,Yt.sent()]}}))}))}function F(_t,Ft){return y(this,void 0,void 0,(function(){return b(this,(function(Lt){switch(Lt.label){case 0:return[4,N(_t)];case 1:return[4,Lt.sent().contract.balanceOf(Ft)];case 2:return[2,Lt.sent()]}}))}))}var Ue=Object.freeze({__proto__:null,getContract:N,send:L,isApproved:D,setApproval:P,allowance:B,balance:F});function q(){return y(this,void 0,void 0,(function(){return b(this,(function(_t){switch(_t.label){case 0:return[4,Ft.getUserAccount()];case 1:return[2,F("0x0f5d2fb29fb7d3cfee444a200298f468908cc942",_t.sent())]}}))}))}var He=Object.freeze({__proto__:null,send:function(_t,Ft,Lt){return void 0===Lt&&(Lt=!1),L("0x0f5d2fb29fb7d3cfee444a200298f468908cc942",_t.toLowerCase(),+Yt.toWei(Ft.toString(),"ether").toString(),Lt)},myBalance:q,balance:function(_t){return y(this,void 0,void 0,(function(){return b(this,(function(Ft){return[2,F("0x0f5d2fb29fb7d3cfee444a200298f468908cc942",_t)]}))}))}}),qe=[{constant:!0,inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256[]",name:"_tokenIds",type:"uint256[]"}],name:"safeBatchTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address[]",name:"_beneficiaries",type:"address[]"},{internalType:"bytes32[]",name:"_wearableIds",type:"bytes32[]"}],name:"issueTokens",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256[]",name:"_tokenIds",type:"uint256[]"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"string",name:"_wearableId",type:"string"},{internalType:"uint256",name:"_maxIssuance",type:"uint256"}],name:"addWearable",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32[]",name:"_wearableIds",type:"bytes32[]"},{internalType:"uint256[]",name:"_maxIssuances",type:"uint256[]"}],name:"addWearables",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_operator",type:"address"},{internalType:"bool",name:"_allowed",type:"bool"}],name:"setAllowed",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"string",name:"_baseURI",type:"string"}],name:"setBaseURI",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_beneficiary",type:"address"},{internalType:"string",name:"_wearableId",type:"string"}],name:"issueToken",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"string",name:"_wearableId",type:"string"}],name:"getWearableKey",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"isComplete",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"wearables",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"issued",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"allowed",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"wearablesCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"maxIssuance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256[]",name:"_tokenIds",type:"uint256[]"}],name:"batchTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"completeCollection",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"address",name:"_operator",type:"address"},{internalType:"string",name:"_baseURI",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"_oldBaseURI",type:"string"},{indexed:!1,internalType:"string",name:"_newBaseURI",type:"string"}],name:"BaseURI",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_operator",type:"address"},{indexed:!1,internalType:"bool",name:"_allowed",type:"bool"}],name:"Allowed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"_wearableIdKey",type:"bytes32"},{indexed:!1,internalType:"string",name:"_wearableId",type:"string"},{indexed:!1,internalType:"uint256",name:"_maxIssuance",type:"uint256"}],name:"AddWearable",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_beneficiary",type:"address"},{indexed:!0,internalType:"uint256",name:"_tokenId",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"_wearableIdKey",type:"bytes32"},{indexed:!1,internalType:"string",name:"_wearableId",type:"string"},{indexed:!1,internalType:"uint256",name:"_issuedId",type:"uint256"}],name:"Issue",type:"event"},{anonymous:!1,inputs:[],name:"Complete",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"}];function z(_t){return y(this,void 0,void 0,(function(){var Ft,Lt;return b(this,(function(Zt){switch(Zt.label){case 0:return[4,Kt.getProvider()];case 1:return Ft=Zt.sent(),Lt=new Yt.RequestManager(Ft),[4,new Yt.ContractFactory(Lt,qe).at(_t)];case 2:return[2,{contract:Zt.sent(),provider:Ft,requestManager:Lt}]}}))}))}function W(_t,Ft,Lt){return void 0===Lt&&(Lt=!0),y(this,void 0,void 0,(function(){return b(this,(function(Yt){switch(Yt.label){case 0:return[4,z(_t)];case 1:return[4,Yt.sent().contract.setApprovalForAll(Ft,Lt)];case 2:return[2,!!Yt.sent()]}}))}))}function j(_t,Ft,Lt){return y(this,void 0,void 0,(function(){return b(this,(function(Yt){switch(Yt.label){case 0:return[4,z(_t)];case 1:return[4,Yt.sent().contract.isApprovedForAll(Ft,Lt)];case 2:return[2,!!Yt.sent()]}}))}))}var We=Object.freeze({__proto__:null,getContract:z,transfer:function(_t,Lt,Yt,Kt){return void 0===Kt&&(Kt=!1),y(this,void 0,void 0,(function(){var Zt,le,ve,Ce,Se,Ie;return b(this,(function(Ne){switch(Ne.label){case 0:return[4,z(_t)];case 1:return Zt=Ne.sent(),le=Zt.contract,ve=Zt.requestManager,[4,Ft.getUserAccount()];case 2:return Ce=Ne.sent(),[4,le.transferFrom(Ce.toLowerCase(),Lt.toLowerCase(),Yt,{from:Ce})];case 3:if(Se=Ne.sent(),Ie=null,!Kt)return[3,8];Ne.label=4;case 4:return null!=Ie?[3,7]:[4,S(2e3)];case 5:return Ne.sent(),[4,ve.eth_getTransactionReceipt(Se.toString())];case 6:return Ie=Ne.sent(),[3,4];case 7:return[2,Ie];case 8:return[2,Se]}}))}))},setApprovalForAll:W,isApprovedForAll:j,checkTokens:function(_t,Lt){return y(this,void 0,void 0,(function(){var Yt,Kt,Zt,le,ve,Ce,Se,Ie;return b(this,(function(Ne){switch(Ne.label){case 0:return[4,z(_t)];case 1:return Yt=Ne.sent().contract,[4,Ft.getUserAccount()];case 2:return Kt=Ne.sent(),[4,Yt.balanceOf(Kt)];case 3:return Zt=Ne.sent(),0!=Number(Zt)?[3,4]:[2,!1];case 4:if(!Lt)return[2,!0];le=!1,ve=0,Ne.label=5;case 5:return ve<Number(Zt)?(Se=Number,[4,Yt.tokenOfOwnerByIndex(Kt,ve)]):[3,8];case 6:if(Ce=Se.apply(void 0,[Ne.sent()]),"number"==typeof Lt){if(Ce==Lt)return le=!0,[3,8]}else for(Ie=0;Ie<Lt.length;Ie++)if(Ce==Lt[Ie]){le=!0;break}Ne.label=7;case 7:return ve++,[3,5];case 8:return[2,le]}}))}))}}),Ge=[{constant:!1,inputs:[{name:"_ownerCutPerMillion",type:"uint256"}],name:"setOwnerCutPerMillion",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_legacyNFTAddress",type:"address"}],name:"setLegacyNFTAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"ERC721_Interface",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"InterfaceId_ValidateFingerprint",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"acceptedToken",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"assetId",type:"uint256"}],name:"cancelOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"nftAddress",type:"address"},{name:"assetId",type:"uint256"}],name:"cancelOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"nftAddress",type:"address"},{name:"assetId",type:"uint256"},{name:"priceInWei",type:"uint256"},{name:"expiresAt",type:"uint256"}],name:"createOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"nftAddress",type:"address"},{name:"assetId",type:"uint256"},{name:"price",type:"uint256"},{name:"fingerprint",type:"bytes"}],name:"safeExecuteOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"ownerCutPerMillion",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"assetId",type:"uint256"},{name:"priceInWei",type:"uint256"},{name:"expiresAt",type:"uint256"}],name:"createOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"publicationFeeInWei",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"nftAddress",type:"address"},{name:"assetId",type:"uint256"},{name:"price",type:"uint256"}],name:"executeOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_publicationFee",type:"uint256"}],name:"setPublicationFee",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"contractName",type:"string"},{name:"migrationId",type:"string"}],name:"isMigrated",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_acceptedToken",type:"address"},{name:"_legacyNFTAddress",type:"address"},{name:"_owner",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_sender",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"legacyNFTAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"assetId",type:"uint256"}],name:"auctionByAssetId",outputs:[{name:"",type:"bytes32"},{name:"",type:"address"},{name:"",type:"uint256"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"orderByAssetId",outputs:[{name:"id",type:"bytes32"},{name:"seller",type:"address"},{name:"nftAddress",type:"address"},{name:"price",type:"uint256"},{name:"expiresAt",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"assetId",type:"uint256"},{name:"price",type:"uint256"}],name:"executeOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"nftAddress",type:"address"},{indexed:!1,name:"priceInWei",type:"uint256"},{indexed:!1,name:"expiresAt",type:"uint256"}],name:"OrderCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"nftAddress",type:"address"},{indexed:!1,name:"totalPrice",type:"uint256"},{indexed:!0,name:"buyer",type:"address"}],name:"OrderSuccessful",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"nftAddress",type:"address"}],name:"OrderCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"publicationFee",type:"uint256"}],name:"ChangedPublicationFee",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"ownerCutPerMillion",type:"uint256"}],name:"ChangedOwnerCutPerMillion",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"legacyNFTAddress",type:"address"}],name:"ChangeLegacyNFTAddress",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"priceInWei",type:"uint256"},{indexed:!1,name:"expiresAt",type:"uint256"}],name:"AuctionCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"totalPrice",type:"uint256"},{indexed:!0,name:"winner",type:"address"}],name:"AuctionSuccessful",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"}],name:"AuctionCancelled",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"contractName",type:"string"},{indexed:!1,name:"migrationId",type:"string"}],name:"Migrated",type:"event"}];function Q(_t){return void 0===_t&&(_t="0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539"),y(this,void 0,void 0,(function(){var Ft,Lt;return b(this,(function(Zt){switch(Zt.label){case 0:return[4,Kt.getProvider()];case 1:return Ft=Zt.sent(),Lt=new Yt.RequestManager(Ft),[4,new Yt.ContractFactory(Lt,Ge).at(_t)];case 2:return[2,{contract:Zt.sent(),provider:Ft,requestManager:Lt}]}}))}))}var Ve={MANAToken:"0x0f5d2fb29fb7d3cfee444a200298f468908cc942",LANDRegistry:"0xa57e126b341b18c262ad25b86bb4f65b5e2ade45",LANDProxy:"0xf87e31492faf9a91b02ee0deaad50d51d56d5d4d",TerraformReserve:"0xcca95e580bbbd04851ebfb85f77fd46c9b91f11c",ReturnVesting:"0x79c1fdaba012b9a094c495a86ce5c6199cf86368",LegacyMarketplace:"0xb3bca6f5052c7e24726b44da7403b56a8a1b98f8",Marketplace:"0x19a8ed4860007a66805782ed7e0bed4e44fc6717",MarketplaceProxy:"0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539",ServiceLocator:"0x151b11892dd6ab1f91055dcd01d23d03a2c47570",MortgageHelper:"0x90263ea5c57dc6603ca7202920735a6e31235bb9",MortgageManager:"0x9abf1295086afa0e49c60e95c437aa400c5333b8",RCNEngine:"0xba5a17f8ad40dc2c955d95c0547f3e6318bd72e7",RCNToken:"0xf970b8e36e23f7fc3fd752eea86f8be8d83375a6",KyberOracle:"0x2aaf69a2df2828b55fa4a5e30ee8c3c7cd9e5d5b",DecentralandInvite:"0xf886313f213c198458eba7ae9329525e64eb763a",EstateRegistry:"0x1784ef41af86e97f8d28afe95b573a24aeda966e",EstateProxy:"0x959e104e1a4db6317fa58f8295f586e1a978c297",LANDAuction:"0x54b7a124b44054da3692dbc56b116a35c6a3e561",MANABurner:"0xadfeb1de7876fcabeaf87df5a6c566b70f970018",MultiSigWallet:"0x4eac6325e1dbf1ac90434d39766e164dca71139e",Nobody:"0xDf861993Edbe95BAFbfA7760838f8ebbd5Afda9F",ERC721Bid:"0xe479dfd9664c693b2e2992300930b00bfde08233",BidMANABurner:"0x0fcf114c63a5387878e0da051c81cb6febd93b6c",MultisigContractOwner:"0xefc549434a03756f6e37a43757a2927605d8839b",AvatarNameRegistry:"0x894b883905bfEe2CC448880F1b59f4A762E67566",AvatarNameRegistryProxy:"0xcd816354450015A5644857FEd507afEeaE7263af",ExclusiveMasksCollection:"0xc04528c14c8ffd84c7c1fb6719b4a89853035cdd",Halloween2019Collection:"0xc1f4b0eea2bd6690930e6c66efd3e197d620b9c2",Halloween2019CollectionFactory:"0x07ccfd0fbada4ac3c22ecd38037ca5e5c0ad8cfa",Xmas2019Collection:"0xc3af02c0fd486c8e9da5788b915d6fff3f049866",DCLRegistrar:"0x2a187453064356c898cae034eaed119e1663acb8",DCLController:"0x6843291bd86857d97f0d269e698939fb10d60772",Catalyst:"0xcc054fab08127c19f621ab83ade5962cd10584ec",CatalystProxy:"0x4a2f10076101650f40342885b99b6b101d83c486",MCHCollection:"0xf64dc33a192e056bb5f0e5049356a0498b502d50",CommunityContestCollection:"0x32b7495895264ac9d0b12d32afd435453458b1c6",DCLLaunchCollection:"0xd35147be6401dcb20811f2104c33de8e97ed6818",DCGCollection:"0x3163d2cfee3183f9874e2869942cc62649eeb004",StaySafeCollection:"0x201c3af8c471e5842428b74d1e7c0249adda2a92",StaySafeDonation:"0x56505a0313ba2b4bc0be23dbb7eb71b7885fca9e",ClaimWearableForFree:"0x8dd61d1a67bce13a87e20a76c6f164c388a726d6",Moonshot2020Collection:"0x6a99abebb48819d2abe92c5e4dc4f48dc09a3ee8",DAOAgent:"0x9A6ebE7E2a7722F8200d0ffB63a1F6406A0d7dce",LANDMiniMeToken:"0x20dfe381ca71ade2582094cf569a8cb020af5ab1",EstateMiniMeToken:"0x8568f23f343694650370fe5e254b55bfb704a6c7",BuyAdapter:"0xf4fbd84193f9aaf9779dedbb415a806933eb1c95",AdapterFeeCollector:"0x0d58aaae9f0c4d020486f534363f3fca7a6aecb6",AdapterConverter:"0x2859581da59bd4e16a866dd06b461b76d8e489a4",DappcraftMoonminerCollection:"0x1e1d4e6262787c8a8783a37fee698bd42aa42bec",DGSummer2020Collection:"0xbf53c33235cbfc22cef5a61a83484b86342679c5",PMOuttathisworldCollection:"0x75a3752579dc2d63ca229eebbe3537fbabf85a12",DgtbleHeadspaceCollection:"0x574f64ac2e7215cba9752b85fc73030f35166bc0",WonderzoneMeteorchaserCollection:"0x34ed0aa248f60f54dd32fbc9883d6137a491f4f3",BurningStore:"0x0822d44c2e2f96d4cccad80610134861802b2cca",BaseList:"0x21b6EFf834d7cc8c12A5Ec924939aa521F0FE83F",POIAllowListProxy:"0x0ef15a1c7a49429a36cb46d4da8c53119242b54e",NameDenyListProxy:"0x0c4c90a4f29872a2e9ef4c4be3d419792bca9a36"},$e=Object.freeze({__proto__:null,mainnet:Ve,ropsten:{PrivateNodeWallet:"0x62ba62ff92917edf8ac0386fa10e3b27950bce8d",MANAToken:"0x2a8fd99c19271f4f04b1b7b9c4f7cf264b626edb",LANDRegistry:"0x255baf4096cb1723c00c4b4390a4b3028ecaa8ba",LANDProxy:"0x7a73483784ab79257bb11b96fd62a2c3ae4fb75b",TerraformReserve:"0x4bc79175f1f6fded07f04aa1b4b0465ecff6f1b3",ReturnVesting:"0x58c7e6e382c1c19c132b0361c12cbc33e2b13076",LegacyMarketplace:"0x80faa2b517b84a5aec1078d3600eab4c0b3aff56",Marketplace:"0x3d2f10c76b115db93a418ed286ca0c5abfdbf5d0",MarketplaceProxy:"0x5424912699dabaa5f2998750c1c66e73d67ad219",ServiceLocator:"0xb240b30c12d2a9ea6ba3abbf663d9ae265fbebeb",MortgageHelper:"0x0e4c24f71c8679b8af8e5a22aac3816e2b23f1cc",MortgageManager:"0x31ebb4ffd5e34acfc87ea21a0c56157188f3f0e1",RCNEngine:"0xbeE217bfe06C6FAaa2d5f2e06eBB84C5fb70d9bF",RCNToken:"0x2f45b6fb2f28a73f110400386da31044b2e953d4",KyberOracle:"0x4931d0621360187199de494a1469165079b31bfc",DecentralandInvite:"0x7557dfa02f3bd7d274851e3f627de2ed2ff390e8",EstateRegistry:"0x60e315992d5e62457215dd1e6a49d1ceb7983dfc",EstateProxy:"0x124bf28a423b2ca80b3846c3aa0eb944fe7ebb95",ERC721Bid:"0x250fa138c0a994799c7a49df3097dc71e37b3d6f",BidMANABurner:"0x01f43c3133b83086d4776027fbd152fa8a685fb4",AvatarNameRegistry:"0xd127F8d9C736d91Acdee34645e0b4C9db7178160",AvatarNameRegistryProxy:"0x2d794a7c956624fb93Eb3ff6E48D5b5d6dBA127b",ExclusiveMasksCollection:"0x30ae57840b0e9b8ea55334083d53d80b2cfe80e0",DCLRegistrar:"0xeb6f5d94d79f0750781cc962908b161b95192f53",DCLController:"0xd4e92f6ea18412dbae8b2d2b69e498a2d1064fa2",Catalyst:"0xadd085f2318e9678bbb18b3e0711328f902b374b",BuyAdapter:"0xd1e4e2880ff56cd0d5c68da9bed58bfbf0150948",AdapterFeeCollector:"0x5DC888024cB599CfDdb9E6483ED6bAe1fA9e9D18",AdapterConverter:"0x2782eb28Dcb1eF4E7632273cd4e347e130Ce4646",POIAllowlist:"0x5DC4a5C214f2161F0D5595a6dDd9352409aE3Ab4",NAMEDenylist:"0x20c6f1e86eba703a14414a0cbc1b55c89dba7a0f"},kovan:{MANAToken:"0x230fc362413d9e862326c2c7084610a5a2fdf78a",LANDRegistry:"0x2059291430b9aa2F79547f657816eFb816b36614",LANDProxy:"0x537263c440943f6a6808bCb8CcB3fe03EE838aD1",Marketplace:"0x6f44f195999f06aeb5872db96cdc517f1e839f13"},rinkeby:{MANAToken:"0x28bce5263f5d7f4eb7e8c6d5d78275ca455bac63",LANDProxy:"0x28bef22df3e2040a4be64a9ca0e8b5ae2b91462d",LANDRegistry:"0xaf29226656fade9c97f51741e40f60c5bd67ee31",Multisig:"0x0de35b8b47b129877e0efca24e294b61d7e7eee3"},getContract:function(_t,Ft){return y(this,void 0,void 0,(function(){var Lt,Zt;return b(this,(function(le){switch(le.label){case 0:return[4,Kt.getProvider()];case 1:return Lt=le.sent(),Zt=new Yt.RequestManager(Lt),[4,new Yt.ContractFactory(Zt,Ft).at(_t)];case 2:return[2,{contract:le.sent(),provider:Lt,requestManager:Zt}]}}))}))}}),Xe=Object.freeze({__proto__:null,getContract:Q,isAuthorizedAndHasBalance:function(_t,Lt){return y(this,void 0,void 0,(function(){var Kt,Zt,le;return b(this,(function(ve){switch(ve.label){case 0:return Kt=B,Zt=[Ve.MANAToken],Lt?(le=Lt,[3,3]):[3,1];case 1:return[4,Ft.getUserAccount()];case 2:le=ve.sent(),ve.label=3;case 3:return[4,Kt.apply(void 0,Zt.concat([le,Ve.MarketplaceProxy]))];case 4:return+ve.sent()<+Yt.toWei(_t,"ether").toString()?[2,!1]:[4,q()];case 5:return+ve.sent()>=+Yt.toWei(_t,"ether").toString()?[2,!0]:[2,!1]}}))}))},isAuthorizedAll:function(_t){return y(this,void 0,void 0,(function(){var Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie;return b(this,(function(Ne){switch(Ne.label){case 0:return _t?[3,2]:[4,Ft.getUserAccount()];case 1:_t=Ne.sent(),Ne.label=2;case 2:return Yt=(Lt={buying:{mana:{address:Ve.MANAToken,authorized:!1}},bidding:{mana:{address:Ve.MANAToken,authorized:!1}},selling:{land:{address:Ve.LANDProxy,authorized:!1},estates:{address:Ve.EstateProxy,authorized:!1},exclusiveMasks:{address:Ve.ExclusiveMasksCollection,authorized:!1},halloween:{address:Ve.Halloween2019Collection,authorized:!1},xmas:{address:Ve.Xmas2019Collection,authorized:!1},mch:{address:Ve.MCHCollection,authorized:!1},communityContest:{address:Ve.CommunityContestCollection,authorized:!1},dclLaunch:{address:Ve.DCLLaunchCollection,authorized:!1},dcg:{address:Ve.DCGCollection,authorized:!1},staySafe:{address:Ve.StaySafeCollection,authorized:!1},names:{address:Ve.DCLRegistrar,authorized:!1}}}).buying.mana,[4,D(Ve.MANAToken,_t,"0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539")];case 3:return Yt.authorized=Ne.sent(),Kt=Lt.bidding.mana,[4,D(Ve.MANAToken,_t,"0xe479dfd9664c693b2e2992300930b00bfde08233")];case 4:for(le in Kt.authorized=Ne.sent(),Zt=[],Lt.selling)Zt.push(le);ve=0,Ne.label=5;case 5:return ve<Zt.length?(Ce=Zt[ve],Se=Ce,Ie=Lt.selling[Se],[4,j(Lt.selling[Se].address,_t,"0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539")]):[3,8];case 6:Ie.authorized=Ne.sent(),Ne.label=7;case 7:return ve++,[3,5];case 8:return[2,Lt]}}))}))},cancelOrder:function(_t,Lt){return y(this,void 0,void 0,(function(){var Yt,Kt;return b(this,(function(Zt){switch(Zt.label){case 0:return[4,Q()];case 1:return Yt=Zt.sent().contract,[4,Ft.getUserAccount()];case 2:return Kt=Zt.sent(),[4,Yt.cancelOrder(_t,Lt,{from:Kt})];case 3:return[2,Zt.sent()]}}))}))},createOrder:function(_t,Lt,Kt,Zt){return void 0===Zt&&(Zt=+new Date/1e3+2592e3),y(this,void 0,void 0,(function(){var le,ve,Ce,Se,Ie=this;return b(this,(function(Ne){switch(Ne.label){case 0:return[4,Q()];case 1:return le=Ne.sent(),ve=le.contract,Ce=le.requestManager,[4,Ft.getUserAccount()];case 2:return Se=Ne.sent(),[4,j(_t,Se,ve.address)];case 3:return Ne.sent()?[3,5]:[4,W(_t,ve.address,!0).then((function(_t){return y(Ie,void 0,void 0,(function(){var Ft;return b(this,(function(Lt){switch(Lt.label){case 0:Ft=null,Lt.label=1;case 1:return null!=Ft?[3,4]:[4,S(2e3)];case 2:return Lt.sent(),[4,Ce.eth_getTransactionReceipt(_t.toString())];case 3:return Ft=Lt.sent(),[3,1];case 4:return[2]}}))}))}))];case 4:Ne.sent(),Ne.label=5;case 5:return[4,ve.createOrder(_t,Lt,Yt.toWei(Kt,"ether").toString(),Zt,{from:Se})];case 6:return[2,Ne.sent()]}}))}))},executeOrder:function(_t,Lt,Kt){return y(this,void 0,void 0,(function(){var Zt,le,ve,Ce,Se=this;return b(this,(function(Ie){switch(Ie.label){case 0:return[4,Q()];case 1:return Zt=Ie.sent(),le=Zt.contract,ve=Zt.requestManager,[4,Ft.getUserAccount()];case 2:return[4,D("0x0F5D2fB29fb7d3CFeE444a200298f468908cC942",Ce=Ie.sent(),le.address)];case 3:return Ie.sent()?[3,5]:[4,P("0x0F5D2fB29fb7d3CFeE444a200298f468908cC942",le.address).then((function(_t){return y(Se,void 0,void 0,(function(){var Ft;return b(this,(function(Lt){switch(Lt.label){case 0:Ft=null,Lt.label=1;case 1:return null!=Ft?[3,4]:[4,S(2e3)];case 2:return Lt.sent(),[4,ve.eth_getTransactionReceipt(_t.toString())];case 3:return Ft=Lt.sent(),[3,1];case 4:return[2]}}))}))}))];case 4:Ie.sent(),Ie.label=5;case 5:return[4,le.executeOrder(_t,Lt,Yt.toWei(Kt,"ether").toString(),{from:Ce})];case 6:return[2,Ie.sent()]}}))}))}}),Ye={data:[{symbol:"ETH",name:"Ethereum",address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",decimals:18,gasLimit:"0",sp_limit_order:!0,is_quote:!0,quote_priority:2},{symbol:"WETH",name:"Wrapped Ether",address:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",decimals:18,sp_limit_order:!0,is_quote:!0,quote_priority:2},{symbol:"KNC",name:"KyberNetwork",address:"0xdd974d5c2e2928dea5f71b9825b8b646686bd200",decimals:18,sp_limit_order:!0},{symbol:"DAI",name:"DAI",address:"0x6b175474e89094c44da98b954eedeac495271d0f",decimals:18,gasLimit:"650000",sp_limit_order:!0,is_quote:!0,quote_priority:3,is_gas_fixed:!0},{symbol:"OMG",name:"OmiseGO",address:"0xd26114cd6ee289accf82350c8d8487fedb8a0c07",decimals:18,sp_limit_order:!0},{symbol:"SNT",name:"Status",address:"0x744d70fdbe2ba4cf95131626614a1763df805b9e",decimals:18,sp_limit_order:!0},{symbol:"ELF",name:"Aelf",address:"0xbf2179859fc6d5bee9bf9158632dc51678a4100e",decimals:18,sp_limit_order:!0},{symbol:"POWR",name:"Power Ledger",address:"0x595832f8fc6bf59c85c527fec3740a1b7a361269",decimals:6,sp_limit_order:!0},{symbol:"MANA",name:"Mana",address:"0x0f5d2fb29fb7d3cfee444a200298f468908cc942",decimals:18,sp_limit_order:!0},{symbol:"BAT",name:"Basic Attention Token",address:"0x0d8775f648430679a709e98d2b0cb6250d2887ef",decimals:18,sp_limit_order:!0},{symbol:"REQ",name:"Request",address:"0x8f8221afbb33998d8584a2b05749ba73c37a938a",decimals:18,listing_time:1588683600,sp_limit_order:!0},{symbol:"LINK",name:"Chain Link",address:"0x514910771af9ca656af840dff83e8264ecf986ca",decimals:18,sp_limit_order:!0},{symbol:"DGX",name:"Digix Gold Token",address:"0x4f3afec4e5a3f2a6a1a411def7d7dfe50ee057bf",decimals:9,gasApprove:12e4,gasLimit:"975000"},{symbol:"IOST",name:"IOStoken",address:"0xfa1a856cfa3409cfa145fa4e20eb270df3eb21ab",decimals:18},{symbol:"ENJ",name:"Enjin Coin",address:"0xf629cbd94d3791c9250152bd8dfbdf380e2a3b9c",decimals:18,sp_limit_order:!0},{symbol:"BLZ",name:"Bluzelle",address:"0x5732046a883704404f284ce41ffadd5b007fd668",decimals:18},{symbol:"POLY",name:"Polymath",address:"0x9992ec3cf6a55b00978cddf2b27bc6882d88d1ec",decimals:18},{symbol:"CVC",name:"Civic",address:"0x41e5560054824ea6b0732e656e3ad64e20e94e45",decimals:8},{symbol:"PAY",name:"TenX",address:"0xb97048628db6b661d4c2aa833e95dbe1a905b280",decimals:18,sp_limit_order:!0},{symbol:"BNT",name:"Bancor",address:"0x1f573d6fb3f13d689ff844b4ce37794d79a7ff1c",decimals:18,gasLimit:"650000",sp_limit_order:!0},{symbol:"TUSD",name:"TrueUSD",address:"0x8dd5fbce2f6a956c3022ba3663759011dd51e73e",decimals:18,gasLimit:"780000",sp_limit_order:!0,is_quote:!0,quote_priority:3,is_gas_fixed:!0},{symbol:"LEND",name:"EthLend",address:"0x80fb784b7ed66730e8b1dbd9820afd29931aab03",decimals:18,sp_limit_order:!0},{symbol:"MTL",name:"Metal",address:"0xf433089366899d83a9f26a773d59ec7ecf30355e",decimals:8},{symbol:"REP",name:"Augur",address:"0x1985365e9f78359a9b6ad760e32412f4a445e862",decimals:18,sp_limit_order:!0},{symbol:"ZRX",name:"0x Protocol",address:"0xe41d2489571d322189246dafa5ebde1f4699f498",decimals:18,sp_limit_order:!0},{symbol:"REN",name:"Republic",address:"0x408e41876cccdc0f92210600ef50372656052a38",decimals:18,gasLimit:"650000",sp_limit_order:!0},{symbol:"QKC",name:"QuarkChain",address:"0xea26c4ac16d4a5a106820bc8aee85fd0b7b2b664",decimals:18},{symbol:"MKR",name:"Maker",address:"0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2",decimals:18,gasLimit:"650000",sp_limit_order:!0},{symbol:"OST",name:"Open Simple Token",address:"0x2c4e8f2d746113d0696ce89b35f0d8bf88e0aeca",decimals:18,listing_time:1542027600},{symbol:"PT",name:"Promotion Token",address:"0x094c875704c14783049ddf8136e298b3a099c446",decimals:18,gasLimit:"650000"},{symbol:"ABYSS",name:"ABYSS",address:"0x0e8d6b471e332f140e7d9dbb99e5e3822f728da6",decimals:18,listing_time:1547560800,sp_limit_order:!0},{symbol:"WBTC",name:"Wrapped BTC",address:"0x2260fac5e5542a773aa44fbcfedf7c193bc2c599",decimals:8,listing_time:1548853200,gasLimit:"650000",sp_limit_order:!0,is_quote:!0,quote_priority:1},{symbol:"MLN",name:"Melon Token",address:"0xec67005c4e498ec7f55e092bd1d35cbc47c91892",decimals:18,listing_time:1549321200,sp_limit_order:!0},{symbol:"USDC",name:"USD Coin",address:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",decimals:6,listing_time:1549976400,gasLimit:"715000",sp_limit_order:!0,is_quote:!0,quote_priority:3},{symbol:"EURS",name:"STASIS EURS",address:"0xdb25f211ab05b1c97d595516f45794528a807ad8",decimals:2,listing_time:1549976400},{symbol:"MCO",name:"Monaco",address:"0xb63b606ac810a52cca15e44bb630fd42d8d1d83d",decimals:8,listing_time:1556283600},{symbol:"PAX",name:"Paxos Standard",address:"0x8e870d67f660d95d5be530380d0ec0bd388289e1",decimals:18,listing_time:1556542800,sp_limit_order:!0},{symbol:"GEN",name:"DAOStack",address:"0x543ff227f64aa17ea132bf9886cab5db55dcaddf",decimals:18,listing_time:1560258e3},{symbol:"LRC",name:"Loopring",address:"0xbbbbca6a901c926f240b89eacb641d8aec7aeafd",decimals:18,listing_time:1560258e3},{symbol:"RLC",name:"iExec RLC",address:"0x607f4c5bb672230e8672085532f7e901544a7375",decimals:9,listing_time:1560258e3,sp_limit_order:!0},{symbol:"NPXS",name:"Pundi X",address:"0xa15c7ebe1f07caf6bff097d8a589fb8ac49ae5b3",decimals:18,listing_time:1560258e3,sp_limit_order:!0},{symbol:"GNO",name:"Gnosis",address:"0x6810e776880c02933d47db1b9fc05908e5386b96",decimals:18,listing_time:1560862800,gasLimit:"780000"},{symbol:"MYB",name:"MyBit",address:"0x5d60d8d7ef6d37e16ebabc324de3be57f135e0bc",decimals:18,listing_time:1562245200},{symbol:"BAM",name:"Bamboo",address:"0x22b3faaa8df978f6bafe18aade18dc2e3dfa0e0c",decimals:18,listing_time:1562311800},{symbol:"SPN",name:"Sapien Network",address:"0x20f7a3ddf244dc9299975b4da1c39f8d5d75f05a",decimals:6,listing_time:1562677200},{symbol:"EQUAD",name:"Quadrant Protocol",address:"0xc28e931814725bbeb9e670676fabbcb694fe7df2",decimals:18,listing_time:1563195600},{symbol:"UPP",name:"Sentinel Protocol",address:"0xc86d054809623432210c107af2e3f619dcfbf652",decimals:18,listing_time:1563973200},{symbol:"CND",name:"Cindicator",address:"0xd4c435f5b09f855c3317c8524cb1f586e42795fa",decimals:18,listing_time:1593522e3},{symbol:"USDT",name:"Tether USD",address:"0xdac17f958d2ee523a2206206994597c13d831ec7",decimals:6,listing_time:1565960400,sp_limit_order:!0,is_quote:!0,quote_priority:3},{symbol:"SNX",name:"Synthetix Network",address:"0xc011a73ee8576fb46f5e1c5751ca3b9fe0af2a6f",decimals:18,listing_time:1565960400,gasLimit:"975000",sp_limit_order:!0},{symbol:"BTU",name:"BTU Protocol",address:"0xb683d83a532e2cb7dfa5275eed3698436371cc9f",decimals:18,listing_time:156933e4},{symbol:"TKN",name:"Monolith",address:"0xaaaf91d9b90df800df4f55c205fd6989c977e73a",decimals:8,listing_time:156933e4},{symbol:"RAE",name:"Receive Access Ecosystem",address:"0xe5a3229ccb22b6484594973a03a3851dcd948756",decimals:18,listing_time:157365e4},{symbol:"SUSD",name:"sUSD",address:"0x57ab1ec28d129707052df4df418d58a2d46d5f51",decimals:18,listing_time:1574686800,gasLimit:"650000"},{symbol:"SPIKE",name:"Spiking",address:"0xa7fc5d2453e3f68af0cc1b78bcfee94a1b293650",decimals:10,listing_time:1575637200},{symbol:"SAN",name:"Santiment",address:"0x7c5a0ce9267ed19b22f8cae653f198e3e8daf098",decimals:18,listing_time:1575896400},{symbol:"USDS",name:"StableUSD",address:"0xa4bdb11dc0a2bec88d24a3aa1e6bb17201112ebe",decimals:6,listing_time:1576328400},{symbol:"NEXXO",name:"Nexxo",address:"0x278a83b64c3e3e1139f8e8a52d96360ca3c69a3d",decimals:18,listing_time:1576846800},{symbol:"EKG",name:"Ekon Gold",address:"0x6a9b3e36436b7abde8c4e2e2a98ea40455e615cf",decimals:18,listing_time:157797e4},{symbol:"ANT",name:"Aragon",address:"0x960b236a07cf122663c4303350609a66a7b288c0",decimals:18,listing_time:1578488400,gasLimit:"520000"},{symbol:"GDC",name:"Global Digital Content",address:"0x301c755ba0fca00b1923768fffb3df7f4e63af31",decimals:18,listing_time:1579611600,gasLimit:"600000"},{symbol:"AMPL",name:"Ampleforth",address:"0xd46ba6d942050d489dbd938a2c909a5d5039a161",decimals:9,listing_time:1580389200,sp_limit_order:!0},{symbol:"TKX",name:"Tokenize Xchange",address:"0x667102bd3413bfeaa3dffb48fa8288819e480a88",decimals:8,listing_time:1580994e3},{symbol:"MET",name:"Metronome",address:"0xa3d58c4e56fedcae3a7c43a725aee9a71f0ece4e",decimals:18,listing_time:1581944400},{symbol:"MFG",name:"SyncFab",address:"0x6710c63432a2de02954fc0f851db07146a6c0312",decimals:18,listing_time:1582203600},{symbol:"FXC",name:"Flexacoin",address:"0x4a57e687b9126435a9b19e4a802113e266adebde",decimals:18,listing_time:1582808400},{symbol:"UBT",name:"Unibright",address:"0x8400d94a5cb0fa0d041a3788e395285d61c9ee5e",decimals:8,listing_time:1583154e3,gasLimit:"650000",sp_limit_order:!0},{symbol:"LOOM",name:"Loom Network",address:"0xa4e8c3ec456107ea67d3075bf9e3df3a75823db0",decimals:18,listing_time:1583499600},{symbol:"PBTC",name:"pTokens BTC",address:"0x5228a22e72ccc52d415ecfd199f99d0665e7733b",decimals:18,listing_time:1583758800},{symbol:"OGN",name:"Origin Protocol",address:"0x8207c1ffc5b6804f6024322ccf34f29c3541ae26",decimals:18,listing_time:1584018e3},{symbol:"BAND",name:"Band Protocol",address:"0xba11d00c5f74255f56a5e366f4f77f5a186d7f55",decimals:18,listing_time:1586264400,gasLimit:"650000",sp_limit_order:!0},{symbol:"RSV",name:"Reserve",address:"0x196f4727526ea7fb1e17b2071b3d8eaa38486988",decimals:18,listing_time:1586782800},{symbol:"RSR",name:"Reserve Rights",address:"0x8762db106b2c2a0bccb3a80d1ed41273552616e8",decimals:18,listing_time:1586782800},{symbol:"KEY",name:"SelfKey",address:"0x4cc19356f2d37338b9802aa8e8fc58b0373296e7",decimals:18,listing_time:1587128400},{symbol:"PNK",name:"Kleros",address:"0x93ed3fbe21207ec2e8f2d3c3de6e058cb73bc04d",decimals:18,listing_time:1587646800},{symbol:"GHT",name:"Global Human Trust",address:"0xbe30f684d62c9f7883a75a29c162c332c0d98f23",decimals:18,listing_time:1588683600},{symbol:"TRYB",name:"BiLira",address:"0x2c537e5624e4af88a7ae4060c022609376c8d0eb",decimals:6,listing_time:1589202e3},{symbol:"2KEY",name:"TwoKeyEconomy",address:"0xE48972fCd82a274411c01834e2f031D4377Fa2c0",decimals:18,listing_time:1589893200},{symbol:"PLR",name:"Pillar",address:"0xe3818504c1b32bf1557b16c238b2e01fd3149c17",decimals:18,listing_time:1589979600},{symbol:"BUSD",name:"Binance USD",address:"0x4fabb145d64652a948d72533023f6e7a623c7c53",decimals:18,listing_time:1590584400},{symbol:"QNT",name:"Quant",address:"0x4a220e6096b25eadb88358cb44068a3248254675",decimals:18,listing_time:1591016400},{symbol:"PNT",name:"pNetwork Token",address:"0x89Ab32156e46F46D02ade3FEcbe5Fc4243B9AAeD",decimals:18,listing_time:1592917200},{symbol:"COMP",name:"Compound",address:"0xc00e94cb662c3520282e6f5717214004a7f26888",decimals:18,listing_time:1593608400},{symbol:"BZRX",name:"bZx Protocol Token",address:"0x56d811088235f11c8920698a204a5010a788f4b3",decimals:18,listing_time:1594833120},{symbol:"RENBTC",name:"renBTC",address:"0xeb4c2781e4eba804ce9a9803c67d0893436bb27d",decimals:8,listing_time:1595336400},{symbol:"VIDT",name:"V-ID blockchain",address:"0x445f51299ef3307dbd75036dd896565f5b4bf7a5",decimals:18,listing_time:1596114e3},{symbol:"PLTC",name:"pTokens LTC",address:"0x5979f50f1d4c08f9a53863c2f39a7b0492c38d0f",decimals:18,listing_time:1596459600},{symbol:"KAI",name:"KardiaChain",address:"0xbd6467a31899590474ce1e84f70594c53d628e46",decimals:18,listing_time:1596632400},{symbol:"REPV2",name:"Kyber REPv2 Token",address:"0x221657776846890989a759ba2973e427dff5c9bb",decimals:18,listing_time:1596718800},{symbol:"STMX",name:"Kyber StormX Token",address:"0xbe9375c6a420d2eeb258962efb95551a5b722803",decimals:18,listing_time:1596718800},{symbol:"MATIC",name:"MATIC Token",address:"0x7d1afa7b718fb893db30a3abc0cfc608aacfebb0",decimals:18,listing_time:1598446800}],success:!0},Je=[{inputs:[{internalType:"address",name:"_admin",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newAdmin",type:"address"},{indexed:!1,internalType:"address",name:"previousAdmin",type:"address"}],name:"AdminClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newAlerter",type:"address"},{indexed:!1,internalType:"bool",name:"isAdd",type:"bool"}],name:"AlerterAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"address",name:"sendTo",type:"address"}],name:"EtherWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"trader",type:"address"},{indexed:!1,internalType:"contract IERC20",name:"src",type:"address"},{indexed:!1,internalType:"contract IERC20",name:"dest",type:"address"},{indexed:!1,internalType:"address",name:"destAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"actualSrcAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"actualDestAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"platformWallet",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"ExecuteTrade",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IKyberHint",name:"kyberHintHandler",type:"address"}],name:"KyberHintHandlerSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IKyberNetwork",name:"newKyberNetwork",type:"address"},{indexed:!1,internalType:"contract IKyberNetwork",name:"previousKyberNetwork",type:"address"}],name:"KyberNetworkSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newOperator",type:"address"},{indexed:!1,internalType:"bool",name:"isAdd",type:"bool"}],name:"OperatorAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IERC20",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"address",name:"sendTo",type:"address"}],name:"TokenWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"pendingAdmin",type:"address"}],name:"TransferAdminPending",type:"event"},{inputs:[{internalType:"address",name:"newAlerter",type:"address"}],name:"addAlerter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOperator",type:"address"}],name:"addOperator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"enabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAlerters",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ERC20",name:"src",type:"address"},{internalType:"contract ERC20",name:"dest",type:"address"},{internalType:"uint256",name:"srcQty",type:"uint256"}],name:"getExpectedRate",outputs:[{internalType:"uint256",name:"expectedRate",type:"uint256"},{internalType:"uint256",name:"worstRate",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IERC20",name:"src",type:"address"},{internalType:"contract IERC20",name:"dest",type:"address"},{internalType:"uint256",name:"srcQty",type:"uint256"},{internalType:"uint256",name:"platformFeeBps",type:"uint256"},{internalType:"bytes",name:"hint",type:"bytes"}],name:"getExpectedRateAfterFee",outputs:[{internalType:"uint256",name:"expectedRate",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getOperators",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"kyberHintHandler",outputs:[{internalType:"contract IKyberHint",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"kyberNetwork",outputs:[{internalType:"contract IKyberNetwork",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxGasPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingAdmin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"alerter",type:"address"}],name:"removeAlerter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"removeOperator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IKyberHint",name:"_kyberHintHandler",type:"address"}],name:"setHintHandler",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IKyberNetwork",name:"_kyberNetwork",type:"address"}],name:"setKyberNetwork",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"minConversionRate",type:"uint256"}],name:"swapEtherToToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"uint256",name:"minConversionRate",type:"uint256"}],name:"swapTokenToEther",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"src",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"contract IERC20",name:"dest",type:"address"},{internalType:"uint256",name:"minConversionRate",type:"uint256"}],name:"swapTokenToToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"src",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"contract IERC20",name:"dest",type:"address"},{internalType:"address payable",name:"destAddress",type:"address"},{internalType:"uint256",name:"maxDestAmount",type:"uint256"},{internalType:"uint256",name:"minConversionRate",type:"uint256"},{internalType:"address payable",name:"platformWallet",type:"address"}],name:"trade",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"contract ERC20",name:"src",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"contract ERC20",name:"dest",type:"address"},{internalType:"address payable",name:"destAddress",type:"address"},{internalType:"uint256",name:"maxDestAmount",type:"uint256"},{internalType:"uint256",name:"minConversionRate",type:"uint256"},{internalType:"address payable",name:"walletId",type:"address"},{internalType:"bytes",name:"hint",type:"bytes"}],name:"tradeWithHint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"src",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"contract IERC20",name:"dest",type:"address"},{internalType:"address payable",name:"destAddress",type:"address"},{internalType:"uint256",name:"maxDestAmount",type:"uint256"},{internalType:"uint256",name:"minConversionRate",type:"uint256"},{internalType:"address payable",name:"platformWallet",type:"address"},{internalType:"uint256",name:"platformFeeBps",type:"uint256"},{internalType:"bytes",name:"hint",type:"bytes"}],name:"tradeWithHintAndFee",outputs:[{internalType:"uint256",name:"destAmount",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"newAdmin",type:"address"}],name:"transferAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAdmin",type:"address"}],name:"transferAdminQuickly",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address payable",name:"sendTo",type:"address"}],name:"withdrawEther",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"sendTo",type:"address"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"}];function ee(_t){return y(this,void 0,void 0,(function(){var Ft,Lt;return b(this,(function(Zt){switch(Zt.label){case 0:return[4,Kt.getProvider()];case 1:return Ft=Zt.sent(),Lt=new Yt.RequestManager(Ft),[4,new Yt.ContractFactory(Lt,Je).at(_t)];case 2:return[2,{contract:Zt.sent(),provider:Ft,requestManager:Lt}]}}))}))}function te(){return y(this,void 0,void 0,(function(){return b(this,(function(_t){return[2,Ye]}))}))}function ne(_t){return y(this,void 0,void 0,(function(){var Ft,Lt,Yt,Kt,Zt;return b(this,(function(le){try{for(Ft=m(Ye.data),Lt=Ft.next();!Lt.done;Lt=Ft.next()){if((Yt=Lt.value).symbol==_t)return[2,Yt];if(Yt.name==_t)return[2,Yt];if(Yt.address==_t)return[2,Yt]}}catch(_t){Kt={error:_t}}finally{try{Lt&&!Lt.done&&(Zt=Ft.return)&&Zt.call(Ft)}finally{if(Kt)throw Kt.error}}return[2]}))}))}function ae(_t,Ft,Lt){return y(this,void 0,void 0,(function(){return b(this,(function(Yt){switch(Yt.label){case 0:return[4,fetch("https://api.kyber.network/expectedRate?source="+_t+"&dest="+Ft+"&sourceAmount="+Lt).then((function(_t){return _t.json()}))];case 1:return[2,Yt.sent()]}}))}))}var Qe=Object.freeze({__proto__:null,getContract:ee,getCurrencies:te,getACurrency:ne,getMarketPair:function(){return y(this,void 0,void 0,(function(){return b(this,(function(_t){switch(_t.label){case 0:return[4,fetch("https://api.kyber.network/pairs/market",{headers:{}}).then((function(_t){return _t.json()}))];case 1:return[2,_t.sent()]}}))}))},getQuote:function(_t,Ft,Lt){return y(this,void 0,void 0,(function(){return b(this,(function(Yt){switch(Yt.label){case 0:return[4,fetch("https://api.kyber.network/quote_amount?quote="+Ft+"&base="+_t+"&base_amount="+Lt+"&type=buy").then((function(_t){return _t.json()}))];case 1:return[2,Yt.sent()]}}))}))},getExpectedRate:ae,exchange:function(_t,Lt,Kt,Zt){return y(this,void 0,void 0,(function(){var le,ve,Ce,Se,Ie,Ne,Fe,Re,Pe,Le,Ue,He;return b(this,(function(qe){switch(qe.label){case 0:return[4,te()];case 1:le=qe.sent(),ve="",Ce="";try{for(Se=m(le.data),Ie=Se.next();!Ie.done;Ie=Se.next())(Ne=Ie.value).symbol.toLowerCase()==_t.toLowerCase()?ve=Ne.address:Ne.symbol.toLowerCase()==Lt.toLowerCase()&&(Ce=Ne.address)}catch(_t){Ue={error:_t}}finally{try{Ie&&!Ie.done&&(He=Se.return)&&He.call(Se)}finally{if(Ue)throw Ue.error}}return[4,ne(ve)];case 2:return Fe=qe.sent(),Re=Yt.toBigNumber(Kt).times("1e"+(null==Fe?void 0:Fe.decimals)).toString(),[4,Ft.getUserAccount()];case 3:return Pe=qe.sent(),[4,ae(ve,Ce,Re)];case 4:return Le=qe.sent(),[4,ee("0x818E6FECD516Ecc3849DAf6845e3EC868087B755")];case 5:return qe.sent().contract.tradeWithHint(ve,Re,Ce,Pe,"0x57896044618658097711785492504343953926634992332820282019728792003956564819968",Zt?Le.expectedRate*((100-Zt)/100):Le.slippageRate,"0x440bbd6a888a36de6e2f6a25f65bc4e16874faa9",[parseInt("0x5045524d")]),[2]}}))}))}}),Ze=Object.freeze({__proto__:null,kyberswap:Qe}),tn=Object.freeze({__proto__:null,getListOfWearables:function(_t){return y(this,void 0,void 0,(function(){var Ft,Lt;return b(this,(function(Yt){switch(Yt.label){case 0:return Ft=function(_t){var Ft="";for(var Lt in _t){var Yt=_t[Lt];if(Yt){var Kt="s"===Lt.substr(Lt.length-1)?Lt.slice(0,-1):Lt,Zt=void 0;Zt=Array.isArray(Yt)?x(Yt).map((function(_t){return""+_t})):[""+Yt],Ft+=0===Ft.length?"?":"&",Ft+=Kt+"="+Zt.join("&"+Kt+"=")}}return Ft}(_t),[4,v()];case 1:return Lt=Yt.sent(),[2,fetch(Lt+"/lambdas/collections/wearables"+Ft).then((function(_t){return _t.json()})).then((function(_t){return _t.wearables})).then((function(_t){return _t.map((function(_t){return g(Lt,_t)}))}))]}}))}))}});_t.avatar=Re,_t.contract=$e,_t.currency=Ue,_t.ethereum=Pe,_t.mana=He,_t.marketplace=Xe,_t.nft=We,_t.services=Ze,_t.wearable=tn,Object.defineProperty(_t,"__esModule",{value:!0})})),define("@dcl/ecs-scene-utils",["exports","@decentraland/EnvironmentAPI"],(function(_t,Ft){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var n=function(_t,Ft){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Ft){_t.__proto__=Ft}||function(_t,Ft){for(var Lt in Ft)Object.prototype.hasOwnProperty.call(Ft,Lt)&&(_t[Lt]=Ft[Lt])})(_t,Ft)};function i(_t,Ft){function i(){this.constructor=_t}n(_t,Ft),_t.prototype=null===Ft?Object.create(Ft):(i.prototype=Ft.prototype,new i)}function r(_t,Ft,Lt,Yt){var Kt,Zt=arguments.length,le=Zt<3?Ft:null===Yt?Yt=Object.getOwnPropertyDescriptor(Ft,Lt):Yt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(_t,Ft,Lt,Yt);else for(var ve=_t.length-1;ve>=0;ve--)(Kt=_t[ve])&&(le=(Zt<3?Kt(le):Zt>3?Kt(Ft,Lt,le):Kt(Ft,Lt))||le);return Zt>3&&le&&Object.defineProperty(Ft,Lt,le),le}function o(_t,Ft,Lt,Yt){return new(Lt||(Lt=Promise))((function(Kt,Zt){function a(_t){try{u(Yt.next(_t))}catch(_t){Zt(_t)}}function s(_t){try{u(Yt.throw(_t))}catch(_t){Zt(_t)}}function u(_t){var Ft;_t.done?Kt(_t.value):(Ft=_t.value,Ft instanceof Lt?Ft:new Lt((function(_t){_t(Ft)}))).then(a,s)}u((Yt=Yt.apply(_t,Ft||[])).next())}))}function a(_t,Ft){var Lt,Yt,Kt,Zt,le={label:0,sent:function(){if(1&Kt[0])throw Kt[1];return Kt[1]},trys:[],ops:[]};return Zt={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(Zt[Symbol.iterator]=function(){return this}),Zt;function s(Zt){return function(ve){return function(Zt){if(Lt)throw new TypeError("Generator is already executing.");for(;le;)try{if(Lt=1,Yt&&(Kt=2&Zt[0]?Yt.return:Zt[0]?Yt.throw||((Kt=Yt.return)&&Kt.call(Yt),0):Yt.next)&&!(Kt=Kt.call(Yt,Zt[1])).done)return Kt;switch(Yt=0,Kt&&(Zt=[2&Zt[0],Kt.value]),Zt[0]){case 0:case 1:Kt=Zt;break;case 4:return le.label++,{value:Zt[1],done:!1};case 5:le.label++,Yt=Zt[1],Zt=[0];continue;case 7:Zt=le.ops.pop(),le.trys.pop();continue;default:if(!((Kt=(Kt=le.trys).length>0&&Kt[Kt.length-1])||6!==Zt[0]&&2!==Zt[0])){le=0;continue}if(3===Zt[0]&&(!Kt||Zt[1]>Kt[0]&&Zt[1]<Kt[3])){le.label=Zt[1];break}if(6===Zt[0]&&le.label<Kt[1]){le.label=Kt[1],Kt=Zt;break}if(Kt&&le.label<Kt[2]){le.label=Kt[2],le.ops.push(Zt);break}Kt[2]&&le.ops.pop(),le.trys.pop();continue}Zt=Ft.call(_t,le)}catch(_t){Zt=[6,_t],Yt=0}finally{Lt=Kt=0}if(5&Zt[0])throw Zt[1];return{value:Zt[0]?Zt[1]:void 0,done:!0}}([Zt,ve])}}}function s(_t){var Ft="function"==typeof Symbol&&Symbol.iterator,Lt=Ft&&_t[Ft],Yt=0;if(Lt)return Lt.call(_t);if(_t&&"number"==typeof _t.length)return{next:function(){return _t&&Yt>=_t.length&&(_t=void 0),{value:_t&&_t[Yt++],done:!_t}}};throw new TypeError(Ft?"Object is not iterable.":"Symbol.iterator is not defined.")}var Lt,Yt=function(){function e(){this._components=[],this._componentGroups=[],e._instance=this}return e.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new e,engine.addSystem(this._instance)),this._instance},e.registerCustomComponent=function(_t){this.createAndAddToEngine()._components.push(_t)},e.prototype.addComponentType=function(_t){var Ft,Lt;try{for(var Yt=s(this._components),Kt=Yt.next();!Kt.done;Kt=Yt.next())if(_t==Kt.value)return}catch(_t){Ft={error:_t}}finally{try{Kt&&!Kt.done&&(Lt=Yt.return)&&Lt.call(Yt)}finally{if(Ft)throw Ft.error}}this._components.push(_t),this._componentGroups.push(engine.getComponentGroup(_t,Transform))},e.prototype.update=function(_t){for(var Ft=0;Ft<this._components.length;Ft++)this.updateComponent(_t,this._components[Ft],this._componentGroups[Ft])},e.prototype.updateComponent=function(_t,Ft,Lt){Lt.entities.forEach((function(Lt){var Yt=Lt.getComponent(Transform),Kt=Lt.getComponent(Ft);Kt.update(_t),Kt.assignValueToTransform(Yt),Kt.hasFinished()&&(Lt.removeComponent(Kt),null!=Kt.onFinishCallback&&Kt.onFinishCallback())}))},e._instance=null,e}();function h(Ft,Lt){switch(Ft){case _t.InterpolationType.LINEAR:return Lt;case _t.InterpolationType.EASEINQUAD:return function(_t){return _t*_t}(Lt);case _t.InterpolationType.EASEOUTQUAD:return function(_t){return _t*(2-_t)}(Lt);case _t.InterpolationType.EASEQUAD:return function(_t){return _t*_t/(2*(_t*_t-_t)+1)}(Lt);case _t.InterpolationType.EASEINSINE:return function(_t){return 1-Math.cos(_t*Math.PI/2)}(Lt);case _t.InterpolationType.EASEOUTSINE:return function(_t){return Math.sin(_t*Math.PI/2)}(Lt);case _t.InterpolationType.EASESINE:return function(_t){return-(Math.cos(Math.PI*_t)-1)/2}(Lt);case _t.InterpolationType.EASEINEXPO:return function(_t){return 0===_t?0:Math.pow(2,10*_t-10)}(Lt);case _t.InterpolationType.EASEOUTEXPO:return function(_t){return 1===_t?1:1-Math.pow(2,-10*_t)}(Lt);case _t.InterpolationType.EASEEXPO:return function(_t){return 0===_t?0:1===_t?1:_t<.5?Math.pow(2,20*_t-10)/2:(2-Math.pow(2,-20*_t+10))/2}(Lt);case _t.InterpolationType.EASEINELASTIC:return function(_t){var Ft=2*Math.PI/3;return 0===_t?0:1===_t?1:-Math.pow(2,10*_t-10)*Math.sin((10*_t-10.75)*Ft)}(Lt);case _t.InterpolationType.EASEOUTELASTIC:return function(_t){var Ft=2*Math.PI/3;return 0===_t?0:1===_t?1:Math.pow(2,-10*_t)*Math.sin((10*_t-.75)*Ft)+1}(Lt);case _t.InterpolationType.EASEELASTIC:return function(_t){var Ft=2*Math.PI/4.5;return 0===_t?0:1===_t?1:_t<.5?-Math.pow(2,20*_t-10)*Math.sin((20*_t-11.125)*Ft)/2:Math.pow(2,-20*_t+10)*Math.sin((20*_t-11.125)*Ft)/2+1}(Lt);case _t.InterpolationType.EASEINBOUNCE:return function(_t){return 1-l(1-_t)}(Lt);case _t.InterpolationType.EASEOUTEBOUNCE:return function(_t){return l(_t)}(Lt);case _t.InterpolationType.EASEBOUNCE:return function(_t){return _t<.5?(1-l(1-2*_t))/2:(1+l(2*_t-1))/2}(Lt);default:return Lt}}function l(_t){var Ft=7.5625,Lt=2.75;return _t<1/Lt?Ft*_t*_t:_t<2/Lt?Ft*(_t-=1.5/Lt)*_t+.75:_t<2.5/Lt?Ft*(_t-=2.25/Lt)*_t+.9375:Ft*(_t-=2.625/Lt)*_t+.984375}_t.InterpolationType=void 0,(Lt=_t.InterpolationType||(_t.InterpolationType={}))[Lt.LINEAR=0]="LINEAR",Lt[Lt.EASEINQUAD=1]="EASEINQUAD",Lt[Lt.EASEOUTQUAD=2]="EASEOUTQUAD",Lt[Lt.EASEQUAD=3]="EASEQUAD",Lt.EASEINSINE="easeinsine",Lt.EASEOUTSINE="easeoutsine",Lt.EASESINE="easeinoutsine",Lt.EASEINEXPO="easeinexpo",Lt.EASEOUTEXPO="easeoutexpo",Lt.EASEEXPO="easeinoutexpo",Lt.EASEINELASTIC="easeinelastic",Lt.EASEOUTELASTIC="easeoutelastic",Lt.EASEELASTIC="easeinoutelastic",Lt.EASEINBOUNCE="easeinbounce",Lt.EASEOUTEBOUNCE="easeoutbounce",Lt.EASEBOUNCE="easeinoutbounce";var Kt,Zt=function(){function t(Lt,Kt,Zt,le,ve){void 0===ve&&(ve=_t.InterpolationType.LINEAR),this.start=Lt,this.end=Kt,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=le,this.interpolationType=ve,0!=Zt?this.speed=1/Zt:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),Yt.createAndAddToEngine().addComponentType(Ft)}var Ft;return Ft=t,t.prototype.update=function(_t){this.normalizedTime=Scalar.Clamp(this.normalizedTime+_t*this.speed,0,1),this.lerpTime=h(this.interpolationType,this.normalizedTime)},t.prototype.hasFinished=function(){return this.normalizedTime>=1},t.prototype.assignValueToTransform=function(_t){_t.position=Vector3.Lerp(this.start,this.end,this.lerpTime)},Ft=r([Component("moveTransformComponent")],t)}(),le=function(){function t(Lt,Kt,Zt,le,ve){void 0===ve&&(ve=_t.InterpolationType.LINEAR),this.start=Lt,this.end=Kt,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=le,this.interpolationType=ve,0!=Zt?this.speed=1/Zt:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),Yt.createAndAddToEngine().addComponentType(Ft)}var Ft;return Ft=t,t.prototype.update=function(_t){this.normalizedTime=Scalar.Clamp(this.normalizedTime+_t*this.speed,0,1),this.lerpTime=h(this.interpolationType,this.normalizedTime)},t.prototype.hasFinished=function(){return this.normalizedTime>=1},t.prototype.assignValueToTransform=function(_t){_t.rotation=Quaternion.Slerp(this.start,this.end,this.lerpTime)},Ft=r([Component("rotateTransformComponent")],t)}(),ve=function(){function t(Lt,Kt,Zt,le,ve){void 0===ve&&(ve=_t.InterpolationType.LINEAR),this.start=Lt,this.end=Kt,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=le,this.interpolationType=ve,0!=Zt?this.speed=1/Zt:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),Yt.createAndAddToEngine().addComponentType(Ft)}var Ft;return Ft=t,t.prototype.update=function(_t){this.normalizedTime=Scalar.Clamp(this.normalizedTime+_t*this.speed,0,1),this.lerpTime=h(this.interpolationType,this.normalizedTime)},t.prototype.hasFinished=function(){return this.normalizedTime>=1},t.prototype.assignValueToTransform=function(_t){_t.scale=Vector3.Lerp(this.start,this.end,this.lerpTime)},Ft=r([Component("scaleTransformComponent")],t)}(),Ce=function(){function e(Ft,Lt,Kt,Zt){if(this.speed=[],this.normalizedTime=0,this.currentIndex=0,this.points=Ft,this.onFinishCallback=Kt,this.onPointReachedCallback=Zt,Ft.length<2)throw new Error("At least 2 points are needed for FollowPathComponent.");if(Lt>0){for(var le=0,ve=[],Ce=0;Ce<Ft.length-1;Ce++){var Se=Vector3.Distance(Ft[Ce],Ft[Ce+1]);le+=Se,ve.push(Se)}for(Ce=0;Ce<ve.length;Ce++)this.speed.push(1/(ve[Ce]/le*Lt))}else this.normalizedTime=1,this.currentIndex=Ft.length-2;Yt.createAndAddToEngine().addComponentType(_t)}var _t;return _t=e,e.prototype.update=function(_t){this.normalizedTime=Scalar.Clamp(this.normalizedTime+_t*this.speed[this.currentIndex],0,1),this.normalizedTime>=1&&this.currentIndex<this.points.length-2&&(this.currentIndex++,this.normalizedTime=0,this.onPointReachedCallback&&this.currentIndex<this.points.length-1&&this.onPointReachedCallback(this.points[this.currentIndex],this.points[this.currentIndex+1]))},e.prototype.hasFinished=function(){return this.currentIndex>=this.points.length-2&&this.normalizedTime>=1},e.prototype.assignValueToTransform=function(_t){_t.position=Vector3.Lerp(this.points[this.currentIndex],this.points[this.currentIndex+1],this.normalizedTime)},_t=r([Component("followPathComponent")],e)}(),Se=function(){function e(Ft,Lt,Kt,Zt,le,ve){if(this.speed=[],this.turnToFaceNext=!1,this.facingNext=!1,this.normalizedTime=0,this.currentIndex=0,this.points=Curve3.CreateCatmullRomSpline(Ft,Kt,!!le).getPoints(),this.onFinishCallback=ve,this.turnToFaceNext=Zt||!1,this.points.length<2)throw new Error("At least 2 points are needed for FollowPathComponent.");if(Lt>0){for(var Ce=0,Se=[],Ie=0;Ie<this.points.length-1;Ie++){var Ne=Vector3.Distance(this.points[Ie],this.points[Ie+1]);Ce+=Ne,Se.push(Ne)}for(Ie=0;Ie<Se.length;Ie++)this.speed.push(1/(Se[Ie]/Ce*Lt))}else this.normalizedTime=1,this.currentIndex=Ft.length-2;Yt.createAndAddToEngine().addComponentType(_t)}var _t;return _t=e,e.prototype.update=function(_t){this.normalizedTime=Scalar.Clamp(this.normalizedTime+_t*this.speed[this.currentIndex],0,1),this.normalizedTime>=1&&this.currentIndex<this.points.length-2&&(this.currentIndex++,this.normalizedTime=0,1==this.turnToFaceNext&&(this.facingNext=!1))},e.prototype.hasFinished=function(){return this.currentIndex>=this.points.length-2&&this.normalizedTime>=1},e.prototype.assignValueToTransform=function(_t){_t.position=Vector3.Lerp(this.points[this.currentIndex],this.points[this.currentIndex+1],this.normalizedTime),this.facingNext||(this.facingNext=!0,this.currentIndex<this.points.length-1?_t.lookAt(this.points[this.currentIndex+1]):_t.lookAt(this.points[0]))},_t=r([Component("followCurvedPathComponent")],e)}(),Ie=function(){function e(Ft,Lt){this.rotationVelocity=Ft,this.onFinishCallback=Lt,this.rotation=Quaternion.Identity,this.finished=!1,Yt.createAndAddToEngine().addComponentType(_t)}var _t;return _t=e,e.prototype.update=function(_t){this.rotation=Quaternion.Slerp(Quaternion.Identity,this.rotationVelocity,_t)},e.prototype.hasFinished=function(){return this.finished},e.prototype.assignValueToTransform=function(_t){_t.rotation=_t.rotation.multiply(this.rotation)},e.prototype.stop=function(){this.finished=!0},_t=r([Component("keepRotatingComponent")],e)}();_t.ToggleState=void 0,(Kt=_t.ToggleState||(_t.ToggleState={}))[Kt.Off=0]="Off",Kt[Kt.On=1]="On";var Ne=function(){function t(Ft,Lt){void 0===Ft&&(Ft=_t.ToggleState.On),this.enabled=!0,this.state=_t.ToggleState.Off,this.set(Ft),Lt&&this.setCallback(Lt)}return t.prototype.set=function(_t){this.state=_t,this.onValueChangedCallback&&this.onValueChangedCallback(_t)},t.prototype.toggle=function(){this.enabled&&this.set(1-this.state)},t.prototype.isOn=function(){return this.state==_t.ToggleState.On},t.prototype.setCallback=function(_t){this.onValueChangedCallback=_t},r([Component("toggle")],t)}(),Fe=function(){function e(){this._components=[],e._instance=this}return e.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new e,engine.addSystem(this._instance)),this._instance},e.registerCustomComponent=function(_t){this.createAndAddToEngine()._components.push(_t)},e.prototype.addComponentType=function(_t){var Ft,Lt;try{for(var Yt=s(this._components),Kt=Yt.next();!Kt.done;Kt=Yt.next())if(_t==Kt.value)return}catch(_t){Ft={error:_t}}finally{try{Kt&&!Kt.done&&(Lt=Yt.return)&&Lt.call(Yt)}finally{if(Ft)throw Ft.error}}this._components.push(_t)},e.prototype.update=function(_t){var Ft=this;this._components.forEach((function(Lt){Ft.updateComponent(_t,Lt)}))},e.prototype.updateComponent=function(_t,Ft){var Lt=engine.getEntitiesWithComponent(Ft);for(var Yt in Lt)if(Lt.hasOwnProperty(Yt)){var Kt=Lt[Yt],Zt=Kt.getComponent(Ft);Zt.elapsedTime+=_t,Zt.elapsedTime>=Zt.targetTime&&Zt.onTargetTimeReached(Kt)}},e._instance=null,e}(),Re=function(){function e(Ft,Lt){var Yt=this;Fe.createAndAddToEngine().addComponentType(_t),this.elapsedTime=0,this.targetTime=Ft/1e3,this.onTimeReachedCallback=Lt,this.onTargetTimeReached=function(_t){Yt.onTimeReachedCallback&&Yt.onTimeReachedCallback(),_t.removeComponent(Yt)}}var _t;return _t=e,e.prototype.setCallback=function(_t){this.onTimeReachedCallback=_t},_t=r([Component("timerDelay")],e)}(),Pe=function(){function e(Ft,Lt){var Yt=this;Fe.createAndAddToEngine().addComponentType(_t),this.elapsedTime=0,this.targetTime=Ft/1e3,this.onTimeReachedCallback=Lt,this.onTargetTimeReached=function(_t){Yt.onTimeReachedCallback&&Yt.onTimeReachedCallback(),_t.removeComponent(Yt),engine.removeEntity(_t)}}var _t;return _t=e,e.prototype.setCallback=function(_t){this.onTimeReachedCallback=_t},_t=r([Component("timerExpireIn")],e)}(),Le=function(){function e(Ft,Lt){var Yt=this;Fe.createAndAddToEngine().addComponentType(_t),this.elapsedTime=0,this.targetTime=Ft/1e3,this.onTimeReachedCallback=Lt,this.onTargetTimeReached=function(){Yt.elapsedTime=0,Yt.onTimeReachedCallback&&Yt.onTimeReachedCallback()}}var _t;return _t=e,e.prototype.setCallback=function(_t){this.onTimeReachedCallback=_t},_t=r([Component("timerInterval")],e)}();function I(_t,Ft,Lt,Yt,Kt,Zt){var le=new Entity;le.addComponent(new Transform(Zt||{position:new Vector3(0,1.5,0)})),le.setParent(Ft);var ve=new TextShape(_t);return ve.fontSize=Kt||3,ve.color=Yt||Color3.Black(),le.addComponent(ve),Lt&&le.addComponent(new Billboard),engine.addEntity(le),le}var Ue,He,qe=function(){function e(){this._triggers={},e._instance=this,this._cameraTriggerWrapper=new Ge(new P(new Vector3(.5,1.8,.5),new Vector3(0,.91,0))),this._componentGroup=engine.getComponentGroup(Ve)}return Object.defineProperty(e,"instance",{get:function(){return this.createAndAddToEngine()},enumerable:!1,configurable:!0}),e.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new e,engine.addSystem(this._instance)),this._instance},e.prototype.setCameraTriggerShape=function(_t){this._cameraTriggerWrapper.setShape(_t)},e.prototype.update=function(){var _t=this,Ft=this._componentGroup.entities;for(var Lt in Ft.forEach((function(Ft){_t.shouldWrapTriggerEntity(Ft)&&_t.wrapTriggerEntity(Ft)})),this._triggers)if(this._triggers.hasOwnProperty(Lt)){var Yt=this._triggers[Lt];Yt.isDebugging()&&Yt.updateDebugEntity(),Yt.isInEngine()?null!=Yt.trigger&&Yt.trigger.enabled?(Yt.wasEnabled||Yt.isDebugging()&&Yt.addDebugEntity(),Yt.wasEnabled=!0,(Yt.trigger.onCameraEnter||Yt.trigger.onCameraExit)&&this.checkCollisionAgainstCamera(Yt),(Yt.trigger.onTriggerEnter||Yt.trigger.onTriggerExit)&&this.checkCollisionAgainstOtherTriggers(Yt)):Yt.wasEnabled&&(Yt.wasEnabled=!1,Yt.isDebugging()&&Yt.removeDebugEntity(),e.removeTriggerFromSystem(Yt)):(Yt.isDebugging()&&Yt.removeDebugEntity(),e.removeTriggerFromSystem(Yt),delete this._triggers[Lt])}},e.prototype.shouldWrapTriggerEntity=function(_t){return null==this._triggers[_t.uuid]||null==this._triggers[_t.uuid]},e.prototype.wrapTriggerEntity=function(_t){this._triggers[_t.uuid]=new We(_t)},e.removeTriggerFromSystem=function(_t){for(var Ft,Lt=_t.getActiveCollisions(),Yt=0;Yt<Lt.length;Yt++)!(Lt[Yt]===(null===(Ft=e._instance)||void 0===Ft?void 0:Ft._cameraTriggerWrapper)||null==Lt[Yt].trigger)&&Lt[Yt].trigger.onTriggerExit&&_t.entity&&Lt[Yt].trigger.onTriggerExit(_t.entity),Lt[Yt].disengageActiveCollision(_t),_t.disengageActiveCollision(Lt[Yt])},e.disengageCollision=function(_t,Ft){_t.disengageActiveCollision(Ft),Ft.disengageActiveCollision(_t),_t.trigger.onTriggerExit&&Ft.entity&&_t.trigger.onTriggerExit(Ft.entity),Ft.trigger.onTriggerExit&&_t.entity&&Ft.trigger.onTriggerExit(_t.entity)},e.engageCollision=function(_t,Ft){_t.engageCollision(Ft),Ft.engageCollision(_t),_t.trigger.onTriggerEnter&&Ft.entity&&_t.trigger.onTriggerEnter(Ft.entity),Ft.trigger.onTriggerEnter&&_t.entity&&Ft.trigger.onTriggerEnter(_t.entity)},e.prototype.checkCollisionAgainstCamera=function(_t){var Ft=_t.hasActiveCollision(this._cameraTriggerWrapper),Lt=e.areColliding(_t,this._cameraTriggerWrapper);Ft&&!Lt?(_t.disengageActiveCollision(this._cameraTriggerWrapper),_t.trigger.onCameraExit&&_t.trigger.onCameraExit()):!Ft&&Lt&&(_t.engageCollision(this._cameraTriggerWrapper),_t.trigger.onCameraEnter&&_t.trigger.onCameraEnter())},e.prototype.checkCollisionAgainstOtherTriggers=function(_t){for(var Ft in this._triggers)if(this._triggers.hasOwnProperty(Ft)&&Ft!=_t.uuid&&this._triggers[Ft].trigger.enabled&&e.canTriggersCollide(_t,this._triggers[Ft])){var Lt=_t.hasActiveCollision(this._triggers[Ft]),Yt=e.areColliding(_t,this._triggers[Ft]);Lt&&!Yt?e.disengageCollision(_t,this._triggers[Ft]):!Lt&&Yt&&e.engageCollision(_t,this._triggers[Ft])}},e.canTriggersCollide=function(_t,Ft){return 0==_t.trigger.triggeredByLayer||0!=(Ft.trigger.layer&_t.trigger.triggeredByLayer)},e.areColliding=function(_t,Ft){return _t.getShape()instanceof P&&Ft.getShape()instanceof P?e.areCollidingAABB(_t.getGlobalPosition(),_t.getShape(),Ft.getGlobalPosition(),Ft.getShape()):_t.getShape()instanceof k&&Ft.getShape()instanceof k?e.areCollidingSphere(_t.getGlobalPosition(),_t.getShape(),Ft.getGlobalPosition(),Ft.getShape()):_t.getShape()instanceof P&&Ft.getShape()instanceof k?e.areCollidingAABBSphere(_t.getGlobalPosition(),_t.getShape(),Ft.getGlobalPosition(),Ft.getShape()):_t.getShape()instanceof k&&Ft.getShape()instanceof P&&e.areCollidingAABBSphere(Ft.getGlobalPosition(),Ft.getShape(),_t.getGlobalPosition(),_t.getShape())},e.areCollidingAABB=function(_t,Ft,Lt,Yt){var Kt=e.getBoxShapeValues(_t,Ft),Zt=e.getBoxShapeValues(Lt,Yt);return Kt.min.x<=Zt.max.x&&Kt.max.x>=Zt.min.x&&Kt.min.y<=Zt.max.y&&Kt.max.y>=Zt.min.y&&Kt.min.z<=Zt.max.z&&Kt.max.z>=Zt.min.z},e.areCollidingSphere=function(_t,Ft,Lt,Yt){return Vector3.DistanceSquared(_t.add(Ft.position),Lt.add(Yt.position))<Ft.radius*Ft.radius+Yt.radius*Yt.radius},e.areCollidingAABBSphere=function(_t,Ft,Lt,Yt){var Kt=e.getBoxShapeValues(_t,Ft),Zt=Lt.add(Yt.position),le=Yt.radius,ve=0;return Zt.x<Kt.min.x&&(ve+=(Kt.min.x-Zt.x)*(Kt.min.x-Zt.x)),Zt.x>Kt.max.x&&(ve+=(Zt.x-Kt.max.x)*(Zt.x-Kt.max.x)),Zt.y<Kt.min.y&&(ve+=(Kt.min.y-Zt.y)*(Kt.min.y-Zt.y)),Zt.y>Kt.max.y&&(ve+=(Zt.y-Kt.max.y)*(Zt.y-Kt.max.y)),Zt.z<Kt.min.z&&(ve+=(Kt.min.z-Zt.z)*(Kt.min.z-Zt.z)),Zt.z>Kt.max.z&&(ve+=(Zt.z-Kt.max.z)*(Zt.z-Kt.max.z)),ve<le*le},e.getBoxShapeValues=function(_t,Ft){var Lt=_t.add(Ft.position);return{center:Lt,min:Lt.subtract(Ft.size.scale(.5)),max:Lt.add(Ft.size.scale(.5))}},e._instance=null,e}(),We=function(){function e(_t){this.wasEnabled=!0,this._uuid="",this._collidingWith={},this._isDebug=!1,this._debugEntity=null,this._entity=_t,_t&&(this._trigger=_t.getComponent(Ve),this._uuid=_t.uuid,this._isDebug=this._trigger.debugEnabled,this._isDebug&&this.addDebugEntity())}return Object.defineProperty(e.prototype,"entity",{get:function(){return this._entity},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trigger",{get:function(){return this._trigger},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uuid",{get:function(){return this._uuid},enumerable:!1,configurable:!0}),e.prototype.getGlobalPosition=function(){return this._entity?e.getEntityWorldPosition(this._entity):Vector3.Zero()},e.prototype.getShape=function(){return this._trigger.shape},e.prototype.isInEngine=function(){return null!=this._entity&&this._entity.isAddedToEngine()},e.prototype.getActiveCollisions=function(){var _t=[];for(var Ft in this._collidingWith)this._collidingWith.hasOwnProperty(Ft)&&_t.push(this._collidingWith[Ft]);return _t},e.prototype.hasActiveCollision=function(_t){return null!=this._collidingWith[_t.uuid]&&null!=this._collidingWith[_t.uuid]},e.prototype.disengageActiveCollision=function(_t){delete this._collidingWith[_t.uuid]},e.prototype.engageCollision=function(_t){this._collidingWith[_t.uuid]=_t},e.prototype.isDebugging=function(){return this._isDebug},e.prototype.addDebugEntity=function(){return o(this,void 0,void 0,(function(){var _t,Lt,Yt;return a(this,(function(Kt){switch(Kt.label){case 0:return[4,!Ft.isPreviewMode()];case 1:return Kt.sent()||(e._debugMaterial||(e._debugMaterial=new Material,e._debugMaterial.alphaTest=.5),null==this._debugEntity&&(this._debugEntity=new Entity,_t=new Transform,this._debugEntity.addComponent(_t),this._debugEntity.addComponent(e._debugMaterial),this.getShape()instanceof P&&((Lt=new BoxShape).withCollisions=!1,this._debugEntity.addComponent(Lt),_t.scale=this.getShape().size),this.getShape()instanceof k&&((Lt=new SphereShape).withCollisions=!1,this._debugEntity.addComponent(Lt),Yt=this.getShape().radius,_t.scale=new Vector3(Yt,Yt,Yt))),engine.addEntity(this._debugEntity)),[2]}}))}))},e.prototype.removeDebugEntity=function(){null!=this._debugEntity&&engine.removeEntity(this._debugEntity)},e.prototype.updateDebugEntity=function(){this._debugEntity&&(this._debugEntity.getComponent(Transform).position=this.getGlobalPosition().add(this.getShape().position))},e.getEntityWorldPosition=function(_t){var Ft=_t.hasComponent(Transform)?_t.getComponent(Transform).position.clone():Vector3.Zero(),Lt=_t.getParent();if(null!=Lt){var Yt=Lt.hasComponent(Transform)?Lt.getComponent(Transform).rotation:Quaternion.Identity;return this.getEntityWorldPosition(Lt).add(Ft.rotate(Yt))}return Ft},e._debugMaterial=null,e}(),Ge=function(_t){function t(Ft){var Lt=_t.call(this)||this;return Lt._shape=Ft,Lt._uuid="cameraTrigger",Lt}return i(t,_t),t.prototype.getGlobalPosition=function(){return Camera.instance.position},t.prototype.getShape=function(){return this._shape},t.prototype.setShape=function(_t){this._shape=_t},t.prototype.isInEngine=function(){return!1},t.prototype.hasActiveCollision=function(_t){return!1},t.prototype.disengageActiveCollision=function(_t){},t.prototype.engageCollision=function(_t){},t.prototype.isDebugging=function(){return!1},t}(We),Ve=function(){function e(_t,Ft){this.enabled=!0,this.layer=0,this.triggeredByLayer=0,this._debugEnabled=!1,qe.createAndAddToEngine(),this.shape=_t,Ft&&(Ft.layer&&(this.layer=Ft.layer),Ft.triggeredByLayer&&(this.triggeredByLayer=Ft.triggeredByLayer),Ft.onTriggerEnter&&(this.onTriggerEnter=Ft.onTriggerEnter),Ft.onTriggerExit&&(this.onTriggerExit=Ft.onTriggerExit),Ft.onCameraEnter&&(this.onCameraEnter=Ft.onCameraEnter),Ft.onCameraExit&&(this.onCameraExit=Ft.onCameraExit),Ft.enableDebug&&(this._debugEnabled=Ft.enableDebug))}return Object.defineProperty(e.prototype,"debugEnabled",{get:function(){return this._debugEnabled},enumerable:!1,configurable:!0}),r([Component("triggerComponent")],e)}(),P=function(_t,Ft){void 0===_t&&(_t=Vector3.One().scale(2)),void 0===Ft&&(Ft=Vector3.Zero()),this.size=_t,this.position=Ft},k=function(_t,Ft){void 0===_t&&(_t=2),void 0===Ft&&(Ft=Vector3.Zero()),this.radius=_t,this.position=Ft};_t.ActionsSequenceSystem=function(){function e(_t){this.beginSequenceNode=null,this.currentSequenceNode=null,this.running=!1,this.started=!1,_t&&this.startSequence(_t)}return e.prototype.startSequence=function(_t){this.beginSequenceNode=_t.beginSequenceNode,this.currentSequenceNode=this.beginSequenceNode,this.running=!0,this.started=!1},e.prototype.setOnFinishCallback=function(_t){this.onFinishCallback=_t},e.prototype.isRunning=function(){return this.running},e.prototype.stop=function(){this.running=!1},e.prototype.resume=function(){null!=this.beginSequenceNode&&(this.running=!0)},e.prototype.reset=function(){this.currentSequenceNode=this.beginSequenceNode,this.running=!0,this.started=!1},e.prototype.getRunningAction=function(){var _t=this.currentSequenceNode;if(this.currentSequenceNode instanceof Xe)do{_t=_t.currentInnerSequence}while(_t instanceof Xe);return _t.action},e.prototype.update=function(_t){this.running&&(this.started?this.currentSequenceNode.hasFinish()?(this.currentSequenceNode.onFinish(),this.currentSequenceNode=this.currentSequenceNode.next,this.currentSequenceNode?this.currentSequenceNode.onStart():(this.running=!1,this.onFinishCallback&&this.onFinishCallback())):this.currentSequenceNode.update(_t):(this.currentSequenceNode.onStart(),this.started=!0))},e}(),Ue=_t.ActionsSequenceSystem||(_t.ActionsSequenceSystem={}),He=function(){function e(){this.currentSequenceNode=null,this.beginSequenceNode=null,this.whileNodeStack=[]}return e.prototype.then=function(_t){if(null==this.currentSequenceNode)this.currentSequenceNode=new $e,this.currentSequenceNode.action=_t,this.beginSequenceNode=this.currentSequenceNode;else{var Ft=new $e;Ft.action=_t,this.currentSequenceNode=this.currentSequenceNode.then(Ft)}return this},e.prototype.if=function(_t){var Ft=new Ye(_t);return null==this.currentSequenceNode?(this.currentSequenceNode=Ft,this.beginSequenceNode=Ft):this.currentSequenceNode=this.currentSequenceNode.then(Ft),this},e.prototype.else=function(){var _t=this.currentSequenceNode.getSequence();if(!(_t instanceof Ye))throw new Error("IF statement is needed to be called before ELSE statement.");_t.closed=!0;var Ft=new Je(_t);return this.currentSequenceNode=this.currentSequenceNode.then(Ft),this},e.prototype.endIf=function(){var _t=this.currentSequenceNode.getSequence();if(!(_t instanceof Ye||_t instanceof Je))throw new Error("IF statement is needed to be called before ENDIF statement.");return _t.closed=!0,this},e.prototype.while=function(_t){var Ft=new Qe(_t);return null==this.currentSequenceNode?(this.currentSequenceNode=Ft,this.beginSequenceNode=Ft):this.currentSequenceNode=this.currentSequenceNode.then(Ft),this.whileNodeStack.push(Ft),this},e.prototype.endWhile=function(){var _t=this.currentSequenceNode.getSequence();if(!(_t instanceof Qe))throw new Error("WHILE statement is needed to be called before ENDWHILE statement.");return _t.closed=!0,this.whileNodeStack.length>0&&this.whileNodeStack.splice(this.whileNodeStack.length-1,1),this},e.prototype.breakWhile=function(){if(!(this.whileNodeStack.length>0))throw new Error("WHILE statement is needed to be called before BREAKWHILE statement.");return this.currentSequenceNode=this.currentSequenceNode.then(new Ze(this.whileNodeStack[this.whileNodeStack.length-1])),this},e}(),Ue.SequenceBuilder=He;var $e=function(){function e(){this.action=null,this.next=null}return e.prototype.then=function(_t){return this.next=_t,_t},e.prototype.onStart=function(){this.action&&this.action.onStart()},e.prototype.update=function(_t){this.action&&this.action.update(_t)},e.prototype.onFinish=function(){this.action&&this.action.onFinish()},e.prototype.hasFinish=function(){return!this.action||this.action.hasFinished},e.prototype.getSequence=function(){return this},e}(),Xe=function(_t){function t(){var Ft=null!==_t&&_t.apply(this,arguments)||this;return Ft.currentInnerSequence=null,Ft.startingInnerSequence=null,Ft.closed=!1,Ft}return i(t,_t),t.prototype.then=function(_t){if(null==this.currentInnerSequence)this.currentInnerSequence=_t,this.startingInnerSequence=_t;else{if(this.closed)return this.next=_t,_t;this.currentInnerSequence=this.currentInnerSequence.then(_t)}return this},t.prototype.onStart=function(){this.currentInnerSequence=this.startingInnerSequence,this.currentInnerSequence&&this.currentInnerSequence.onStart()},t.prototype.update=function(_t){this.currentInnerSequence&&(this.currentInnerSequence.hasFinish()?(this.currentInnerSequence.onFinish(),this.currentInnerSequence=this.currentInnerSequence.next,this.currentInnerSequence&&this.currentInnerSequence.onStart()):this.currentInnerSequence.update(_t))},t.prototype.onFinish=function(){this.currentInnerSequence&&this.currentInnerSequence.onFinish()},t.prototype.hasFinish=function(){return null==this.currentInnerSequence},t.prototype.getSequence=function(){if(this.currentInnerSequence){var _t=this.currentInnerSequence.getSequence();if(_t instanceof t&&!_t.closed)return _t}return this},t}($e),Ye=function(_t){function t(Ft){var Lt=_t.call(this)||this;return Lt.result=!1,Lt.condition=Ft,Lt}return i(t,_t),t.prototype.onStart=function(){this.result=this.condition(),this.result?_t.prototype.onStart.call(this):this.currentInnerSequence=null},t}(Xe),Je=function(_t){function t(Ft){var Lt=_t.call(this)||this;return Lt.ifSequence=null,Lt.ifSequence=Ft,Lt}return i(t,_t),t.prototype.onStart=function(){this.ifSequence&&!this.ifSequence.result?_t.prototype.onStart.call(this):this.currentInnerSequence=null},t}(Xe),Qe=function(_t){function t(Ft){var Lt=_t.call(this)||this;return Lt.breakWhile=!1,Lt.condition=Ft,Lt}return i(t,_t),t.prototype.onStart=function(){this.breakWhile=!1,this.condition()?_t.prototype.onStart.call(this):this.currentInnerSequence=null},t.prototype.update=function(_t){this.currentInnerSequence&&(this.currentInnerSequence.hasFinish()?(this.currentInnerSequence.onFinish(),this.currentInnerSequence=this.currentInnerSequence.next,null==this.currentInnerSequence&&(this.currentInnerSequence=this.startingInnerSequence),this.currentInnerSequence&&this.currentInnerSequence.onStart()):this.currentInnerSequence.update(_t))},t.prototype.hasFinish=function(){return this.breakWhile||!this.condition()},t}(Xe),Ze=function(_t){function t(Ft){var Lt=_t.call(this)||this;return Lt.whileNode=Ft,Lt}return i(t,_t),t.prototype.onStart=function(){this.whileNode.breakWhile=!0},t}($e);_t.Delay=Re,_t.ExpireIn=Pe,_t.FollowCurvedPathComponent=Se,_t.FollowPathComponent=Ce,_t.Interpolate=h,_t.Interval=Le,_t.KeepRotatingComponent=Ie,_t.MoveTransformComponent=Zt,_t.RotateTransformComponent=le,_t.ScaleTransformComponent=ve,_t.SequenceNode=$e,_t.ToggleComponent=Ne,_t.TransformSystem=Yt,_t.TriggerBoxShape=P,_t.TriggerComponent=Ve,_t.TriggerSphereShape=k,_t.TriggerSystem=qe,_t.addLabel=I,_t.addOneTimeTrigger=function(_t,Ft,Lt){var Yt=!1,Kt=!1,Zt=new Entity;Zt.addComponent(new Transform({}));var le={};return Ft.layer&&(le.layer=Ft.layer),Ft.triggeredByLayer&&(le.triggeredByLayer=Ft.triggeredByLayer),Ft.onCameraEnter&&(le.onCameraEnter=function(){Yt||(Yt=!0,Ft.onCameraEnter()),!Yt&&Ft.onCameraEnter||!Kt&&Ft.onCameraExit||engine.removeEntity(Zt)}),Ft.onCameraExit&&(le.onCameraExit=function(){Kt||(Kt=!0,Ft.onCameraExit()),!Yt&&Ft.onCameraEnter||!Kt&&Ft.onCameraExit||engine.removeEntity(Zt)}),Ft.enableDebug&&(le.enableDebug=Ft.enableDebug),Zt.addComponent(new Ve(_t,le)),Lt&&Zt.setParent(Lt),engine.addEntity(Zt),Zt},_t.addTestCube=function(_t,Lt,Yt,Kt,Zt,le,ve){return o(this,void 0,void 0,(function(){var Ce,Se,Ie;return a(this,(function(Ne){switch(Ne.label){case 0:return(Ce=!ve)?[4,!Ft.isPreviewMode()]:[3,2];case 1:Ce=Ne.sent(),Ne.label=2;case 2:return Ce?[2]:((Se=new Entity).addComponent(new Transform(_t)),Zt?(Se.addComponent(new SphereShape),Se.getComponent(Transform).scale.setAll(.5)):Se.addComponent(new BoxShape),engine.addEntity(Se),Se.addComponent(new OnPointerDown(Lt,{hoverText:Yt||"click",button:ActionButton.POINTER})),Kt&&((Ie=new Material).albedoColor=Kt,Se.addComponent(Ie)),le&&(Se.getComponent(BoxShape).withCollisions=!1),Yt&&I(Yt,Se,!0),[2,Se])}}))}))},_t.clamp=function(_t,Ft,Lt){var Yt=_t;return _t>Lt?Yt=Lt:_t<Ft&&(Yt=Ft),Yt},_t.getEntityWorldPosition=function e(_t){var Ft=_t.hasComponent(Transform)?_t.getComponent(Transform).position.clone():Vector3.Zero(),Lt=_t.getParent();if(null!=Lt&&"0"!=Lt.uuid){if("FirstPersonCameraEntityReference"==Lt.uuid){var Yt=Camera.instance.rotation.clone();return Camera.instance.position.clone().add(Ft.rotate(Yt))}if("AvatarEntityReference"==Lt.uuid){var Kt=Camera.instance.rotation;return Yt=Quaternion.Euler(0,Kt.eulerAngles.y,0),Camera.instance.position.clone().add(Ft.rotate(Yt)).add(new Vector3(0,-.875,0))}return Yt=Lt.hasComponent(Transform)?Lt.getComponent(Transform).rotation:Quaternion.Identity,e(Lt).add(Ft.rotate(Yt))}return Ft},_t.getEntityWorldRotation=function e(_t){var Ft=_t.hasComponent(Transform)?_t.getComponent(Transform).rotation.clone():Quaternion.Zero(),Lt=_t.getParent();if(null!=Lt&&"0"!=Lt.uuid){if("FirstPersonCameraEntityReference"==Lt.uuid){var Yt=Camera.instance.rotation.clone();return Ft.multiply(Yt)}return"AvatarEntityReference"==Lt.uuid?(Yt=Quaternion.Euler(0,Camera.instance.rotation.eulerAngles.y,0),Ft.multiply(Yt)):(Yt=e(Lt),Ft.multiply(Yt))}return Ft},_t.map=function(_t,Ft,Lt,Yt,Kt){return(_t-Ft)/(Lt-Ft)*(Kt-Yt)+Yt},_t.sendRequest=function(_t,Ft,Lt,Yt){return o(this,void 0,void 0,(function(){var Kt,Zt,le;return a(this,(function(ve){switch(ve.label){case 0:return ve.trys.push([0,6,,7]),Kt={method:Ft||"GET"},Lt&&(Kt.headers=Lt),Yt&&(Kt.body=JSON.stringify(Yt)),[4,fetch(_t,Kt)];case 1:Zt=ve.sent(),ve.label=2;case 2:return ve.trys.push([2,4,,5]),[4,Zt.json()];case 3:return[2,ve.sent()];case 4:return ve.sent(),[2,Zt];case 5:return[3,7];case 6:return le=ve.sent(),log("error fetching from ",_t," : ",le),[3,7];case 7:return[2]}}))}))},_t.setTimeout=function(_t,Ft){var Lt=new Entity;return Lt.addComponent(new Re(_t,(function(){Ft(),engine.removeEntity(Lt)}))),engine.addEntity(Lt),Lt},Object.defineProperty(_t,"__esModule",{value:!0})})),function(_t,Ft){"object"==typeof exports&&"undefined"!=typeof module?Ft(exports):"function"==typeof define&&define.amd?define("@dcl/ui-scene-utils",["exports"],Ft):Ft((_t="undefined"!=typeof globalThis?globalThis:_t||self)["ui-utils"]={})}(this,(function(_t){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var e=function(_t,Ft){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Ft){_t.__proto__=Ft}||function(_t,Ft){for(var Lt in Ft)Object.prototype.hasOwnProperty.call(Ft,Lt)&&(_t[Lt]=Ft[Lt])})(_t,Ft)};function i(_t,Ft){function o(){this.constructor=_t}e(_t,Ft),_t.prototype=null===Ft?Object.create(Ft):(o.prototype=Ft.prototype,new o)}var o=function(){return(o=Object.assign||function(_t){for(var Ft,Lt=1,Yt=arguments.length;Lt<Yt;Lt++)for(var Kt in Ft=arguments[Lt])Object.prototype.hasOwnProperty.call(Ft,Kt)&&(_t[Kt]=Ft[Kt]);return _t}).apply(this,arguments)};function n(_t,Ft){var Lt={};for(var Yt in _t)Object.prototype.hasOwnProperty.call(_t,Yt)&&Ft.indexOf(Yt)<0&&(Lt[Yt]=_t[Yt]);if(null!=_t&&"function"==typeof Object.getOwnPropertySymbols){var Kt=0;for(Yt=Object.getOwnPropertySymbols(_t);Kt<Yt.length;Kt++)Ft.indexOf(Yt[Kt])<0&&Object.prototype.propertyIsEnumerable.call(_t,Yt[Kt])&&(Lt[Yt[Kt]]=_t[Yt[Kt]])}return Lt}function r(_t){var Ft="function"==typeof Symbol&&Symbol.iterator,Lt=Ft&&_t[Ft],Yt=0;if(Lt)return Lt.call(_t);if(_t&&"number"==typeof _t.length)return{next:function(){return _t&&Yt>=_t.length&&(_t=void 0),{value:_t&&_t[Yt++],done:!_t}}};throw new TypeError(Ft?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ft=function(){function t(Ft,Lt){var Kt=this;Yt.createAndAddToEngine(),this.elapsedTime=0,this.targetTime=Ft,this.onTimeReachedCallback=Lt,this.onTargetTimeReached=function(Ft){Kt.onTimeReachedCallback(),Ft.removeComponent(_t)}}var _t;return _t=t,t.prototype.setCallback=function(_t){this.onTimeReachedCallback=_t},_t=function(_t,Ft,Lt,Yt){var Kt,Zt=arguments.length,le=Zt<3?Ft:null===Yt?Yt=Object.getOwnPropertyDescriptor(Ft,Lt):Yt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(_t,Ft,Lt,Yt);else for(var ve=_t.length-1;ve>=0;ve--)(Kt=_t[ve])&&(le=(Zt<3?Kt(le):Zt>3?Kt(Ft,Lt,le):Kt(Ft,Lt))||le);return Zt>3&&le&&Object.defineProperty(Ft,Lt,le),le}([Component("UItimerDelay")],t)}(),Lt=engine.getComponentGroup(Ft),Yt=function(){function t(){t._instance=this}return t.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new t,engine.addSystem(this._instance)),this._instance},t.prototype.update=function(_t){var Yt,Kt;try{for(var Zt=r(Lt.entities),le=Zt.next();!le.done;le=Zt.next()){var ve=le.value,Ce=ve.getComponent(Ft);Ce.elapsedTime+=_t,Ce.elapsedTime>=Ce.targetTime&&Ce.onTargetTimeReached(ve)}}catch(_t){Yt={error:_t}}finally{try{le&&!le.done&&(Kt=Zt.return)&&Kt.call(Zt)}finally{if(Yt)throw Yt.error}}},t._instance=null,t}(),Kt=new UICanvas;Kt.visible=!0;var Zt=new Font(Fonts.SanFrancisco),le=new Font(Fonts.SanFrancisco_Heavy),ve=new Texture("https://decentraland.org/images/ui/light-atlas-v3.png"),Ce=new Texture("https://decentraland.org/images/ui/dark-atlas-v3.png"),Se=new UIText(Kt);Se.vAlign="center",Se.hAlign="center",Se.hTextAlign="center",Se.vTextAlign="center",Se.font=Zt,Se.fontSize=60,Se.color=new Color4(0,0,0,1),Se.visible=!1,Se.positionY=80;var Ie=new UIImage(Kt,ve);Ie.hAlign="center",Ie.vAlign="center",Ie.width=400,Ie.height=250,Ie.visible=!1;var Ne,Fe,Re,Pe,Le=function(_t){function e(Ft,Lt,Yt,le,ve,Ce,Se){var Ie=_t.call(this)||this;return Ie.canvas=Kt,Ie.valueAsNum=Ft,Ie.uiText=new UIText(Kt),Ie.fixedDigits=Se||null,Ie.uiText.value=Ie.toFixedLengthString(Ft),Ie.uiText.hAlign="right",Ie.uiText.vAlign="bottom",Ie.uiText.positionX=Lt||0,Ie.uiText.positionY=Yt||0,Ie.uiText.fontSize=ve||25,Ie.uiText.font=Zt,Ie.uiText.vTextAlign="center",Ie.uiText.hTextAlign="center",Ie.uiText.color=le||Color4.White(),Ie.uiText.outlineColor=Color4.Black(),Ie.uiText.outlineWidth=Ce?0:.1,Ie}return i(e,_t),e.prototype.read=function(){return this.valueAsNum},e.prototype.increase=function(_t){this.valueAsNum+=_t||1,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.decrease=function(_t){this.valueAsNum-=_t||1,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.set=function(_t){this.valueAsNum=_t,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.hide=function(){this.uiText.visible=!1},e.prototype.show=function(){this.uiText.visible=!0},e.prototype.toFixedLengthString=function(_t){var Ft=_t.toString();if(!this.fixedDigits)return Ft;for(var Lt=Ft.length-this.fixedDigits;Lt<0;)Ft="0".concat(Ft),Lt+=1;return Lt>0&&(Ft=_t.toPrecision(this.fixedDigits)),Ft},e}(Entity);(Ne=_t.PromptStyles||(_t.PromptStyles={})).LIGHT="light",Ne.DARK="dark",Ne.LIGHTLARGE="lightlarge",Ne.DARKLARGE="darklarge",Ne.LIGHTSLANTED="lightslanted",Ne.DARKSLANTED="darkslanted",(Fe=_t.BarStyles||(_t.BarStyles={})).ROUNDBLACK="roundblack",Fe.ROUNDWHITE="roundwhite",Fe.ROUNDSILVER="roundsilver",Fe.ROUNDGOLD="roundgold",Fe.SQUAREBLACK="squareblack",Fe.SQUAREWHITE="squarewhite",Fe.SQUARESILVER="squaresilver",Fe.SQUAREGOLD="squaregold",(Re=_t.ButtonStyles||(_t.ButtonStyles={})).E="e",Re.F="f",Re.DARK="dark",Re.RED="red",Re.ROUNDBLACK="roundblack",Re.ROUNDWHITE="roundwhite",Re.ROUNDSILVER="roundsilver",Re.ROUNDGOLD="roundgold",Re.SQUAREBLACK="squareblack",Re.SQUAREWHITE="squarewhite",Re.SQUARESILVER="squaresilver",Re.SQUAREGOLD="squaregold",(Pe=_t.SwitchStyles||(_t.SwitchStyles={})).ROUNDGREEN="roundgreen",Pe.ROUNDRED="roundred",Pe.SQUAREGREEN="squaregreen",Pe.SQUARERED="squarered";var Ue={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:662},He={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:612},qe={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:662},We={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:612},Ge={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:458},Ve={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:457},$e={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:494},Xe={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:493},Ye={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:531},Je={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:531},Qe={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:567},Ze={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:567},tn={sourceWidth:26,sourceHeight:26,sourceLeft:697,sourceTop:611},nn={sourceWidth:26,sourceHeight:26,sourceLeft:733,sourceTop:611},rn={sourceWidth:416,sourceHeight:352,sourceLeft:501,sourceTop:12},on={sourceWidth:480,sourceHeight:384,sourceLeft:7,sourceTop:12},sn={sourceWidth:486,sourceHeight:326,sourceLeft:7,sourceTop:413},an={closeW:{sourceWidth:32,sourceHeight:32,sourceLeft:942,sourceTop:306},closeD:{sourceWidth:32,sourceHeight:32,sourceLeft:986,sourceTop:306},closeWLarge:{sourceWidth:64,sourceHeight:64,sourceLeft:512,sourceTop:381},closeDLarge:{sourceWidth:64,sourceHeight:64,sourceLeft:583,sourceTop:381},closeWNoBack:{sourceWidth:24,sourceHeight:24,sourceLeft:946,sourceTop:252},closeDNoBack:{sourceWidth:24,sourceHeight:24,sourceLeft:946,sourceTop:214},closeWNoBackLarge:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:214},closeDNoBackLarge:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:260},FDark:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:4},FWhite:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:4},EDark:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:40},EWhite:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:40},Timer:{sourceWidth:24,sourceHeight:32.2,sourceLeft:718,sourceTop:388},TimerLarge:{sourceWidth:48,sourceHeight:68,sourceLeft:662,sourceTop:386},ClickWhite:{sourceWidth:32,sourceHeight:48,sourceLeft:799,sourceTop:389},ClickDark:{sourceWidth:32,sourceHeight:48,sourceLeft:757,sourceTop:389}},cn={sourceWidth:24,sourceHeight:24,sourceLeft:987,sourceTop:76},un={sourceWidth:24,sourceHeight:24,sourceLeft:987,sourceTop:104},ln={sourceWidth:24,sourceHeight:24,sourceLeft:958,sourceTop:76},dn={sourceWidth:24,sourceHeight:24,sourceLeft:958,sourceTop:104},hn={sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:132},pn={sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:168},fn={sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:132},mn={sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:168},yn={sourceWidth:64,sourceHeight:32,sourceLeft:783,sourceTop:454},gn={sourceWidth:64,sourceHeight:32,sourceLeft:853,sourceTop:454},bn={sourceWidth:64,sourceHeight:32,sourceLeft:923,sourceTop:454},vn={sourceWidth:64,sourceHeight:32,sourceLeft:783,sourceTop:501},wn={sourceWidth:64,sourceHeight:32,sourceLeft:852,sourceTop:501},Tn={sourceWidth:64,sourceHeight:32,sourceLeft:921,sourceTop:501};function S(_t,Ft){_t.sourceWidth=Ft.sourceWidth,_t.sourceHeight=Ft.sourceHeight,_t.sourceLeft=Ft.sourceLeft?Ft.sourceLeft:0,_t.sourceTop=Ft.sourceTop?Ft.sourceTop:0}function B(_t){var Ft=-10-4*_t;return Ft>-65?Ft:-65}var xn=function(Ft){function o(Lt,Yt,Zt,le,Ce,Se,Ie){var Ne=Ft.call(this)||this;if(Ne.canvas=Kt,Ne.valueAsNum=Lt>1?1:Lt,Ne.fullWidth=Se?128*Se:128,Ne.background=new UIImage(Kt,ve),Ne.background.width=Se?128*Se:128,Ne.background.height=Se?32*Se:32,Ne.background.hAlign="right",Ne.background.vAlign="bottom",Ne.background.positionX=Yt||0,Ne.background.positionY=Zt||0,Ce)switch(Ce){case _t.BarStyles.ROUNDBLACK:S(Ne.background,Ge);break;case _t.BarStyles.ROUNDWHITE:S(Ne.background,$e);break;case _t.BarStyles.ROUNDSILVER:S(Ne.background,Ye);break;case _t.BarStyles.ROUNDGOLD:S(Ne.background,Qe);break;case _t.BarStyles.SQUAREBLACK:S(Ne.background,Ve);break;case _t.BarStyles.SQUAREWHITE:S(Ne.background,Xe);break;case _t.BarStyles.SQUARESILVER:S(Ne.background,Je);break;case _t.BarStyles.SQUAREGOLD:S(Ne.background,Ze)}else S(Ne.background,Ye);return Ne.background.sourceWidth=128,Ne.background.sourceHeight=32,Ne.background.visible=!0,Ne.bar=new UIContainerRect(Ne.background),Ne.bar.color=le||Color4.Red(),Ne.bar.thickness=0,Ne.bar.hAlign="left",Ne.bar.vAlign="center",Ne.bar.positionX=Se?2.55*Se:2.55,Ne.bar.positionY=0,Ne.bar.height=Se?32*Se-7.5*Se:24.5,Ne.bar.width=Se?Ne.fullWidth*Ne.valueAsNum-5.1*Se:Ne.fullWidth*Ne.valueAsNum-5.1,Ie&&Ne.hide(),Ne}return i(o,Ft),o.prototype.read=function(){return this.valueAsNum},o.prototype.increase=function(_t){this.valueAsNum+=_t||.1,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.decrease=function(_t){this.valueAsNum-=_t||.1,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.set=function(_t){this.valueAsNum=_t,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.hide=function(){this.background.visible=!1,this.bar.visible=!1},o.prototype.show=function(){this.background.visible=!0,this.bar.visible=!0},o}(Entity),An=function(_t){function e(Ft,Lt,Yt,Zt,le,ve){var Ce=_t.call(this)||this;Ce.canvas=Kt;var Se=new Texture(Ft);return Ce.image=new UIImage(Kt,Se),Ce.image.hAlign="right",Ce.image.vAlign="bottom",Ce.image.positionX=Lt||0,Ce.image.positionY=Yt||0,Ce.image.width=Zt||64,Ce.image.height=le||64,Ce.image.sourceLeft=ve&&ve.sourceLeft?ve.sourceLeft:0,Ce.image.sourceTop=ve&&ve.sourceTop?ve.sourceTop:0,Ce.image.sourceWidth=ve&&ve.sourceWidth?ve.sourceWidth:Zt||64,Ce.image.sourceHeight=ve&&ve.sourceHeight?ve.sourceHeight:le||64,Ce}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(_t){var Lt=this;if(this.image.visible=!0,_t){var Yt=new Entity;engine.addEntity(Yt),Yt.addComponentOrReplace(new Ft(_t,(function(){Lt.hide()})))}},e}(Entity),Cn=function(_t){function e(Ft,Lt,Yt,Zt,le,ve){var Ce=_t.call(this)||this;Ce.canvas=Kt;var Se=new Texture(Ft);return Ce.image=new UIImage(Kt,Se),Ce.image.hAlign="right",Ce.image.vAlign="bottom",Ce.image.positionX=Lt||0,Ce.image.positionY=Yt||0,Ce.image.width=Zt||32,Ce.image.height=le||32,Ce.image.sourceLeft=ve&&ve.sourceLeft?ve.sourceLeft:0,Ce.image.sourceTop=ve&&ve.sourceTop?ve.sourceTop:0,Ce.image.sourceWidth=ve?ve.sourceWidth:Zt||32,Ce.image.sourceHeight=ve?ve.sourceHeight:le||32,Ce}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(_t){var Lt=this;if(this.image.visible=!0,_t){var Yt=new Entity;engine.addEntity(Yt),Yt.addComponentOrReplace(new Ft(_t,(function(){Lt.hide()})))}},e}(Entity),_n=function(_t){function e(Ft,Lt,Yt,Zt,le,ve){var Ce=_t.call(this)||this;Ce.canvas=Kt;var Se=new Texture(Ft);return Ce.image=new UIImage(Kt,Se),Ce.image.hAlign="right",Ce.image.vAlign="bottom",Ce.image.positionX=Lt||0,Ce.image.positionY=Yt||0,Ce.image.width=Zt||128,Ce.image.height=le||128,Ce.image.sourceLeft=ve&&ve.sourceLeft?ve.sourceLeft:0,Ce.image.sourceTop=ve&&ve.sourceTop?ve.sourceTop:0,Ce.image.sourceWidth=ve?ve.sourceWidth:Zt||128,Ce.image.sourceHeight=ve?ve.sourceHeight:le||128,Ce}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(_t){var Lt=this;if(this.image.visible=!0,_t){var Yt=new Entity;engine.addEntity(Yt),Yt.addComponentOrReplace(new Ft(_t,(function(){Lt.hide()})))}},e}(Entity),Sn=function(_t){function e(Lt,Yt,Zt,le,ve,Ce,Se,Ie){var Ne=_t.call(this)||this;Ne.canvas=Kt;var Fe=new Texture(Lt);if(Ne.image=new UIImage(Kt,Fe),Ne.image.hAlign="center",Ne.image.vAlign="center",Ne.image.positionX=le||0,Ne.image.positionY=ve||0,Ne.image.width=Ce||512,Ne.image.height=Se||512,Ne.image.sourceLeft=Ie&&Ie.sourceLeft?Ie.sourceLeft:0,Ne.image.sourceTop=Ie&&Ie.sourceTop?Ie.sourceTop:0,Ne.image.sourceWidth=Ie?Ie.sourceWidth:Ce||512,Ne.image.sourceHeight=Ie?Ie.sourceHeight:Se||512,Ne.image.visible=!Zt,-1!=Yt){var Re=new Entity;engine.addEntity(Re),Re.addComponentOrReplace(new Ft(Yt||3,(function(){Ne.hide()})))}return Ne}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(_t){var Lt=this;if(this.image.visible=!0,_t){var Yt=new Entity;engine.addEntity(Yt),Yt.addComponentOrReplace(new Ft(_t,(function(){Lt.hide()})))}},e}(Entity),En=function(_t){function e(Ft,Lt,Yt,le){var Se=_t.call(this)||this;Se.canvas=Kt,Se.UIOpenTime=+Date.now(),Se.background=new UIImage(Kt,ve),Se.background.hAlign="center",Se.background.vAlign="center",Se.onAccept=Lt||null;var Ie=le?Ce:ve;return Se.background.source=Ie,Se.background.width=400,Se.background.height=250,Se.background.positionY=0,S(Se.background,rn),Se.background.visible=!0,Se.closeIcon=new UIImage(Se.background,Ie),Se.closeIcon.positionX=175,Se.closeIcon.positionY=100,Se.closeIcon.width=32,Se.closeIcon.height=32,S(Se.closeIcon,le?an.closeW:an.closeD),Se.closeIcon.onClick=new OnClick((function(){Se.close()})),Se.text=new UIText(Se.background),Se.text.value=Ft,Se.text.adaptWidth=!1,Se.text.textWrapping=!0,Se.text.width=380,Se.text.hAlign="center",Se.text.vAlign="top",Se.text.positionX=0,Se.text.positionY=-65,Se.text.fontSize=24,Se.text.font=Zt,Se.text.vTextAlign="center",Se.text.hTextAlign="center",Se.text.color=le?Color4.White():Color4.Black(),Se.button=new UIImage(Se.background,Ie),Se.button.positionX=0,Se.button.positionY=-60,Se.button.width=174,Se.button.height=46,S(Se.button,Ue),Se.icon=new UIImage(Se.button,1==le?Ce:ve),Se.icon.width=26,Se.icon.height=26,Se.icon.hAlign="center",Se.icon.vAlign="center",Se.icon.isPointerBlocker=!1,S(Se.icon,tn),Se.icon.positionX=B(Yt?Yt.length:2),Se.buttonLabel=new UIText(Se.button),Se.buttonLabel.value=Yt||"Ok",Se.buttonLabel.hTextAlign="center",Se.buttonLabel.vTextAlign="center",Se.buttonLabel.positionX=30,Se.buttonLabel.fontSize=18,Se.buttonLabel.font=Zt,Se.buttonLabel.color=Color4.White(),Se.buttonLabel.isPointerBlocker=!1,Se.button.onClick=new OnClick((function(){Se.accept()})),Se.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(_t){Se.button.visible&&+Date.now()-Se.UIOpenTime>100&&Se.accept()})),Se}return i(e,_t),e.prototype.close=function(){this.background.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1},e.prototype.accept=function(){this.onAccept&&this.onAccept(),this.hide()},e.prototype.hide=function(){this.background.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1,Input.instance.unsubscribe("BUTTON_DOWN",ActionButton.PRIMARY,this.EButtonAction)},e.prototype.show=function(){this.background.visible=!0,this.closeIcon.visible=!0,this.button.visible=!0,this.text.visible=!0,this.buttonLabel.visible=!0,Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,this.EButtonAction)},e}(Entity),kn=function(_t){function e(Ft,Lt,Yt,Se,Ie,Ne,Fe){var Re=_t.call(this)||this;Re.canvas=Kt,Re.UIOpenTime=+Date.now(),Re.background=new UIImage(Kt,ve),Re.background.hAlign="center",Re.background.vAlign="center",Re.onAccept=Yt,Re.onReject=Se||null;var Pe=Fe?Ce:ve;return Re.background.source=Pe,Re.background.width=480,Re.background.height=384,S(Re.background,on),Re.background.visible=!0,Re.closeIcon=new UIImage(Re.background,Pe),Re.closeIcon.positionX=215,Re.closeIcon.positionY=164,Re.closeIcon.width=32,Re.closeIcon.height=32,S(Re.closeIcon,Fe?an.closeW:an.closeD),Re.closeIcon.onClick=new OnClick((function(){Re.close()})),Re.title=new UIText(Re.background),Re.title.value=Ft,Re.title.adaptWidth=!1,Re.title.textWrapping=!0,Re.title.width=380,Re.title.hAlign="center",Re.title.vAlign="top",Re.title.positionX=0,Re.title.positionY=-20,Re.title.font=le,Re.title.fontSize=24,Re.title.vTextAlign="center",Re.title.hTextAlign="center",Re.title.color=Fe?Color4.White():Color4.Black(),Re.text=new UIText(Re.background),Re.text.value=Lt,Re.text.adaptWidth=!1,Re.text.textWrapping=!0,Re.text.width=380,Re.text.hAlign="center",Re.text.vAlign="top",Re.text.positionX=0,Re.text.positionY=-145,Re.text.fontSize=24,Re.text.font=Zt,Re.text.vTextAlign="center",Re.text.hTextAlign="center",Re.text.color=Fe?Color4.White():Color4.Black(),Re.buttonE=new UIImage(Re.background,Pe),Re.buttonE.positionX=-100,Re.buttonE.positionY=-120,Re.buttonE.width=174,Re.buttonE.height=46,S(Re.buttonE,Ue),Re.buttonEIcon=new UIImage(Re.buttonE,1==Fe?Ce:ve),Re.buttonEIcon.width=26,Re.buttonEIcon.height=26,Re.buttonEIcon.hAlign="center",Re.buttonEIcon.vAlign="center",Re.buttonEIcon.isPointerBlocker=!1,S(Re.buttonEIcon,tn),Re.buttonEIcon.positionX=B(Ie?Ie.length:2),Re.buttonELabel=new UIText(Re.buttonE),Re.buttonELabel.value=Ie||"Ok",Re.buttonELabel.hTextAlign="center",Re.buttonELabel.vTextAlign="center",Re.buttonELabel.positionX=30,Re.buttonELabel.fontSize=18,Re.buttonELabel.font=Zt,Re.buttonELabel.color=Color4.White(),Re.buttonELabel.isPointerBlocker=!1,Re.buttonE.onClick=new OnClick((function(){Re.accept()})),Re.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(_t){Re.buttonE.visible&&+Date.now()-Re.UIOpenTime>100&&Re.accept()})),Re.buttonF=new UIImage(Re.background,Pe),Re.buttonF.positionX=100,Re.buttonF.positionY=-120,Re.buttonF.width=174,Re.buttonF.height=46,S(Re.buttonF,He),Re.buttonFIcon=new UIImage(Re.buttonF,1==Fe?Ce:ve),Re.buttonFIcon.width=26,Re.buttonFIcon.height=26,Re.buttonFIcon.hAlign="center",Re.buttonFIcon.vAlign="center",Re.buttonFIcon.isPointerBlocker=!1,S(Re.buttonFIcon,nn),Re.buttonFIcon.positionX=B(Ne?Ne.length:6),Re.buttonFLabel=new UIText(Re.buttonF),Re.buttonFLabel.value=Ne||"Cancel",Re.buttonFLabel.hTextAlign="center",Re.buttonFLabel.vTextAlign="center",Re.buttonFLabel.positionX=30,Re.buttonFLabel.fontSize=18,Re.buttonFLabel.font=Zt,Re.buttonFLabel.color=Color4.White(),Re.buttonFLabel.isPointerBlocker=!1,Re.buttonF.onClick=new OnClick((function(){Re.reject()})),Re.FButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,(function(_t){Re.buttonF.visible&&+Date.now()-Re.UIOpenTime>100&&Re.reject()})),Re}return i(e,_t),e.prototype.close=function(){this.background.visible=!1,this.closeIcon.visible=!1,this.buttonE.visible=!1,this.buttonF.visible=!1,this.text.visible=!1,this.buttonELabel.visible=!1,this.buttonFLabel.visible=!1,this.title.visible=!1},e.prototype.accept=function(){this.onAccept&&this.onAccept(),this.hide()},e.prototype.reject=function(){this.onReject&&this.onReject(),this.hide()},e.prototype.hide=function(){this.background.visible=!1,this.closeIcon.visible=!1,this.buttonE.visible=!1,this.buttonF.visible=!1,this.text.visible=!1,this.buttonELabel.visible=!1,this.buttonFLabel.visible=!1,this.buttonEIcon.visible=!1,this.buttonFIcon.visible=!1,Input.instance.unsubscribe("BUTTON_DOWN",ActionButton.PRIMARY,this.EButtonAction),Input.instance.unsubscribe("BUTTON_DOWN",ActionButton.SECONDARY,this.FButtonAction)},e.prototype.show=function(){this.background.visible=!0,this.closeIcon.visible=!0,this.buttonE.visible=!0,this.buttonF.visible=!0,this.text.visible=!0,this.buttonELabel.visible=!0,this.buttonFLabel.visible=!0,this.buttonEIcon.visible=!0,this.buttonFIcon.visible=!0,Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,this.EButtonAction),Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,this.FButtonAction)},e}(Entity),In=function(_t){function e(Ft,Lt,Yt,Se,Ie){var Ne=_t.call(this)||this;Ne.canvas=Kt,Ne.UIOpenTime=+Date.now(),Ne.background=new UIImage(Kt,ve),Ne.background.hAlign="center",Ne.background.vAlign="center",Ne.onAccept=Lt;var Fe=Ie?Ce:ve;Ne.background.source=Fe,Ne.background.width=400,Ne.background.height=250,S(Ne.background,rn),Ne.background.visible=!0,Ne.text=new UIText(Ne.background),Ne.text.value=Ft,Ne.text.adaptWidth=!1,Ne.text.textWrapping=!0,Ne.text.width=320,Ne.text.hAlign="center",Ne.text.vAlign="top",Ne.text.positionX=0,Ne.text.positionY=-20,Ne.text.fontSize=24,Ne.text.font=le,Ne.text.vTextAlign="center",Ne.text.hTextAlign="center",Ne.text.color=Ie?Color4.White():Color4.Black(),Ne.closeIcon=new UIImage(Ne.background,Fe),Ne.closeIcon.positionX=175,Ne.closeIcon.positionY=100,Ne.closeIcon.width=32,Ne.closeIcon.height=32,S(Ne.closeIcon,Ie?an.closeW:an.closeD),Ne.closeIcon.onClick=new OnClick((function(){Ne.hide()})),Ne.button=new UIImage(Ne.background,Fe),Ne.button.positionX=0,Ne.button.positionY=-60,Ne.button.width=174,Ne.button.height=46,S(Ne.button,Ue),Ne.icon=new UIImage(Ne.button,1==Ie?Ce:ve),Ne.icon.width=26,Ne.icon.height=26,Ne.icon.hAlign="center",Ne.icon.vAlign="center",Ne.icon.isPointerBlocker=!1,S(Ne.icon,tn),Ne.icon.positionX=B(Yt?Yt.length:6),Ne.buttonLabel=new UIText(Ne.button),Ne.buttonLabel.value=Yt||"Submit",Ne.buttonLabel.hTextAlign="center",Ne.buttonLabel.vTextAlign="center",Ne.buttonLabel.positionX=30,Ne.buttonLabel.fontSize=18,Ne.buttonLabel.font=Zt,Ne.buttonLabel.color=Color4.White(),Ne.buttonLabel.isPointerBlocker=!1,Ne.fillInBox=new UIInputText(Ne.background),Ne.fillInBox.color=Color4.Black(),Ne.fillInBox.font=Zt,Ne.fillInBox.width=312,Ne.fillInBox.height=46,Ne.fillInBox.positionX=0,Ne.fillInBox.positionY=15,Ne.fillInBox.placeholder=Se||"Fill in",Ne.fillInBox.hTextAlign="center",Ne.fillInBox.vTextAlign="center",Ne.fillInBox.fontSize=22;var Re="";return Ne.fillInBox.onChanged=new OnChanged((function(_t){Re=_t.value})),Ne.fillInBox.onTextSubmit=new OnTextSubmit((function(_t){Ne.accept(Re)})),Ne.button.onClick=new OnClick((function(){Ne.accept(Re)})),Ne.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(_t){Ne.button.visible&&+Date.now()-Ne.UIOpenTime>100&&Ne.accept(Re)})),Ne}return i(e,_t),e.prototype.close=function(){this.background.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1,this.fillInBox.visible=!1},e.prototype.accept=function(_t){this.onAccept(_t),this.hide()},e.prototype.hide=function(){this.background.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1,this.fillInBox.visible=!1,Input.instance.unsubscribe("BUTTON_DOWN",ActionButton.PRIMARY,this.EButtonAction)},e.prototype.show=function(){this.background.visible=!0,this.closeIcon.visible=!0,this.button.visible=!0,this.text.visible=!0,this.buttonLabel.visible=!0,this.fillInBox.visible=!0,Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,this.EButtonAction)},e}(Entity),Nn=function(Ft){function o(Lt,Yt,Zt,le){var Se=Ft.call(this)||this;switch(Se.elements=[],Se.texture=ve,Se.darkTheme=!1,Se.UIOpenTime=0,Se.canvas=Kt,Se.UIOpenTime=+Date.now(),Se.background=new UIImage(Kt,ve),Se.background.hAlign="center",Se.background.vAlign="center",Se.closeIcon=new UIImage(Se.background,Se.texture),Lt||(Lt=_t.PromptStyles.LIGHT),Lt){case _t.PromptStyles.LIGHT:Se.texture=ve,S(Se.background,rn),S(Se.closeIcon,an.closeD),Se.closeIcon.positionX=Yt?Yt/2-25:175,Se.closeIcon.positionY=Zt?Zt/2-25:145;break;case _t.PromptStyles.DARK:Se.texture=Ce,Se.darkTheme=!0,S(Se.background,rn),S(Se.closeIcon,an.closeW),Se.closeIcon.positionX=Yt?Yt/2-25:175,Se.closeIcon.positionY=Zt?Zt/2-25:145;break;case _t.PromptStyles.LIGHTLARGE:Se.texture=ve,S(Se.background,on),S(Se.closeIcon,an.closeD),Se.closeIcon.positionX=Yt?Yt/2-25:215,Se.closeIcon.positionY=Zt?Zt/2-25:165;break;case _t.PromptStyles.DARKLARGE:Se.texture=Ce,Se.darkTheme=!0,S(Se.background,on),S(Se.closeIcon,an.closeW),Se.closeIcon.positionX=Yt?Yt/2-25:215,Se.closeIcon.positionY=Zt?Zt/2-25:165;break;case _t.PromptStyles.LIGHTSLANTED:Se.texture=ve,S(Se.background,sn),S(Se.closeIcon,an.closeD),Se.closeIcon.positionX=Yt?Yt/2-25:215,Se.closeIcon.positionY=Zt?Zt/2-25:138;break;case _t.PromptStyles.DARKSLANTED:Se.texture=Ce,Se.darkTheme=!0,S(Se.background,sn),S(Se.closeIcon,an.closeW),Se.closeIcon.positionX=Yt?Yt/2-25:215,Se.closeIcon.positionY=Zt?Zt/2-25:138;break;default:Se.texture=new Texture(Lt),Se.closeIcon.visible=!1}return Se.background.source=Se.texture,Se.background.width=Yt||Se.background.sourceWidth,Se.background.height=Zt||Se.background.sourceHeight,Se.background.visible=!0,Se.closeIcon.width=32,Se.closeIcon.height=32,Se.closeIcon.source=Se.texture,Se.closeIcon.onClick=new OnClick((function(){Se.hide()})),le&&Se.hide(),Se}return i(o,Ft),o.prototype.hide=function(){var _t,Ft;this.background.visible=!1,this.closeIcon.visible=!1;try{for(var Lt=r(this.elements),Yt=Lt.next();!Yt.done;Yt=Lt.next())Yt.value.hide()}catch(Ft){_t={error:Ft}}finally{try{Yt&&!Yt.done&&(Ft=Lt.return)&&Ft.call(Lt)}finally{if(_t)throw _t.error}}},o.prototype.show=function(){var _t,Ft;this.background.visible=!0,this.closeIcon.visible=!0;try{for(var Lt=r(this.elements),Yt=Lt.next();!Yt.done;Yt=Lt.next())Yt.value.show()}catch(Ft){_t={error:Ft}}finally{try{Yt&&!Yt.done&&(Ft=Lt.return)&&Ft.call(Lt)}finally{if(_t)throw _t.error}}},o.prototype.addText=function(_t,Ft,Lt,Yt,Kt){var Zt=new Pn(this,_t,Ft,Lt,this.darkTheme,Yt||void 0,Kt||void 0);return this.elements.push(Zt),Zt},o.prototype.addButton=function(_t,Ft,Lt,Yt,Kt){var Zt=new Bn(this,this.texture,this.UIOpenTime,_t,Ft,Lt,Yt,Kt||void 0);return this.elements.push(Zt),Zt},o.prototype.addCheckbox=function(_t,Ft,Lt,Yt,Kt,Zt,le){var ve=new Fn(this,this.texture,this.darkTheme,_t,Ft,Lt,Yt||void 0,Kt||void 0,Zt||void 0,le||void 0);return this.elements.push(ve),ve},o.prototype.addSwitch=function(_t,Ft,Lt,Yt,Kt,Zt,le){var ve=new On(this,this.texture,this.darkTheme,_t,Ft,Lt,Yt||void 0,Kt||void 0,Zt||void 0,le||void 0);return this.elements.push(ve),ve},o.prototype.addIcon=function(_t,Ft,Lt,Yt,Kt,Zt){var le=new Texture(_t),ve=new Rn(this,le,Ft,Lt,Yt||void 0,Kt||void 0,Zt||void 0);return this.elements.push(ve),ve},o.prototype.addTextBox=function(_t,Ft,Lt,Yt){var Kt=new Mn(this,_t,Ft,Lt||void 0,Yt||void 0);return this.elements.push(Kt),Kt},o}(Entity),Bn=function(Ft){function o(Lt,Yt,Kt,le,ve,Ce,Se,Ie){var Ne=Ft.call(this)||this;if(Ne.icon=null,Ne.image=new UIImage(Lt.background,Yt),Ne.image.positionX=ve,Ne.image.positionY=Ce,Ne.image.width=174,Ne.image.height=46,Ne.label=new UIText(Ne.image),Ie)switch(Ie){case _t.ButtonStyles.E:S(Ne.image,Ue),Ne.label.positionX=25,Ne.icon=new UIImage(Ne.image,Yt),Ne.icon.width=26,Ne.icon.height=26,Ne.icon.hAlign="center",Ne.icon.vAlign="center",Ne.icon.isPointerBlocker=!1,S(Ne.icon,tn),Ne.icon.positionX=B(le.length);break;case _t.ButtonStyles.F:S(Ne.image,He),Ne.label.positionX=25,Ne.icon=new UIImage(Ne.image,Yt),Ne.icon.width=26,Ne.icon.height=26,Ne.icon.hAlign="center",Ne.icon.vAlign="center",Ne.icon.isPointerBlocker=!1,S(Ne.icon,nn),Ne.icon.positionX=B(le.length);break;case _t.ButtonStyles.RED:S(Ne.image,qe);break;case _t.ButtonStyles.DARK:S(Ne.image,We);break;case _t.ButtonStyles.ROUNDBLACK:S(Ne.image,Ge);break;case _t.ButtonStyles.ROUNDWHITE:S(Ne.image,$e);break;case _t.ButtonStyles.ROUNDSILVER:S(Ne.image,Ye);break;case _t.ButtonStyles.ROUNDGOLD:S(Ne.image,Qe);break;case _t.ButtonStyles.SQUAREBLACK:S(Ne.image,Ve);break;case _t.ButtonStyles.SQUAREWHITE:S(Ne.image,Xe);break;case _t.ButtonStyles.SQUARESILVER:S(Ne.image,Je);break;case _t.ButtonStyles.SQUAREGOLD:S(Ne.image,Ze);break;default:S(Ne.image,Ye)}else S(Ne.image,Ye);return Ne.label.value=le,Ne.label.hTextAlign="center",Ne.label.vTextAlign="center",Ne.label.fontSize=20,Ne.label.font=Zt,Ne.label.color=Ie==_t.ButtonStyles.ROUNDWHITE||Ie==_t.ButtonStyles.SQUAREWHITE?Color4.Black():Color4.White(),Ne.label.isPointerBlocker=!1,Ne.image.onClick=new OnClick((function(){Se()})),Ie==_t.ButtonStyles.E?Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(_t){Ne.image.visible&&+Date.now()-Kt>100&&Se()})):Ie==_t.ButtonStyles.F&&Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,(function(_t){Ne.image.visible&&+Date.now()-Kt>100&&Se()})),Ne}return i(o,Ft),o.prototype.hide=function(){this.image.visible=!1},o.prototype.show=function(){this.image.visible=!0},o.prototype.grayOut=function(){this.label.color=Color4.Gray(),this.image.isPointerBlocker=!1,this.icon&&(this.icon.visible=!1)},o.prototype.enable=function(){this.label.color=Color4.White(),this.image.isPointerBlocker=!0,this.icon&&(this.icon.visible=!0)},o}(Entity),Fn=function(_t){function e(Ft,Lt,Yt,Kt,le,ve,Ce,Se,Ie,Ne){var Fe=_t.call(this)||this;return Fe.checked=!!Ne,Fe.darkTheme=Yt,Fe.large=Ie||!1,Fe.image=new UIImage(Ft.background,Lt),Fe.image.positionX=le,Fe.image.positionY=ve,Fe.image.width=Ie?32:24,Fe.image.height=Ie?32:24,0==Fe.checked?Fe.uncheck():Fe.check(),Fe.label=new UIText(Fe.image),Fe.label.positionX=Ie?40:30,Fe.label.color=Yt?Color4.White():Color4.Black(),Fe.label.value=Kt,Fe.label.hTextAlign="left",Fe.label.vTextAlign="center",Fe.label.fontSize=20,Fe.label.font=Zt,Fe.label.isPointerBlocker=!1,Fe.image.onClick=new OnClick((function(){0==Fe.checked?Fe.check():Fe.uncheck(),Fe.checked?Ce&&Ce():Se&&Se()})),Fe}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1,this.label.visible=!1},e.prototype.show=function(){this.image.visible=!0,this.label.visible=!0},e.prototype.uncheck=function(){this.checked=!1,this.darkTheme?this.large?S(this.image,hn):S(this.image,cn):this.large?S(this.image,fn):S(this.image,ln)},e.prototype.check=function(){this.checked=!0,this.darkTheme?this.large?S(this.image,pn):S(this.image,un):this.large?S(this.image,mn):S(this.image,dn)},e}(Entity),On=function(Ft){function o(Lt,Yt,Kt,le,ve,Ce,Se,Ie,Ne,Fe){var Re=Ft.call(this)||this;return Re.checked=!!Fe,Re.darkTheme=Kt,Re.style=Ne||_t.SwitchStyles.ROUNDGREEN,Re.image=new UIImage(Lt.background,Yt),Re.image.positionX=ve,Re.image.positionY=Ce,Re.image.width=64,Re.image.height=32,0==Re.checked?Re.check():Re.uncheck(),Re.label=new UIText(Re.image),Re.label.positionX=80,Re.label.color=Kt?Color4.White():Color4.Black(),Re.label.value=le,Re.label.hTextAlign="left",Re.label.vTextAlign="center",Re.label.fontSize=20,Re.label.font=Zt,Re.label.isPointerBlocker=!1,Re.image.onClick=new OnClick((function(){0==Re.checked?Re.check():Re.uncheck(),Re.checked?Se&&Se():Ie&&Ie()})),Re}return i(o,Ft),o.prototype.hide=function(){this.image.visible=!1,this.label.visible=!1},o.prototype.show=function(){this.image.visible=!0,this.label.visible=!0},o.prototype.check=function(){switch(this.checked=!0,this.style){case _t.SwitchStyles.ROUNDGREEN:S(this.image,bn);break;case _t.SwitchStyles.ROUNDRED:S(this.image,gn);break;case _t.SwitchStyles.SQUAREGREEN:S(this.image,Tn);break;case _t.SwitchStyles.SQUARERED:S(this.image,wn)}},o.prototype.uncheck=function(){this.checked=!1,this.style==_t.SwitchStyles.ROUNDGREEN||this.style==_t.SwitchStyles.ROUNDRED?S(this.image,yn):S(this.image,vn)},o}(Entity),Rn=function(_t){function e(Ft,Lt,Yt,Kt,Zt,le,ve){var Ce=_t.call(this)||this;return Ce.image=new UIImage(Ft.background,Lt),Ce.image.positionX=Yt,Ce.image.positionY=Kt,Ce.image.width=Zt||128,Ce.image.height=le||128,Ce.image.sourceLeft=ve&&ve.sourceLeft?ve.sourceLeft:0,Ce.image.sourceTop=ve&&ve.sourceTop?ve.sourceTop:0,Ce.image.sourceWidth=ve&&ve.sourceWidth?ve.sourceWidth:Zt||128,Ce.image.sourceHeight=ve&&ve.sourceHeight?ve.sourceHeight:le||128,Ce}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(){this.image.visible=!0},e}(Entity),Pn=function(_t){function e(Ft,Lt,Yt,Kt,Zt,le,ve){var Ce=_t.call(this)||this;return Ce.text=new UIText(Ft.background),Ce.text.value=Lt,Ce.text.positionX=Yt||0,Ce.text.positionY=Kt||0,Ce.text.hTextAlign="center",Ce.text.color=le||(Zt?Color4.White():Color4.Black()),Ce.text.fontSize=ve||15,Ce}return i(e,_t),e.prototype.hide=function(){this.text.visible=!1},e.prototype.show=function(){this.text.visible=!0},e}(Entity),Mn=function(_t){function e(Ft,Lt,Yt,Kt,le){var ve=_t.call(this)||this;return ve.currentText="",ve.fillInBox=new UIInputText(Ft.background),ve.fillInBox.color=Color4.Black(),ve.fillInBox.font=Zt,ve.fillInBox.width=312,ve.fillInBox.height=46,ve.fillInBox.positionX=Lt,ve.fillInBox.positionY=Yt,ve.fillInBox.placeholder=Kt||"Fill in",ve.fillInBox.hTextAlign="center",ve.fillInBox.vTextAlign="center",ve.fillInBox.fontSize=22,ve.fillInBox.onChanged=new OnChanged((function(_t){ve.fillInBox&&!ve.fillInBox.visible||(ve.currentText=_t.value,le&&le(ve.currentText))})),ve.fillInBox.onTextSubmit=new OnTextSubmit((function(_t){ve.fillInBox&&!ve.fillInBox.visible||(ve.currentText=_t.text,le&&le(ve.currentText))})),ve}return i(e,_t),e.prototype.hide=function(){this.fillInBox.visible=!1},e.prototype.show=function(){this.fillInBox.visible=!0},e}(Entity),Ln=function(_t){function e(Ft,Lt,Yt,le,ve,Ce){var Se=_t.call(this)||this;return Se.canvas=Kt,Se.uiText=new UIText(Kt),Se.uiText.value=Ft,Se.uiText.hAlign="right",Se.uiText.vAlign="bottom",Se.uiText.positionX=Lt||0,Se.uiText.positionY=Yt||0,Se.uiText.fontSize=ve||25,Se.uiText.font=Zt,Se.uiText.vTextAlign="center",Se.uiText.hTextAlign="center",Se.uiText.color=le||Color4.White(),Se.uiText.outlineColor=Color4.Black(),Se.uiText.outlineWidth=Ce?0:.1,Se}return i(e,_t),e.prototype.hide=function(){this.uiText.visible=!1},e.prototype.show=function(){this.uiText.visible=!0},e.prototype.set=function(_t){this.uiText.value=_t,this.uiText.visible=!0},e}(Entity),zn=function(_t){function e(Lt,Yt,Zt,le){var Ce=_t.call(this)||this;if(Ce.canvas=Kt,Ce.image=new UIImage(Kt,ve),Ce.image.hAlign="center",Ce.image.vAlign="center",Ce.image.positionX=Yt||0,Ce.image.positionY=Zt?Zt+80:80,Ce.image.width=le?48*le:48,Ce.image.height=le?64*le:64,S(Ce.image,an.TimerLarge),Lt&&0!=Lt){var Se=new Entity;engine.addEntity(Se),Se.addComponentOrReplace(new Ft(Lt||3,(function(){Ce.hide()})))}return Ce}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(){this.image.visible=!0},e}(Entity);function Q(_t){return _t&&"object"==typeof _t&&!Array.isArray(_t)}function q(_t,Ft){var Lt=o({},_t);return Q(_t)&&Q(Ft)&&Object.keys(Ft).forEach((function(Yt){var Kt,Zt;Q(Ft[Yt])?Yt in _t?Lt[Yt]=q(_t[Yt],Ft[Yt]):Lt=o(o({},Lt),((Kt={})[Yt]=Ft[Yt],Kt)):Lt=o(o({},Lt),((Zt={})[Yt]=Ft[Yt],Zt))})),Lt}var Dn=function(){function t(_t,Ft){this.shape=_t,Ft&&this.setProperties(Ft)}return t.prototype.setProperties=function(_t){var Ft,Lt;try{for(var Yt=r(Object.keys(_t)),Kt=Yt.next();!Kt.done;Kt=Yt.next()){var Zt=Kt.value;this.shape[Zt]=_t[Zt]}}catch(_t){Ft={error:_t}}finally{try{Kt&&!Kt.done&&(Lt=Yt.return)&&Lt.call(Yt)}finally{if(Ft)throw Ft.error}}},t.prototype.getProperty=function(_t){return this.shape[_t]},t}(),Un=function(_t){function e(Ft,Lt){var Yt,Kt,Zt,le=_t.call(this,new UIInputText(Ft),o(o({},Lt),{placeholder:null!==(Yt=null==Lt?void 0:Lt.placeholder)&&void 0!==Yt?Yt:null==Lt?void 0:Lt.value,onFocus:new OnFocus((function(){var _t;le.isInputFocused=!0,null===(_t=null==Lt?void 0:Lt.onFocus)||void 0===_t||_t.call(Lt)})),onBlur:new OnBlur((function(){var _t,Ft;le.isInputFocused=!1,""===le.inputValue&&void 0!==le.placeholder?(le.setInputValue(le.placeholder),null===(_t=null==Lt?void 0:Lt.onBlur)||void 0===_t||_t.call(Lt,!0)):null===(Ft=null==Lt?void 0:Lt.onBlur)||void 0===Ft||Ft.call(Lt,!1)})),onChanged:new OnChanged((function(_t){var Ft,Yt=_t.value;if(le.shape.visible&&(le.inputValue=Yt,Yt!==le.placeholder&&(""===Yt&&(le.shape.placeholder=""),le.isInputFocused||""===Yt))){var Kt=null!==(Ft=null==Lt?void 0:Lt.waitTime)&&void 0!==Ft?Ft:e.DEFAULT_WAIT_TIME;setTimeout((function(){var _t;le.inputValue===Yt&&(null===(_t=null==Lt?void 0:Lt.onChanged)||void 0===_t||_t.call(Lt,Yt))}),Kt)}})),onTextSubmit:new OnTextSubmit((function(_t){var Ft=_t.text,Yt=Ft.substr(0,Ft.length-1),Kt=null==Lt?void 0:Lt.onTextSubmit;Kt?Kt(Yt):setTimeout((function(){return le.shape.placeholder=Yt}),0)}))}))||this;return le.inputValue="",le.isInputFocused=!1,le.placeholder=le.shape.placeholder,le.inputValue=null!==(Zt=null!==(Kt=null==Lt?void 0:Lt.value)&&void 0!==Kt?Kt:null==Lt?void 0:Lt.placeholder)&&void 0!==Zt?Zt:"",le.isInputFocused=!1,le}return i(e,_t),e.prototype.getValue=function(){return this.inputValue},e.prototype.isFocused=function(){return this.isInputFocused},e.prototype.setInputValue=function(_t){var Ft=this.isInputFocused;this.isInputFocused=!1,this.shape.placeholder="",this.inputValue=this.shape.placeholder=_t,this.isInputFocused=Ft},e.prototype.reset=function(){this.setInputValue(this.placeholder)},e.prototype.hide=function(){this.setProperties({visible:!1})},e.prototype.show=function(){this.setProperties({visible:!0}),this.setInputValue(this.inputValue)},e.DEFAULT_WAIT_TIME=650,e}(Dn),Hn=function(_t){function e(Ft,Lt){var Yt=_t.call(this,new UIContainerRect(Ft),o({isPointerBlocker:!0},Lt))||this,Kt=new UIImage(Yt.shape,new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="));return Kt.width="100%",Kt.height="100%",Kt.sourceWidth=1,Kt.sourceHeight=1,Kt.isPointerBlocker=!0,Yt.image=Kt,(null==Lt?void 0:Lt.onClick)&&Yt.setOnClick(Lt.onClick),Yt}return i(e,_t),e.prototype.performClick=function(){var _t;null===(_t=this.image.onClick)||void 0===_t||_t.callback({})},e.prototype.setOnClick=function(_t){this.image.onClick=new OnClick(_t)},e.prototype.clearOnClick=function(){this.image.onClick=null},e}(Dn),qn=function(_t){function e(Ft,Lt){var Yt=_t.call(this,new UIContainerRect(Ft),o({width:"100%",vAlign:"top",visible:!1},Lt))||this;Yt.config=o(o({},e.DEFAULTS),Lt);var Kt=new Hn(Yt.shape,{width:"100%",height:"100%",color:Color4.Clear()});Yt.clickableContainer=Kt;var Zt=new UIImage(Kt.shape,new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="));Zt.width=Zt.height=Yt.config.imageSize,Zt.hAlign="left",Zt.positionX=10,Zt.vAlign="center",Yt.image=Zt;var le=new UIText(Kt.shape);le.vAlign="top",le.hAlign="left",le.vTextAlign="top",le.fontSize=Yt.config.topFontSize,le.color=Yt.config.topTextColor,le.positionX=55,le.positionY=-10,le.isPointerBlocker=!1,Yt.topLeftText=le;var ve=new UIText(Kt.shape);ve.vAlign="top",ve.hAlign="right",ve.vTextAlign="top",ve.hTextAlign="right",ve.fontSize=le.fontSize,ve.color=le.color,ve.isPointerBlocker=!1,ve.positionX=-10,ve.positionY=le.positionY,Yt.topRightText=ve;var Ce=new UIText(Kt.shape);Ce.vAlign="bottom",Ce.hAlign="left",Ce.vTextAlign="bottom",Ce.fontSize=Yt.config.bottomFontSize,Ce.color=Yt.config.bottomTextColor,Ce.positionX=le.positionX,Ce.positionY=10,Ce.isPointerBlocker=!1,Yt.bottomLeftText=Ce;var Se=new UIText(Kt.shape);return Se.vAlign="bottom",Se.hAlign="right",Se.vTextAlign="bottom",Se.hTextAlign="right",Se.fontSize=Ce.fontSize,Se.color=Ce.color,Se.isPointerBlocker=!1,Se.positionX=ve.positionX,Se.positionY=Ce.positionY,Yt.bottomRightText=Se,Yt}return i(e,_t),e.prototype.setOption=function(_t,Ft){this.image.visible=!1,this.topRightText.visible=!1,this.bottomLeftText.visible=!1,this.bottomRightText.visible=!1,_t.image?(this.image.source=new Texture(_t.image.src),this.image.sourceWidth=_t.image.sourceWidth,this.image.sourceHeight=_t.image.sourceHeight,this.image.visible=!0,this.topLeftText.positionX=this.config.imageSize+20):this.topLeftText.positionX=10,"string"==typeof _t.visualText?(this.topLeftText.value=_t.visualText,this.topLeftText.vAlign=this.topLeftText.vTextAlign="center",this.topLeftText.positionY=0):"text"in _t.visualText?(this.topLeftText.vAlign=this.topLeftText.vTextAlign="top",this.topLeftText.positionY=-10,this.topLeftText.value=_t.visualText.text,this.bottomLeftText.value=_t.visualText.subText,this.bottomLeftText.visible=!0,this.bottomLeftText.positionX=this.topLeftText.positionX):"bottomLeft"in _t.visualText&&(this.topLeftText.vAlign=this.topLeftText.vTextAlign="top",this.topLeftText.positionY=-10,this.topLeftText.value=_t.visualText.topLeft,this.topRightText.value=_t.visualText.topRight,this.bottomLeftText.value=_t.visualText.bottomLeft,this.bottomRightText.value=_t.visualText.bottomRight,this.topRightText.visible=!0,this.bottomLeftText.visible=!0,this.bottomRightText.visible=!0,this.bottomLeftText.positionX=this.topLeftText.positionX),Ft?this.clickableContainer.setOnClick(Ft):this.clickableContainer.clearOnClick()},e.prototype.setProperties=function(Ft){_t.prototype.setProperties.call(this,Ft)},e.prototype.getProperty=function(Ft){return _t.prototype.getProperty.call(this,Ft)},e.prototype.performClick=function(){this.clickableContainer.performClick()},e.DEFAULTS={topFontSize:14,bottomFontSize:14,imageSize:36,topTextColor:Color4.FromInts(14,16,60,255),bottomTextColor:Color4.FromInts(117,120,181,255)},e}(Dn),Wn=function(_t){function e(Ft,Lt,Yt,Kt){var Zt=_t.call(this,new UIContainerRect(Ft),o({},Yt))||this;Zt.onSuccessfulSelection=Kt,Zt.uiOptions=[],Zt.options={},Yt.visible,Yt.opacity,Yt.hAlign,Yt.vAlign,Yt.positionX,Yt.positionY;var le=n(Yt,["visible","opacity","hAlign","vAlign","positionX","positionY"]);Zt.config=q(e.DEFAULTS,le),Zt.setProperties({width:Zt.config.width,height:Zt.config.initialHeight,color:Zt.config.borderColor}),Zt.setItems(Lt.items,Lt.dropdownDefaultItemIds);var Ce=new UIContainerRect(Zt.shape);Ce.color=Zt.config.backgroundColor,Ce.width=Zt.config.width-2*Zt.config.borderSize,Ce.height=Zt.config.initialHeight-2*Zt.config.borderSize,Zt.insideContainer=Ce;var Se=new Un(Ce,{vAlign:"top",hTextAlign:"left",vTextAlign:"center",width:"92%",fontSize:Zt.config.search.fontSize,placeholder:Zt.config.search.placeholder.defaultText,color:Zt.config.search.textColor,focusedBackground:Color4.Clear(),height:.95*Zt.config.initialHeight,onBlur:function(){return Zt.close()},onTextSubmit:function(){Zt.uiOptions[0].getProperty("visible")?Zt.uiOptions[0].performClick():Zt.close()},onChanged:function(_t){if(Zt.hideAllOptions(),_t===Zt.config.search.placeholder.defaultText||""===_t)Zt.showDefaultOptions();else{var Ft=_t.toLowerCase(),Lt=[];for(var Yt in Zt.options){var Kt=Zt.options[Yt];if(Kt.searchBy.toLowerCase().indexOf(Ft)>=0&&(Lt.push(Kt),Lt.length===Zt.config.options.maxVisibleOptions))break}Lt.length>0?Zt.showOptions(Lt):Zt.showErrorMessage("Sorry, we can't find \""+_t+'"')}}});Zt.inputText=Se;for(var Ie=0;Ie<Zt.config.options.maxVisibleOptions;Ie++){var Ne=new qn(Ce,o(o({},Zt.config.options),{height:Zt.config.initialHeight,positionY:-Zt.config.initialHeight-Zt.config.initialHeight*Ie,color:Ie%2==0?Zt.config.options.oddBackgroundColor:Ce.color}));Zt.uiOptions.push(Ne)}var Fe=new UIImage(Ce,ve);Fe.onClick=new OnClick((function(){return Zt.close()})),Fe.sourceTop=305,Fe.sourceLeft=985,Fe.sourceWidth=Fe.sourceHeight=35,Fe.width=Fe.height=18,Fe.hAlign="right",Fe.vAlign="top",Fe.positionX=-12,Fe.positionY=-12,Fe.visible=Fe.isPointerBlocker=!0;var Re=new UIText(Ce);return Re.height=20,Re.visible=!1,Re.width="92%",Re.hTextAlign="center",Re.vAlign="bottom",Re.positionY=20,Re.fontSize=Zt.config.errorMessage.fontSize,Re.color=Zt.config.errorMessage.textColor,Zt.errorMessage=Re,Zt}return i(e,_t),e.prototype.open=function(){this.setProperties({visible:!0}),this.showDefaultOptions()},e.prototype.close=function(){this.setProperties({visible:!1}),this.inputText.reset()},e.prototype.setItems=function(_t,Ft){this.options=_t.reduce((function(_t,Ft){var Lt;return Ft.searchBy=null!==(Lt=Ft.searchBy)&&void 0!==Lt?Lt:"string"==typeof Ft.visualText?Ft.visualText:"text"in Ft.visualText?Ft.visualText.text:Ft.visualText.topLeft,_t[Ft.id]=Ft,_t}),{}),Ft?this.setDropdownDefaults(Ft):this.defaultOptions=Ft,this.hideAllOptions()},e.prototype.setDropdownDefaults=function(_t){var Ft,Lt;try{for(var Yt=r(_t),Kt=Yt.next();!Kt.done;Kt=Yt.next()){var Zt=Kt.value;if(!(Zt in this.options))return void error("Couldn't find an option with id '"+Zt+"'. Will not set new defaults")}}catch(_t){Ft={error:_t}}finally{try{Kt&&!Kt.done&&(Lt=Yt.return)&&Lt.call(Yt)}finally{if(Ft)throw Ft.error}}this.defaultOptions=_t},e.prototype.showDefaultOptions=function(){var _t,Ft=this;if(this.defaultOptions)_t=this.defaultOptions.map((function(_t){return Ft.options[_t]})).slice(0,this.config.options.maxVisibleOptions);else for(var Lt in _t=[],this.options)if(_t.push(this.options[Lt]),_t.length===this.config.options.maxVisibleOptions)break;this.showOptions(_t)},e.prototype.showOptions=function(_t){var Ft=this;this.resizeHeight(this.config.initialHeight*_t.length+2*this.config.borderSize),_t.forEach((function(_t,Lt){var Yt=Ft.uiOptions[Lt];Yt.setOption(_t,(function(){Ft.onSuccessfulSelection(_t),Ft.setProperties({visible:!1})})),Yt.setProperties({visible:!0})})),this.errorMessage.visible=!1},e.prototype.hideAllOptions=function(){this.uiOptions.forEach((function(_t){return _t.setProperties({visible:!1})}))},e.prototype.showErrorMessage=function(_t){this.errorMessage.visible=!0,this.errorMessage.value=_t,this.resizeHeight(60)},e.prototype.resizeHeight=function(_t){this.setProperties({height:this.config.initialHeight+_t}),this.insideContainer.height=this.config.initialHeight+_t-2*this.config.borderSize},e.DEFAULTS={borderColor:Color4.FromInts(232,236,253,255),backgroundColor:Color4.White(),borderSize:2,width:300,initialHeight:60,search:{fontSize:16,textColor:Color4.FromInts(24,26,70,255),placeholder:{defaultText:"Click to search",textColor:Color4.FromInts(118,120,181,200)}},options:{maxVisibleOptions:5,oddBackgroundColor:Color4.FromInts(246,246,255,255),topFontSize:14,bottomFontSize:14,imageSize:36,topTextColor:Color4.FromInts(14,16,60,255),bottomTextColor:Color4.FromInts(117,120,181,255)},errorMessage:{fontSize:13,textColor:Color4.FromInts(125,127,157,255)}},e}(Dn),jn=function(_t){function e(Ft,Lt,Yt,Kt){var Zt=_t.call(this,new UIContainerRect(Ft),o({},Yt))||this;Zt.onSuccessfulSelection=Kt,Yt.visible,Yt.opacity,Yt.hAlign,Yt.vAlign,Yt.positionX,Yt.positionY;var le=n(Yt,["visible","opacity","hAlign","vAlign","positionX","positionY"]);Zt.config=q(Wn.DEFAULTS,le),Zt.setProperties({width:Zt.config.width,height:Zt.config.initialHeight,color:Zt.config.borderColor});var ve=new Hn(Zt.shape,{color:Zt.config.backgroundColor,width:Zt.config.width-2*Zt.config.borderSize,height:Zt.config.initialHeight-2*Zt.config.borderSize,onClick:function(){return Zt.uiSearchPrompt.open()}}),Ce=new qn(ve.shape,o(o({},Zt.config.options),{height:Zt.config.initialHeight,color:Color4.Clear(),width:Zt.config.width-2*Zt.config.borderSize-20,visible:!0,hAlign:"left",isPointerBlocker:!1})),Se=new UIText(ve.shape);if(Se.value="Click to select an option",Se.fontSize=Zt.config.search.fontSize,Se.color=Zt.config.search.placeholder.textColor,Se.vTextAlign=Se.hTextAlign="center",Se.positionX=-Zt.config.borderSize-10,Se.isPointerBlocker=!1,Se.opacity=Se.color.a,Zt.initialText=Se,null==Lt?void 0:Lt.initialItemId){var Ie=Lt.items.filter((function(_t){return _t.id===Lt.initialItemId}))[0];Ie&&(Ce.setOption(Ie),Zt.initialText.visible=!1)}var Ne=new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAgMAAADXB5lNAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAN5AAADeQELGyzWAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAAlQTFRF////AAAAAAAAflGpXQAAAAJ0Uk5TAICbK04YAAAAeklEQVQ4je3PsRXEMAgE0VFCEapG9agaiiDRVXkJxlpq8IYT/AfwTbZ/ssPUEJgGZ2hYDTmgSIAiDoqsdskBRQIUcVBktXdO/jeVuBDPMBpRyEMUEhVMiUKKSOQlEokrmBKJXARsJWAqAaYEjEbAVgJmtGDewmjEt9wfISOqAUzY2sAAAAAASUVORK5CYII="),Fe=new UIImage(ve.shape,Ne);return Fe.sourceWidth=Fe.sourceHeight=64,Fe.height=15,Fe.width=12,Fe.hAlign="right",Fe.vAlign="center",Fe.positionX=-10,Fe.visible=!0,Fe.isPointerBlocker=!1,Zt.uiSearchPrompt=new Wn(Zt.shape,Lt,o(o({},Yt),{visible:!1,vAlign:"top",initialHeight:Zt.config.initialHeight-2*Zt.config.borderSize}),(function(_t){Ce.setOption(_t),Zt.initialText.visible=!1,Zt.onSuccessfulSelection(_t)})),Zt}return i(e,_t),e.prototype.open=function(){this.setProperties({visible:!0})},e.prototype.close=function(){this.setProperties({visible:!1})},e.prototype.setSearchItems=function(_t,Ft){this.uiSearchPrompt.setItems(_t,Ft)},e.prototype.setSearchDropdownDefaults=function(_t){this.uiSearchPrompt.setDropdownDefaults(_t)},e}(Dn);_t.CenterImage=Sn,_t.CornerLabel=Ln,_t.CustomPrompt=Nn,_t.CustomPromptButton=Bn,_t.CustomPromptCheckBox=Fn,_t.CustomPromptIcon=Rn,_t.CustomPromptSwitch=On,_t.CustomPromptText=Pn,_t.CustomPromptTextBox=Mn,_t.FillInPrompt=In,_t.LargeIcon=_n,_t.LoadingIcon=zn,_t.MediumIcon=An,_t.OkPrompt=En,_t.OptionPrompt=kn,_t.SFFont=Zt,_t.SFHeavyFont=le,_t.SmallIcon=Cn,_t.UIBar=xn,_t.UICounter=Le,_t.UISearchPrompt=Wn,_t.UISelectBox=jn,_t.canvas=Kt,_t.darkTheme=Ce,_t.displayAnnouncement=function(_t,Lt,Yt,Kt,Zt){Se.visible=!0,Se.value=_t,Se.color=Yt||Color4.Yellow(),Se.fontSize=Kt||50,Se.font=le,Se.outlineColor=Color4.Black(),Se.outlineWidth=Zt?0:.1,Se.adaptWidth=!1,Se.textWrapping=!0,Se.width=900;var ve=new Entity;engine.addEntity(ve),-1!=Lt&&ve.addComponentOrReplace(new Ft(Lt||3,(function(){Se.visible=!1})))},_t.hideAnnouncements=function(){Se.visible=!1},_t.lightTheme=ve,Object.defineProperty(_t,"__esModule",{value:!0})})),define("dcl-access-area",["exports","@decentraland/EthereumController","@decentraland/web3-provider","@decentraland/Identity","@dcl/crypto-scene-utils","@dcl/ecs-scene-utils","@dcl/ui-scene-utils","@decentraland/EnvironmentAPI"],(function(_t,Ft,Lt,Yt,Kt,Zt,le,ve){function c(_t){if(_t&&_t.__esModule)return _t;var Ft=Object.create(null);return _t&&Object.keys(_t).forEach((function(Lt){if("default"!==Lt){var Yt=Object.getOwnPropertyDescriptor(_t,Lt);Object.defineProperty(Ft,Lt,Yt.get?Yt:{enumerable:!0,get:function(){return _t[Lt]}})}})),Ft.default=_t,Object.freeze(Ft)}var Ce=c(Ft),Se=c(Kt),Ie=c(Zt),Ne=c(le),f=function(_t,Ft){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Ft){_t.__proto__=Ft}||function(_t,Ft){for(var Lt in Ft)Object.prototype.hasOwnProperty.call(Ft,Lt)&&(_t[Lt]=Ft[Lt])},f(_t,Ft)};function d(_t,Ft,Lt,Yt){return new(Lt||(Lt=Promise))((function(Kt,Zt){function a(_t){try{c(Yt.next(_t))}catch(_t){Zt(_t)}}function s(_t){try{c(Yt.throw(_t))}catch(_t){Zt(_t)}}function c(_t){var Ft;_t.done?Kt(_t.value):(Ft=_t.value,Ft instanceof Lt?Ft:new Lt((function(_t){_t(Ft)}))).then(a,s)}c((Yt=Yt.apply(_t,Ft||[])).next())}))}function g(_t,Ft){var Lt,Yt,Kt,Zt,le={label:0,sent:function(){if(1&Kt[0])throw Kt[1];return Kt[1]},trys:[],ops:[]};return Zt={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(Zt[Symbol.iterator]=function(){return this}),Zt;function s(Zt){return function(ve){return function(Zt){if(Lt)throw new TypeError("Generator is already executing.");for(;le;)try{if(Lt=1,Yt&&(Kt=2&Zt[0]?Yt.return:Zt[0]?Yt.throw||((Kt=Yt.return)&&Kt.call(Yt),0):Yt.next)&&!(Kt=Kt.call(Yt,Zt[1])).done)return Kt;switch(Yt=0,Kt&&(Zt=[2&Zt[0],Kt.value]),Zt[0]){case 0:case 1:Kt=Zt;break;case 4:return le.label++,{value:Zt[1],done:!1};case 5:le.label++,Yt=Zt[1],Zt=[0];continue;case 7:Zt=le.ops.pop(),le.trys.pop();continue;default:if(!((Kt=(Kt=le.trys).length>0&&Kt[Kt.length-1])||6!==Zt[0]&&2!==Zt[0])){le=0;continue}if(3===Zt[0]&&(!Kt||Zt[1]>Kt[0]&&Zt[1]<Kt[3])){le.label=Zt[1];break}if(6===Zt[0]&&le.label<Kt[1]){le.label=Kt[1],Kt=Zt;break}if(Kt&&le.label<Kt[2]){le.label=Kt[2],le.ops.push(Zt);break}Kt[2]&&le.ops.pop(),le.trys.pop();continue}Zt=Ft.call(_t,le)}catch(_t){Zt=[6,_t],Yt=0}finally{Lt=Kt=0}if(5&Zt[0])throw Zt[1];return{value:Zt[0]?Zt[1]:void 0,done:!0}}([Zt,ve])}}}function m(_t){var Ft="function"==typeof Symbol&&Symbol.iterator,Lt=Ft&&_t[Ft],Yt=0;if(Lt)return Lt.call(_t);if(_t&&"number"==typeof _t.length)return{next:function(){return _t&&Yt>=_t.length&&(_t=void 0),{value:_t&&_t[Yt++],done:!_t}}};throw new TypeError(Ft?"Object is not iterable.":"Symbol.iterator is not defined.")}var Fe={exports:{}};!function(_t,Ft){!function(_t){function e(_t){if(_t.jsonrpc="2.0",!_t.id||"number"!=typeof _t.id||Math.floor(_t.id)!==_t.id)throw new Error(`Invalid RPC message(invalid id) message: ${JSON.stringify(_t)}`);if(!_t.method||"string"!=typeof _t.method||0===_t.method.trim().length)throw new Error(`Invalid RPC message(invalid method) message: ${JSON.stringify(_t)}`);if(!_t.params||"object"!=typeof _t.params)throw new Error(`Invalid RPC message(invalid params) message: ${JSON.stringify(_t)}`);return _t}function n(_t,Ft){return _t(Ft={exports:{}},Ft.exports),Ft.exports}var Ft,Lt=n((function(_t,Ft){function n(){let _t,Ft;const Lt=new Promise(((Yt,Kt)=>{_t=_t=>{Yt(_t),Lt.isPending=!1},Ft=_t=>{Kt(_t),Lt.isPending=!1}})).catch((_t=>Promise.reject(_t)));return Lt.resolve=_t,Lt.reject=Ft,"finally"in Lt||(Lt.finally=_t=>{Lt.then(_t),Lt.catch(_t)}),Lt.isPending=!0,Lt}Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.future=n,Ft.default=n}));(Ft=Lt)&&Ft.__esModule&&Object.prototype.hasOwnProperty.call(Ft,"default")&&Ft.default;var Yt=Lt.future,Kt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function s(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}var Zt=s,le=c;function h(_t){if(Zt===setTimeout)return setTimeout(_t,0);if((Zt===s||!Zt)&&setTimeout)return Zt=setTimeout,setTimeout(_t,0);try{return Zt(_t,0)}catch(Ft){try{return Zt.call(null,_t,0)}catch(Ft){return Zt.call(this,_t,0)}}}"function"==typeof Kt.setTimeout&&(Zt=setTimeout),"function"==typeof Kt.clearTimeout&&(le=clearTimeout);var ve,Ce=[],Se=!1,Ie=-1;function m(){Se&&ve&&(Se=!1,ve.length?Ce=ve.concat(Ce):Ie=-1,Ce.length&&y())}function y(){if(!Se){var _t=h(m);Se=!0;for(var Ft=Ce.length;Ft;){for(ve=Ce,Ce=[];++Ie<Ft;)ve&&ve[Ie].run();Ie=-1,Ft=Ce.length}ve=null,Se=!1,function(_t){if(le===clearTimeout)return clearTimeout(_t);if((le===c||!le)&&clearTimeout)return le=clearTimeout,clearTimeout(_t);try{le(_t)}catch(Ft){try{return le.call(null,_t)}catch(Ft){return le.call(this,_t)}}}(_t)}}function w(_t,Ft){this.fun=_t,this.array=Ft}function v(){}w.prototype.run=function(){this.fun.apply(null,this.array)};var Ne=v,Fe=v,Re=v,Pe=v,Le=v,Ue=v,He=v,qe=Kt.performance||{},We=qe.now||qe.mozNow||qe.msNow||qe.oNow||qe.webkitNow||function(){return(new Date).getTime()},Ge=new Date,Ve={nextTick:function(_t){var Ft=new Array(arguments.length-1);if(arguments.length>1)for(var Lt=1;Lt<arguments.length;Lt++)Ft[Lt-1]=arguments[Lt];Ce.push(new w(_t,Ft)),1!==Ce.length||Se||h(y)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Ne,addListener:Fe,once:Re,off:Pe,removeListener:Le,removeAllListeners:Ue,emit:He,binding:function(_t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(_t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(_t){var Ft=.001*We.call(qe),Lt=Math.floor(Ft),Yt=Math.floor(Ft%1*1e9);return _t&&(Lt-=_t[0],(Yt-=_t[1])<0&&(Lt--,Yt+=1e9)),[Lt,Yt]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Ge)/1e3}},$e=n((function(_t){!function(){var Ft="input is invalid type",Lt="object"==typeof window,Yt=Lt?window:{};Yt.JS_SHA3_NO_WINDOW&&(Lt=!1);var Zt=!Lt&&"object"==typeof self;!Yt.JS_SHA3_NO_NODE_JS&&"object"==typeof Ve&&Ve.versions&&Ve.versions.node?Yt=Kt:Zt&&(Yt=self);var le=!Yt.JS_SHA3_NO_COMMON_JS&&_t.exports,ve=!Yt.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,Ce="0123456789abcdef".split(""),Se=[4,1024,262144,67108864],Ie=[0,8,16,24],Ne=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],Fe=[224,256,384,512],Re=[128,256],Pe=["hex","buffer","arrayBuffer","array","digest"],Le={128:168,256:136};!Yt.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(_t){return"[object Array]"===Object.prototype.toString.call(_t)}),!ve||!Yt.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(_t){return"object"==typeof _t&&_t.buffer&&_t.buffer.constructor===ArrayBuffer});for(var m=function(_t,Ft,Lt){return function(Yt){return new C(_t,Ft,_t).update(Yt)[Lt]()}},y=function(_t,Ft,Lt){return function(Yt,Kt){return new C(_t,Ft,Kt).update(Yt)[Lt]()}},w=function(_t,Ft,Lt){return function(Ft,Yt,Kt,Zt){return He["cshake"+_t].update(Ft,Yt,Kt,Zt)[Lt]()}},v=function(_t,Ft,Lt){return function(Ft,Yt,Kt,Zt){return He["kmac"+_t].update(Ft,Yt,Kt,Zt)[Lt]()}},b=function(_t,Ft,Lt,Yt){for(var Kt=0;Kt<Pe.length;++Kt){var Zt=Pe[Kt];_t[Zt]=Ft(Lt,Yt,Zt)}return _t},_=function(_t,Ft){var Lt=m(_t,Ft,"hex");return Lt.create=function(){return new C(_t,Ft,_t)},Lt.update=function(_t){return Lt.create().update(_t)},b(Lt,m,_t,Ft)},Ue=[{name:"keccak",padding:[1,256,65536,16777216],bits:Fe,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:Fe,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:Re,createMethod:function(_t,Ft){var Lt=y(_t,Ft,"hex");return Lt.create=function(Lt){return new C(_t,Ft,Lt)},Lt.update=function(_t,Ft){return Lt.create(Ft).update(_t)},b(Lt,y,_t,Ft)}},{name:"cshake",padding:Se,bits:Re,createMethod:function(_t,Ft){var Lt=Le[_t],Yt=w(_t,0,"hex");return Yt.create=function(Yt,Kt,Zt){return Kt||Zt?new C(_t,Ft,Yt).bytepad([Kt,Zt],Lt):He["shake"+_t].create(Yt)},Yt.update=function(_t,Ft,Lt,Kt){return Yt.create(Ft,Lt,Kt).update(_t)},b(Yt,w,_t,Ft)}},{name:"kmac",padding:Se,bits:Re,createMethod:function(_t,Ft){var Lt=Le[_t],Yt=v(_t,0,"hex");return Yt.create=function(Yt,Kt,Zt){return new M(_t,Ft,Kt).bytepad(["KMAC",Zt],Lt).bytepad([Yt],Lt)},Yt.update=function(_t,Ft,Lt,Kt){return Yt.create(_t,Lt,Kt).update(Ft)},b(Yt,v,_t,Ft)}}],He={},qe=[],We=0;We<Ue.length;++We)for(var Ge=Ue[We],$e=Ge.bits,Xe=0;Xe<$e.length;++Xe){var Ye=Ge.name+"_"+$e[Xe];if(qe.push(Ye),He[Ye]=Ge.createMethod($e[Xe],Ge.padding),"sha3"!==Ge.name){var Je=Ge.name+$e[Xe];qe.push(Je),He[Je]=He[Ye]}}function C(_t,Ft,Lt){this.blocks=[],this.s=[],this.padding=Ft,this.outputBits=Lt,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(_t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=Lt>>5,this.extraBytes=(31&Lt)>>3;for(var Yt=0;Yt<50;++Yt)this.s[Yt]=0}function M(_t,Ft,Lt){C.call(this,_t,Ft,Lt)}C.prototype.update=function(_t){if(this.finalized)throw new Error("finalize already called");var Lt,Yt=typeof _t;if("string"!==Yt){if("object"!==Yt)throw new Error(Ft);if(null===_t)throw new Error(Ft);if(ve&&_t.constructor===ArrayBuffer)_t=new Uint8Array(_t);else if(!(Array.isArray(_t)||ve&&ArrayBuffer.isView(_t)))throw new Error(Ft);Lt=!0}for(var Kt,Zt,le=this.blocks,Ce=this.byteCount,Se=_t.length,Ne=this.blockCount,Fe=0,Re=this.s;Fe<Se;){if(this.reset)for(this.reset=!1,le[0]=this.block,Kt=1;Kt<Ne+1;++Kt)le[Kt]=0;if(Lt)for(Kt=this.start;Fe<Se&&Kt<Ce;++Fe)le[Kt>>2]|=_t[Fe]<<Ie[3&Kt++];else for(Kt=this.start;Fe<Se&&Kt<Ce;++Fe)(Zt=_t.charCodeAt(Fe))<128?le[Kt>>2]|=Zt<<Ie[3&Kt++]:Zt<2048?(le[Kt>>2]|=(192|Zt>>6)<<Ie[3&Kt++],le[Kt>>2]|=(128|63&Zt)<<Ie[3&Kt++]):Zt<55296||Zt>=57344?(le[Kt>>2]|=(224|Zt>>12)<<Ie[3&Kt++],le[Kt>>2]|=(128|Zt>>6&63)<<Ie[3&Kt++],le[Kt>>2]|=(128|63&Zt)<<Ie[3&Kt++]):(Zt=65536+((1023&Zt)<<10|1023&_t.charCodeAt(++Fe)),le[Kt>>2]|=(240|Zt>>18)<<Ie[3&Kt++],le[Kt>>2]|=(128|Zt>>12&63)<<Ie[3&Kt++],le[Kt>>2]|=(128|Zt>>6&63)<<Ie[3&Kt++],le[Kt>>2]|=(128|63&Zt)<<Ie[3&Kt++]);if(this.lastByteIndex=Kt,Kt>=Ce){for(this.start=Kt-Ce,this.block=le[Ne],Kt=0;Kt<Ne;++Kt)Re[Kt]^=le[Kt];I(Re),this.reset=!0}else this.start=Kt}return this},C.prototype.encode=function(_t,Ft){var Lt=255&_t,Yt=1,Kt=[Lt];for(Lt=255&(_t>>=8);Lt>0;)Kt.unshift(Lt),Lt=255&(_t>>=8),++Yt;return Ft?Kt.push(Yt):Kt.unshift(Yt),this.update(Kt),Kt.length},C.prototype.encodeString=function(_t){var Lt,Yt=typeof _t;if("string"!==Yt){if("object"!==Yt)throw new Error(Ft);if(null===_t)throw new Error(Ft);if(ve&&_t.constructor===ArrayBuffer)_t=new Uint8Array(_t);else if(!(Array.isArray(_t)||ve&&ArrayBuffer.isView(_t)))throw new Error(Ft);Lt=!0}var Kt=0,Zt=_t.length;if(Lt)Kt=Zt;else for(var le=0;le<_t.length;++le){var Ce=_t.charCodeAt(le);Ce<128?Kt+=1:Ce<2048?Kt+=2:Ce<55296||Ce>=57344?Kt+=3:(Ce=65536+((1023&Ce)<<10|1023&_t.charCodeAt(++le)),Kt+=4)}return Kt+=this.encode(8*Kt),this.update(_t),Kt},C.prototype.bytepad=function(_t,Ft){for(var Lt=this.encode(Ft),Yt=0;Yt<_t.length;++Yt)Lt+=this.encodeString(_t[Yt]);var Kt=Ft-Lt%Ft,Zt=[];return Zt.length=Kt,this.update(Zt),this},C.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var _t=this.blocks,Ft=this.lastByteIndex,Lt=this.blockCount,Yt=this.s;if(_t[Ft>>2]|=this.padding[3&Ft],this.lastByteIndex===this.byteCount)for(_t[0]=_t[Lt],Ft=1;Ft<Lt+1;++Ft)_t[Ft]=0;for(_t[Lt-1]|=2147483648,Ft=0;Ft<Lt;++Ft)Yt[Ft]^=_t[Ft];I(Yt)}},C.prototype.toString=C.prototype.hex=function(){this.finalize();for(var _t,Ft=this.blockCount,Lt=this.s,Yt=this.outputBlocks,Kt=this.extraBytes,Zt=0,le=0,ve="";le<Yt;){for(Zt=0;Zt<Ft&&le<Yt;++Zt,++le)_t=Lt[Zt],ve+=Ce[_t>>4&15]+Ce[15&_t]+Ce[_t>>12&15]+Ce[_t>>8&15]+Ce[_t>>20&15]+Ce[_t>>16&15]+Ce[_t>>28&15]+Ce[_t>>24&15];le%Ft==0&&(I(Lt),Zt=0)}return Kt&&(_t=Lt[Zt],ve+=Ce[_t>>4&15]+Ce[15&_t],Kt>1&&(ve+=Ce[_t>>12&15]+Ce[_t>>8&15]),Kt>2&&(ve+=Ce[_t>>20&15]+Ce[_t>>16&15])),ve},C.prototype.arrayBuffer=function(){this.finalize();var _t,Ft=this.blockCount,Lt=this.s,Yt=this.outputBlocks,Kt=this.extraBytes,Zt=0,le=0,ve=this.outputBits>>3;_t=Kt?new ArrayBuffer(Yt+1<<2):new ArrayBuffer(ve);for(var Ce=new Uint32Array(_t);le<Yt;){for(Zt=0;Zt<Ft&&le<Yt;++Zt,++le)Ce[le]=Lt[Zt];le%Ft==0&&I(Lt)}return Kt&&(Ce[Zt]=Lt[Zt],_t=_t.slice(0,ve)),_t},C.prototype.buffer=C.prototype.arrayBuffer,C.prototype.digest=C.prototype.array=function(){this.finalize();for(var _t,Ft,Lt=this.blockCount,Yt=this.s,Kt=this.outputBlocks,Zt=this.extraBytes,le=0,ve=0,Ce=[];ve<Kt;){for(le=0;le<Lt&&ve<Kt;++le,++ve)_t=ve<<2,Ft=Yt[le],Ce[_t]=255&Ft,Ce[_t+1]=Ft>>8&255,Ce[_t+2]=Ft>>16&255,Ce[_t+3]=Ft>>24&255;ve%Lt==0&&I(Yt)}return Zt&&(_t=ve<<2,Ft=Yt[le],Ce[_t]=255&Ft,Zt>1&&(Ce[_t+1]=Ft>>8&255),Zt>2&&(Ce[_t+2]=Ft>>16&255)),Ce},M.prototype=new C,M.prototype.finalize=function(){return this.encode(this.outputBits,!0),C.prototype.finalize.call(this)};var I=function(_t){var Ft,Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Fe,Re,Pe,Le,Ue,He,qe,We,Ge,Ve,$e,Xe,Ye,Je,Qe,Ze,tn,nn,rn,on,sn,an,cn,un,ln,dn,hn,pn,fn,mn,yn,gn,bn,vn,wn,Tn,xn,An,Cn,_n,Sn,En,kn,In,Nn,Bn,Fn,On,Rn,Pn,Mn,Ln,zn;for(Yt=0;Yt<48;Yt+=2)Kt=_t[0]^_t[10]^_t[20]^_t[30]^_t[40],Zt=_t[1]^_t[11]^_t[21]^_t[31]^_t[41],le=_t[2]^_t[12]^_t[22]^_t[32]^_t[42],ve=_t[3]^_t[13]^_t[23]^_t[33]^_t[43],Ce=_t[4]^_t[14]^_t[24]^_t[34]^_t[44],Se=_t[5]^_t[15]^_t[25]^_t[35]^_t[45],Ie=_t[6]^_t[16]^_t[26]^_t[36]^_t[46],Fe=_t[7]^_t[17]^_t[27]^_t[37]^_t[47],Ft=(Re=_t[8]^_t[18]^_t[28]^_t[38]^_t[48])^(le<<1|ve>>>31),Lt=(Pe=_t[9]^_t[19]^_t[29]^_t[39]^_t[49])^(ve<<1|le>>>31),_t[0]^=Ft,_t[1]^=Lt,_t[10]^=Ft,_t[11]^=Lt,_t[20]^=Ft,_t[21]^=Lt,_t[30]^=Ft,_t[31]^=Lt,_t[40]^=Ft,_t[41]^=Lt,Ft=Kt^(Ce<<1|Se>>>31),Lt=Zt^(Se<<1|Ce>>>31),_t[2]^=Ft,_t[3]^=Lt,_t[12]^=Ft,_t[13]^=Lt,_t[22]^=Ft,_t[23]^=Lt,_t[32]^=Ft,_t[33]^=Lt,_t[42]^=Ft,_t[43]^=Lt,Ft=le^(Ie<<1|Fe>>>31),Lt=ve^(Fe<<1|Ie>>>31),_t[4]^=Ft,_t[5]^=Lt,_t[14]^=Ft,_t[15]^=Lt,_t[24]^=Ft,_t[25]^=Lt,_t[34]^=Ft,_t[35]^=Lt,_t[44]^=Ft,_t[45]^=Lt,Ft=Ce^(Re<<1|Pe>>>31),Lt=Se^(Pe<<1|Re>>>31),_t[6]^=Ft,_t[7]^=Lt,_t[16]^=Ft,_t[17]^=Lt,_t[26]^=Ft,_t[27]^=Lt,_t[36]^=Ft,_t[37]^=Lt,_t[46]^=Ft,_t[47]^=Lt,Ft=Ie^(Kt<<1|Zt>>>31),Lt=Fe^(Zt<<1|Kt>>>31),_t[8]^=Ft,_t[9]^=Lt,_t[18]^=Ft,_t[19]^=Lt,_t[28]^=Ft,_t[29]^=Lt,_t[38]^=Ft,_t[39]^=Lt,_t[48]^=Ft,_t[49]^=Lt,Le=_t[0],Ue=_t[1],Tn=_t[11]<<4|_t[10]>>>28,xn=_t[10]<<4|_t[11]>>>28,nn=_t[20]<<3|_t[21]>>>29,rn=_t[21]<<3|_t[20]>>>29,Pn=_t[31]<<9|_t[30]>>>23,Mn=_t[30]<<9|_t[31]>>>23,gn=_t[40]<<18|_t[41]>>>14,bn=_t[41]<<18|_t[40]>>>14,un=_t[2]<<1|_t[3]>>>31,ln=_t[3]<<1|_t[2]>>>31,He=_t[13]<<12|_t[12]>>>20,qe=_t[12]<<12|_t[13]>>>20,An=_t[22]<<10|_t[23]>>>22,Cn=_t[23]<<10|_t[22]>>>22,on=_t[33]<<13|_t[32]>>>19,sn=_t[32]<<13|_t[33]>>>19,Ln=_t[42]<<2|_t[43]>>>30,zn=_t[43]<<2|_t[42]>>>30,In=_t[5]<<30|_t[4]>>>2,Nn=_t[4]<<30|_t[5]>>>2,dn=_t[14]<<6|_t[15]>>>26,hn=_t[15]<<6|_t[14]>>>26,We=_t[25]<<11|_t[24]>>>21,Ge=_t[24]<<11|_t[25]>>>21,_n=_t[34]<<15|_t[35]>>>17,Sn=_t[35]<<15|_t[34]>>>17,an=_t[45]<<29|_t[44]>>>3,cn=_t[44]<<29|_t[45]>>>3,Je=_t[6]<<28|_t[7]>>>4,Qe=_t[7]<<28|_t[6]>>>4,Bn=_t[17]<<23|_t[16]>>>9,Fn=_t[16]<<23|_t[17]>>>9,pn=_t[26]<<25|_t[27]>>>7,fn=_t[27]<<25|_t[26]>>>7,Ve=_t[36]<<21|_t[37]>>>11,$e=_t[37]<<21|_t[36]>>>11,En=_t[47]<<24|_t[46]>>>8,kn=_t[46]<<24|_t[47]>>>8,vn=_t[8]<<27|_t[9]>>>5,wn=_t[9]<<27|_t[8]>>>5,Ze=_t[18]<<20|_t[19]>>>12,tn=_t[19]<<20|_t[18]>>>12,On=_t[29]<<7|_t[28]>>>25,Rn=_t[28]<<7|_t[29]>>>25,mn=_t[38]<<8|_t[39]>>>24,yn=_t[39]<<8|_t[38]>>>24,Xe=_t[48]<<14|_t[49]>>>18,Ye=_t[49]<<14|_t[48]>>>18,_t[0]=Le^~He&We,_t[1]=Ue^~qe&Ge,_t[10]=Je^~Ze&nn,_t[11]=Qe^~tn&rn,_t[20]=un^~dn&pn,_t[21]=ln^~hn&fn,_t[30]=vn^~Tn&An,_t[31]=wn^~xn&Cn,_t[40]=In^~Bn&On,_t[41]=Nn^~Fn&Rn,_t[2]=He^~We&Ve,_t[3]=qe^~Ge&$e,_t[12]=Ze^~nn&on,_t[13]=tn^~rn&sn,_t[22]=dn^~pn&mn,_t[23]=hn^~fn&yn,_t[32]=Tn^~An&_n,_t[33]=xn^~Cn&Sn,_t[42]=Bn^~On&Pn,_t[43]=Fn^~Rn&Mn,_t[4]=We^~Ve&Xe,_t[5]=Ge^~$e&Ye,_t[14]=nn^~on&an,_t[15]=rn^~sn&cn,_t[24]=pn^~mn&gn,_t[25]=fn^~yn&bn,_t[34]=An^~_n&En,_t[35]=Cn^~Sn&kn,_t[44]=On^~Pn&Ln,_t[45]=Rn^~Mn&zn,_t[6]=Ve^~Xe&Le,_t[7]=$e^~Ye&Ue,_t[16]=on^~an&Je,_t[17]=sn^~cn&Qe,_t[26]=mn^~gn&un,_t[27]=yn^~bn&ln,_t[36]=_n^~En&vn,_t[37]=Sn^~kn&wn,_t[46]=Pn^~Ln&In,_t[47]=Mn^~zn&Nn,_t[8]=Xe^~Le&He,_t[9]=Ye^~Ue&qe,_t[18]=an^~Je&Ze,_t[19]=cn^~Qe&tn,_t[28]=gn^~un&dn,_t[29]=bn^~ln&hn,_t[38]=En^~vn&Tn,_t[39]=kn^~wn&xn,_t[48]=Ln^~In&Bn,_t[49]=zn^~Nn&Fn,_t[0]^=Ne[Yt],_t[1]^=Ne[Yt+1]};if(le)_t.exports=He;else for(We=0;We<qe.length;++We)Yt[qe[We]]=He[qe[We]]}()}));$e.keccak_224,$e.keccak224,$e.keccak_256;var Xe=$e.keccak256;$e.keccak_384,$e.keccak384,$e.keccak_512,$e.keccak512,$e.sha3_224,$e.sha3_256,$e.sha3_384,$e.sha3_512,$e.shake_128,$e.shake128,$e.shake_256,$e.shake256,$e.cshake_128,$e.cshake128,$e.cshake_256,$e.cshake256,$e.kmac_128,$e.kmac128,$e.kmac_256,$e.kmac256;var Ye=n((function(_t){!function(Ft){var Lt,Yt=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Kt=Math.ceil,Zt=Math.floor,le="[BigNumber Error] ",ve=le+"Number primitive has more than 15 significant digits: ",Ce=1e14,Se=14,Ie=9007199254740991,Ne=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Fe=1e7,Re=1e9;function d(_t){var Ft=0|_t;return _t>0||_t===Ft?Ft:Ft-1}function g(_t){for(var Ft,Lt,Yt=1,Kt=_t.length,Zt=_t[0]+"";Yt<Kt;){for(Ft=_t[Yt++]+"",Lt=Se-Ft.length;Lt--;Ft="0"+Ft);Zt+=Ft}for(Kt=Zt.length;48===Zt.charCodeAt(--Kt););return Zt.slice(0,Kt+1||1)}function m(_t,Ft){var Lt,Yt,Kt=_t.c,Zt=Ft.c,le=_t.s,ve=Ft.s,Ce=_t.e,Se=Ft.e;if(!le||!ve)return null;if(Lt=Kt&&!Kt[0],Yt=Zt&&!Zt[0],Lt||Yt)return Lt?Yt?0:-ve:le;if(le!=ve)return le;if(Lt=le<0,Yt=Ce==Se,!Kt||!Zt)return Yt?0:!Kt^Lt?1:-1;if(!Yt)return Ce>Se^Lt?1:-1;for(ve=(Ce=Kt.length)<(Se=Zt.length)?Ce:Se,le=0;le<ve;le++)if(Kt[le]!=Zt[le])return Kt[le]>Zt[le]^Lt?1:-1;return Ce==Se?0:Ce>Se^Lt?1:-1}function y(_t,Ft,Lt,Yt){if(_t<Ft||_t>Lt||_t!==Zt(_t))throw Error(le+(Yt||"Argument")+("number"==typeof _t?_t<Ft||_t>Lt?" out of range: ":" not an integer: ":" not a primitive number: ")+String(_t))}function w(_t){var Ft=_t.c.length-1;return d(_t.e/Se)==Ft&&_t.c[Ft]%2!=0}function v(_t,Ft){return(_t.length>1?_t.charAt(0)+"."+_t.slice(1):_t)+(Ft<0?"e":"e+")+Ft}function b(_t,Ft,Lt){var Yt,Kt;if(Ft<0){for(Kt=Lt+".";++Ft;Kt+=Lt);_t=Kt+_t}else if(++Ft>(Yt=_t.length)){for(Kt=Lt,Ft-=Yt;--Ft;Kt+=Lt);_t+=Kt}else Ft<Yt&&(_t=_t.slice(0,Ft)+"."+_t.slice(Ft));return _t}(Lt=function t(_t){var Ft,Lt,Pe,Le,Ue,He,qe,We,Ge,Ve,$e=$.prototype={constructor:$,toString:null,valueOf:null},Xe=new $(1),Ye=20,Je=4,Qe=-7,Ze=21,tn=-1e7,nn=1e7,rn=!1,on=1,sn=0,an={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},cn="0123456789abcdefghijklmnopqrstuvwxyz";function $(_t,Ft){var Kt,le,Ce,Ne,Fe,Re,Le,Ue,He=this;if(!(He instanceof $))return new $(_t,Ft);if(null==Ft){if(_t&&!0===_t._isBigNumber)return He.s=_t.s,void(!_t.c||_t.e>nn?He.c=He.e=null:_t.e<tn?He.c=[He.e=0]:(He.e=_t.e,He.c=_t.c.slice()));if((Re="number"==typeof _t)&&0*_t==0){if(He.s=1/_t<0?(_t=-_t,-1):1,_t===~~_t){for(Ne=0,Fe=_t;Fe>=10;Fe/=10,Ne++);return void(Ne>nn?He.c=He.e=null:(He.e=Ne,He.c=[_t]))}Ue=String(_t)}else{if(!Yt.test(Ue=String(_t)))return Pe(He,Ue,Re);He.s=45==Ue.charCodeAt(0)?(Ue=Ue.slice(1),-1):1}(Ne=Ue.indexOf("."))>-1&&(Ue=Ue.replace(".","")),(Fe=Ue.search(/e/i))>0?(Ne<0&&(Ne=Fe),Ne+=+Ue.slice(Fe+1),Ue=Ue.substring(0,Fe)):Ne<0&&(Ne=Ue.length)}else{if(y(Ft,2,cn.length,"Base"),10==Ft)return J(He=new $(_t),Ye+He.e+1,Je);if(Ue=String(_t),Re="number"==typeof _t){if(0*_t!=0)return Pe(He,Ue,Re,Ft);if(He.s=1/_t<0?(Ue=Ue.slice(1),-1):1,$.DEBUG&&Ue.replace(/^0\.0*|\./,"").length>15)throw Error(ve+_t)}else He.s=45===Ue.charCodeAt(0)?(Ue=Ue.slice(1),-1):1;for(Kt=cn.slice(0,Ft),Ne=Fe=0,Le=Ue.length;Fe<Le;Fe++)if(Kt.indexOf(le=Ue.charAt(Fe))<0){if("."==le){if(Fe>Ne){Ne=Le;continue}}else if(!Ce&&(Ue==Ue.toUpperCase()&&(Ue=Ue.toLowerCase())||Ue==Ue.toLowerCase()&&(Ue=Ue.toUpperCase()))){Ce=!0,Fe=-1,Ne=0;continue}return Pe(He,String(_t),Re,Ft)}Re=!1,(Ne=(Ue=Lt(Ue,Ft,10,He.s)).indexOf("."))>-1?Ue=Ue.replace(".",""):Ne=Ue.length}for(Fe=0;48===Ue.charCodeAt(Fe);Fe++);for(Le=Ue.length;48===Ue.charCodeAt(--Le););if(Ue=Ue.slice(Fe,++Le)){if(Le-=Fe,Re&&$.DEBUG&&Le>15&&(_t>Ie||_t!==Zt(_t)))throw Error(ve+He.s*_t);if((Ne=Ne-Fe-1)>nn)He.c=He.e=null;else if(Ne<tn)He.c=[He.e=0];else{if(He.e=Ne,He.c=[],Fe=(Ne+1)%Se,Ne<0&&(Fe+=Se),Fe<Le){for(Fe&&He.c.push(+Ue.slice(0,Fe)),Le-=Se;Fe<Le;)He.c.push(+Ue.slice(Fe,Fe+=Se));Fe=Se-(Ue=Ue.slice(Fe)).length}else Fe-=Le;for(;Fe--;Ue+="0");He.c.push(+Ue)}}else He.c=[He.e=0]}function G(_t,Ft,Lt,Yt){var Kt,Zt,le,ve,Ce;if(null==Lt?Lt=Je:y(Lt,0,8),!_t.c)return _t.toString();if(Kt=_t.c[0],le=_t.e,null==Ft)Ce=g(_t.c),Ce=1==Yt||2==Yt&&(le<=Qe||le>=Ze)?v(Ce,le):b(Ce,le,"0");else if(Zt=(_t=J(new $(_t),Ft,Lt)).e,ve=(Ce=g(_t.c)).length,1==Yt||2==Yt&&(Ft<=Zt||Zt<=Qe)){for(;ve<Ft;Ce+="0",ve++);Ce=v(Ce,Zt)}else if(Ft-=le,Ce=b(Ce,Zt,"0"),Zt+1>ve){if(--Ft>0)for(Ce+=".";Ft--;Ce+="0");}else if((Ft+=Zt-ve)>0)for(Zt+1==ve&&(Ce+=".");Ft--;Ce+="0");return _t.s<0&&Kt?"-"+Ce:Ce}function z(_t,Ft){for(var Lt,Yt=1,Kt=new $(_t[0]);Yt<_t.length;Yt++){if(!(Lt=new $(_t[Yt])).s){Kt=Lt;break}Ft.call(Kt,Lt)&&(Kt=Lt)}return Kt}function W(_t,Ft,Lt){for(var Yt=1,Kt=Ft.length;!Ft[--Kt];Ft.pop());for(Kt=Ft[0];Kt>=10;Kt/=10,Yt++);return(Lt=Yt+Lt*Se-1)>nn?_t.c=_t.e=null:Lt<tn?_t.c=[_t.e=0]:(_t.e=Lt,_t.c=Ft),_t}function J(_t,Ft,Lt,Yt){var le,ve,Ie,Fe,Re,Pe,Le,Ue=_t.c,He=Ne;if(Ue){t:{for(le=1,Fe=Ue[0];Fe>=10;Fe/=10,le++);if((ve=Ft-le)<0)ve+=Se,Ie=Ft,Le=(Re=Ue[Pe=0])/He[le-Ie-1]%10|0;else if((Pe=Kt((ve+1)/Se))>=Ue.length){if(!Yt)break t;for(;Ue.length<=Pe;Ue.push(0));Re=Le=0,le=1,Ie=(ve%=Se)-Se+1}else{for(Re=Fe=Ue[Pe],le=1;Fe>=10;Fe/=10,le++);Le=(Ie=(ve%=Se)-Se+le)<0?0:Re/He[le-Ie-1]%10|0}if(Yt=Yt||Ft<0||null!=Ue[Pe+1]||(Ie<0?Re:Re%He[le-Ie-1]),Yt=Lt<4?(Le||Yt)&&(0==Lt||Lt==(_t.s<0?3:2)):Le>5||5==Le&&(4==Lt||Yt||6==Lt&&(ve>0?Ie>0?Re/He[le-Ie]:0:Ue[Pe-1])%10&1||Lt==(_t.s<0?8:7)),Ft<1||!Ue[0])return Ue.length=0,Yt?(Ft-=_t.e+1,Ue[0]=He[(Se-Ft%Se)%Se],_t.e=-Ft||0):Ue[0]=_t.e=0,_t;if(0==ve?(Ue.length=Pe,Fe=1,Pe--):(Ue.length=Pe+1,Fe=He[Se-ve],Ue[Pe]=Ie>0?Zt(Re/He[le-Ie]%He[Ie])*Fe:0),Yt)for(;;){if(0==Pe){for(ve=1,Ie=Ue[0];Ie>=10;Ie/=10,ve++);for(Ie=Ue[0]+=Fe,Fe=1;Ie>=10;Ie/=10,Fe++);ve!=Fe&&(_t.e++,Ue[0]==Ce&&(Ue[0]=1));break}if(Ue[Pe]+=Fe,Ue[Pe]!=Ce)break;Ue[Pe--]=0,Fe=1}for(ve=Ue.length;0===Ue[--ve];Ue.pop());}_t.e>nn?_t.c=_t.e=null:_t.e<tn&&(_t.c=[_t.e=0])}return _t}function V(_t){var Ft,Lt=_t.e;return null===Lt?_t.toString():(Ft=g(_t.c),Ft=Lt<=Qe||Lt>=Ze?v(Ft,Lt):b(Ft,Lt,"0"),_t.s<0?"-"+Ft:Ft)}return $.clone=t,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(_t){var Ft,Lt;if(null!=_t){if("object"!=typeof _t)throw Error(le+"Object expected: "+_t);if(_t.hasOwnProperty(Ft="DECIMAL_PLACES")&&(y(Lt=_t[Ft],0,Re,Ft),Ye=Lt),_t.hasOwnProperty(Ft="ROUNDING_MODE")&&(y(Lt=_t[Ft],0,8,Ft),Je=Lt),_t.hasOwnProperty(Ft="EXPONENTIAL_AT")&&((Lt=_t[Ft])&&Lt.pop?(y(Lt[0],-Re,0,Ft),y(Lt[1],0,Re,Ft),Qe=Lt[0],Ze=Lt[1]):(y(Lt,-Re,Re,Ft),Qe=-(Ze=Lt<0?-Lt:Lt))),_t.hasOwnProperty(Ft="RANGE"))if((Lt=_t[Ft])&&Lt.pop)y(Lt[0],-Re,-1,Ft),y(Lt[1],1,Re,Ft),tn=Lt[0],nn=Lt[1];else{if(y(Lt,-Re,Re,Ft),!Lt)throw Error(le+Ft+" cannot be zero: "+Lt);tn=-(nn=Lt<0?-Lt:Lt)}if(_t.hasOwnProperty(Ft="CRYPTO")){if((Lt=_t[Ft])!==!!Lt)throw Error(le+Ft+" not true or false: "+Lt);if(Lt){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw rn=!Lt,Error(le+"crypto unavailable");rn=Lt}else rn=Lt}if(_t.hasOwnProperty(Ft="MODULO_MODE")&&(y(Lt=_t[Ft],0,9,Ft),on=Lt),_t.hasOwnProperty(Ft="POW_PRECISION")&&(y(Lt=_t[Ft],0,Re,Ft),sn=Lt),_t.hasOwnProperty(Ft="FORMAT")){if("object"!=typeof(Lt=_t[Ft]))throw Error(le+Ft+" not an object: "+Lt);an=Lt}if(_t.hasOwnProperty(Ft="ALPHABET")){if("string"!=typeof(Lt=_t[Ft])||/^.?$|[+\-.\s]|(.).*\1/.test(Lt))throw Error(le+Ft+" invalid: "+Lt);cn=Lt}}return{DECIMAL_PLACES:Ye,ROUNDING_MODE:Je,EXPONENTIAL_AT:[Qe,Ze],RANGE:[tn,nn],CRYPTO:rn,MODULO_MODE:on,POW_PRECISION:sn,FORMAT:an,ALPHABET:cn}},$.isBigNumber=function(_t){if(!_t||!0!==_t._isBigNumber)return!1;if(!$.DEBUG)return!0;var Ft,Lt,Yt=_t.c,Kt=_t.e,ve=_t.s;t:if("[object Array]"=={}.toString.call(Yt)){if((1===ve||-1===ve)&&Kt>=-Re&&Kt<=Re&&Kt===Zt(Kt)){if(0===Yt[0]){if(0===Kt&&1===Yt.length)return!0;break t}if((Ft=(Kt+1)%Se)<1&&(Ft+=Se),String(Yt[0]).length==Ft){for(Ft=0;Ft<Yt.length;Ft++)if((Lt=Yt[Ft])<0||Lt>=Ce||Lt!==Zt(Lt))break t;if(0!==Lt)return!0}}}else if(null===Yt&&null===Kt&&(null===ve||1===ve||-1===ve))return!0;throw Error(le+"Invalid BigNumber: "+_t)},$.maximum=$.max=function(){return z(arguments,$e.lt)},$.minimum=$.min=function(){return z(arguments,$e.gt)},$.random=(Le=9007199254740992,Ue=Math.random()*Le&2097151?function(){return Zt(Math.random()*Le)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(_t){var Ft,Lt,Yt,ve,Ce,Ie=0,Fe=[],Pe=new $(Xe);if(null==_t?_t=Ye:y(_t,0,Re),ve=Kt(_t/Se),rn)if(crypto.getRandomValues){for(Ft=crypto.getRandomValues(new Uint32Array(ve*=2));Ie<ve;)(Ce=131072*Ft[Ie]+(Ft[Ie+1]>>>11))>=9e15?(Lt=crypto.getRandomValues(new Uint32Array(2)),Ft[Ie]=Lt[0],Ft[Ie+1]=Lt[1]):(Fe.push(Ce%1e14),Ie+=2);Ie=ve/2}else{if(!crypto.randomBytes)throw rn=!1,Error(le+"crypto unavailable");for(Ft=crypto.randomBytes(ve*=7);Ie<ve;)(Ce=281474976710656*(31&Ft[Ie])+1099511627776*Ft[Ie+1]+4294967296*Ft[Ie+2]+16777216*Ft[Ie+3]+(Ft[Ie+4]<<16)+(Ft[Ie+5]<<8)+Ft[Ie+6])>=9e15?crypto.randomBytes(7).copy(Ft,Ie):(Fe.push(Ce%1e14),Ie+=7);Ie=ve/7}if(!rn)for(;Ie<ve;)(Ce=Ue())<9e15&&(Fe[Ie++]=Ce%1e14);for(ve=Fe[--Ie],_t%=Se,ve&&_t&&(Ce=Ne[Se-_t],Fe[Ie]=Zt(ve/Ce)*Ce);0===Fe[Ie];Fe.pop(),Ie--);if(Ie<0)Fe=[Yt=0];else{for(Yt=-1;0===Fe[0];Fe.splice(0,1),Yt-=Se);for(Ie=1,Ce=Fe[0];Ce>=10;Ce/=10,Ie++);Ie<Se&&(Yt-=Se-Ie)}return Pe.e=Yt,Pe.c=Fe,Pe}),$.sum=function(){for(var _t=1,Ft=arguments,Lt=new $(Ft[0]);_t<Ft.length;)Lt=Lt.plus(Ft[_t++]);return Lt},Lt=function(){var _t="0123456789";function e(_t,Ft,Lt,Yt){for(var Kt,Zt,le=[0],ve=0,Ce=_t.length;ve<Ce;){for(Zt=le.length;Zt--;le[Zt]*=Ft);for(le[0]+=Yt.indexOf(_t.charAt(ve++)),Kt=0;Kt<le.length;Kt++)le[Kt]>Lt-1&&(null==le[Kt+1]&&(le[Kt+1]=0),le[Kt+1]+=le[Kt]/Lt|0,le[Kt]%=Lt)}return le.reverse()}return function(Lt,Yt,Kt,Zt,le){var ve,Ce,Se,Ie,Ne,Fe,Re,Pe,Le=Lt.indexOf("."),Ue=Ye,He=Je;for(Le>=0&&(Ie=sn,sn=0,Lt=Lt.replace(".",""),Fe=(Pe=new $(Yt)).pow(Lt.length-Le),sn=Ie,Pe.c=e(b(g(Fe.c),Fe.e,"0"),10,Kt,_t),Pe.e=Pe.c.length),Se=Ie=(Re=e(Lt,Yt,Kt,le?(ve=cn,_t):(ve=_t,cn))).length;0==Re[--Ie];Re.pop());if(!Re[0])return ve.charAt(0);if(Le<0?--Se:(Fe.c=Re,Fe.e=Se,Fe.s=Zt,Re=(Fe=Ft(Fe,Pe,Ue,He,Kt)).c,Ne=Fe.r,Se=Fe.e),Le=Re[Ce=Se+Ue+1],Ie=Kt/2,Ne=Ne||Ce<0||null!=Re[Ce+1],Ne=He<4?(null!=Le||Ne)&&(0==He||He==(Fe.s<0?3:2)):Le>Ie||Le==Ie&&(4==He||Ne||6==He&&1&Re[Ce-1]||He==(Fe.s<0?8:7)),Ce<1||!Re[0])Lt=Ne?b(ve.charAt(1),-Ue,ve.charAt(0)):ve.charAt(0);else{if(Re.length=Ce,Ne)for(--Kt;++Re[--Ce]>Kt;)Re[Ce]=0,Ce||(++Se,Re=[1].concat(Re));for(Ie=Re.length;!Re[--Ie];);for(Le=0,Lt="";Le<=Ie;Lt+=ve.charAt(Re[Le++]));Lt=b(Lt,Se,ve.charAt(0))}return Lt}}(),Ft=function(){function t(_t,Ft,Lt){var Yt,Kt,Zt,le,ve=0,Ce=_t.length,Se=Ft%Fe,Ie=Ft/Fe|0;for(_t=_t.slice();Ce--;)ve=((Kt=Se*(Zt=_t[Ce]%Fe)+(Yt=Ie*Zt+(le=_t[Ce]/Fe|0)*Se)%Fe*Fe+ve)/Lt|0)+(Yt/Fe|0)+Ie*le,_t[Ce]=Kt%Lt;return ve&&(_t=[ve].concat(_t)),_t}function e(_t,Ft,Lt,Yt){var Kt,Zt;if(Lt!=Yt)Zt=Lt>Yt?1:-1;else for(Kt=Zt=0;Kt<Lt;Kt++)if(_t[Kt]!=Ft[Kt]){Zt=_t[Kt]>Ft[Kt]?1:-1;break}return Zt}function n(_t,Ft,Lt,Yt){for(var Kt=0;Lt--;)_t[Lt]-=Kt,Kt=_t[Lt]<Ft[Lt]?1:0,_t[Lt]=Kt*Yt+_t[Lt]-Ft[Lt];for(;!_t[0]&&_t.length>1;_t.splice(0,1));}return function(_t,Ft,Lt,Yt,Kt){var le,ve,Ie,Ne,Fe,Re,Pe,Le,Ue,He,qe,We,Ge,Ve,$e,Xe,Ye,Je=_t.s==Ft.s?1:-1,Qe=_t.c,Ze=Ft.c;if(!(Qe&&Qe[0]&&Ze&&Ze[0]))return new $(_t.s&&Ft.s&&(Qe?!Ze||Qe[0]!=Ze[0]:Ze)?Qe&&0==Qe[0]||!Ze?0*Je:Je/0:NaN);for(Ue=(Le=new $(Je)).c=[],Je=Lt+(ve=_t.e-Ft.e)+1,Kt||(Kt=Ce,ve=d(_t.e/Se)-d(Ft.e/Se),Je=Je/Se|0),Ie=0;Ze[Ie]==(Qe[Ie]||0);Ie++);if(Ze[Ie]>(Qe[Ie]||0)&&ve--,Je<0)Ue.push(1),Ne=!0;else{for(Ve=Qe.length,Xe=Ze.length,Ie=0,Je+=2,(Fe=Zt(Kt/(Ze[0]+1)))>1&&(Ze=t(Ze,Fe,Kt),Qe=t(Qe,Fe,Kt),Xe=Ze.length,Ve=Qe.length),Ge=Xe,qe=(He=Qe.slice(0,Xe)).length;qe<Xe;He[qe++]=0);Ye=Ze.slice(),Ye=[0].concat(Ye),$e=Ze[0],Ze[1]>=Kt/2&&$e++;do{if(Fe=0,(le=e(Ze,He,Xe,qe))<0){if(We=He[0],Xe!=qe&&(We=We*Kt+(He[1]||0)),(Fe=Zt(We/$e))>1)for(Fe>=Kt&&(Fe=Kt-1),Pe=(Re=t(Ze,Fe,Kt)).length,qe=He.length;1==e(Re,He,Pe,qe);)Fe--,n(Re,Xe<Pe?Ye:Ze,Pe,Kt),Pe=Re.length,le=1;else 0==Fe&&(le=Fe=1),Pe=(Re=Ze.slice()).length;if(Pe<qe&&(Re=[0].concat(Re)),n(He,Re,qe,Kt),qe=He.length,-1==le)for(;e(Ze,He,Xe,qe)<1;)Fe++,n(He,Xe<qe?Ye:Ze,qe,Kt),qe=He.length}else 0===le&&(Fe++,He=[0]);Ue[Ie++]=Fe,He[0]?He[qe++]=Qe[Ge]||0:(He=[Qe[Ge]],qe=1)}while((Ge++<Ve||null!=He[0])&&Je--);Ne=null!=He[0],Ue[0]||Ue.splice(0,1)}if(Kt==Ce){for(Ie=1,Je=Ue[0];Je>=10;Je/=10,Ie++);J(Le,Lt+(Le.e=Ie+ve*Se-1)+1,Yt,Ne)}else Le.e=ve,Le.r=+Ne;return Le}}(),He=/^(-?)0([xbo])(?=\w[\w.]*$)/i,qe=/^([^.]+)\.$/,We=/^\.([^.]+)$/,Ge=/^-?(Infinity|NaN)$/,Ve=/^\s*\+(?=[\w.])|^\s+|\s+$/g,Pe=function(_t,Ft,Lt,Yt){var Kt,Zt=Lt?Ft:Ft.replace(Ve,"");if(Ge.test(Zt))_t.s=isNaN(Zt)?null:Zt<0?-1:1;else{if(!Lt&&(Zt=Zt.replace(He,(function(_t,Ft,Lt){return Kt="x"==(Lt=Lt.toLowerCase())?16:"b"==Lt?2:8,Yt&&Yt!=Kt?_t:Ft})),Yt&&(Kt=Yt,Zt=Zt.replace(qe,"$1").replace(We,"0.$1")),Ft!=Zt))return new $(Zt,Kt);if($.DEBUG)throw Error(le+"Not a"+(Yt?" base "+Yt:"")+" number: "+Ft);_t.s=null}_t.c=_t.e=null},$e.absoluteValue=$e.abs=function(){var _t=new $(this);return _t.s<0&&(_t.s=1),_t},$e.comparedTo=function(_t,Ft){return m(this,new $(_t,Ft))},$e.decimalPlaces=$e.dp=function(_t,Ft){var Lt,Yt,Kt,Zt=this;if(null!=_t)return y(_t,0,Re),null==Ft?Ft=Je:y(Ft,0,8),J(new $(Zt),_t+Zt.e+1,Ft);if(!(Lt=Zt.c))return null;if(Yt=((Kt=Lt.length-1)-d(this.e/Se))*Se,Kt=Lt[Kt])for(;Kt%10==0;Kt/=10,Yt--);return Yt<0&&(Yt=0),Yt},$e.dividedBy=$e.div=function(_t,Lt){return Ft(this,new $(_t,Lt),Ye,Je)},$e.dividedToIntegerBy=$e.idiv=function(_t,Lt){return Ft(this,new $(_t,Lt),0,1)},$e.exponentiatedBy=$e.pow=function(_t,Ft){var Lt,Yt,ve,Ce,Ie,Ne,Fe,Re,Pe=this;if((_t=new $(_t)).c&&!_t.isInteger())throw Error(le+"Exponent not an integer: "+V(_t));if(null!=Ft&&(Ft=new $(Ft)),Ie=_t.e>14,!Pe.c||!Pe.c[0]||1==Pe.c[0]&&!Pe.e&&1==Pe.c.length||!_t.c||!_t.c[0])return Re=new $(Math.pow(+V(Pe),Ie?2-w(_t):+V(_t))),Ft?Re.mod(Ft):Re;if(Ne=_t.s<0,Ft){if(Ft.c?!Ft.c[0]:!Ft.s)return new $(NaN);(Yt=!Ne&&Pe.isInteger()&&Ft.isInteger())&&(Pe=Pe.mod(Ft))}else{if(_t.e>9&&(Pe.e>0||Pe.e<-1||(0==Pe.e?Pe.c[0]>1||Ie&&Pe.c[1]>=24e7:Pe.c[0]<8e13||Ie&&Pe.c[0]<=9999975e7)))return Ce=Pe.s<0&&w(_t)?-0:0,Pe.e>-1&&(Ce=1/Ce),new $(Ne?1/Ce:Ce);sn&&(Ce=Kt(sn/Se+2))}for(Ie?(Lt=new $(.5),Ne&&(_t.s=1),Fe=w(_t)):Fe=(ve=Math.abs(+V(_t)))%2,Re=new $(Xe);;){if(Fe){if(!(Re=Re.times(Pe)).c)break;Ce?Re.c.length>Ce&&(Re.c.length=Ce):Yt&&(Re=Re.mod(Ft))}if(ve){if(0===(ve=Zt(ve/2)))break;Fe=ve%2}else if(J(_t=_t.times(Lt),_t.e+1,1),_t.e>14)Fe=w(_t);else{if(0==(ve=+V(_t)))break;Fe=ve%2}Pe=Pe.times(Pe),Ce?Pe.c&&Pe.c.length>Ce&&(Pe.c.length=Ce):Yt&&(Pe=Pe.mod(Ft))}return Yt?Re:(Ne&&(Re=Xe.div(Re)),Ft?Re.mod(Ft):Ce?J(Re,sn,Je,void 0):Re)},$e.integerValue=function(_t){var Ft=new $(this);return null==_t?_t=Je:y(_t,0,8),J(Ft,Ft.e+1,_t)},$e.isEqualTo=$e.eq=function(_t,Ft){return 0===m(this,new $(_t,Ft))},$e.isFinite=function(){return!!this.c},$e.isGreaterThan=$e.gt=function(_t,Ft){return m(this,new $(_t,Ft))>0},$e.isGreaterThanOrEqualTo=$e.gte=function(_t,Ft){return 1===(Ft=m(this,new $(_t,Ft)))||0===Ft},$e.isInteger=function(){return!!this.c&&d(this.e/Se)>this.c.length-2},$e.isLessThan=$e.lt=function(_t,Ft){return m(this,new $(_t,Ft))<0},$e.isLessThanOrEqualTo=$e.lte=function(_t,Ft){return-1===(Ft=m(this,new $(_t,Ft)))||0===Ft},$e.isNaN=function(){return!this.s},$e.isNegative=function(){return this.s<0},$e.isPositive=function(){return this.s>0},$e.isZero=function(){return!!this.c&&0==this.c[0]},$e.minus=function(_t,Ft){var Lt,Yt,Kt,Zt,le=this,ve=le.s;if(Ft=(_t=new $(_t,Ft)).s,!ve||!Ft)return new $(NaN);if(ve!=Ft)return _t.s=-Ft,le.plus(_t);var Ie=le.e/Se,Ne=_t.e/Se,Fe=le.c,Re=_t.c;if(!Ie||!Ne){if(!Fe||!Re)return Fe?(_t.s=-Ft,_t):new $(Re?le:NaN);if(!Fe[0]||!Re[0])return Re[0]?(_t.s=-Ft,_t):new $(Fe[0]?le:3==Je?-0:0)}if(Ie=d(Ie),Ne=d(Ne),Fe=Fe.slice(),ve=Ie-Ne){for((Zt=ve<0)?(ve=-ve,Kt=Fe):(Ne=Ie,Kt=Re),Kt.reverse(),Ft=ve;Ft--;Kt.push(0));Kt.reverse()}else for(Yt=(Zt=(ve=Fe.length)<(Ft=Re.length))?ve:Ft,ve=Ft=0;Ft<Yt;Ft++)if(Fe[Ft]!=Re[Ft]){Zt=Fe[Ft]<Re[Ft];break}if(Zt&&(Kt=Fe,Fe=Re,Re=Kt,_t.s=-_t.s),(Ft=(Yt=Re.length)-(Lt=Fe.length))>0)for(;Ft--;Fe[Lt++]=0);for(Ft=Ce-1;Yt>ve;){if(Fe[--Yt]<Re[Yt]){for(Lt=Yt;Lt&&!Fe[--Lt];Fe[Lt]=Ft);--Fe[Lt],Fe[Yt]+=Ce}Fe[Yt]-=Re[Yt]}for(;0==Fe[0];Fe.splice(0,1),--Ne);return Fe[0]?W(_t,Fe,Ne):(_t.s=3==Je?-1:1,_t.c=[_t.e=0],_t)},$e.modulo=$e.mod=function(_t,Lt){var Yt,Kt,Zt=this;return _t=new $(_t,Lt),!Zt.c||!_t.s||_t.c&&!_t.c[0]?new $(NaN):!_t.c||Zt.c&&!Zt.c[0]?new $(Zt):(9==on?(Kt=_t.s,_t.s=1,Yt=Ft(Zt,_t,0,3),_t.s=Kt,Yt.s*=Kt):Yt=Ft(Zt,_t,0,on),(_t=Zt.minus(Yt.times(_t))).c[0]||1!=on||(_t.s=Zt.s),_t)},$e.multipliedBy=$e.times=function(_t,Ft){var Lt,Yt,Kt,Zt,le,ve,Ie,Ne,Re,Pe,Le,Ue,He,qe,We,Ge=this,Ve=Ge.c,$e=(_t=new $(_t,Ft)).c;if(!(Ve&&$e&&Ve[0]&&$e[0]))return!Ge.s||!_t.s||Ve&&!Ve[0]&&!$e||$e&&!$e[0]&&!Ve?_t.c=_t.e=_t.s=null:(_t.s*=Ge.s,Ve&&$e?(_t.c=[0],_t.e=0):_t.c=_t.e=null),_t;for(Yt=d(Ge.e/Se)+d(_t.e/Se),_t.s*=Ge.s,(Ie=Ve.length)<(Pe=$e.length)&&(He=Ve,Ve=$e,$e=He,Kt=Ie,Ie=Pe,Pe=Kt),Kt=Ie+Pe,He=[];Kt--;He.push(0));for(qe=Ce,We=Fe,Kt=Pe;--Kt>=0;){for(Lt=0,Le=$e[Kt]%We,Ue=$e[Kt]/We|0,Zt=Kt+(le=Ie);Zt>Kt;)Lt=((Ne=Le*(Ne=Ve[--le]%We)+(ve=Ue*Ne+(Re=Ve[le]/We|0)*Le)%We*We+He[Zt]+Lt)/qe|0)+(ve/We|0)+Ue*Re,He[Zt--]=Ne%qe;He[Zt]=Lt}return Lt?++Yt:He.splice(0,1),W(_t,He,Yt)},$e.negated=function(){var _t=new $(this);return _t.s=-_t.s||null,_t},$e.plus=function(_t,Ft){var Lt,Yt=this,Kt=Yt.s;if(Ft=(_t=new $(_t,Ft)).s,!Kt||!Ft)return new $(NaN);if(Kt!=Ft)return _t.s=-Ft,Yt.minus(_t);var Zt=Yt.e/Se,le=_t.e/Se,ve=Yt.c,Ie=_t.c;if(!Zt||!le){if(!ve||!Ie)return new $(Kt/0);if(!ve[0]||!Ie[0])return Ie[0]?_t:new $(ve[0]?Yt:0*Kt)}if(Zt=d(Zt),le=d(le),ve=ve.slice(),Kt=Zt-le){for(Kt>0?(le=Zt,Lt=Ie):(Kt=-Kt,Lt=ve),Lt.reverse();Kt--;Lt.push(0));Lt.reverse()}for((Kt=ve.length)-(Ft=Ie.length)<0&&(Lt=Ie,Ie=ve,ve=Lt,Ft=Kt),Kt=0;Ft;)Kt=(ve[--Ft]=ve[Ft]+Ie[Ft]+Kt)/Ce|0,ve[Ft]=Ce===ve[Ft]?0:ve[Ft]%Ce;return Kt&&(ve=[Kt].concat(ve),++le),W(_t,ve,le)},$e.precision=$e.sd=function(_t,Ft){var Lt,Yt,Kt,Zt=this;if(null!=_t&&_t!==!!_t)return y(_t,1,Re),null==Ft?Ft=Je:y(Ft,0,8),J(new $(Zt),_t,Ft);if(!(Lt=Zt.c))return null;if(Yt=(Kt=Lt.length-1)*Se+1,Kt=Lt[Kt]){for(;Kt%10==0;Kt/=10,Yt--);for(Kt=Lt[0];Kt>=10;Kt/=10,Yt++);}return _t&&Zt.e+1>Yt&&(Yt=Zt.e+1),Yt},$e.shiftedBy=function(_t){return y(_t,-9007199254740991,Ie),this.times("1e"+_t)},$e.squareRoot=$e.sqrt=function(){var _t,Lt,Yt,Kt,Zt,le=this,ve=le.c,Ce=le.s,Se=le.e,Ie=Ye+4,Ne=new $("0.5");if(1!==Ce||!ve||!ve[0])return new $(!Ce||Ce<0&&(!ve||ve[0])?NaN:ve?le:1/0);if(0==(Ce=Math.sqrt(+V(le)))||Ce==1/0?(((Lt=g(ve)).length+Se)%2==0&&(Lt+="0"),Ce=Math.sqrt(+Lt),Se=d((Se+1)/2)-(Se<0||Se%2),Yt=new $(Lt=Ce==1/0?"5e"+Se:(Lt=Ce.toExponential()).slice(0,Lt.indexOf("e")+1)+Se)):Yt=new $(Ce+""),Yt.c[0])for((Ce=(Se=Yt.e)+Ie)<3&&(Ce=0);;)if(Zt=Yt,Yt=Ne.times(Zt.plus(Ft(le,Zt,Ie,1))),g(Zt.c).slice(0,Ce)===(Lt=g(Yt.c)).slice(0,Ce)){if(Yt.e<Se&&--Ce,"9999"!=(Lt=Lt.slice(Ce-3,Ce+1))&&(Kt||"4999"!=Lt)){+Lt&&(+Lt.slice(1)||"5"!=Lt.charAt(0))||(J(Yt,Yt.e+Ye+2,1),_t=!Yt.times(Yt).eq(le));break}if(!Kt&&(J(Zt,Zt.e+Ye+2,0),Zt.times(Zt).eq(le))){Yt=Zt;break}Ie+=4,Ce+=4,Kt=1}return J(Yt,Yt.e+Ye+1,Je,_t)},$e.toExponential=function(_t,Ft){return null!=_t&&(y(_t,0,Re),_t++),G(this,_t,Ft,1)},$e.toFixed=function(_t,Ft){return null!=_t&&(y(_t,0,Re),_t=_t+this.e+1),G(this,_t,Ft)},$e.toFormat=function(_t,Ft,Lt){var Yt,Kt=this;if(null==Lt)null!=_t&&Ft&&"object"==typeof Ft?(Lt=Ft,Ft=null):_t&&"object"==typeof _t?(Lt=_t,_t=Ft=null):Lt=an;else if("object"!=typeof Lt)throw Error(le+"Argument not an object: "+Lt);if(Yt=Kt.toFixed(_t,Ft),Kt.c){var Zt,ve=Yt.split("."),Ce=+Lt.groupSize,Se=+Lt.secondaryGroupSize,Ie=Lt.groupSeparator||"",Ne=ve[0],Fe=ve[1],Re=Kt.s<0,Pe=Re?Ne.slice(1):Ne,Le=Pe.length;if(Se&&(Zt=Ce,Ce=Se,Se=Zt,Le-=Zt),Ce>0&&Le>0){for(Zt=Le%Ce||Ce,Ne=Pe.substr(0,Zt);Zt<Le;Zt+=Ce)Ne+=Ie+Pe.substr(Zt,Ce);Se>0&&(Ne+=Ie+Pe.slice(Zt)),Re&&(Ne="-"+Ne)}Yt=Fe?Ne+(Lt.decimalSeparator||"")+((Se=+Lt.fractionGroupSize)?Fe.replace(new RegExp("\\d{"+Se+"}\\B","g"),"$&"+(Lt.fractionGroupSeparator||"")):Fe):Ne}return(Lt.prefix||"")+Yt+(Lt.suffix||"")},$e.toFraction=function(_t){var Lt,Yt,Kt,Zt,ve,Ce,Ie,Fe,Re,Pe,Le,Ue,He=this,qe=He.c;if(null!=_t&&(!(Ie=new $(_t)).isInteger()&&(Ie.c||1!==Ie.s)||Ie.lt(Xe)))throw Error(le+"Argument "+(Ie.isInteger()?"out of range: ":"not an integer: ")+V(Ie));if(!qe)return new $(He);for(Lt=new $(Xe),Re=Yt=new $(Xe),Kt=Fe=new $(Xe),Ue=g(qe),ve=Lt.e=Ue.length-He.e-1,Lt.c[0]=Ne[(Ce=ve%Se)<0?Se+Ce:Ce],_t=!_t||Ie.comparedTo(Lt)>0?ve>0?Lt:Re:Ie,Ce=nn,nn=1/0,Ie=new $(Ue),Fe.c[0]=0;Pe=Ft(Ie,Lt,0,1),1!=(Zt=Yt.plus(Pe.times(Kt))).comparedTo(_t);)Yt=Kt,Kt=Zt,Re=Fe.plus(Pe.times(Zt=Re)),Fe=Zt,Lt=Ie.minus(Pe.times(Zt=Lt)),Ie=Zt;return Zt=Ft(_t.minus(Yt),Kt,0,1),Fe=Fe.plus(Zt.times(Re)),Yt=Yt.plus(Zt.times(Kt)),Fe.s=Re.s=He.s,Le=Ft(Re,Kt,ve*=2,Je).minus(He).abs().comparedTo(Ft(Fe,Yt,ve,Je).minus(He).abs())<1?[Re,Kt]:[Fe,Yt],nn=Ce,Le},$e.toNumber=function(){return+V(this)},$e.toPrecision=function(_t,Ft){return null!=_t&&y(_t,1,Re),G(this,_t,Ft,2)},$e.toString=function(_t){var Ft,Yt=this,Kt=Yt.s,Zt=Yt.e;return null===Zt?Kt?(Ft="Infinity",Kt<0&&(Ft="-"+Ft)):Ft="NaN":(null==_t?Ft=Zt<=Qe||Zt>=Ze?v(g(Yt.c),Zt):b(g(Yt.c),Zt,"0"):10===_t?Ft=b(g((Yt=J(new $(Yt),Ye+Zt+1,Je)).c),Yt.e,"0"):(y(_t,2,cn.length,"Base"),Ft=Lt(b(g(Yt.c),Zt,"0"),10,_t,Kt,!0)),Kt<0&&Yt.c[0]&&(Ft="-"+Ft)),Ft},$e.valueOf=$e.toJSON=function(){return V(this)},$e._isBigNumber=!0,null!=_t&&$.set(_t),$}()).default=Lt.BigNumber=Lt,_t.exports?_t.exports=Lt:(Ft||(Ft="undefined"!=typeof self&&self?self:window),Ft.BigNumber=Lt)}(this)})).BigNumber;const Je={ROUNDING_MODE:Ye.ROUND_DOWN};function R(_t){return(new TextEncoder).encode(_t)}function P(_t){return"string"==typeof _t?P(D(_t)):(new TextDecoder).decode(_t)}Ye.config(Je);const Qe="INVALID_ARGUMENT";function U(_t,Ft="UNKNOWN_ERROR",Lt={}){let Yt=[];Object.keys(Lt).forEach((_t=>{try{Yt.push(_t+"="+JSON.stringify(Lt[_t]))}catch(Ft){Yt.push(_t+"="+JSON.stringify(Lt[_t].toString()))}}));let Kt=_t;Yt.length&&(_t+=" ("+Yt.join(", ")+")");let Zt=new Error(_t);return Zt.reason=Kt,Zt.code=Ft,Object.keys(Lt).forEach((function(_t){Zt[_t]=Lt[_t]})),Zt}function D(_t){if("string"!=typeof _t)throw new Error("hexToBytes only accept strings, got: "+typeof _t);if("0x"===_t.substr(0,2))return D(_t.substr(2));const Ft=new Uint8Array(Math.ceil(_t.length/2));let Lt=0;for(let Yt=0;Yt<_t.length;Yt+=2){const Kt=parseInt(_t.substr(Yt,2),16);if(isNaN(Kt))throw new Error("Cannot read hex string:"+JSON.stringify(_t));Ft[Lt]=Kt,Lt++}return Ft}function L(_t){return Array.from(_t).map((_t=>_t.toString(16).padStart(2,"0"))).join("")}function q(_t,Ft){if("string"==typeof _t){if(Ft&&"hex"===Ft.encoding&&"string"==typeof _t){let Ft=_t;Ft.length>2&&"0x"===Ft.substr(0,2)&&(Ft=Ft.substr(2));const Lt=D(Ft);return Xe(Lt)}return Xe(R(_t))}return Xe(_t)}let Ze={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function $(_t,Ft,Lt){return new Array(Ft-_t.length+1).join(Lt||"0")+_t}function G(_t){return wt(_t)&&_t.name&&-1!==_t.name.indexOf("(")?_t.name:_t.name+"("+W(!1,_t.inputs||[]).join(",")+")"}function z(..._t){const Ft=_t.reduce(((_t,Ft)=>_t+Ft.length),0);var Lt=new Uint8Array(Ft);let Yt=0;for(let Ft of _t)Lt.set(Ft,Yt),Yt+=Ft.length;return Lt}function W(_t,Ft){const Lt=[];return Ft.forEach((function(Ft){if("object"==typeof Ft.components){if("tuple"!==Ft.type.substring(0,5))throw new Error("components found but type is not tuple; report on GitHub");var Yt="",Kt=Ft.type.indexOf("[");Kt>=0&&(Yt=Ft.type.substring(Kt));var Zt=W(_t,Ft.components);bt(Zt)&&_t?Lt.push("tuple("+Zt.join(",")+")"+Yt):_t?Lt.push("("+Zt+")"):Lt.push("("+Zt.join(",")+")"+Yt)}else Lt.push(Ft.type)})),Lt}function J(_t){let Ft=_t.indexOf("("),Lt=_t.indexOf(")");return-1!==Ft&&-1!==Lt?_t.substr(0,Ft):_t}function V(_t){let Ft=_t.indexOf("("),Lt=_t.indexOf(")");return-1!==Ft&&-1!==Lt?_t.substr(Ft+1,Lt-Ft-1).replace(" ",""):""}function Y(_t){return null==_t?_t:ot(_t).toNumber()}function K(_t){return ot(_t).toNumber()}function Z(_t){return mt(_t)?_t.toString(10):""+_t}function X(_t){return"string"==typeof _t&&!_t.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t)?"0x"+_t:nt(_t)}function Q(_t){if("string"==typeof _t)return _t.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t)?nt(_t):"0x"+L(R(_t));if(_t instanceof Uint8Array)return"0x"+L(_t);throw new Error(`toStringData: Error trying to convert ${_t} (${typeof _t}) to a hex string.`)}function tt(_t){return"boolean"==typeof _t?_t:0!==ot(_t).toNumber()}function et(_t){let Ft=ot(_t),Lt=Ft.toString(16);return Ft.isLessThan(0)?"-0x"+Lt.substr(1):"0x"+Lt}function nt(_t){if(vt(_t))return et(+_t);if(mt(_t))return et(_t);if(yt(_t)){const Ft=_t;if(0===Ft.indexOf("-0x"))return et(Ft);if(0===Ft.indexOf("0x"))return Ft;if(!isFinite(Ft))return L(R(Ft))}if(_t instanceof Uint8Array)return"0x"+L(_t);if(bt(_t)||wt(_t))throw new Error("toHex can only be called with scalar values, not objects or arrays");return et(_t)}function rt(_t){let Ft=_t?_t.toLowerCase():"ether",Lt=Ze[Ft];if(void 0===Lt)throw new Error("This unit doesn't exists, please use the one of the following units"+JSON.stringify(Ze,null,2));return new Ye(Lt,10)}function ot(_t){let Ft=_t||0;return mt(Ft)?Ft:("string"==typeof Ft&&(Ft=Ft.trim()),"string"!=typeof Ft||0!==Ft.indexOf("0x")&&0!==Ft.indexOf("-0x")?Ft instanceof Uint8Array?new Ye(L(Ft),16):new Ye(Ft,10):new Ye(Ft.replace("0x","").toLowerCase(),16))}function it(_t){return new Ye(new Array(_t).fill("1").join(""),2)}function at(_t,Ft=256){let Lt=ot(_t).integerValue();return Lt.isLessThan(0)?it(Ft).plus(Lt).plus(1):Lt}function st(_t,Ft){return"1"==$(_t.toString(2),Ft,"0")[0]}function ct(_t){if("string"!=typeof _t)throw U("invalid address",Qe,{arg:"address",value:_t});if(_t.trim().match(/^(0x)?[0-9a-fA-F]{40}$/))return"0x"!==_t.trim().substring(0,2)&&(_t="0x"+_t),ft(_t);throw U("invalid address",Qe,{arg:"address",value:_t})}function ut(_t,Ft=256){if(st(_t,Ft)){const Lt=it(Ft);return _t.minus(Lt).minus(1)}return _t}function lt(_t){return/^0x[0-9a-f]{40}$/i.test(_t)}function ht(_t){return!!/^(0x)?[0-9a-f]{40}$/i.test(_t)&&(!(!/^(0x)?[0-9a-f]{40}$/.test(_t)&&!/^(0x)?[0-9A-F]{40}$/.test(_t))||pt(_t))}function pt(_t){const Ft=_t.replace("0x","");let Lt=q(Ft.toLowerCase());for(let _t=0;_t<40;_t++)if(parseInt(Lt[_t],16)>7&&Ft[_t].toUpperCase()!==Ft[_t]||parseInt(Lt[_t],16)<=7&&Ft[_t].toLowerCase()!==Ft[_t])return!1;return!0}function ft(_t){if(void 0===_t)return"";const Ft=_t.toLowerCase().replace("0x",""),Lt=q(Ft);let Yt="0x";for(let _t=0;_t<Ft.length;_t++)parseInt(Lt[_t],16)>7?Yt+=Ft[_t].toUpperCase():Yt+=Ft[_t];return Yt}function dt(_t){if(!Array.isArray(_t))throw new Error(`Value was not an array: ${JSON.stringify(_t)}`);return _t}function gt(_t){return lt(_t)?_t:/^[0-9a-f]{40}$/.test(_t)?"0x"+_t:"0x"+$(nt(_t).substr(2),40)}function mt(_t){return _t instanceof Ye}function yt(_t){return"string"==typeof _t||_t&&_t.constructor&&"String"===_t.constructor.name}function wt(_t){return null!==_t&&!Array.isArray(_t)&&"object"==typeof _t}function vt(_t){return"boolean"==typeof _t}function bt(_t){return Array.isArray(_t)}var tn,nn,rn;function Tt(Ft,Lt){if(!Ft)throw new Error("jsonrpc method should be specified!");if("string"!=typeof Ft)throw new Error(`jsonrpc must be a string, got ${typeof Ft}!`);return _t.messageId++,{jsonrpc:"2.0",id:_t.messageId,method:Ft,params:Lt||[]}}function xt(_t){return Array.isArray(_t)?_t.every(e):e(_t);function e(_t){return!(!_t||"error"in _t||"2.0"!==_t.jsonrpc||"number"!=typeof _t.id||null==_t.result&&void 0===_t.result)}}function At(_t,Ft,Lt,Yt){var Kt,Zt=arguments.length,le=Zt<3?Ft:null===Yt?Yt=Object.getOwnPropertyDescriptor(Ft,Lt):Yt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(_t,Ft,Lt,Yt);else for(var ve=_t.length-1;ve>=0;ve--)(Kt=_t[ve])&&(le=(Zt<3?Kt(le):Zt>3?Kt(Ft,Lt,le):Kt(Ft,Lt))||le);return Zt>3&&le&&Object.defineProperty(Ft,Lt,le),le}function kt(_t,Ft){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(_t,Ft)}function Et(_t){return ot(_t)}function Bt(_t){return void 0===_t?"latest":Ot(_t)}function Ot(_t){return void 0===_t||null==_t?null:function(_t){return"latest"===_t||"pending"===_t||"earliest"===_t}(_t)?_t:nt(_t)}function St(_t){return _t.from=_t.from,_t.from&&(_t.from=Ut(_t.from)),_t.to&&(_t.to=Ut(_t.to)),void 0!==_t.gasPrice&&(_t.gasPrice=et(_t.gasPrice)),void 0!==_t.gas&&(_t.gas=et(_t.gas)),void 0!==_t.value&&(_t.value=et(_t.value)),void 0!==_t.nonce&&(_t.nonce=et(_t.nonce)),_t.data&&!_t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t.data)&&(_t.data="0x"+_t.data),_t}function Ct(_t){if("string"!=typeof _t)throw new Error("The provided input for transactionId is not a string, got: "+JSON.stringify(_t));if(0!==_t.indexOf("0x"))throw new Error("TransactionID must start with 0x, got: "+JSON.stringify(_t));if(66!==_t.length)throw new Error("TransactionID must be a 32 byte hex, got: "+JSON.stringify(_t));return _t}function Mt(_t){if("object"!=typeof _t)throw new Error("Did not provide transaction options");if(!_t.from)throw new Error('Missing "from" in transaction options');return _t.from=Ut(_t.from),_t.to&&(_t.to=Ut(_t.to)),void 0!==_t.gasPrice&&(_t.gasPrice=et(_t.gasPrice)),void 0!==_t.gas&&(_t.gas=et(_t.gas)),void 0!==_t.value&&(_t.value=et(_t.value)),void 0!==_t.nonce&&(_t.nonce=et(_t.nonce)),_t.data&&!_t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t.data)&&(_t.data="0x"+_t.data),_t}function It(_t){return _t?(null!==_t.blockNumber&&(_t.blockNumber=K(_t.blockNumber)),null!==_t.transactionIndex&&(_t.transactionIndex=K(_t.transactionIndex)),_t.nonce=K(_t.nonce),_t.gas=K(_t.gas),_t.gasPrice=ot(_t.gasPrice),_t.value=ot(_t.value),_t):null}function Pt(_t){return _t?(_t.gasLimit=K(_t.gasLimit),_t.gasUsed=K(_t.gasUsed),_t.size=K(_t.size),_t.timestamp=K(_t.timestamp),null!==_t.number&&(_t.number=K(_t.number)),_t.difficulty=ot(_t.difficulty),_t.totalDifficulty=ot(_t.totalDifficulty),bt(_t.transactions)&&_t.transactions.forEach((function(Ft,Lt){yt(Ft)||(_t.transactions[Lt]=It(Ft)||_t.transactions[Lt])})),_t):null}function jt(_t){return _t?(_t.blockNumber&&(_t.blockNumber=K(_t.blockNumber)),_t.transactionIndex&&(_t.transactionIndex=K(_t.transactionIndex)),_t.logIndex&&(_t.logIndex=K(_t.logIndex)),_t):_t}function Ut(_t){if(lt(_t))return _t;if(ht(_t))return"0x"+_t;throw new Error(`Invalid address: ${JSON.stringify(_t)}`)}_t.TransactionStatus=void 0,(tn=_t.TransactionStatus||(_t.TransactionStatus={})).pending="pending",tn.confirmed="confirmed",tn.failed="failed",_t.TransactionType=void 0,(nn=_t.TransactionType||(_t.TransactionType={})).queued="queued",nn.dropped="dropped",nn.replaced="replaced",nn.pending="pending",nn.reverted="reverted",nn.confirmed="confirmed",_t.messageId=0;class qt{constructor(_t){this.callName=_t.callName,this.params=_t.params||0,this.inputFormatter=_t.inputFormatter||null,this.outputFormatter=_t.outputFormatter}validateArgs(_t){if(_t.length!==this.params)throw Ft=this.callName,Lt=_t.length,Yt=this.params,new Error(`Invalid number of input parameters to RPC method "${Ft}" given: ${Lt}, expected: ${Yt}`);var Ft,Lt,Yt}formatInput(_t){return this.inputFormatter?this.inputFormatter.map((function(Ft,Lt){return Ft?Ft(_t[Lt]):_t[Lt]})):_t}formatOutput(_t){return null!==_t?this.outputFormatter(_t):null}toPayload(_t){let Ft=this.formatInput(_t);return this.validateArgs(Ft),{method:this.callName,params:Ft}}async execute(_t,...Ft){let Lt=this.toPayload(Ft);if(!_t)throw new Error("Missing RequestManager in method#exec");const Yt=await _t.sendAsync(Lt);return this.formatOutput(Yt)}}class Ht{constructor(_t){this.getter=_t.getter,this.outputFormatter=_t.outputFormatter}formatOutput(_t){return this.outputFormatter(_t)}async execute(_t,...Ft){const Lt=await _t.sendAsync({method:this.getter,params:[]});return this.formatOutput(Lt)}}function $t(_t){return new Promise((Ft=>setTimeout(Ft,_t)))}function Gt(Ft,Lt){const Yt=_t.eth[Lt];if(!Yt)throw new Error(`Could not find the method/property named ${Lt.toString()}`);Object.defineProperty(Ft,Lt,{value:function(){return Yt.execute(this,...arguments)}})}_t.eth=void 0,(rn=_t.eth||(_t.eth={})).eth_getBalance=new qt({callName:"eth_getBalance",params:2,inputFormatter:[Ut,Bt],outputFormatter:Et}),rn.eth_getStorageAt=new qt({callName:"eth_getStorageAt",params:3,inputFormatter:[Ut,nt,Bt],outputFormatter:X}),rn.eth_getCode=new qt({callName:"eth_getCode",params:2,inputFormatter:[Ut,Bt],outputFormatter:X}),rn.eth_getBlockByHash=new qt({callName:"eth_getBlockByHash",params:2,inputFormatter:[Ot,function(_t){return!!_t}],outputFormatter:Pt}),rn.eth_getBlockByNumber=new qt({callName:"eth_getBlockByNumber",params:2,inputFormatter:[Ot,function(_t){return!!_t}],outputFormatter:Pt}),rn.eth_getUncleByBlockHashAndIndex=new qt({callName:"eth_getUncleByBlockHashAndIndex",params:2,inputFormatter:[Ot,nt],outputFormatter:Pt}),rn.eth_getUncleByBlockNumberAndIndex=new qt({callName:"eth_getUncleByBlockNumberAndIndex",params:2,inputFormatter:[Ot,nt],outputFormatter:Pt}),rn.eth_getBlockTransactionCountByHash=new qt({callName:"eth_getBlockTransactionCountByHash",params:1,inputFormatter:[Ot],outputFormatter:K}),rn.eth_getBlockTransactionCountByNumber=new qt({callName:"eth_getBlockTransactionCountByNumber",params:1,inputFormatter:[Ot],outputFormatter:K}),rn.eth_getUncleCountByBlockHash=new qt({callName:"eth_getUncleCountByBlockHash",params:1,inputFormatter:[Ot],outputFormatter:K}),rn.eth_getUncleCountByBlockNumber=new qt({callName:"eth_getUncleCountByBlockNumber",params:1,inputFormatter:[Ot],outputFormatter:K}),rn.eth_getTransactionByHash=new qt({callName:"eth_getTransactionByHash",params:1,inputFormatter:[Ct],outputFormatter:It}),rn.eth_getTransactionByBlockHashAndIndex=new qt({callName:"eth_getTransactionByBlockHashAndIndex",params:2,inputFormatter:[Ot,nt],outputFormatter:It}),rn.eth_getTransactionByBlockNumberAndIndex=new qt({callName:"eth_getTransactionByBlockNumberAndIndex",params:2,inputFormatter:[Ot,nt],outputFormatter:It}),rn.eth_getTransactionReceipt=new qt({callName:"eth_getTransactionReceipt",params:1,inputFormatter:[Ct],outputFormatter:function(_t){return _t?(null!==_t.blockNumber&&(_t.blockNumber=K(_t.blockNumber)),null!==_t.transactionIndex&&(_t.transactionIndex=K(_t.transactionIndex)),_t.cumulativeGasUsed=K(_t.cumulativeGasUsed),_t.gasUsed=K(_t.gasUsed),_t.logs&&bt(_t.logs)&&(_t.logs=_t.logs.map((function(_t){return jt(_t)}))),_t.status=K(_t.status||""),_t):null}}),rn.eth_getTransactionCount=new qt({callName:"eth_getTransactionCount",params:2,inputFormatter:[Ut,Bt],outputFormatter:K}),rn.eth_sendRawTransaction=new qt({callName:"eth_sendRawTransaction",params:1,inputFormatter:[null],outputFormatter:X}),rn.web3_sha3=new qt({callName:"web3_sha3",params:1,inputFormatter:[null],outputFormatter:X}),rn.eth_sendTransaction=new qt({callName:"eth_sendTransaction",params:1,inputFormatter:[Mt],outputFormatter:X}),rn.eth_sign=new qt({callName:"eth_sign",params:2,inputFormatter:[Ut,null],outputFormatter:X}),rn.eth_call=new qt({callName:"eth_call",params:2,inputFormatter:[St,Bt],outputFormatter:X}),rn.eth_estimateGas=new qt({callName:"eth_estimateGas",params:1,inputFormatter:[St],outputFormatter:K}),rn.eth_submitWork=new qt({callName:"eth_submitWork",params:3,inputFormatter:[null,null,null],outputFormatter:tt}),rn.eth_getWork=new qt({callName:"eth_getWork",params:0,inputFormatter:[],outputFormatter:dt}),rn.eth_coinbase=new Ht({getter:"eth_coinbase",outputFormatter:gt}),rn.eth_mining=new Ht({getter:"eth_mining",outputFormatter:tt}),rn.eth_hashrate=new Ht({getter:"eth_hashrate",outputFormatter:K}),rn.eth_syncing=new Ht({getter:"eth_syncing",outputFormatter:function(_t){return _t?(_t.startingBlock=K(_t.startingBlock),_t.currentBlock=K(_t.currentBlock),_t.highestBlock=K(_t.highestBlock),_t.knownStates&&(_t.knownStates=K(_t.knownStates),_t.pulledStates=K(_t.pulledStates)),_t):_t}}),rn.eth_gasPrice=new Ht({getter:"eth_gasPrice",outputFormatter:Et}),rn.eth_accounts=new Ht({getter:"eth_accounts",outputFormatter:dt}),rn.eth_blockNumber=new Ht({getter:"eth_blockNumber",outputFormatter:K}),rn.eth_protocolVersion=new Ht({getter:"eth_protocolVersion",outputFormatter:K}),rn.web3_clientVersion=new Ht({getter:"web3_clientVersion",outputFormatter:Z}),rn.net_version=new Ht({getter:"net_version",outputFormatter:Z}),rn.shh_version=new qt({callName:"shh_version",params:0,inputFormatter:[],outputFormatter:K}),rn.shh_post=new qt({callName:"shh_post",params:1,inputFormatter:[null],outputFormatter:tt}),rn.personal_newAccount=new qt({callName:"personal_newAccount",params:1,inputFormatter:[null],outputFormatter:gt}),rn.personal_importRawKey=new qt({callName:"personal_importRawKey",params:2,inputFormatter:[null,null],outputFormatter:gt}),rn.personal_sign=new qt({callName:"personal_sign",params:3,inputFormatter:[Q,Ut,null],outputFormatter:X}),rn.personal_ecRecover=new qt({callName:"personal_ecRecover",params:2,inputFormatter:[Q,null],outputFormatter:gt}),rn.personal_unlockAccount=new qt({callName:"personal_unlockAccount",params:3,inputFormatter:[Ut,null,Y],outputFormatter:tt}),rn.personal_sendTransaction=new qt({callName:"personal_sendTransaction",params:2,inputFormatter:[Mt,null],outputFormatter:X}),rn.personal_lockAccount=new qt({callName:"personal_lockAccount",params:1,inputFormatter:[Ut],outputFormatter:tt}),rn.personal_listAccounts=new Ht({getter:"personal_listAccounts",outputFormatter:dt}),rn.net_listening=new Ht({getter:"net_listening",outputFormatter:tt}),rn.net_peerCount=new Ht({getter:"net_peerCount",outputFormatter:K}),rn.eth_newFilter=new qt({callName:"eth_newFilter",params:1,inputFormatter:[function(_t){return _t}],outputFormatter:nt}),rn.eth_getLogs=new qt({callName:"eth_getLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),rn.eth_newBlockFilter=new qt({callName:"eth_newBlockFilter",params:0,inputFormatter:[],outputFormatter:nt}),rn.eth_newPendingTransactionFilter=new qt({callName:"eth_newPendingTransactionFilter",params:0,inputFormatter:[],outputFormatter:nt}),rn.eth_uninstallFilter=new qt({callName:"eth_uninstallFilter",params:1,inputFormatter:[nt],outputFormatter:tt}),rn.eth_getFilterLogs=new qt({callName:"eth_getFilterLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),rn.eth_getFilterChanges=new qt({callName:"eth_getFilterChanges",params:1,inputFormatter:[nt],outputFormatter:dt}),rn.eth_submitHashrate=new qt({callName:"eth_submitHashrate",params:2,inputFormatter:[null,null],outputFormatter:tt}),rn.shh_newIdentity=new qt({callName:"shh_newIdentity",params:0,inputFormatter:[],outputFormatter:X}),rn.shh_hasIdentity=new qt({callName:"shh_hasIdentity",params:1,inputFormatter:[null],outputFormatter:tt}),rn.shh_newGroup=new qt({callName:"shh_newGroup",params:0,inputFormatter:[],outputFormatter:X}),rn.shh_addToGroup=new qt({callName:"shh_addToGroup",params:1,inputFormatter:[null],outputFormatter:tt}),rn.shh_newFilter=new qt({callName:"shh_newFilter",params:1,inputFormatter:[null],outputFormatter:nt}),rn.shh_uninstallFilter=new qt({callName:"shh_uninstallFilter",params:1,inputFormatter:[null],outputFormatter:tt}),rn.shh_getLogs=new qt({callName:"shh_getLogs",params:1,inputFormatter:[null],outputFormatter:dt}),rn.shh_getFilterMessages=new qt({callName:"shh_getFilterMessages",params:1,inputFormatter:[null],outputFormatter:dt}),rn.shh_getFilterChanges=new qt({callName:"shh_getFilterChanges",params:1,inputFormatter:[null],outputFormatter:dt}),rn.shh_getMessages=new qt({callName:"shh_getMessages",params:1,inputFormatter:[null],outputFormatter:dt});class zt{constructor(_t){this.provider=_t,this.requests=new Map}async sendAsync(_t){const Ft=await this.provider;if(!Ft)throw new Error("Provider not set or invalid");let Lt=Tt(_t.method,_t.params);const Kt=Yt();return this.requests.set(Lt.id,Kt),Ft.sendAsync(Lt,((_t,Ft)=>{this.requests.delete(Lt.id),_t?Kt.reject(_t):xt(Ft)?Kt.resolve(Ft.result):Kt.reject(function(_t){let Ft=_t&&_t.error&&_t.error.message?_t.error.message:"Invalid JSON RPC response: "+JSON.stringify(_t);return new Error(Ft)}(Ft))})),Kt}setProvider(_t){this.provider=_t}async getConfirmedTransaction(_t){const Ft=await this.waitForCompletion(_t);if(this.isFailure(Ft))throw new Error(`Transaction "${_t}" failed`);return Ft}async waitForCompletion(Ft,Lt){const Yt=Ct(Ft);if(await this.isTxDropped(Yt,Lt)){const Ft=await this.getTransactionAndReceipt(Yt);return Object.assign(Object.assign({},Ft),{status:_t.TransactionStatus.failed})}for(;;){const Ft=await this.getTransactionAndReceipt(Yt);if(!this.isPending(Ft)&&Ft.receipt)return Object.assign(Object.assign({},Ft),{status:this.isFailure(Ft)?_t.TransactionStatus.failed:_t.TransactionStatus.confirmed});await $t(2e3)}}async getTransaction(Ft){let Lt,Yt=null;const Kt=Ct(Ft);try{const _t=(await this.eth_accounts())[0];_t&&(Yt=await this.eth_getTransactionCount(_t,"latest"))}catch(_t){Yt=null}try{if(Lt=await this.eth_getTransactionByHash(Kt),null==Lt)return null}catch(_t){return null}if(null==Lt.blockNumber){if(null!=Yt){if(Lt.nonce<Yt)return{hash:Kt,type:_t.TransactionType.replaced,nonce:Lt.nonce};if(Lt.nonce>Yt)return{hash:Kt,type:_t.TransactionType.queued,nonce:Lt.nonce}}return Object.assign({type:_t.TransactionType.pending},Lt)}let Zt;try{if(Zt=await this.eth_getTransactionReceipt(Kt),null==Zt||0===Zt.status)return Object.assign({type:_t.TransactionType.reverted},Lt)}catch(_t){return null}return Object.assign(Object.assign({type:_t.TransactionType.confirmed},Lt),{receipt:Zt})}async isTxDropped(_t,Ft=15){let Lt=Ft;for(;Lt>0;){if(null!==await this.getTransactionAndReceipt(_t))return!1;Lt-=1,await $t(2e3)}return!0}async getTransactionAndReceipt(_t){_t=Ct(_t);const[Ft,Lt]=await Promise.all([this.eth_getTransactionByHash(_t),this.eth_getTransactionReceipt(_t)]);return Object.assign(Object.assign({},Ft),{receipt:Lt})}isPending(_t){return _t&&null===_t.blockNumber}isFailure(_t){return _t&&(!_t.receipt||0===_t.receipt.status)}}function Wt(_t){return"slice"in _t&&_t.slice||(_t.slice=function(){var Ft=Array.prototype.slice.call(arguments);return new Uint8Array(Array.prototype.slice.apply(_t,Ft))}),_t}function Jt(_t){if(null==_t)throw U("cannot convert null value to array",Qe,{arg:"value",value:_t});if(_t instanceof Uint8Array)return Wt(new Uint8Array(_t));if("string"==typeof _t){let Yt=_t.match(/^(0x)?[0-9a-fA-F]*$/);if(!Yt)throw U("invalid hexidecimal string",Qe,{arg:"value",value:_t});if("0x"!==Yt[1])throw U("hex string must have 0x prefix",Qe,{arg:"value",value:_t});(_t=_t.substring(2)).length%2&&(_t="0"+_t);for(var Ft=[],Lt=0;Lt<_t.length;Lt+=2)Ft.push(parseInt(_t.substr(Lt,2),16));return Wt(new Uint8Array(Ft))}if(function(_t){if(!_t||parseInt(String(_t.length))!=_t.length||"string"==typeof _t)return!1;for(var Ft=0;Ft<_t.length;Ft++){var Lt=_t[Ft];if(Lt<0||Lt>=256||parseInt(String(Lt))!=Lt)return!1}return!0}(_t))return Wt(new Uint8Array(_t));throw U("invalid arrayify value",void 0,{arg:"value",value:_t,type:typeof _t})}function Vt(_t,Ft,Lt){Object.defineProperty(_t,Ft,{enumerable:!0,value:Lt,writable:!1})}At([Gt,kt("design:type",Function)],zt.prototype,"web3_clientVersion",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"web3_sha3",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"net_version",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"net_peerCount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"net_listening",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_protocolVersion",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_syncing",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_coinbase",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_mining",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_hashrate",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_gasPrice",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_accounts",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_blockNumber",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBalance",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getStorageAt",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionCount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByHash",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByNumber",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockHash",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockNumber",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getCode",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_sign",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_sendTransaction",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_sendRawTransaction",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_call",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_estimateGas",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBlockByHash",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBlockByNumber",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionByHash",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockHashAndIndex",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockNumberAndIndex",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionReceipt",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getUncleByBlockHashAndIndex",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getUncleByBlockNumberAndIndex",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_newFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_newBlockFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_newPendingTransactionFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_uninstallFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getFilterChanges",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getFilterLogs",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getLogs",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getWork",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_submitWork",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_submitHashrate",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_post",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_version",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_newIdentity",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_hasIdentity",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_newGroup",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_addToGroup",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_newFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_uninstallFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_getFilterChanges",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_getMessages",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_unlockAccount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_newAccount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_listAccounts",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_lockAccount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_importRawKey",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_sendTransaction",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_sign",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_ecRecover",void 0);const on=new Ye(-1),sn=new Ye(0),an=new Ye(1),cn=new Ye("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Qt(_t){return function(_t,Ft){function n(Ft){return new Error('unexpected character "'+_t[Ft]+'" at position '+Ft+' in "'+_t+'"')}for(var Lt={type:"",name:"",state:{allowType:!0}},Yt=Lt,Kt=0;Kt<_t.length;Kt++){var Zt=_t[Kt];switch(Zt){case"(":if(!Yt.state.allowParams)throw n(Kt);Yt.state.allowType=!1,Yt.type=te(Yt.type),Yt.components=[{type:"",name:"",parent:Yt,state:{allowType:!0}}],Yt=Yt.components[0];break;case")":delete Yt.state,"indexed"===Yt.name&&(Yt.indexed=!0,Yt.name=""),Yt.type=te(Yt.type);var le=Yt;if(!(Yt=Yt.parent))throw n(Kt);delete le.parent,Yt.state.allowParams=!1,Yt.state.allowName=!0,Yt.state.allowArray=!0;break;case",":delete Yt.state,"indexed"===Yt.name&&(Yt.indexed=!0,Yt.name=""),Yt.type=te(Yt.type);var ve={type:"",name:"",parent:Yt.parent,state:{allowType:!0}};Yt.parent.components.push(ve),delete Yt.parent,Yt=ve;break;case" ":Yt.state.allowType&&""!==Yt.type&&(Yt.type=te(Yt.type),delete Yt.state.allowType,Yt.state.allowName=!0,Yt.state.allowParams=!0),Yt.state.allowName&&""!==Yt.name&&("indexed"===Yt.name?(Yt.indexed=!0,Yt.name=""):Yt.state.allowName=!1);break;case"[":if(!Yt.state.allowArray)throw n(Kt);Yt.type+=Zt,Yt.state.allowArray=!1,Yt.state.allowName=!1,Yt.state.readArray=!0;break;case"]":if(!Yt.state.readArray)throw n(Kt);Yt.type+=Zt,Yt.state.readArray=!1,Yt.state.allowArray=!0,Yt.state.allowName=!0;break;default:if(Yt.state.allowType)Yt.type+=Zt,Yt.state.allowParams=!0,Yt.state.allowArray=!0;else if(Yt.state.allowName)Yt.name+=Zt,delete Yt.state.allowArray;else{if(!Yt.state.readArray)throw n(Kt);Yt.type+=Zt}}}if(Yt.parent)throw new Error("unexpected eof");return delete Lt.state,"indexed"===Yt.name&&(Yt.indexed=!0,Yt.name=""),Lt.type=te(Lt.type),Lt}(_t)}function te(_t){return _t.match(/^uint($|[^1-9])/)?_t="uint256"+_t.substring(4):_t.match(/^int($|[^1-9])/)&&(_t="int256"+_t.substring(3)),_t}const un=new RegExp(/^bytes([0-9]*)$/),ln=new RegExp(/^(u?int)([0-9]*)$/),dn=new RegExp(/^(.*)\[([0-9]*)\]$/),oe=function(_t,Ft){var Lt=_t.match(ln);return Lt&&parseInt(Lt[2])<=48?Ft.toNumber():Ft};class ie{constructor(_t,Ft,Lt,Yt="",Kt){this.coerceFunc=_t,this.name=Ft,this.type=Lt,this.localName=Yt,this.dynamic=Kt}}class ae extends ie{constructor(_t){super(_t.coerceFunc,_t.name,_t.type,void 0,_t.dynamic),Vt(this,"coder",_t)}encode(_t){return this.coder.encode(_t)}decode(_t,Ft){return this.coder.decode(_t,Ft)}}class se extends ie{constructor(_t,Ft){super(_t,"null","",Ft,!1)}encode(_t){return Jt([])}decode(_t,Ft){if(Ft>_t.length)throw new Error("invalid null");return{consumed:0,value:this.coerceFunc("null",void 0)}}}function ce(_t,Ft){return new Ye(_t.toString(2).substr(-Ft),2)}class ue extends ie{constructor(_t,Ft,Lt,Yt){const Kt=(Lt?"int":"uint")+8*Ft;super(_t,Kt,Kt,Yt,!1),this.size=Ft,this.signed=Lt}encode(_t){try{let Ft=ot(_t);if(this.signed){let _t=ce(cn,8*this.size-1);if(Ft.gt(_t))throw new Error("out-of-bounds");if(_t=_t.plus(an).multipliedBy(on),Ft.lt(_t))throw new Error("out-of-bounds")}else if(Ft.lt(sn)||Ft.gt(ce(cn,8*this.size)))throw new Error("out-of-bounds");Ft=ce(at(Ft,8*this.size),8*this.size),this.signed&&(Ft=at(ut(Ft,8*this.size),256));let Lt=$(at(Ft).toString(16),64);if(-1!=Lt.indexOf("NaN"))throw U("invalid number value, NaN",Qe,{arg:this.localName,coderType:this.name,value:_t,v:Ft,twosComplement:at(Ft),twosComplement16:at(Ft).toString(16),pad:$(at(Ft).toString(16),64),size:this.size});return D(Lt)}catch(Ft){throw U("invalid number value",Qe,{arg:this.localName,coderType:this.name,value:_t,message:Ft.toString()})}}decode(_t,Ft){if(_t.length<Ft+32)throw U("insufficient data for "+this.name+" type",Qe,{arg:this.localName,coderType:this.name,value:nt(_t.slice(Ft,Ft+32))});var Lt=32-this.size,Yt=new Ye(L(_t.slice(Ft+Lt,Ft+32)),16);return Yt=this.signed?ut(Yt,8*this.size):ce(Yt,8*this.size),{consumed:32,value:this.coerceFunc(this.name,Yt)}}}var hn=new ue((function(_t,Ft){return Ft}),32,!1,"none");class he extends ie{constructor(_t,Ft,Lt){const Yt="bytes"+Ft;super(_t,Yt,Yt,Lt,!1),this.length=Ft}encode(_t){var Ft=new Uint8Array(32);try{if("string"==typeof _t&&_t.length%2!=0)throw new Error("hex string cannot be odd-length");let Lt=Jt(_t);if(Lt.length>this.length)throw new Error("incorrect data length");Ft.set(Lt)}catch(Ft){throw U("invalid "+this.name+" value. Use hex strings or Uint8Array",Qe,{arg:this.localName,coderType:this.name,value:Ft.value||_t,details:Ft.message})}return Ft}decode(_t,Ft){if(_t.length<Ft+32)throw U("insufficient data for "+this.name+" type",Qe,{arg:this.localName,coderType:this.name,value:nt(_t.slice(Ft,Ft+32))});return{consumed:32,value:this.coerceFunc(this.name,_t.slice(Ft,Ft+this.length))}}}function pe(_t){var Ft=32*Math.ceil(_t.length/32),Lt=new Uint8Array(Ft-_t.length);return z(hn.encode(_t.length),_t,Lt)}function fe(_t,Ft,Lt){if(_t.length<Ft+32)throw U("insufficient data for dynamicBytes length",Qe,{arg:Lt,coderType:"dynamicBytes",value:nt(_t.slice(Ft,Ft+32))});var Yt=hn.decode(_t,Ft).value;try{Yt=Yt.toNumber()}catch(_t){throw _t("dynamic bytes count too large",Qe,{arg:Lt,coderType:"dynamicBytes",value:Yt.toString()})}if(_t.length<Ft+32+Yt)throw U("insufficient data for dynamicBytes type",Qe,{arg:Lt,coderType:"dynamicBytes",value:nt(_t.slice(Ft,Ft+32+Yt))});return{consumed:32+32*Math.ceil(Yt/32),value:_t.slice(Ft+32,Ft+32+Yt)}}function de(_t){return 32*Math.ceil(_t/32)}function ge(_t,Ft){if(Array.isArray(Ft));else{if(!Ft||"object"!=typeof Ft)throw U("invalid tuple value",Qe,{coderType:"tuple",value:Ft});var Lt=[];_t.forEach((function(_t){Lt.push(Ft[_t.localName])})),Ft=Lt}if(_t.length!==Ft.length)throw U("types/value length mismatch",Qe,{coderType:"tuple",value:Ft});var Yt=[];_t.forEach((function(_t,Lt){Yt.push({dynamic:_t.dynamic,value:_t.encode(Ft[Lt])})}));var Kt=0,Zt=0;Yt.forEach((function(_t){_t.dynamic?(Kt+=32,Zt+=de(_t.value.length)):Kt+=de(_t.value.length)}));var le=0,ve=Kt,Ce=new Uint8Array(Kt+Zt);return Yt.forEach((function(_t){_t.dynamic?(Ce.set(hn.encode(ve),le),le+=32,Ce.set(_t.value,ve),ve+=de(_t.value.length)):(Ce.set(_t.value,le),le+=de(_t.value.length))})),Ce}class me extends Array{}class ye extends ie{constructor(_t,Ft,Lt,Yt){super(_t,"array",Ft.type+"["+(Lt>=0?Lt:"")+"]",Yt,-1===Lt||Ft.dynamic),this.coder=Ft,this.length=Lt}encode(_t){if(!Array.isArray(_t))throw U("expected array value",Qe,{arg:this.localName,coderType:"array",value:_t});var Ft=this.length,Lt=new Uint8Array(0);-1===Ft&&(Ft=_t.length,Lt=hn.encode(Ft)),function(_t,Ft,Lt){if(Lt||(Lt=""),_t<Ft)throw U("missing argument"+Lt,"MISSING_ARGUMENT",{count:_t,expectedCount:Ft});if(_t>Ft)throw U("too many arguments"+Lt,"UNEXPECTED_ARGUMENT",{count:_t,expectedCount:Ft})}(Ft,_t.length,"in coder array"+(this.localName?" "+this.localName:""));for(var Yt=[],Kt=0;Kt<_t.length;Kt++)Yt.push(this.coder);return z(Lt,ge(Yt,_t))}decode(_t,Ft){var Lt=0,Yt=this.length;if(-1===Yt){try{var Kt=hn.decode(_t,Ft)}catch(_t){throw _t("insufficient data for dynamic array length",Qe,{arg:this.localName,coderType:"array",value:_t.value})}try{Yt=Kt.value.toNumber()}catch(_t){throw _t("array count too large",Qe,{arg:this.localName,coderType:"array",value:Kt.value.toString()})}Lt+=Kt.consumed,Ft+=Kt.consumed}for(var Zt=[],le=0;le<Yt;le++)Zt.push(new ae(this.coder));var ve=function(_t,Ft,Lt){var Yt=Lt,Kt=0,Zt=[];return _t.forEach((function(_t){if(_t.dynamic){var le=hn.decode(Ft,Lt);(ve=_t.decode(Ft,Yt+le.value.toNumber())).consumed=le.consumed}else var ve=_t.decode(Ft,Lt);null!=ve.value&&Zt.push(ve.value),Lt+=ve.consumed,Kt+=ve.consumed})),{value:Zt,consumed:Kt}}(Zt,_t,Ft);return ve.consumed+=Lt,ve.value=this.coerceFunc(this.type,ve.value),ve}}class we extends ie{constructor(_t,Ft,Lt){var Yt=!1,Kt=[];Ft.forEach((function(_t){_t.dynamic&&(Yt=!0),Kt.push(_t.type)})),super(_t,"tuple","tuple("+Kt.join(",")+")",Lt,Yt),this.coders=Ft}encode(_t){return ge(this.coders,_t)}decode(_t,Ft){var Lt=function(_t,Ft,Lt){var Yt=Lt,Kt=0,Zt=new me;return _t.forEach((function(_t){if(_t.dynamic){var le=hn.decode(Ft,Lt);(ve=_t.decode(Ft,Yt+le.value.toNumber())).consumed=le.consumed}else var ve=_t.decode(Ft,Lt);null!=ve.value&&Zt.push(ve.value),Lt+=ve.consumed,Kt+=ve.consumed})),_t.forEach((function(_t,Ft){let Lt=_t.localName;Lt&&("length"===Lt&&(Lt="_length"),null==Zt[Lt]&&(Zt[Lt]=Zt[Ft]))})),{value:Zt,consumed:Kt}}(this.coders,_t,Ft);return Lt.value=this.coerceFunc(this.type,Lt.value),Lt}}const pn={address:class extends ie{constructor(_t,Ft){super(_t,"address","address",Ft,!1)}encode(_t){let Ft=new Uint8Array(32);const Lt=_t.trim();if(!ht(Lt))throw U("invalid address format",Qe,{arg:this.localName,coderType:"address",value:_t});try{Ft.set(D(Ut(Lt)),12)}catch(Ft){throw U(`invalid address (${Ft.message})`,Qe,{arg:this.localName,coderType:"address",value:_t})}return Ft}decode(_t,Ft){if(_t.length<Ft+32)throw U("insufficuent data for address type",Qe,{arg:this.localName,coderType:"address",value:nt(_t.slice(Ft,Ft+32)),missingBytes:Ft+32-_t.length});return{consumed:32,value:this.coerceFunc("address",ct(nt(_t.slice(Ft+12,Ft+32))))}}},bool:class extends ie{constructor(_t,Ft){super(_t,"bool","bool",Ft,!1)}encode(_t){return hn.encode(_t?1:0)}decode(_t,Ft){try{var Lt=hn.decode(_t,Ft)}catch(_t){if("insufficient data for uint256 type"===_t.reason)throw U("insufficient data for boolean type",Qe,{arg:this.localName,coderType:"boolean",value:_t.value});throw _t}return{consumed:Lt.consumed,value:this.coerceFunc("bool",!Lt.value.isZero())}}},string:class extends ie{constructor(_t,Ft){super(_t,"string","string",Ft,!0)}encode(_t){if("string"!=typeof _t)throw U("invalid string value",Qe,{arg:this.localName,coderType:"string",value:_t});return pe(R(_t))}decode(_t,Ft){var Lt=fe(_t,Ft,this.localName);return Lt.value=this.coerceFunc("string",P(Lt.value)),Lt}},bytes:class extends ie{constructor(_t,Ft){super(_t,"bytes","bytes",Ft,!0)}encode(_t){try{return pe(Jt(_t))}catch(_t){throw _t("invalid bytes value",Qe,{arg:this.localName,coderType:"bytes",value:_t.value})}}decode(_t,Ft){var Lt=fe(_t,Ft,this.localName);return Lt.value=this.coerceFunc("bytes",Lt.value),Lt}},function:class extends he{constructor(_t,Ft){super(_t,24,Ft)}}};function be(_t,Ft){var Lt,Yt=pn[Ft.type];if(Yt)return new Yt(_t,Ft.name);if(Lt=Ft.type.match(ln)){let Yt=parseInt(Lt[2]||"256");if(0===Yt||Yt>256||Yt%8!=0)throw U("invalid "+Lt[1]+" bit length",Qe,{arg:"param",value:Ft});return new ue(_t,Yt/8,"int"===Lt[1],Ft.name)}if(Lt=Ft.type.match(un)){let Yt=parseInt(Lt[1]);if(0===Yt||Yt>32)throw U("invalid bytes length",Qe,{arg:"param",value:Ft});return new he(_t,Yt,Ft.name)}if(Lt=Ft.type.match(dn)){const Yt=Object.assign({},Ft);let Kt=parseInt(Lt[2]||"-1");return Yt.type=Lt[1],new ye(_t,be(_t,Yt),Kt,Ft.name)}if("tuple"===Ft.type.substring(0,5))return function(_t,Ft,Lt){Ft||(Ft=[]);var Yt=Ft.map((Ft=>be(_t,Ft)));return new we(_t,Yt,Lt)}(_t,Ft.components,Ft.name);if(""===Ft.type)return new se(_t,Ft.name);throw U("invalid type",Qe,{arg:"type",value:Ft.type,fullType:Ft})}class _e{constructor(_t){!function(_t,Ft){if(!(_t instanceof Ft))throw U("missing new","MISSING_NEW",{name:Ft.name})}(this,_e),_t||(_t=oe),Vt(this,"coerceFunc",_t)}encode(_t,Ft){if(_t.length!==Ft.length)throw U("types/values length mismatch",Qe,{count:{types:_t.length,values:Ft.length},value:{types:_t,values:Ft}});const Lt=_t.map((_t=>"string"==typeof _t?Qt(_t):_t)).map((_t=>be(this.coerceFunc,_t)));return new we(this.coerceFunc,Lt,"_").encode(Ft)}decode(_t,Ft){const Lt=_t.map((_t=>"string"==typeof _t?Qt(_t):_t)).map((_t=>be(this.coerceFunc,_t)));return new we(this.coerceFunc,Lt,"_").decode(Ft,0).value}}const fn=new _e;var mn;!function(_t){_t.encodeParams=function(_t,Ft){return L(fn.encode(_t,Ft))},_t.decodeParams=function(_t,Ft){if(_t.length>0&&(!Ft||"0x"===Ft||"0X"===Ft))throw new Error("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return fn.decode(_t,D("0x"+Ft.replace(/0x/i,"")))}}(mn||(mn={}));class Te{constructor(_t){this.json=_t,this._inputTypes=_t.inputs||[],this._outputTypes=_t.outputs||[],this._constant=!!_t.constant,this._payable=!!_t.payable||"payable"===_t.stateMutability,this.needsToBeTransaction=this._payable||"constant"in _t&&!_t.constant||"nonpayable"===_t.stateMutability,this._name=G(_t)}extractDefaultBlock(_t){return _t.length>this._inputTypes.length&&!wt(_t[_t.length-1])&&Bt(_t.pop())||"latest"}validateArgs(_t){if(_t.some((_t=>void 0===_t)))throw new Error("Invalid call, some arguments are undefined");let Ft=_t.filter((function(_t){return!(!0===wt(_t)&&!1===bt(_t)&&!1===mt(_t)&&!(_t instanceof Uint8Array))}));if(Ft.length!==this._inputTypes.length)throw Lt=Ft.length,Yt=this._inputTypes.length,new Error(`Invalid number of arguments to Solidity function. given: ${Lt}, expected: ${Yt}`);var Lt,Yt}toPayload(_t){let Ft={to:void 0,data:void 0,value:void 0,from:void 0};_t.length>this._inputTypes.length&&wt(_t[_t.length-1])&&(Ft=_t.pop()),this.validateArgs(_t);const Lt=this.signature();let Yt=mn.encodeParams(this._inputTypes,_t);return 0==Yt.indexOf("0x")&&(Yt=Yt.substr(2)),Ft.data="0x"+Lt+Yt,Ft}signature(){return q(this._name).slice(0,8)}unpackOutput(_t){if(!_t)return;const Ft=_t.length>=2?_t.slice(2):_t;let Lt=mn.decodeParams(this._outputTypes,Ft);return 1===Lt.length?Lt[0]:Lt}async execute(_t,Ft,...Lt){if(!_t)throw new Error(`Cannot call function ${this.displayName()} because there is no requestManager`);if(this.needsToBeTransaction){const Yt=this.toPayload(Lt);if(Yt.to=Ft,Yt.value>0&&!this._payable)throw new Error("Cannot send value to non-payable function");if(!Yt.from)throw new Error('Missing "from" in transaction options');return await _t.eth_sendTransaction(Yt)}{const Yt=this.extractDefaultBlock(Lt),Kt=this.toPayload(Lt);Kt.to=Ft;const Zt=await _t.eth_call(Kt,Yt);return this.unpackOutput(Zt)}}estimateGas(_t,Ft,...Lt){if(!(_t instanceof zt))throw new Error("estimateGas needs to receive a RequestManager as first argument");let Yt=this.toPayload(Lt);return Yt.to=Ft,_t.eth_estimateGas(Yt)}displayName(){return J(this._name)}typeName(){return V(this._name)||"void"}attachToContract(_t){let Ft=this.displayName();const Lt=Object.assign(((...Ft)=>this.execute(_t.requestManager,_t.address,...Ft)),{estimateGas:this.estimateGas.bind(this,_t.requestManager,_t.address),toPayload:(..._t)=>this.toPayload(_t)});_t[Ft]||(_t[Ft]=Lt),_t[Ft][this.typeName()]=Lt}}function xe(_t){if(null==_t)return null;const Ft=String(_t).toString();return 0===Ft.indexOf("0x")?Ft:L(R(Ft))}class Ae{constructor(_t){this.requestManager=_t,this.isStarted=!1,this.isDisposed=!1,this.formatter=_t=>_t,this.filterId=Yt(),this.callbacks=[],this.stopSemaphore=Yt()}async watch(_t){if(this.isDisposed)throw new Error("The filter was disposed");_t&&(this.callbacks.push(_t),this.isStarted||await this.start())}async start(){if(this.isDisposed)throw new Error("The filter was disposed");if(!this.isStarted){this.isStarted=!0;try{const _t=await this.getNewFilter();if(!_t)throw new Error("Could not create a filter, response: "+JSON.stringify(_t));this.filterId.resolve(_t)}catch(_t){throw _t}this.stopSemaphore=Yt(),await this.poll()}}async stop(){if(!this.isStarted)return;if(this.isDisposed)return;this.isDisposed=!0;const _t=await this.filterId;if(this.isStarted=!1,this.stopSemaphore&&await this.stopSemaphore,!0!==await this.uninstall())throw new Error(`Couldn't stop the eth filter: ${_t}`)}async poll(){if(this.isStarted){if(this.callbacks.length){const _t=await this.getChanges();this.callbacks.forEach((Ft=>{this.formatter?_t.forEach((_t=>{Ft(this.formatter(_t))})):_t.forEach((_t=>Ft(_t)))}))}this.stopSemaphore.resolve(1),this.isStarted&&(this.stopSemaphore=Yt(),setTimeout((_t=()=>this.poll(),function(){_t().catch((_t=>console.error(_t)))}),500))}else this.stopSemaphore.resolve(1);var _t}}class ke extends Ae{constructor(_t,Ft,Lt=(_t=>_t)){super(_t),this.requestManager=_t,this.options=Ft,this.formatter=Lt,this.options=this.options||{},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(_t){return xe(_t)})),this.options={topics:this.options.topics,address:this.options.address?this.options.address:void 0,fromBlock:"number"==typeof this.options.fromBlock||"string"==typeof this.options.fromBlock?Ot(this.options.fromBlock)||void 0:"latest",toBlock:"number"==typeof this.options.toBlock||"string"==typeof this.options.toBlock?Ot(this.options.toBlock)||void 0:"latest"}}async getLogs(){this.isStarted||await this.start();const _t=await this.filterId;return this.requestManager.eth_getFilterLogs(_t)}async getNewFilter(){return this.requestManager.eth_newFilter(this.options)}async getChanges(){const _t=await this.filterId;return this.requestManager.eth_getFilterChanges(_t)}async uninstall(){const _t=await this.filterId;return this.requestManager.eth_uninstallFilter(_t)}}class Ee{constructor(_t,Ft,Lt){this.requestManager=_t,this.address=Lt,this._anonymous=!1,this._params=Ft.inputs||[],this._name=G(Ft),this._anonymous=Ft.anonymous||!1}types(_t){return this._params.filter((function(Ft){return Ft.indexed===_t}))}displayName(){return J(this._name)}typeName(){return V(this._name)||"void"}signature(){return q(this._name)}encode(_t={},Ft={}){let Lt={topics:[],address:this.address};void 0!==Ft.fromBlock&&(Lt.fromBlock=Ot(Ft.fromBlock)||void 0),void 0!==Ft.toBlock&&(Lt.toBlock=Ot(Ft.toBlock)||void 0),Lt.topics=Lt.topics||[],this._anonymous||Lt.topics.push("0x"+this.signature());let Yt=this._params.filter((function(_t){return!0===_t.indexed})).map((function(Ft){let Lt=_t[Ft.name];return null==Lt?null:bt(Lt)?Lt.map((function(_t){return"0x"+mn.encodeParams([Ft],[_t])})):"0x"+mn.encodeParams([Ft],[Lt])}));return Lt.topics=Lt.topics.concat(Yt),Lt}decode(_t){_t.data=_t.data||"",_t.topics=_t.topics||[];let Ft=(this._anonymous?_t.topics:_t.topics.slice(1)).map((function(_t){return _t.slice(2)})).join(""),Lt=mn.decodeParams(this.types(!0),Ft),Yt=_t.data.slice(2),Kt=mn.decodeParams(this.types(!1),Yt);const Zt=this._params.reduce((function(_t,Ft){return _t[Ft.name]=Ft.indexed?Lt.shift():Kt.shift(),_t}),{});return Object.assign(Object.assign({},jt(_t)),{event:this.displayName(),address:_t.address,args:Zt})}async execute(_t,Ft){let Lt=this.encode(_t,Ft),Yt=this.decode.bind(this);return new ke(this.requestManager,Lt,Yt)}attachToContract(_t){let Ft=this.execute.bind(this),Lt=this.displayName();_t.events[Lt]||(_t.events[Lt]=Ft),_t.events[Lt][this.typeName()]=this.execute.bind(this,_t)}}class Be{constructor(_t,Ft,Lt){this._requestManager=_t,this._json=Ft,this._address=Lt}encode(_t={}){let Ft={address:this._address};return void 0!==_t.fromBlock&&(Ft.fromBlock=Ot(_t.fromBlock)||void 0),void 0!==_t.toBlock&&(Ft.toBlock=Ot(_t.toBlock)||void 0),Ft}decode(_t){_t.data=_t.data||"";let Ft=bt(_t.topics)&&yt(_t.topics[0])?_t.topics[0].slice(2):"",Lt=this._json.filter((function(_t){return Ft===q(G(_t))}))[0];return Lt?new Ee(this._requestManager,Lt,this._address).decode(_t):jt(_t)}async execute(_t){let Ft=this.encode(_t),Lt=this.decode.bind(this);return new ke(this._requestManager,Ft,Lt)}getAllEventsFunction(){return this.execute.bind(this)}}class Oe{constructor(_t,Ft,Lt){var Yt;this.requestManager=_t,this.abi=Ft,this.address=Lt,this.events={},this.transactionHash=null,this.address=Lt,this.abi=Ft,(Yt=this).abi.filter((function(_t){return"function"===_t.type})).map((function(_t){return new Te(_t)})).forEach((function(_t){_t.attachToContract(Yt)})),this.allEvents=function(_t){let Ft=_t.abi.filter((function(_t){return"event"===_t.type})),Lt=new Be(_t.requestManager,Ft,_t.address);return Ft.map((function(Ft){return new Ee(_t.requestManager,Ft,_t.address)})).forEach((function(Ft){Ft.attachToContract(_t)})),Lt.getAllEventsFunction()}(this)}}_t.AbstractFilter=Ae,_t.BigNumber=Ye,_t.Contract=Oe,_t.ContractFactory=class{constructor(_t,Ft){this.requestManager=_t,this.abi=Ft}async deploy(..._t){let Ft,Lt=_t[_t.length-1];if(wt(Lt)&&!bt(Lt)&&(Ft=_t.pop()),!Ft)throw new Error("Missing options object");if(!Ft.data||"string"!=typeof Ft.data)throw new Error("Invalid options.data");if(K(Ft.value)>0&&!(this.abi.filter((function(Ft){return"constructor"===Ft.type&&Ft.inputs.length===_t.length}))[0]||{}).payable)throw new Error("Cannot send value to non-payable constructor");let Kt=(Zt=this.abi,le=_t,Zt.filter((function(_t){return"constructor"===_t.type&&_t.inputs&&_t.inputs.length===le.length})).map((function(_t){return _t.inputs||[]})).map((function(_t){return mn.encodeParams(_t,le)}))[0]||"");var Zt,le;Ft.data+=Kt,Ft.gas||(Ft.gas=await this.requestManager.eth_estimateGas(Ft));const ve=await this.requestManager.eth_sendTransaction(Ft);if(!ve)throw new Error("Error while sending contract creation transaction. A TxHash was not retrieved");const Ce=await async function(_t,Ft){const Lt=Yt();let Kt=0;const o=()=>{Kt++,Kt>50?Lt.reject(new Error("Contract transaction couldn't be found after 50 blocks")):_t.eth_getTransactionReceipt(Ft).then((_t=>{_t&&_t.blockHash?Lt.resolve(_t):setTimeout(o,1e3)}),(_t=>Lt.reject(_t)))};o();const Zt=await Lt,le=await _t.eth_getCode(Zt.contractAddress,"latest");if(le&&le.length>3)return Zt.contractAddress;throw Object.assign(new Error("The contract code couldn't be stored, please check your gas amount."),{response:le,receipt:Zt})}(this.requestManager,ve),Se=await this.at(Ce);return Se.transactionHash=ve,Se}async at(_t){if(!ht(_t))throw new TypeError(`Invalid address ${JSON.stringify(_t)}`);return new Oe(this.requestManager,this.abi,_t)}},_t.EthBlockFilter=class extends ke{constructor(_t){super(_t,{})}async getNewFilter(){return this.requestManager.eth_newBlockFilter()}},_t.EthFilter=ke,_t.EthPendingTransactionFilter=class extends ke{constructor(_t){super(_t,{})}async getNewFilter(){return this.requestManager.eth_newPendingTransactionFilter()}},_t.HTTPProvider=class{constructor(_t,Ft={}){this.host=_t,this.options=Ft,this.debug=!1,this.host=_t||"http://localhost:8545"}send(){throw new Error("Sync requests are deprecated")}sendAsync(_t,Ft){try{let Lt=null;if(Lt=_t instanceof Array?_t.map((_t=>e(_t))):e(_t),"undefined"==typeof fetch)throw new Error("There is no global fetch object. Please install and import isomorphic-fetch");const Yt={body:JSON.stringify(Lt),method:"POST",headers:Object.assign(Object.assign({},this.options.headers),{"Content-Type":"application/json"})};this.debug&&console.log("SEND >> "+Yt.body),fetch(this.host,Yt).then((async _t=>{if(_t.ok){const Lt=await _t.json();this.debug&&console.log("RECV << "+JSON.stringify(Lt)),Lt.error?Ft(Object.assign(new Error(Lt.error.json||Lt.error),Lt.error)):Ft(null,Lt)}else this.debug&&console.log("ERR << "+JSON.stringify(_t)),Ft(new Error("External error. response code: "+_t.status))}),(_t=>{this.debug&&console.log("ERR << "+JSON.stringify(_t)),Ft(_t)}))}catch(_t){this.debug&&console.log("ERR << "+JSON.stringify(_t)),Ft(_t)}}},_t.Method=qt,_t.Property=Ht,_t.RequestManager=zt,_t.SHHFilter=class extends Ae{constructor(_t,Ft){super(_t),this.requestManager=_t,this.options=Ft,this.options=this.options||{topics:[]},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(_t){return xe(_t)})),this.options={topics:this.options.topics,to:this.options.to}}async getMessages(){const _t=await this.filterId;return this.requestManager.shh_getMessages(_t)}async getNewFilter(){return this.requestManager.shh_newFilter(this.options)}async getChanges(){const _t=await this.filterId;return this.requestManager.shh_getFilterChanges(_t)}async uninstall(){const _t=await this.filterId;return this.requestManager.shh_uninstallFilter(_t)}},_t.SolidityEvent=Ee,_t.SolidityFunction=Te,_t.WebSocketProvider=class{constructor(_t,Ft={}){this.url=_t,this.options=Ft,this.isDisposed=!1,this.responseCallbacks=new Map,this.notificationCallbacks=new Set,this.debug=!1,this.lastChunk="",this.connect()}dispose(){this.isDisposed=!0;const _t=this.connection;this.timeout(new Error("Provider disposed.")),_t.then((_t=>_t.close()))}send(){throw new Error("Sync requests are deprecated")}sendAsync(_t,Ft){const Lt=[];let Kt;if(_t instanceof Array)Kt=Promise.all(_t.map((_t=>{const Ft=Yt();try{const Yt=e(_t);Lt.push(Yt),this.responseCallbacks.set(Yt.id,Ft)}catch(_t){Ft.reject(_t)}return Ft})));else{const Ft=Yt();try{const Yt=e(_t);Lt.push(Yt),this.responseCallbacks.set(Yt.id,Ft)}catch(_t){Ft.reject(_t)}Kt=Ft}Kt.then((_t=>Ft(null,_t)),(_t=>Ft(_t))),this.connection.then((_t=>{Lt.forEach((Ft=>{const Lt=JSON.stringify(Ft);this.debug&&console.log("SEND >> "+Lt),_t.send(Lt)}))}),(_t=>{Ft(_t)}))}parseResponse(_t){let Ft=[];return _t.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((_t=>{let Lt=_t;this.lastChunk&&(Lt=this.lastChunk+Lt);let Yt=null;try{Yt=JSON.parse(Lt)}catch(_t){return this.lastChunk=Lt,clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.timeout()}),15e3))}clearTimeout(this.lastChunkTimeout),this.lastChunk="",Yt&&Ft.push(Yt)})),Ft}processMessage(_t){if("id"in _t){const Ft=_t.id,Lt=this.responseCallbacks.get(Ft);if(!Lt)return void console.error("Error: Received a response for an unknown request",_t);this.responseCallbacks.delete(Ft),"error"in _t?Lt.reject(Object.assign(new Error(_t.error.message||_t.error),_t.error)):"result"in _t&&Lt.resolve(_t)}else this.notificationCallbacks.forEach((Ft=>Ft(null,_t)))}timeout(_t){this.connection&&this.connection.isPending||(this.connection=Yt());const Ft=_t||new Error("Connection timeout");this.responseCallbacks.forEach((_t=>_t.reject(Ft))),this.responseCallbacks.clear(),this.isDisposed||this.connect()}connect(){this.connection&&!this.connection.isPending&&this.connection.then((_t=>_t.close())),this.connection&&this.connection.isPending||(this.connection=Yt()),this.lastChunk="";let _t=this.options.WebSocketConstructor||("undefined"!=typeof WebSocket?WebSocket:void 0);if(!_t)throw new Error("Please provide a WebSocketConstructor");const Ft=new _t(this.url,this.options.protocol);Ft.onopen=()=>{this.connection.resolve(Ft)},Ft.onerror=_t=>{const Ft=new Error("Error in web socket");Ft.data=_t,this.timeout(Ft)},Ft.onclose=_t=>{this.timeout(new Error(`Connection closed (${_t&&_t.reason||"Unknown reason"})`))},Ft.onmessage=_t=>{let Ft="string"==typeof _t.data?_t.data:"";this.debug&&console.log("RECV << "+_t.data),this.parseResponse(Ft).forEach((_t=>{_t instanceof Array?_t.forEach((_t=>this.processMessage(_t))):this.processMessage(_t)}))}}},_t.bytesToHex=L,_t.bytesToUtf8String=P,_t.concatBytes=z,_t.default=zt,_t.extractDisplayName=J,_t.extractTypeName=V,_t.fromAscii=function(_t,Ft=0){let Lt="";for(let Ft=0;Ft<_t.length;Ft++){let Yt=_t.charCodeAt(Ft).toString(16);Lt+=Yt.length<2?"0"+Yt:Yt}return"0x"+Lt.padEnd(Ft,"0")},_t.fromDecimal=et,_t.fromTwosComplement=ut,_t.fromWei=function(_t,Ft){let Lt=ot(_t).dividedBy(rt(Ft));return mt(_t)?Lt:Lt.toString(10)},_t.getAddress=ct,_t.getValueOfUnit=rt,_t.hexToBytes=D,_t.isAddress=ht,_t.isArray=bt,_t.isBigNumber=mt,_t.isBloom=function(_t){return!!/^(0x)?[0-9a-f]{512}$/i.test(_t)&&!!/^(0x)?[0-9a-f]{512}$/i.test(_t)},_t.isBoolean=vt,_t.isChecksumAddress=pt,_t.isFunction=function(_t){return"function"==typeof _t},_t.isHex=function(_t){return"string"==typeof _t&&/^0x[0-9a-fA-F]+$/.test(_t)},_t.isJson=function(_t){try{return!!JSON.parse(_t)}catch(_t){return!1}},_t.isObject=wt,_t.isStrictAddress=lt,_t.isString=yt,_t.isTopic=function(_t){return!!/^(0x)?[0-9a-f]{64}$/i.test(_t)&&!!/^(0x)?[0-9a-f]{64}$/i.test(_t)},_t.isValidResponse=xt,_t.padLeft=$,_t.padRight=function(_t,Ft,Lt){return _t+new Array(Ft-_t.length+1).join(Lt||"0")},_t.sha3=q,_t.signedIsNegative=st,_t.stringToUtf8Bytes=R,_t.toAddress=gt,_t.toArray=dt,_t.toAscii=function(_t){let Ft="",Lt=0,Yt=_t.length;for("0x"===_t.substring(0,2)&&(Lt=2);Lt<Yt;Lt+=2){let Yt=parseInt(_t.substr(Lt,2),16);Ft+=String.fromCharCode(Yt)}return Ft},_t.toBatchPayload=function(_t){return _t.map((function(_t){return Tt(_t.method,_t.params)}))},_t.toBigNumber=ot,_t.toBoolean=tt,_t.toChecksumAddress=ft,_t.toData=X,_t.toDecimal=K,_t.toHex=nt,_t.toJsonRpcRequest=Tt,_t.toNullDecimal=Y,_t.toString=Z,_t.toStringData=Q,_t.toTwosComplement=at,_t.toWei=function(_t,Ft){let Lt=ot(_t).times(rt(Ft));return mt(_t)?Lt:Lt.toString(10)},_t.transformToFullName=G,Object.defineProperty(_t,"__esModule",{value:!0})}(Ft)}(0,Fe.exports);var Re,Pe,Le,Ue,He=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"_balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"_owner",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],qe=[{constant:!0,inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"_id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];_t.Type=void 0,(Re=_t.Type||(_t.Type={}))[Re.NFT=0]="NFT",Re[Re.HASWEARABLES=1]="HASWEARABLES",Re[Re.WEARABLESON=2]="WEARABLESON",Re[Re.ADDRESS=3]="ADDRESS",_t.Match=void 0,(Pe=_t.Match||(_t.Match={}))[Pe.ANY=0]="ANY",Pe[Pe.ALL=1]="ALL",_t.ChainType=void 0,(Le=_t.ChainType||(_t.ChainType={}))[Le.ETH=0]="ETH",Le[Le.POLYGON=1]="POLYGON",_t.NFTType=void 0,(Ue=_t.NFTType||(_t.NFTType={}))[Ue.ERC721=0]="ERC721",Ue[Ue.ERC1155=1]="ERC1155";var We=new BasicMaterial;We.texture=new Texture("https://lsnft.mypinata.cloud/ipfs/QmaqcRuouE6Tip9acZmjxMyBftEA5aHASRDjn8Bmad87Ld"),We.alphaTest=1;var Ge=new Material;Ge.albedoColor=new Color4(.2,.1,.9,.3);var Ve=function(_t){function e(Ft){var Lt=_t.call(this,Ft.name)||this;Lt.data=Ft,Lt.addComponent(new BoxShape),Lt.addComponent(new Transform(Ft.transform)),executeTask((function(){return d(Lt,void 0,void 0,(function(){var _t;return g(this,(function(Lt){switch(Lt.label){case 0:return(_t=Ft.debug)?[4,ve.isPreviewMode()]:[3,2];case 1:_t=Lt.sent(),Lt.label=2;case 2:return _t?(this.addComponent(Ge),this.getComponent(BoxShape).withCollisions=!1):this.addComponent(We),[2]}}))}))}));var Yt=Lt.getComponent(Transform).scale.clone();return Lt.addComponent(new Ie.TriggerComponent(new Ie.TriggerBoxShape(new Vector3(Yt.x+.7,Yt.y+.7,Yt.z+.7),new Vector3(0,0,0)),{enableDebug:!1,onCameraEnter:function(){Ft.deniedMessage&&Ne.displayAnnouncement(Ft.deniedMessage),Ft.onDenied&&Ft.onDenied()}})),Lt}return function(_t,Ft){if("function"!=typeof Ft&&null!==Ft)throw new TypeError("Class extends value "+String(Ft)+" is not a constructor or null");function n(){this.constructor=_t}f(_t,Ft),_t.prototype=null===Ft?Object.create(Ft):(n.prototype=Ft.prototype,new n)}(e,_t),e.prototype.updateDeniedAction=function(_t){this.data.onDenied=_t},e.prototype.updateDeniedMessage=function(_t){this.data.deniedMessage=_t},e}(Entity);function k(_t){return d(this,void 0,void 0,(function(){var Ft,Lt,Kt;return g(this,(function(Zt){switch(Zt.label){case 0:return[4,Yt.getUserData()];case 1:if(null==(Ft=Zt.sent())?void 0:Ft.hasConnectedWeb3){for(Lt=[],Kt=0;Kt<_t.allowedAddresses.length;Kt++)Lt.push(_t.allowedAddresses[Kt].toLowerCase());return-1!=Lt.indexOf(Ft.publicKey.toLowerCase())?[2,!0]:[2,!1]}return[2,!1]}}))}))}function E(Ft){return d(this,void 0,void 0,(function(){var Lt,Kt,Zt,le,ve,Ce,Ie,Ne,Fe,Re,Pe,Le,Ue,He,qe,We,Ge,Ve,$e,Xe,Ye;return g(this,(function(Je){switch(Je.label){case 0:return Lt=Ft.wearables?Ft.wearables:[],[4,Yt.getUserData()];case 1:return(null==(Kt=Je.sent())?void 0:Kt.hasConnectedWeb3)?Ft.type!=_t.Type.HASWEARABLES?[3,3]:[4,Se.avatar.getUserInventory(Kt.publicKey?Kt.publicKey:"")]:[3,5];case 2:if(Zt=Je.sent(),Ft.wearablesMatch!=_t.Match.ANY){for(Re=0,Pe=0;Pe<Lt.length;Pe++)try{for(We=void 0,Ce=m(Zt),Ie=Ce.next();!Ie.done;Ie=Ce.next())Ie.value===Lt[Pe]&&Re++}catch(_t){We={error:_t}}finally{try{Ie&&!Ie.done&&(Ge=Ce.return)&&Ge.call(Ce)}finally{if(We)throw We.error}}return Re>=Lt.length?[2,!0]:[2,!1]}for(Pe=0;Pe<Lt.length;Pe++)try{for(He=void 0,le=m(Zt),ve=le.next();!ve.done;ve=le.next())if(ve.value===Lt[Pe])return[2,!0]}catch(_t){He={error:_t}}finally{try{ve&&!ve.done&&(qe=le.return)&&qe.call(le)}finally{if(He)throw He.error}}return[3,4];case 3:if(log("Currently wearing: ",Kt.avatar.wearables),Ft.wearablesMatch!=_t.Match.ANY){for(Re=0,Pe=0;Pe<Lt.length;Pe++)try{for(Xe=void 0,Le=m(Kt.avatar.wearables),Ue=Le.next();!Ue.done;Ue=Le.next())Ue.value===Lt[Pe]&&Re++}catch(_t){Xe={error:_t}}finally{try{Ue&&!Ue.done&&(Ye=Le.return)&&Ye.call(Le)}finally{if(Xe)throw Xe.error}}return Re>=Lt.length?[2,!0]:[2,!1]}for(Pe=0;Pe<Lt.length;Pe++)try{for(Ve=void 0,Ne=m(Kt.avatar.wearables),Fe=Ne.next();!Fe.done;Fe=Ne.next())if(Fe.value===Lt[Pe])return[2,!0]}catch(_t){Ve={error:_t}}finally{try{Fe&&!Fe.done&&($e=Ne.return)&&$e.call(Ne)}finally{if(Ve)throw Ve.error}}Je.label=4;case 4:return[3,6];case 5:return[2,!1];case 6:return[2]}}))}))}function B(Ft){return d(this,void 0,void 0,(function(){var Yt,Kt,Zt,le,ve,Se,Ie;return g(this,(function(Ne){switch(Ne.label){case 0:return Ne.trys.push([0,11,,12]),log("checking L2 nft"),[4,Lt.getProvider()];case 1:return Yt=Ne.sent(),new Fe.exports.RequestManager(Yt),Kt=new Fe.exports.WebSocketProvider("wss://rpc-mainnet.matic.quiknode.pro"),[4,Ce.getUserAccount()];case 2:return Zt=Ne.sent(),le=new Fe.exports.RequestManager(Kt),[4,new Fe.exports.ContractFactory(le,Ft.nftType==_t.NFTType.ERC721?He:qe).at(Ft.contract?Ft.contract:"")];case 3:return ve=Ne.sent(),Se=void 0,Ft.tokenId?Ft.nftType!=_t.NFTType.ERC721?[3,5]:[4,ve.ownerOf(Ft.tokenId)]:[3,8];case 4:return(Se=Ne.sent()).toLowerCase()==Zt.toLowerCase()?[2,!0]:[2,!1];case 5:return[4,ve.balanceOf(Zt,Ft.tokenId)];case 6:case 9:return Se=Ne.sent(),log("L2 balance of is",Se),Se>0?[2,!0]:[2,!1];case 7:return[3,10];case 8:return[4,ve.balanceOf(Zt)];case 10:return[3,12];case 11:return Ie=Ne.sent(),log(Ie),[2,!1];case 12:return[2]}}))}))}function O(Ft){return d(this,void 0,void 0,(function(){var Yt,Kt,Zt,le,ve,Se;return g(this,(function(Ie){switch(Ie.label){case 0:log(Ft),Ie.label=1;case 1:return Ie.trys.push([1,12,,13]),[4,Ce.getUserAccount()];case 2:return Yt=Ie.sent(),[4,Lt.getProvider()];case 3:return Kt=Ie.sent(),Zt=new Fe.exports.RequestManager(Kt),[4,new Fe.exports.ContractFactory(Zt,Ft.nftType==_t.NFTType.ERC721?He:qe).at(Ft.contract?Ft.contract:"")];case 4:return le=Ie.sent(),ve=void 0,Ft.tokenId?Ft.nftType!=_t.NFTType.ERC721?[3,6]:[4,le.ownerOf(Ft.tokenId)]:[3,9];case 5:return(ve=Ie.sent()).toLowerCase()==Yt.toLowerCase()?[2,!0]:[2,!1];case 6:return[4,le.balanceOf(Yt,Ft.tokenId)];case 7:return ve=Ie.sent(),log("L1 balance of is",ve),ve>0?[2,!0]:[2,!1];case 8:return[3,11];case 9:return[4,le.balanceOf(Yt)];case 10:return ve=Ie.sent(),log("L1 balance of is",ve),ve>0?[2,!0]:[2,!1];case 11:return[3,13];case 12:return Se=Ie.sent(),log(Se),[2,!1];case 13:return[2]}}))}))}_t.createArea=function(Ft){var Lt=this,Yt=new Ve(Ft);return engine.addEntity(Yt),executeTask((function(){return d(Lt,void 0,void 0,(function(){var Lt;return g(this,(function(Kt){switch(Kt.label){case 0:switch(Kt.trys.push([0,12,,13]),Ft.type){case _t.Type.NFT:return[3,1];case _t.Type.ADDRESS:return[3,6];case _t.Type.HASWEARABLES:case _t.Type.WEARABLESON:return[3,9]}return[3,11];case 1:return log("checking nft"),Ft.chain!=_t.ChainType.ETH?[3,3]:[4,O(Ft)];case 2:return Lt=Kt.sent(),[3,5];case 3:return[4,B(Ft)];case 4:Lt=Kt.sent(),Kt.label=5;case 5:return Lt&&(log("we have nft holder"),engine.removeEntity(Yt)),[3,11];case 6:return log("checking Addresses"),Ft.allowedAddresses?[4,k(Ft)]:[3,8];case 7:Kt.sent()&&engine.removeEntity(Yt),Kt.label=8;case 8:return[3,11];case 9:return log("checking wearables"),[4,E(Ft)];case 10:return Kt.sent()&&engine.removeEntity(Yt),[3,11];case 11:return[3,13];case 12:return Kt.sent(),[3,13];case 13:return[2]}}))}))})),Yt},Object.defineProperty(_t,"__esModule",{value:!0})})),define("dcl-builder-hud",["exports","@decentraland/EnvironmentAPI"],(function(_t,Ft){function e(_t,Ft,Lt,Yt){return new(Lt||(Lt=Promise))((function(Kt,Zt){function a(_t){try{r(Yt.next(_t))}catch(_t){Zt(_t)}}function h(_t){try{r(Yt.throw(_t))}catch(_t){Zt(_t)}}function r(_t){var Ft;_t.done?Kt(_t.value):(Ft=_t.value,Ft instanceof Lt?Ft:new Lt((function(_t){_t(Ft)}))).then(a,h)}r((Yt=Yt.apply(_t,Ft||[])).next())}))}function n(_t,Ft){var Lt,Yt,Kt,Zt,le={label:0,sent:function(){if(1&Kt[0])throw Kt[1];return Kt[1]},trys:[],ops:[]};return Zt={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(Zt[Symbol.iterator]=function(){return this}),Zt;function h(Zt){return function(ve){return function(Zt){if(Lt)throw new TypeError("Generator is already executing.");for(;le;)try{if(Lt=1,Yt&&(Kt=2&Zt[0]?Yt.return:Zt[0]?Yt.throw||((Kt=Yt.return)&&Kt.call(Yt),0):Yt.next)&&!(Kt=Kt.call(Yt,Zt[1])).done)return Kt;switch(Yt=0,Kt&&(Zt=[2&Zt[0],Kt.value]),Zt[0]){case 0:case 1:Kt=Zt;break;case 4:return le.label++,{value:Zt[1],done:!1};case 5:le.label++,Yt=Zt[1],Zt=[0];continue;case 7:Zt=le.ops.pop(),le.trys.pop();continue;default:if(!((Kt=(Kt=le.trys).length>0&&Kt[Kt.length-1])||6!==Zt[0]&&2!==Zt[0])){le=0;continue}if(3===Zt[0]&&(!Kt||Zt[1]>Kt[0]&&Zt[1]<Kt[3])){le.label=Zt[1];break}if(6===Zt[0]&&le.label<Kt[1]){le.label=Kt[1],Kt=Zt;break}if(Kt&&le.label<Kt[2]){le.label=Kt[2],le.ops.push(Zt);break}Kt[2]&&le.ops.pop(),le.trys.pop();continue}Zt=Ft.call(_t,le)}catch(_t){Zt=[6,_t],Yt=0}finally{Lt=Kt=0}if(5&Zt[0])throw Zt[1];return{value:Zt[0]?Zt[1]:void 0,done:!0}}([Zt,ve])}}}var Lt=function(){function t(_t,Ft,Lt){this.direction=_t,this.mode=Ft,this.pos=Lt||0}return t=function(_t,Ft,Lt,Yt){var Kt,Zt=arguments.length,le=Zt<3?Ft:null===Yt?Yt=Object.getOwnPropertyDescriptor(Ft,Lt):Yt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(_t,Ft,Lt,Yt);else for(var ve=_t.length-1;ve>=0;ve--)(Kt=_t[ve])&&(le=(Zt<3?Kt(le):Zt>3?Kt(Ft,Lt,le):Kt(Ft,Lt))||le);return Zt>3&&le&&Object.defineProperty(Ft,Lt,le),le}([Component("moving")],t),t}(),Yt=engine.getComponentGroup(Lt),Kt=function(){function t(){this.positions=[]}return t.prototype.addCameraPosition=function(_t){this.positions.push(_t),log(this.positions)},t.prototype.update=function(){var _t,Ft;try{for(var Kt=function(_t){var Ft="function"==typeof Symbol&&Symbol.iterator,Lt=Ft&&_t[Ft],Yt=0;if(Lt)return Lt.call(_t);if(_t&&"number"==typeof _t.length)return{next:function(){return _t&&Yt>=_t.length&&(_t=void 0),{value:_t&&_t[Yt++],done:!_t}}};throw new TypeError(Ft?"Object is not iterable.":"Symbol.iterator is not defined.")}(Yt.entities),Zt=Kt.next();!Zt.done;Zt=Kt.next()){var le=Zt.value,ve=le.getComponent(Transform).position,Ce=le.getComponent(Lt).direction;switch(le.getComponent(Lt).mode){case"fixed":var Se=le.getComponent(Transform).position.clone(),Ie=le.getComponent(Lt).pos;Vector3.Distance(Se,this.positions[Ie])<.05?le.removeComponent(Lt):le.getComponent(Transform).position=Vector3.Lerp(Se,this.positions[Ie],.04);break;case"free":"up"==Ce&&ve.y<150&&(ve.y+=.1),"down"==Ce&&(ve.y>.2?ve.y-=.1:le.removeComponent(Lt)),"forward"==Ce&&(ve.z+=.1),"back"==Ce&&(ve.z>1?ve.z-=.1:le.removeComponent(Lt)),"right"==Ce&&(ve.x+=.1),"left"==Ce&&(ve.x>1?ve.x-=.1:le.removeComponent(Lt))}}}catch(Ft){_t={error:Ft}}finally{try{Zt&&!Zt.done&&(Ft=Kt.return)&&Ft.call(Kt)}finally{if(_t)throw _t.error}}},t}(),Zt=function(){function t(){var _t=this;this.isSetup=!1,this.entities=[],this.numEntities=0,this.selectedEntityIndex=-1,this.selectionPointerScale=1,this.selectionPointerElevation=1,this.newEntityScale=.1,this.modePOSITION=0,this.modeROTATION=1,this.modeSCALE=2,this.mode=this.modePOSITION,this.snap=0,this.snapPosScale=1,this.snapRot=90,this.uiMaximized=!1,this.engineEntities=[],this.showingColliders=!1,this.transparent=new Texture("https://lsnft.mypinata.cloud/ipfs/QmaqcRuouE6Tip9acZmjxMyBftEA5aHASRDjn8Bmad87Ld"),this.scaffoldScale=new Vector3(1.2,1,1.2),this.transparentMat=new BasicMaterial,this.transparentMat.alphaTest=1,this.transparentMat.texture=this.transparent,this.scaffolding=new Entity,this.scaffolding.addComponent(new Transform({position:new Vector3(1,.3,1),scale:Vector3.Zero()})),engine.addEntity(this.scaffolding);var Lt=new Entity;Lt.addComponent(new Transform({position:new Vector3(-.5,1,-.5),scale:Vector3.One()})),Lt.setParent(this.scaffolding);var Yt=new Entity;Yt.addComponent(new BoxShape),Yt.addComponent(new Transform({position:new Vector3(2,0,.1),scale:new Vector3(4,.1,.1)})),Yt.setParent(Lt),Yt.getComponent(BoxShape).withCollisions=!1,Yt.addComponent(new Material),Yt.getComponent(Material).albedoColor=Color4.Red();var Zt=new Entity;Zt.addComponent(new TextShape("X")),Zt.addComponent(new Transform({position:new Vector3(3,.5,.4)})),Zt.addComponent(new Billboard(!1,!0,!1)),Zt.setParent(Lt);var le=new Entity;le.addComponent(new BoxShape),le.addComponent(new Transform({position:new Vector3(.1,2,.1),scale:new Vector3(.1,4,.1)})),le.setParent(Lt),le.getComponent(BoxShape).withCollisions=!1,le.addComponent(new Material),le.getComponent(Material).albedoColor=Color4.Green();var Ce=new Entity;Ce.addComponent(new TextShape("Y")),Ce.addComponent(new Transform({position:new Vector3(.5,3,.5)})),Ce.addComponent(new Billboard(!1,!0,!1)),Ce.setParent(Lt);var Se=new Entity;Se.addComponent(new BoxShape),Se.addComponent(new Transform({position:new Vector3(.1,0,2),scale:new Vector3(.1,.1,4)})),Se.setParent(Lt),Se.addComponent(new Material),Se.getComponent(BoxShape).withCollisions=!1,Se.getComponent(Material).albedoColor=Color4.Blue();var Ie=new Entity;Ie.addComponent(new TextShape("Z")),Ie.addComponent(new Transform({position:new Vector3(.4,1,4)})),Ie.addComponent(new Billboard(!1,!0,!1)),Ie.setParent(Lt),this.scaffloor=new Entity,this.scaffloor.addComponent(new PlaneShape),this.scaffloor.addComponent(new Transform({position:new Vector3(0,0,0),rotation:Quaternion.Euler(90,0,0),scale:Vector3.One()})),this.scaffloor.addComponent(new Material),engine.addEntity(this.scaffloor),this.scaffloor.setParent(this.scaffolding),this.leftWall=new Entity,this.leftWall.addComponent(new PlaneShape),this.leftWall.addComponent(new Transform({position:new Vector3(0,-4.5,.6),rotation:Quaternion.Euler(0,180,0),scale:Vector3.Zero()})),this.leftWall.addComponent(this.transparentMat),this.leftWall.setParent(this.scaffolding),this.rightWall=new Entity,this.rightWall.addComponent(new PlaneShape),this.rightWall.addComponent(new Transform({position:new Vector3(0,-4.5,-.6),rotation:Quaternion.Euler(0,180,0),scale:Vector3.Zero()})),this.rightWall.addComponent(this.transparentMat),this.rightWall.setParent(this.scaffolding),this.frontWall=new Entity,this.frontWall.addComponent(new PlaneShape),this.frontWall.addComponent(new Transform({position:new Vector3(.6,-4.5,0),rotation:Quaternion.Euler(0,270,0),scale:Vector3.Zero()})),this.frontWall.addComponent(this.transparentMat),this.frontWall.setParent(this.scaffolding),this.backWall=new Entity,this.backWall.addComponent(new PlaneShape),this.backWall.addComponent(new Transform({position:new Vector3(-.6,-4.5,0),rotation:Quaternion.Euler(0,270,0),scale:Vector3.One()})),this.backWall.addComponent(this.transparentMat),this.backWall.setParent(this.scaffolding),this.selectionPointer=new Entity,this.selectionPointer.addComponent(new PlaneShape),this.selectionPointer.getComponent(PlaneShape).withCollisions=!1,this.selectionPointer.addComponent(new BasicMaterial),this.selectionPointer.getComponent(BasicMaterial).texture=new Texture("https://lsnft.mypinata.cloud/ipfs/QmWbKQtJjsLjgDFinoH6fvmbUoetLZd7LanChC1R4QkA2e"),this.selectionPointer.addComponent(new Transform({rotation:Quaternion.Euler(0,0,180),scale:Vector3.One()})),this.selectionPointer.addComponent(new Billboard(!1,!0,!1)),this.setupUI(),executeTask((function(){return e(_t,void 0,void 0,(function(){return n(this,(function(_t){switch(_t.label){case 0:return[4,Ft.isPreviewMode()];case 1:return _t.sent()?(log("in preview mode"),ve.uiMinimizedContainer.visible=!0):(log("not in preview mode"),ve.uiMinimizedContainer.visible=!1,ve.uiMaximizedContainer.visible=!1,engine.removeEntity(this.selectionPointer)),[2]}}))}))})),this.unsavedContainer=new UIContainerRect(this.uiMaximizedContainer),this.unsavedContainer.hAlign="center",this.unsavedContainer.vAlign="center",this.unsavedContainer.width=160,this.unsavedContainer.height=20,this.unsavedContainer.positionY=225,this.unsavedContainer.positionX=0,this.unsavedContainer.color=Color4.Red(),this.unsavedContainer.visible=!1;var Ne=new UIText(this.unsavedContainer);Ne.hAlign="center",Ne.vAlign="center",Ne.positionY=0,Ne.positionX=0,Ne.height=10,Ne.fontSize=12,Ne.hTextAlign="center",Ne.value="** Unsaved Changes **",this.movingSystem=new Kt,engine.addSystem(this.movingSystem)}return t.prototype.setDefaultParent=function(_t){this.defaultParent=_t},t.prototype.setupUI=function(){return e(this,void 0,void 0,(function(){var _t,Ft,Lt,Yt,Kt=this;return n(this,(function(Zt){return this.isSetup=!0,_t=new Texture("https://lsnft.mypinata.cloud/ipfs/QmYyDWc67svskJWxQrZNJxjwNsvsXyG9dvVzXvJtYtmgAr"),this.canvas=new UICanvas,this.canvas.hAlign="center",this.canvas.vAlign="bottom",this.uiMinimizedContainer=new UIContainerRect(this.canvas),this.uiMinimizedContainer.hAlign="right",this.uiMinimizedContainer.vAlign="bottom",this.uiMinimizedContainer.width=70,this.uiMinimizedContainer.height=80,this.uiMinimizedContainer.positionY=100,this.uiMinimizedContainer.positionX=0,this.uiMinimizedContainer.color=new Color4(0,0,0,0),this.uiMinimizedContainer.visible=!1,this.maximizeButton=new UIImage(this.uiMinimizedContainer,_t),this.maximizeButton.sourceLeft=826,this.maximizeButton.sourceTop=544,this.maximizeButton.sourceWidth=74,this.maximizeButton.sourceHeight=74,this.maximizeButton.hAlign="right",this.maximizeButton.vAlign="bottom",this.maximizeButton.positionX=-15,this.maximizeButton.positionY=30,this.maximizeButton.width=40,this.maximizeButton.height=40,this.maximizeButton.isPointerBlocker=!0,this.maximizeButton.onClick=new OnClick((function(){Kt.maximizeUI()})),this.uiMaximizedContainer=new UIContainerRect(this.canvas),this.uiMaximizedContainer.hAlign="right",this.uiMaximizedContainer.vAlign="bottom",this.uiMaximizedContainer.width=160,this.uiMaximizedContainer.height=430,this.uiMaximizedContainer.positionX=0,this.uiMaximizedContainer.positionY=100,this.uiMaximizedContainer.color=new Color4(0,0,0,.75),(Ft=new UIImage(this.uiMaximizedContainer,_t)).sourceLeft=826,Ft.sourceTop=184,Ft.sourceWidth=74,Ft.sourceHeight=74,Ft.hAlign="right",Ft.vAlign="top",Ft.positionX=-60,Ft.positionY=-10,Ft.width=40,Ft.height=40,Ft.isPointerBlocker=!0,Ft.onClick=new OnClick((function(){Kt.toggleLift.sourceLeft=503,Kt.toggleColliders(!0),engine.addSystem(new Ce(Ft))})),this.toggleLift=new UIImage(this.uiMaximizedContainer,_t),this.toggleLift.sourceLeft=584,this.toggleLift.sourceTop=544,this.toggleLift.sourceWidth=74,this.toggleLift.sourceHeight=74,this.toggleLift.hAlign="right",this.toggleLift.vAlign="top",this.toggleLift.positionX=-15,this.toggleLift.positionY=-10,this.toggleLift.width=40,this.toggleLift.height=40,this.toggleLift.isPointerBlocker=!0,this.toggleLift.onClick=new OnClick((function(){Kt.toggleColliders(!1),engine.addSystem(new Ce(Kt.toggleLift))})),this.toggleCamera=new UIImage(this.uiMaximizedContainer,_t),this.toggleCamera.sourceLeft=16,this.toggleCamera.sourceTop=94,this.toggleCamera.sourceWidth=74,this.toggleCamera.sourceHeight=74,this.toggleCamera.hAlign="right",this.toggleCamera.vAlign="top",this.toggleCamera.positionX=-105,this.toggleCamera.positionY=-10,this.toggleCamera.width=40,this.toggleCamera.height=40,this.toggleCamera.isPointerBlocker=!0,this.toggleCamera.onClick=new OnClick((function(){Kt.toggleCameraOptions(),engine.addSystem(new Ce(Kt.toggleCamera))})),this.toggleCamera.visible=!1,this.scaffoldB=new UIImage(this.uiMaximizedContainer,_t),this.scaffoldB.sourceLeft=340,this.scaffoldB.sourceTop=544,this.scaffoldB.sourceWidth=74,this.scaffoldB.sourceHeight=74,this.scaffoldB.hAlign="right",this.scaffoldB.vAlign="bottom",this.scaffoldB.positionX=-105,this.scaffoldB.positionY=335,this.scaffoldB.width=40,this.scaffoldB.height=40,this.scaffoldB.isPointerBlocker=!0,this.scaffoldB.onClick=new OnClick((function(){Kt.moveScaffold("q"),engine.addSystem(new Ce(Kt.scaffoldB))})),this.scaffoldU=new UIImage(this.uiMaximizedContainer,_t),this.scaffoldU.sourceLeft=178,this.scaffoldU.sourceTop=544,this.scaffoldU.sourceWidth=74,this.scaffoldU.sourceHeight=74,this.scaffoldU.hAlign="right",this.scaffoldU.vAlign="bottom",this.scaffoldU.positionX=-60,this.scaffoldU.positionY=335,this.scaffoldU.width=40,this.scaffoldU.height=40,this.scaffoldU.isPointerBlocker=!0,this.scaffoldU.onClick=new OnClick((function(){Kt.moveScaffold("w"),engine.addSystem(new Ce(Kt.scaffoldU))})),this.scaffoldF=new UIImage(this.uiMaximizedContainer,_t),this.scaffoldF.sourceLeft=422,this.scaffoldF.sourceTop=544,this.scaffoldF.sourceWidth=74,this.scaffoldF.sourceHeight=74,this.scaffoldF.hAlign="right",this.scaffoldF.vAlign="bottom",this.scaffoldF.positionX=-15,this.scaffoldF.positionY=335,this.scaffoldF.width=40,this.scaffoldF.height=40,this.scaffoldF.isPointerBlocker=!0,this.scaffoldF.onClick=new OnClick((function(){Kt.moveScaffold("e"),engine.addSystem(new Ce(Kt.scaffoldF))})),this.scaffoldL=new UIImage(this.uiMaximizedContainer,_t),this.scaffoldL.sourceLeft=16,this.scaffoldL.sourceTop=544,this.scaffoldL.sourceWidth=74,this.scaffoldL.sourceHeight=74,this.scaffoldL.hAlign="right",this.scaffoldL.vAlign="bottom",this.scaffoldL.positionX=-105,this.scaffoldL.positionY=290,this.scaffoldL.width=40,this.scaffoldL.height=40,this.scaffoldL.isPointerBlocker=!0,this.scaffoldL.onClick=new OnClick((function(){Kt.moveScaffold("a"),engine.addSystem(new Ce(Kt.scaffoldL))})),this.scaffoldD=new UIImage(this.uiMaximizedContainer,_t),this.scaffoldD.sourceLeft=259,this.scaffoldD.sourceTop=544,this.scaffoldD.sourceWidth=74,this.scaffoldD.sourceHeight=74,this.scaffoldD.hAlign="right",this.scaffoldD.vAlign="bottom",this.scaffoldD.positionX=-60,this.scaffoldD.positionY=290,this.scaffoldD.width=40,this.scaffoldD.height=40,this.scaffoldD.isPointerBlocker=!0,this.scaffoldD.onClick=new OnClick((function(){Kt.moveScaffold("s"),engine.addSystem(new Ce(Kt.scaffoldD))})),this.scaffoldR=new UIImage(this.uiMaximizedContainer,_t),this.scaffoldR.sourceLeft=97,this.scaffoldR.sourceTop=544,this.scaffoldR.sourceWidth=74,this.scaffoldR.sourceHeight=74,this.scaffoldR.hAlign="right",this.scaffoldR.vAlign="bottom",this.scaffoldR.positionX=-15,this.scaffoldR.positionY=290,this.scaffoldR.width=40,this.scaffoldR.height=40,this.scaffoldR.isPointerBlocker=!0,this.scaffoldR.onClick=new OnClick((function(){Kt.moveScaffold("d"),engine.addSystem(new Ce(Kt.scaffoldR))})),this.displayName=new UIText(this.uiMaximizedContainer),this.displayName.hAlign="center",this.displayName.vAlign="top",this.displayName.positionY=-180,this.displayName.positionX=0,this.displayName.height=10,this.displayName.fontSize=12,this.displayName.hTextAlign="center",(Lt=new UIText(this.uiMaximizedContainer)).hAlign="center",Lt.vAlign="top",Lt.positionY=-160,Lt.positionX=0,Lt.height=10,Lt.fontSize=12,Lt.hTextAlign="center",Lt.value="Entity Label",this.displayPRS=new UIText(this.uiMaximizedContainer),this.displayPRS.hAlign="center",this.displayPRS.vAlign="top",this.displayPRS.positionY=-200,this.displayPRS.positionX=0,this.displayPRS.height=10,this.displayPRS.fontSize=12,this.displayPRS.hTextAlign="center",this.displayPRS.value="(0,0,0)",this.scaffoldTitle=new UIText(this.uiMaximizedContainer),this.scaffoldTitle.hAlign="center",this.scaffoldTitle.vAlign="top",this.scaffoldTitle.positionY=-25,this.scaffoldTitle.positionX=-45,this.scaffoldTitle.height=10,this.scaffoldTitle.fontSize=8,this.scaffoldTitle.hTextAlign="center",this.scaffoldTitle.value="Scaffold",this.selectPreviousButton=new UIImage(this.uiMaximizedContainer,_t),this.selectPreviousButton.sourceLeft=16,this.selectPreviousButton.sourceTop=184,this.selectPreviousButton.sourceWidth=74,this.selectPreviousButton.sourceHeight=74,this.selectPreviousButton.hAlign="right",this.selectPreviousButton.vAlign="bottom",this.selectPreviousButton.positionX=-105,this.selectPreviousButton.positionY=30,this.selectPreviousButton.width=40,this.selectPreviousButton.height=40,this.selectPreviousButton.isPointerBlocker=!0,this.selectPreviousButton.onClick=new OnClick((function(){Kt.selectPrevious(),engine.addSystem(new Ce(Kt.selectPreviousButton))})),this.selectNextButton=new UIImage(this.uiMaximizedContainer,_t),this.selectNextButton.sourceLeft=97,this.selectNextButton.sourceTop=184,this.selectNextButton.sourceWidth=74,this.selectNextButton.sourceHeight=74,this.selectNextButton.hAlign="right",this.selectNextButton.vAlign="bottom",this.selectNextButton.positionX=-60,this.selectNextButton.positionY=30,this.selectNextButton.width=40,this.selectNextButton.height=40,this.selectNextButton.isPointerBlocker=!0,this.selectNextButton.onClick=new OnClick((function(){Kt.selectNext(),engine.addSystem(new Ce(Kt.selectNextButton))})),this.saveButton=new UIImage(this.uiMaximizedContainer,_t),this.saveButton.sourceLeft=745,this.saveButton.sourceTop=184,this.saveButton.sourceWidth=74,this.saveButton.sourceHeight=74,this.saveButton.hAlign="right",this.saveButton.vAlign="bottom",this.saveButton.positionX=-15,this.saveButton.positionY=75,this.saveButton.width=40,this.saveButton.height=40,this.saveButton.isPointerBlocker=!0,this.saveButton.onClick=new OnClick((function(){Kt.dump(),engine.addSystem(new Ce(Kt.saveButton))})),this.qButton=new UIImage(this.uiMaximizedContainer,_t),this.qButton.sourceLeft=340,this.qButton.sourceTop=544,this.qButton.sourceWidth=74,this.qButton.sourceHeight=74,this.qButton.hAlign="right",this.qButton.vAlign="bottom",this.qButton.positionX=-105,this.qButton.positionY=165,this.qButton.width=40,this.qButton.height=40,this.qButton.isPointerBlocker=!0,this.qButton.onClick=new OnClick((function(_t){Kt.adjustTransform("q"),engine.addSystem(new Ce(Kt.qButton))})),this.wButton=new UIImage(this.uiMaximizedContainer,_t),this.wButton.sourceLeft=178,this.wButton.sourceTop=544,this.wButton.sourceWidth=74,this.wButton.sourceHeight=74,this.wButton.hAlign="right",this.wButton.vAlign="bottom",this.wButton.positionX=-60,this.wButton.positionY=165,this.wButton.width=40,this.wButton.height=40,this.wButton.isPointerBlocker=!0,this.wButton.onClick=new OnClick((function(){Kt.adjustTransform("w"),engine.addSystem(new Ce(Kt.wButton))})),this.eButton=new UIImage(this.uiMaximizedContainer,_t),this.eButton.sourceLeft=422,this.eButton.sourceTop=544,this.eButton.sourceWidth=74,this.eButton.sourceHeight=74,this.eButton.hAlign="right",this.eButton.vAlign="bottom",this.eButton.positionX=-15,this.eButton.positionY=165,this.eButton.width=40,this.eButton.height=40,this.eButton.isPointerBlocker=!0,this.eButton.onClick=new OnClick((function(){Kt.adjustTransform("e"),engine.addSystem(new Ce(Kt.eButton))})),this.aButton=new UIImage(this.uiMaximizedContainer,_t),this.aButton.sourceLeft=16,this.aButton.sourceTop=544,this.aButton.sourceWidth=74,this.aButton.sourceHeight=74,this.aButton.hAlign="right",this.aButton.vAlign="bottom",this.aButton.positionX=-105,this.aButton.positionY=120,this.aButton.width=40,this.aButton.height=40,this.aButton.isPointerBlocker=!0,this.aButton.onClick=new OnClick((function(){Kt.adjustTransform("a"),engine.addSystem(new Ce(Kt.aButton))})),this.sButton=new UIImage(this.uiMaximizedContainer,_t),this.sButton.sourceLeft=259,this.sButton.sourceTop=544,this.sButton.sourceWidth=74,this.sButton.sourceHeight=74,this.sButton.hAlign="right",this.sButton.vAlign="bottom",this.sButton.positionX=-60,this.sButton.positionY=120,this.sButton.width=40,this.sButton.height=40,this.sButton.isPointerBlocker=!0,this.sButton.onClick=new OnClick((function(){Kt.adjustTransform("s"),engine.addSystem(new Ce(Kt.sButton))})),this.dButton=new UIImage(this.uiMaximizedContainer,_t),this.dButton.sourceLeft=97,this.dButton.sourceTop=544,this.dButton.sourceWidth=74,this.dButton.sourceHeight=74,this.dButton.hAlign="right",this.dButton.vAlign="bottom",this.dButton.positionX=-15,this.dButton.positionY=120,this.dButton.width=40,this.dButton.height=40,this.dButton.isPointerBlocker=!0,this.dButton.onClick=new OnClick((function(){Kt.adjustTransform("d"),engine.addSystem(new Ce(Kt.dButton))})),this.modeButton=new UIImage(this.uiMaximizedContainer,_t),this.modeButton.sourceLeft=259,this.modeButton.sourceTop=94,this.modeButton.sourceWidth=74,this.modeButton.sourceHeight=74,this.modeButton.hAlign="right",this.modeButton.vAlign="bottom",this.modeButton.positionX=-105,this.modeButton.positionY=75,this.modeButton.width=40,this.modeButton.height=40,this.modeButton.isPointerBlocker=!0,this.modeButton.onClick=new OnClick((function(){Kt.mode+=1,Kt.mode>Kt.modeSCALE&&(Kt.mode=Kt.modePOSITION),Kt.snap=0,Kt.setSnaps(),Kt.applyModeAndSnapLabels(),engine.addSystem(new Ce(Kt.modeButton))})),this.modeLabel=new UIText(this.modeButton),this.modeLabel.color=Color4.White(),this.modeLabel.hAlign="center",this.modeLabel.vAlign="bottom",this.modeLabel.paddingTop=0,this.modeLabel.paddingBottom=12,this.modeLabel.positionX=-30,this.modeLabel.paddingLeft=0,this.modeLabel.fontSize=12,this.modeLabel.fontWeight="bold",this.modeLabel.isPointerBlocker=!1,this.modeLabel.hTextAlign="center",this.snapButton=new UIImage(this.uiMaximizedContainer,_t),this.snapButton.sourceLeft=259,this.snapButton.sourceTop=93,this.snapButton.sourceWidth=74,this.snapButton.sourceHeight=74,this.snapButton.hAlign="right",this.snapButton.vAlign="bottom",this.snapButton.positionX=-60,this.snapButton.positionY=75,this.snapButton.width=40,this.snapButton.height=40,this.snapButton.isPointerBlocker=!0,this.snapButton.onClick=new OnClick((function(){Kt.snap+=1,Kt.snap>3&&(Kt.snap=0),Kt.setSnaps(),Kt.applyModeAndSnapLabels(),engine.addSystem(new Ce(Kt.snapButton))})),this.snapLabel=new UIText(this.snapButton),this.snapLabel.color=Color4.White(),this.snapLabel.hAlign="right",this.snapLabel.vAlign="bottom",this.snapLabel.positionX=-30,this.snapLabel.paddingTop=0,this.snapLabel.paddingBottom=12,this.snapLabel.paddingLeft=0,this.snapLabel.fontSize=12,this.snapLabel.fontWeight="bold",this.snapLabel.hTextAlign="center",this.snapLabel.isPointerBlocker=!1,this.applyModeAndSnapLabels(!0),this.minimizeButton=new UIImage(this.uiMaximizedContainer,_t),this.minimizeButton.sourceLeft=908,this.minimizeButton.sourceTop=544,this.minimizeButton.sourceWidth=74,this.minimizeButton.sourceHeight=74,this.minimizeButton.hAlign="right",this.minimizeButton.vAlign="bottom",this.minimizeButton.positionX=-15,this.minimizeButton.positionY=30,this.minimizeButton.width=40,this.minimizeButton.height=40,this.minimizeButton.isPointerBlocker=!0,this.minimizeButton.onClick=new OnClick((function(){Kt.minimizeUI(),engine.addSystem(new Ce(Kt.minimizeButton))})),(Yt=new UIText(this.uiMaximizedContainer)).value="Builder HUD",Yt.color=Color4.White(),Yt.hAlign="center",Yt.vAlign="bottom",Yt.paddingTop=0,Yt.paddingBottom=5,Yt.paddingLeft=15,Yt.fontSize=12,Yt.isPointerBlocker=!1,this.minimizeUI(),[2]}))}))},t.prototype.setSnaps=function(){switch(this.snap){case 0:this.snapPosScale=1,this.snapRot=90;break;case 1:this.snapPosScale=.1,this.snapRot=15;break;case 2:this.snapPosScale=.01,this.snapRot=5;break;case 3:this.snapPosScale=.001,this.snapRot=1}},t.prototype.applyModeAndSnapLabels=function(_t){switch(this.mode){case this.modePOSITION:this.modeLabel.value="P";break;case this.modeROTATION:this.modeLabel.value="R";break;case this.modeSCALE:this.modeLabel.value="S";break;default:this.modeLabel.value="ERR"}switch(!_t&&this.updateDisplayPRS(),this.snap){case 0:this.mode==this.modeROTATION?this.snapLabel.value="90":this.snapLabel.value="1";break;case 1:this.mode==this.modeROTATION?this.snapLabel.value="15":this.snapLabel.value="0.1";break;case 2:this.mode==this.modeROTATION?this.snapLabel.value="5":this.snapLabel.value="0.01";break;case 3:this.mode==this.modeROTATION?this.snapLabel.value="1":this.snapLabel.value="0.001";break;default:this.snapLabel.value="ERR"}},t.prototype.countDecimals=function(_t){return Math.floor(_t)===_t?0:_t.toString().split(".")[1].length||0},t.prototype.updateDisplayPRS=function(){switch(this.mode){case this.modePOSITION:this.displayPRS.value="POS: ("+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).position.x.toFixed(this.countDecimals(this.snapPosScale))+","+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).position.y.toFixed(this.countDecimals(this.snapPosScale))+","+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).position.z.toFixed(this.countDecimals(this.snapPosScale))+")";break;case this.modeROTATION:this.displayPRS.value="ROT: ("+Math.ceil(this.entities[this.selectedEntityIndex].entity.getComponent(Transform).rotation.eulerAngles.x)+","+Math.ceil(this.entities[this.selectedEntityIndex].entity.getComponent(Transform).rotation.eulerAngles.y)+","+Math.ceil(this.entities[this.selectedEntityIndex].entity.getComponent(Transform).rotation.eulerAngles.z)+")";break;case this.modeSCALE:this.displayPRS.value="SCL: ("+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).scale.x.toFixed(this.countDecimals(this.snapPosScale))+","+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).scale.y.toFixed(this.countDecimals(this.snapPosScale))+","+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).scale.z.toFixed(this.countDecimals(this.snapPosScale))+")"}},t.prototype.maximizeUI=function(){this.uiMinimizedContainer.visible=!1,this.uiMaximizedContainer.visible=!0,this.uiMaximized=!0,this.selectedEntityIndex>=0&&this.numEntities>0&&engine.addEntity(this.selectionPointer),this.mode=this.modePOSITION,this.applyModeAndSnapLabels(),this.displayName.value=this.entities[this.selectedEntityIndex].entity.name,this.updateDisplayPRS(),this.scaffolding.getComponent(Transform).scale=this.scaffoldScale},t.prototype.minimizeUI=function(){this.uiMaximizedContainer.visible=!1,this.uiMinimizedContainer.visible=!0,this.uiMaximized=!1,this.selectedEntityIndex>=0&&this.numEntities>0&&engine.removeEntity(this.selectionPointer),this.scaffolding.getComponent(Transform).scale=Vector3.Zero()},t.prototype.showUI=function(){this.canvas.visible=!0,this.canvas.isPointerBlocker=!0},t.prototype.hideUI=function(){this.canvas.visible=!1,this.canvas.isPointerBlocker=!1},t.prototype.updateSelectionPointerPOS=function(_t){var Ft=_t.position.clone();this.selectionPointer.getComponent(Transform).position=new Vector3(Ft.x,Ft.y+this.selectionPointerElevation,Ft.z)},t.prototype.selectEntity=function(_t){this.selectedEntityIndex=_t,null!=this.entities[_t].entity&&(this.displayName.value=this.entities[this.selectedEntityIndex].entity.name,this.updateSelectionPointerPOS(this.entities[_t].entity.getComponent(Transform)))},t.prototype.selectPrevious=function(){this.selectedEntityIndex>0&&this.selectEntity(this.selectedEntityIndex-1),this.updateDisplayPRS()},t.prototype.selectNext=function(){this.selectedEntityIndex<this.numEntities-1&&this.selectEntity(this.selectedEntityIndex+1),this.updateDisplayPRS()},t.prototype.discardSelected=function(){log("Discard Selected Entity isn't implemented at this time.")},t.prototype.toggleCameraOptions=function(){this.movingSystem.addCameraPosition(new Vector3(8,8,8)),log(this.movingSystem.positions),this.scaffolding.addComponent(new Lt("","fixed",0))},t.prototype.toggleColliders=function(_t){584==this.toggleLift.sourceLeft?(this.toggleLift.sourceLeft=503,this.scaffloor.getComponent(Material).albedoColor=new Color4(.97,.27,.34),this.backWall.getComponent(Transform).scale=this.scaffoldScale,this.backWall.getComponent(Transform).position=new Vector3(-.6,1.5,0),this.frontWall.getComponent(Transform).scale=this.scaffoldScale,this.frontWall.getComponent(Transform).position=new Vector3(.6,1.5,0),this.leftWall.getComponent(Transform).scale=this.scaffoldScale,this.leftWall.getComponent(Transform).position=new Vector3(0,1.5,.6),this.rightWall.getComponent(Transform).scale=this.scaffoldScale,this.rightWall.getComponent(Transform).position=new Vector3(0,1.5,-.6)):(this.toggleLift.sourceLeft=584,this.backWall.getComponent(Transform).scale=Vector3.Zero(),this.frontWall.getComponent(Transform).scale=Vector3.Zero(),this.leftWall.getComponent(Transform).scale=Vector3.Zero(),this.rightWall.getComponent(Transform).scale=Vector3.Zero(),this.rightWall.getComponent(Transform).position=new Vector3(0,-41.5,-.6),this.backWall.getComponent(Transform).position=new Vector3(0,-4.5,-.6),this.frontWall.getComponent(Transform).position=new Vector3(0,-4.5,-.6),this.leftWall.getComponent(Transform).position=new Vector3(0,-4.5,-.6),this.scaffloor.getComponent(Material).albedoColor=Color4.White()),_t&&(this.scaffolding.getComponent(Transform).position=new Vector3(1,.3,1))},t.prototype.moveScaffold=function(_t){var Ft=this.scaffolding.getComponent(Transform);if(this.mode===this.modePOSITION)switch(Ft.position,_t){case"a":this.scaffolding.hasComponent(Lt)?this.scaffolding.removeComponent(Lt):this.scaffolding.addComponent(new Lt("left","free"));break;case"s":this.scaffolding.hasComponent(Lt)?this.scaffolding.removeComponent(Lt):this.scaffolding.addComponent(new Lt("down","free"));break;case"d":this.scaffolding.hasComponent(Lt)?this.scaffolding.removeComponent(Lt):this.scaffolding.addComponent(new Lt("right","free"));break;case"q":this.scaffolding.hasComponent(Lt)?this.scaffolding.removeComponent(Lt):this.scaffolding.addComponent(new Lt("back","free"));break;case"w":this.scaffolding.hasComponent(Lt)?this.scaffolding.removeComponent(Lt):this.scaffolding.addComponent(new Lt("up","free"));break;case"e":this.scaffolding.hasComponent(Lt)?this.scaffolding.removeComponent(Lt):this.scaffolding.addComponent(new Lt("forward","free"))}},t.prototype.adjustTransform=function(_t){this.unsavedContainer.visible=!0;var Ft=this.entities[this.selectedEntityIndex].entity.getComponent(Transform);switch(this.mode){case this.modePOSITION:var Lt=Ft.position;switch(_t){case"a":Lt.x-=this.snapPosScale;break;case"s":Lt.y-=this.snapPosScale;break;case"d":Lt.x+=this.snapPosScale;break;case"q":Lt.z-=this.snapPosScale;break;case"w":Lt.y+=this.snapPosScale;break;case"e":Lt.z+=this.snapPosScale}this.updateSelectionPointerPOS(Ft);break;case this.modeROTATION:switch(_t){case"a":Ft.rotate(Vector3.Left(),-this.snapRot);break;case"s":Ft.rotate(Vector3.Up(),this.snapRot);break;case"d":Ft.rotate(Vector3.Left(),this.snapRot);break;case"q":Ft.rotate(Vector3.Forward(),-this.snapRot);break;case"w":Ft.rotate(Vector3.Up(),-this.snapRot);break;case"e":Ft.rotate(Vector3.Forward(),this.snapRot)}break;case this.modeSCALE:var Yt=Ft.scale;switch(_t){case"a":Yt.x-=this.snapPosScale;break;case"s":Yt.y-=this.snapPosScale;break;case"d":Yt.x+=this.snapPosScale;break;case"q":Yt.z-=this.snapPosScale;break;case"w":Yt.y+=this.snapPosScale;break;case"e":Yt.z+=this.snapPosScale}}this.updateDisplayPRS()},t.prototype.attachToEntity=function(_t,Ft){return void 0===Ft&&(Ft=!0),e(this,void 0,void 0,(function(){return n(this,(function(Lt){return null==_t?log("BuilderHUD attachToEntity called with a null entity"):ve.isSetup&&(this.entities[this.numEntities]={entity:_t,transform:_t.getComponent(Transform),preexisting:Ft},Ft?(this.selectedEntityIndex=-1)&&this.selectEntity(0):this.selectEntity(this.numEntities),this.numEntities++),[2]}))}))},t.prototype.newEntity=function(){var _t=Camera.instance,Ft=_t.rotation.eulerAngles.y;Ft>=180?Ft-=180:Ft+=180;var Lt=0,Yt=0,Kt=0,Zt=1,le=1,ve=1;if(null!=this.defaultParent){var Ce=this.defaultParent.getComponent(Transform);Lt=Ce.position.x,Yt=Ce.position.y,Kt=Ce.position.z,Ce.rotation.eulerAngles.x,Ce.rotation.eulerAngles.y,Ce.rotation.eulerAngles.z,Zt=Ce.scale.x,le=Ce.scale.y,ve=Ce.scale.z}var Se=new Transform({position:new Vector3((_t.position.x-Lt)/Zt,(0-Yt)/le,(_t.position.z-Kt)/ve),rotation:Quaternion.Euler(0,0,0),scale:new Vector3(this.newEntityScale/Zt,this.newEntityScale/le,this.newEntityScale/ve)});Se.rotate(Vector3.Up(),-Ft);var Ie=new Entity;if(Ie.name="Entity"+this.numEntities,Ie.addComponent(Se),null==this.newEntityShape)try{this.newEntityShape=new GLTFShape("models/xyz/xyzLeftHand.glb")}catch(Ie){this.newEntityShape=new BoxShape,(new Material).albedoColor=Color3.Green()}Ie.addComponent(this.newEntityShape),null!=this.defaultParent&&Ie.setParent(this.defaultParent),engine.addEntity(Ie),this.attachToEntity(Ie,!1)},t.prototype.round=function(_t){return Math.floor(1e3*(_t+49e-5))/1e3},t.prototype.dump=function(){for(var _t in this.unsavedContainer.visible=!1,log("--------------- BuilderHUD entities -------------"),this.entities){var Ft=null==this.entities[_t].entity.name?"Existing":""+this.entities[_t].entity.name,Lt=this.entities[_t].transform,Yt=Lt.position,Kt=Lt.rotation.eulerAngles,Zt=Lt.scale,le="position: new Vector3("+this.round(Yt.x)+","+this.round(Yt.y)+","+this.round(Yt.z)+"), rotation: Quaternion.Euler("+this.round(Kt.x)+","+this.round(Kt.y)+","+this.round(Kt.z)+"), scale: new Vector3("+this.round(Zt.x)+","+this.round(Zt.y)+","+this.round(Zt.z)+")";log(Ft+" {"+le+"}")}log("-------------------------------------------------")},t.prototype.destroy=function(){for(var _t in this.dump(),this.entities)this.entities[_t].preexisting||(this.entities[_t].entity.setParent(null),engine.removeEntity(this.entities[_t].entity));this.entities=[],this.numEntities=0,this.refreshDisplay()},t.prototype.refreshDisplay=function(){},t}(),le=function(){function t(_t){this.timer=4,this.entities=[],this.hud=_t}return t.prototype.pendingEntity=function(_t){this.entities.push(_t)},t.prototype.update=function(_t){if(this.timer>0)this.timer-=_t;else{this.timer=4;for(var Ft=0;Ft<this.entities.length;Ft++)log("here"),this.hud.attachToEntity(this.entities[Ft],!0);this.entities=[]}},t}(),ve=new Zt;ve.pendingEntityAdd=new le(ve),engine.addSystem(ve.pendingEntityAdd);var Ce=function(){function t(_t){this.timer=.1,this.uiIMage=_t}return t.prototype.update=function(_t){this.timer>0?(this.uiIMage.opacity-=.3,this.timer-=_t):(this.timer=.1,this.uiIMage.opacity=1,engine.removeSystem(this))},t}();_t.hud=ve,Object.defineProperty(_t,"__esModule",{value:!0})})),function(_t,Ft){"object"==typeof exports&&"undefined"!=typeof module?Ft(exports):"function"==typeof define&&define.amd?define("eth-connect",["exports"],Ft):Ft((_t="undefined"!=typeof globalThis?globalThis:_t||self).ethconnect={})}(this,(function(_t){function e(_t){if(_t.jsonrpc="2.0",!_t.id||"number"!=typeof _t.id||Math.floor(_t.id)!==_t.id)throw new Error(`Invalid RPC message(invalid id) message: ${JSON.stringify(_t)}`);if(!_t.method||"string"!=typeof _t.method||0===_t.method.trim().length)throw new Error(`Invalid RPC message(invalid method) message: ${JSON.stringify(_t)}`);if(!_t.params||"object"!=typeof _t.params)throw new Error(`Invalid RPC message(invalid params) message: ${JSON.stringify(_t)}`);return _t}function n(_t,Ft){return _t(Ft={exports:{}},Ft.exports),Ft.exports}var Ft,Lt=n((function(_t,Ft){function n(){let _t,Ft;const Lt=new Promise(((Yt,Kt)=>{_t=_t=>{Yt(_t),Lt.isPending=!1},Ft=_t=>{Kt(_t),Lt.isPending=!1}})).catch((_t=>Promise.reject(_t)));return Lt.resolve=_t,Lt.reject=Ft,"finally"in Lt||(Lt.finally=_t=>{Lt.then(_t),Lt.catch(_t)}),Lt.isPending=!0,Lt}Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.future=n,Ft.default=n}));(Ft=Lt)&&Ft.__esModule&&Object.prototype.hasOwnProperty.call(Ft,"default")&&Ft.default;var Yt=Lt.future,Kt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}var Zt=a,le=c;function h(_t){if(Zt===setTimeout)return setTimeout(_t,0);if((Zt===a||!Zt)&&setTimeout)return Zt=setTimeout,setTimeout(_t,0);try{return Zt(_t,0)}catch(Ft){try{return Zt.call(null,_t,0)}catch(Ft){return Zt.call(this,_t,0)}}}"function"==typeof Kt.setTimeout&&(Zt=setTimeout),"function"==typeof Kt.clearTimeout&&(le=clearTimeout);var ve,Ce=[],Se=!1,Ie=-1;function m(){Se&&ve&&(Se=!1,ve.length?Ce=ve.concat(Ce):Ie=-1,Ce.length&&y())}function y(){if(!Se){var _t=h(m);Se=!0;for(var Ft=Ce.length;Ft;){for(ve=Ce,Ce=[];++Ie<Ft;)ve&&ve[Ie].run();Ie=-1,Ft=Ce.length}ve=null,Se=!1,function(_t){if(le===clearTimeout)return clearTimeout(_t);if((le===c||!le)&&clearTimeout)return le=clearTimeout,clearTimeout(_t);try{le(_t)}catch(Ft){try{return le.call(null,_t)}catch(Ft){return le.call(this,_t)}}}(_t)}}function w(_t,Ft){this.fun=_t,this.array=Ft}function v(){}w.prototype.run=function(){this.fun.apply(null,this.array)};var Ne=v,Fe=v,Re=v,Pe=v,Le=v,Ue=v,He=v,qe=Kt.performance||{},We=qe.now||qe.mozNow||qe.msNow||qe.oNow||qe.webkitNow||function(){return(new Date).getTime()},Ge=new Date,Ve={nextTick:function(_t){var Ft=new Array(arguments.length-1);if(arguments.length>1)for(var Lt=1;Lt<arguments.length;Lt++)Ft[Lt-1]=arguments[Lt];Ce.push(new w(_t,Ft)),1!==Ce.length||Se||h(y)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Ne,addListener:Fe,once:Re,off:Pe,removeListener:Le,removeAllListeners:Ue,emit:He,binding:function(_t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(_t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(_t){var Ft=.001*We.call(qe),Lt=Math.floor(Ft),Yt=Math.floor(Ft%1*1e9);return _t&&(Lt-=_t[0],(Yt-=_t[1])<0&&(Lt--,Yt+=1e9)),[Lt,Yt]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Ge)/1e3}},$e=n((function(_t){!function(){var Ft="input is invalid type",Lt="object"==typeof window,Yt=Lt?window:{};Yt.JS_SHA3_NO_WINDOW&&(Lt=!1);var Zt=!Lt&&"object"==typeof self;!Yt.JS_SHA3_NO_NODE_JS&&"object"==typeof Ve&&Ve.versions&&Ve.versions.node?Yt=Kt:Zt&&(Yt=self);var le=!Yt.JS_SHA3_NO_COMMON_JS&&_t.exports,ve=!Yt.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,Ce="0123456789abcdef".split(""),Se=[4,1024,262144,67108864],Ie=[0,8,16,24],Ne=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],Fe=[224,256,384,512],Re=[128,256],Pe=["hex","buffer","arrayBuffer","array","digest"],Le={128:168,256:136};!Yt.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(_t){return"[object Array]"===Object.prototype.toString.call(_t)}),!ve||!Yt.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(_t){return"object"==typeof _t&&_t.buffer&&_t.buffer.constructor===ArrayBuffer});for(var m=function(_t,Ft,Lt){return function(Yt){return new C(_t,Ft,_t).update(Yt)[Lt]()}},y=function(_t,Ft,Lt){return function(Yt,Kt){return new C(_t,Ft,Kt).update(Yt)[Lt]()}},w=function(_t,Ft,Lt){return function(Ft,Yt,Kt,Zt){return He["cshake"+_t].update(Ft,Yt,Kt,Zt)[Lt]()}},v=function(_t,Ft,Lt){return function(Ft,Yt,Kt,Zt){return He["kmac"+_t].update(Ft,Yt,Kt,Zt)[Lt]()}},b=function(_t,Ft,Lt,Yt){for(var Kt=0;Kt<Pe.length;++Kt){var Zt=Pe[Kt];_t[Zt]=Ft(Lt,Yt,Zt)}return _t},_=function(_t,Ft){var Lt=m(_t,Ft,"hex");return Lt.create=function(){return new C(_t,Ft,_t)},Lt.update=function(_t){return Lt.create().update(_t)},b(Lt,m,_t,Ft)},Ue=[{name:"keccak",padding:[1,256,65536,16777216],bits:Fe,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:Fe,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:Re,createMethod:function(_t,Ft){var Lt=y(_t,Ft,"hex");return Lt.create=function(Lt){return new C(_t,Ft,Lt)},Lt.update=function(_t,Ft){return Lt.create(Ft).update(_t)},b(Lt,y,_t,Ft)}},{name:"cshake",padding:Se,bits:Re,createMethod:function(_t,Ft){var Lt=Le[_t],Yt=w(_t,0,"hex");return Yt.create=function(Yt,Kt,Zt){return Kt||Zt?new C(_t,Ft,Yt).bytepad([Kt,Zt],Lt):He["shake"+_t].create(Yt)},Yt.update=function(_t,Ft,Lt,Kt){return Yt.create(Ft,Lt,Kt).update(_t)},b(Yt,w,_t,Ft)}},{name:"kmac",padding:Se,bits:Re,createMethod:function(_t,Ft){var Lt=Le[_t],Yt=v(_t,0,"hex");return Yt.create=function(Yt,Kt,Zt){return new I(_t,Ft,Kt).bytepad(["KMAC",Zt],Lt).bytepad([Yt],Lt)},Yt.update=function(_t,Ft,Lt,Kt){return Yt.create(_t,Lt,Kt).update(Ft)},b(Yt,v,_t,Ft)}}],He={},qe=[],We=0;We<Ue.length;++We)for(var Ge=Ue[We],$e=Ge.bits,Xe=0;Xe<$e.length;++Xe){var Ye=Ge.name+"_"+$e[Xe];if(qe.push(Ye),He[Ye]=Ge.createMethod($e[Xe],Ge.padding),"sha3"!==Ge.name){var Je=Ge.name+$e[Xe];qe.push(Je),He[Je]=He[Ye]}}function C(_t,Ft,Lt){this.blocks=[],this.s=[],this.padding=Ft,this.outputBits=Lt,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(_t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=Lt>>5,this.extraBytes=(31&Lt)>>3;for(var Yt=0;Yt<50;++Yt)this.s[Yt]=0}function I(_t,Ft,Lt){C.call(this,_t,Ft,Lt)}C.prototype.update=function(_t){if(this.finalized)throw new Error("finalize already called");var Lt,Yt=typeof _t;if("string"!==Yt){if("object"!==Yt)throw new Error(Ft);if(null===_t)throw new Error(Ft);if(ve&&_t.constructor===ArrayBuffer)_t=new Uint8Array(_t);else if(!(Array.isArray(_t)||ve&&ArrayBuffer.isView(_t)))throw new Error(Ft);Lt=!0}for(var Kt,Zt,le=this.blocks,Ce=this.byteCount,Se=_t.length,Ne=this.blockCount,Fe=0,Re=this.s;Fe<Se;){if(this.reset)for(this.reset=!1,le[0]=this.block,Kt=1;Kt<Ne+1;++Kt)le[Kt]=0;if(Lt)for(Kt=this.start;Fe<Se&&Kt<Ce;++Fe)le[Kt>>2]|=_t[Fe]<<Ie[3&Kt++];else for(Kt=this.start;Fe<Se&&Kt<Ce;++Fe)(Zt=_t.charCodeAt(Fe))<128?le[Kt>>2]|=Zt<<Ie[3&Kt++]:Zt<2048?(le[Kt>>2]|=(192|Zt>>6)<<Ie[3&Kt++],le[Kt>>2]|=(128|63&Zt)<<Ie[3&Kt++]):Zt<55296||Zt>=57344?(le[Kt>>2]|=(224|Zt>>12)<<Ie[3&Kt++],le[Kt>>2]|=(128|Zt>>6&63)<<Ie[3&Kt++],le[Kt>>2]|=(128|63&Zt)<<Ie[3&Kt++]):(Zt=65536+((1023&Zt)<<10|1023&_t.charCodeAt(++Fe)),le[Kt>>2]|=(240|Zt>>18)<<Ie[3&Kt++],le[Kt>>2]|=(128|Zt>>12&63)<<Ie[3&Kt++],le[Kt>>2]|=(128|Zt>>6&63)<<Ie[3&Kt++],le[Kt>>2]|=(128|63&Zt)<<Ie[3&Kt++]);if(this.lastByteIndex=Kt,Kt>=Ce){for(this.start=Kt-Ce,this.block=le[Ne],Kt=0;Kt<Ne;++Kt)Re[Kt]^=le[Kt];P(Re),this.reset=!0}else this.start=Kt}return this},C.prototype.encode=function(_t,Ft){var Lt=255&_t,Yt=1,Kt=[Lt];for(Lt=255&(_t>>=8);Lt>0;)Kt.unshift(Lt),Lt=255&(_t>>=8),++Yt;return Ft?Kt.push(Yt):Kt.unshift(Yt),this.update(Kt),Kt.length},C.prototype.encodeString=function(_t){var Lt,Yt=typeof _t;if("string"!==Yt){if("object"!==Yt)throw new Error(Ft);if(null===_t)throw new Error(Ft);if(ve&&_t.constructor===ArrayBuffer)_t=new Uint8Array(_t);else if(!(Array.isArray(_t)||ve&&ArrayBuffer.isView(_t)))throw new Error(Ft);Lt=!0}var Kt=0,Zt=_t.length;if(Lt)Kt=Zt;else for(var le=0;le<_t.length;++le){var Ce=_t.charCodeAt(le);Ce<128?Kt+=1:Ce<2048?Kt+=2:Ce<55296||Ce>=57344?Kt+=3:(Ce=65536+((1023&Ce)<<10|1023&_t.charCodeAt(++le)),Kt+=4)}return Kt+=this.encode(8*Kt),this.update(_t),Kt},C.prototype.bytepad=function(_t,Ft){for(var Lt=this.encode(Ft),Yt=0;Yt<_t.length;++Yt)Lt+=this.encodeString(_t[Yt]);var Kt=Ft-Lt%Ft,Zt=[];return Zt.length=Kt,this.update(Zt),this},C.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var _t=this.blocks,Ft=this.lastByteIndex,Lt=this.blockCount,Yt=this.s;if(_t[Ft>>2]|=this.padding[3&Ft],this.lastByteIndex===this.byteCount)for(_t[0]=_t[Lt],Ft=1;Ft<Lt+1;++Ft)_t[Ft]=0;for(_t[Lt-1]|=2147483648,Ft=0;Ft<Lt;++Ft)Yt[Ft]^=_t[Ft];P(Yt)}},C.prototype.toString=C.prototype.hex=function(){this.finalize();for(var _t,Ft=this.blockCount,Lt=this.s,Yt=this.outputBlocks,Kt=this.extraBytes,Zt=0,le=0,ve="";le<Yt;){for(Zt=0;Zt<Ft&&le<Yt;++Zt,++le)_t=Lt[Zt],ve+=Ce[_t>>4&15]+Ce[15&_t]+Ce[_t>>12&15]+Ce[_t>>8&15]+Ce[_t>>20&15]+Ce[_t>>16&15]+Ce[_t>>28&15]+Ce[_t>>24&15];le%Ft==0&&(P(Lt),Zt=0)}return Kt&&(_t=Lt[Zt],ve+=Ce[_t>>4&15]+Ce[15&_t],Kt>1&&(ve+=Ce[_t>>12&15]+Ce[_t>>8&15]),Kt>2&&(ve+=Ce[_t>>20&15]+Ce[_t>>16&15])),ve},C.prototype.arrayBuffer=function(){this.finalize();var _t,Ft=this.blockCount,Lt=this.s,Yt=this.outputBlocks,Kt=this.extraBytes,Zt=0,le=0,ve=this.outputBits>>3;_t=Kt?new ArrayBuffer(Yt+1<<2):new ArrayBuffer(ve);for(var Ce=new Uint32Array(_t);le<Yt;){for(Zt=0;Zt<Ft&&le<Yt;++Zt,++le)Ce[le]=Lt[Zt];le%Ft==0&&P(Lt)}return Kt&&(Ce[Zt]=Lt[Zt],_t=_t.slice(0,ve)),_t},C.prototype.buffer=C.prototype.arrayBuffer,C.prototype.digest=C.prototype.array=function(){this.finalize();for(var _t,Ft,Lt=this.blockCount,Yt=this.s,Kt=this.outputBlocks,Zt=this.extraBytes,le=0,ve=0,Ce=[];ve<Kt;){for(le=0;le<Lt&&ve<Kt;++le,++ve)_t=ve<<2,Ft=Yt[le],Ce[_t]=255&Ft,Ce[_t+1]=Ft>>8&255,Ce[_t+2]=Ft>>16&255,Ce[_t+3]=Ft>>24&255;ve%Lt==0&&P(Yt)}return Zt&&(_t=ve<<2,Ft=Yt[le],Ce[_t]=255&Ft,Zt>1&&(Ce[_t+1]=Ft>>8&255),Zt>2&&(Ce[_t+2]=Ft>>16&255)),Ce},I.prototype=new C,I.prototype.finalize=function(){return this.encode(this.outputBits,!0),C.prototype.finalize.call(this)};var P=function(_t){var Ft,Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Fe,Re,Pe,Le,Ue,He,qe,We,Ge,Ve,$e,Xe,Ye,Je,Qe,Ze,tn,nn,rn,on,sn,an,cn,un,ln,dn,hn,pn,fn,mn,yn,gn,bn,vn,wn,Tn,xn,An,Cn,_n,Sn,En,kn,In,Nn,Bn,Fn,On,Rn,Pn,Mn,Ln,zn;for(Yt=0;Yt<48;Yt+=2)Kt=_t[0]^_t[10]^_t[20]^_t[30]^_t[40],Zt=_t[1]^_t[11]^_t[21]^_t[31]^_t[41],le=_t[2]^_t[12]^_t[22]^_t[32]^_t[42],ve=_t[3]^_t[13]^_t[23]^_t[33]^_t[43],Ce=_t[4]^_t[14]^_t[24]^_t[34]^_t[44],Se=_t[5]^_t[15]^_t[25]^_t[35]^_t[45],Ie=_t[6]^_t[16]^_t[26]^_t[36]^_t[46],Fe=_t[7]^_t[17]^_t[27]^_t[37]^_t[47],Ft=(Re=_t[8]^_t[18]^_t[28]^_t[38]^_t[48])^(le<<1|ve>>>31),Lt=(Pe=_t[9]^_t[19]^_t[29]^_t[39]^_t[49])^(ve<<1|le>>>31),_t[0]^=Ft,_t[1]^=Lt,_t[10]^=Ft,_t[11]^=Lt,_t[20]^=Ft,_t[21]^=Lt,_t[30]^=Ft,_t[31]^=Lt,_t[40]^=Ft,_t[41]^=Lt,Ft=Kt^(Ce<<1|Se>>>31),Lt=Zt^(Se<<1|Ce>>>31),_t[2]^=Ft,_t[3]^=Lt,_t[12]^=Ft,_t[13]^=Lt,_t[22]^=Ft,_t[23]^=Lt,_t[32]^=Ft,_t[33]^=Lt,_t[42]^=Ft,_t[43]^=Lt,Ft=le^(Ie<<1|Fe>>>31),Lt=ve^(Fe<<1|Ie>>>31),_t[4]^=Ft,_t[5]^=Lt,_t[14]^=Ft,_t[15]^=Lt,_t[24]^=Ft,_t[25]^=Lt,_t[34]^=Ft,_t[35]^=Lt,_t[44]^=Ft,_t[45]^=Lt,Ft=Ce^(Re<<1|Pe>>>31),Lt=Se^(Pe<<1|Re>>>31),_t[6]^=Ft,_t[7]^=Lt,_t[16]^=Ft,_t[17]^=Lt,_t[26]^=Ft,_t[27]^=Lt,_t[36]^=Ft,_t[37]^=Lt,_t[46]^=Ft,_t[47]^=Lt,Ft=Ie^(Kt<<1|Zt>>>31),Lt=Fe^(Zt<<1|Kt>>>31),_t[8]^=Ft,_t[9]^=Lt,_t[18]^=Ft,_t[19]^=Lt,_t[28]^=Ft,_t[29]^=Lt,_t[38]^=Ft,_t[39]^=Lt,_t[48]^=Ft,_t[49]^=Lt,Le=_t[0],Ue=_t[1],Tn=_t[11]<<4|_t[10]>>>28,xn=_t[10]<<4|_t[11]>>>28,nn=_t[20]<<3|_t[21]>>>29,rn=_t[21]<<3|_t[20]>>>29,Pn=_t[31]<<9|_t[30]>>>23,Mn=_t[30]<<9|_t[31]>>>23,gn=_t[40]<<18|_t[41]>>>14,bn=_t[41]<<18|_t[40]>>>14,un=_t[2]<<1|_t[3]>>>31,ln=_t[3]<<1|_t[2]>>>31,He=_t[13]<<12|_t[12]>>>20,qe=_t[12]<<12|_t[13]>>>20,An=_t[22]<<10|_t[23]>>>22,Cn=_t[23]<<10|_t[22]>>>22,on=_t[33]<<13|_t[32]>>>19,sn=_t[32]<<13|_t[33]>>>19,Ln=_t[42]<<2|_t[43]>>>30,zn=_t[43]<<2|_t[42]>>>30,In=_t[5]<<30|_t[4]>>>2,Nn=_t[4]<<30|_t[5]>>>2,dn=_t[14]<<6|_t[15]>>>26,hn=_t[15]<<6|_t[14]>>>26,We=_t[25]<<11|_t[24]>>>21,Ge=_t[24]<<11|_t[25]>>>21,_n=_t[34]<<15|_t[35]>>>17,Sn=_t[35]<<15|_t[34]>>>17,an=_t[45]<<29|_t[44]>>>3,cn=_t[44]<<29|_t[45]>>>3,Je=_t[6]<<28|_t[7]>>>4,Qe=_t[7]<<28|_t[6]>>>4,Bn=_t[17]<<23|_t[16]>>>9,Fn=_t[16]<<23|_t[17]>>>9,pn=_t[26]<<25|_t[27]>>>7,fn=_t[27]<<25|_t[26]>>>7,Ve=_t[36]<<21|_t[37]>>>11,$e=_t[37]<<21|_t[36]>>>11,En=_t[47]<<24|_t[46]>>>8,kn=_t[46]<<24|_t[47]>>>8,vn=_t[8]<<27|_t[9]>>>5,wn=_t[9]<<27|_t[8]>>>5,Ze=_t[18]<<20|_t[19]>>>12,tn=_t[19]<<20|_t[18]>>>12,On=_t[29]<<7|_t[28]>>>25,Rn=_t[28]<<7|_t[29]>>>25,mn=_t[38]<<8|_t[39]>>>24,yn=_t[39]<<8|_t[38]>>>24,Xe=_t[48]<<14|_t[49]>>>18,Ye=_t[49]<<14|_t[48]>>>18,_t[0]=Le^~He&We,_t[1]=Ue^~qe&Ge,_t[10]=Je^~Ze&nn,_t[11]=Qe^~tn&rn,_t[20]=un^~dn&pn,_t[21]=ln^~hn&fn,_t[30]=vn^~Tn&An,_t[31]=wn^~xn&Cn,_t[40]=In^~Bn&On,_t[41]=Nn^~Fn&Rn,_t[2]=He^~We&Ve,_t[3]=qe^~Ge&$e,_t[12]=Ze^~nn&on,_t[13]=tn^~rn&sn,_t[22]=dn^~pn&mn,_t[23]=hn^~fn&yn,_t[32]=Tn^~An&_n,_t[33]=xn^~Cn&Sn,_t[42]=Bn^~On&Pn,_t[43]=Fn^~Rn&Mn,_t[4]=We^~Ve&Xe,_t[5]=Ge^~$e&Ye,_t[14]=nn^~on&an,_t[15]=rn^~sn&cn,_t[24]=pn^~mn&gn,_t[25]=fn^~yn&bn,_t[34]=An^~_n&En,_t[35]=Cn^~Sn&kn,_t[44]=On^~Pn&Ln,_t[45]=Rn^~Mn&zn,_t[6]=Ve^~Xe&Le,_t[7]=$e^~Ye&Ue,_t[16]=on^~an&Je,_t[17]=sn^~cn&Qe,_t[26]=mn^~gn&un,_t[27]=yn^~bn&ln,_t[36]=_n^~En&vn,_t[37]=Sn^~kn&wn,_t[46]=Pn^~Ln&In,_t[47]=Mn^~zn&Nn,_t[8]=Xe^~Le&He,_t[9]=Ye^~Ue&qe,_t[18]=an^~Je&Ze,_t[19]=cn^~Qe&tn,_t[28]=gn^~un&dn,_t[29]=bn^~ln&hn,_t[38]=En^~vn&Tn,_t[39]=kn^~wn&xn,_t[48]=Ln^~In&Bn,_t[49]=zn^~Nn&Fn,_t[0]^=Ne[Yt],_t[1]^=Ne[Yt+1]};if(le)_t.exports=He;else for(We=0;We<qe.length;++We)Yt[qe[We]]=He[qe[We]]}()}));$e.keccak_224,$e.keccak224,$e.keccak_256;var Xe=$e.keccak256;$e.keccak_384,$e.keccak384,$e.keccak_512,$e.keccak512,$e.sha3_224,$e.sha3_256,$e.sha3_384,$e.sha3_512,$e.shake_128,$e.shake128,$e.shake_256,$e.shake256,$e.cshake_128,$e.cshake128,$e.cshake_256,$e.cshake256,$e.kmac_128,$e.kmac128,$e.kmac_256,$e.kmac256;var Ye=n((function(_t){!function(Ft){var Lt,Yt=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Kt=Math.ceil,Zt=Math.floor,le="[BigNumber Error] ",ve=le+"Number primitive has more than 15 significant digits: ",Ce=1e14,Se=14,Ie=9007199254740991,Ne=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Fe=1e7,Re=1e9;function d(_t){var Ft=0|_t;return _t>0||_t===Ft?Ft:Ft-1}function g(_t){for(var Ft,Lt,Yt=1,Kt=_t.length,Zt=_t[0]+"";Yt<Kt;){for(Ft=_t[Yt++]+"",Lt=Se-Ft.length;Lt--;Ft="0"+Ft);Zt+=Ft}for(Kt=Zt.length;48===Zt.charCodeAt(--Kt););return Zt.slice(0,Kt+1||1)}function m(_t,Ft){var Lt,Yt,Kt=_t.c,Zt=Ft.c,le=_t.s,ve=Ft.s,Ce=_t.e,Se=Ft.e;if(!le||!ve)return null;if(Lt=Kt&&!Kt[0],Yt=Zt&&!Zt[0],Lt||Yt)return Lt?Yt?0:-ve:le;if(le!=ve)return le;if(Lt=le<0,Yt=Ce==Se,!Kt||!Zt)return Yt?0:!Kt^Lt?1:-1;if(!Yt)return Ce>Se^Lt?1:-1;for(ve=(Ce=Kt.length)<(Se=Zt.length)?Ce:Se,le=0;le<ve;le++)if(Kt[le]!=Zt[le])return Kt[le]>Zt[le]^Lt?1:-1;return Ce==Se?0:Ce>Se^Lt?1:-1}function y(_t,Ft,Lt,Yt){if(_t<Ft||_t>Lt||_t!==Zt(_t))throw Error(le+(Yt||"Argument")+("number"==typeof _t?_t<Ft||_t>Lt?" out of range: ":" not an integer: ":" not a primitive number: ")+String(_t))}function w(_t){var Ft=_t.c.length-1;return d(_t.e/Se)==Ft&&_t.c[Ft]%2!=0}function v(_t,Ft){return(_t.length>1?_t.charAt(0)+"."+_t.slice(1):_t)+(Ft<0?"e":"e+")+Ft}function b(_t,Ft,Lt){var Yt,Kt;if(Ft<0){for(Kt=Lt+".";++Ft;Kt+=Lt);_t=Kt+_t}else if(++Ft>(Yt=_t.length)){for(Kt=Lt,Ft-=Yt;--Ft;Kt+=Lt);_t+=Kt}else Ft<Yt&&(_t=_t.slice(0,Ft)+"."+_t.slice(Ft));return _t}(Lt=function t(_t){var Ft,Lt,Pe,Le,Ue,He,qe,We,Ge,Ve,$e=H.prototype={constructor:H,toString:null,valueOf:null},Xe=new H(1),Ye=20,Je=4,Qe=-7,Ze=21,tn=-1e7,nn=1e7,rn=!1,on=1,sn=0,an={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},cn="0123456789abcdefghijklmnopqrstuvwxyz";function H(_t,Ft){var Kt,le,Ce,Ne,Fe,Re,Le,Ue,He=this;if(!(He instanceof H))return new H(_t,Ft);if(null==Ft){if(_t&&!0===_t._isBigNumber)return He.s=_t.s,void(!_t.c||_t.e>nn?He.c=He.e=null:_t.e<tn?He.c=[He.e=0]:(He.e=_t.e,He.c=_t.c.slice()));if((Re="number"==typeof _t)&&0*_t==0){if(He.s=1/_t<0?(_t=-_t,-1):1,_t===~~_t){for(Ne=0,Fe=_t;Fe>=10;Fe/=10,Ne++);return void(Ne>nn?He.c=He.e=null:(He.e=Ne,He.c=[_t]))}Ue=String(_t)}else{if(!Yt.test(Ue=String(_t)))return Pe(He,Ue,Re);He.s=45==Ue.charCodeAt(0)?(Ue=Ue.slice(1),-1):1}(Ne=Ue.indexOf("."))>-1&&(Ue=Ue.replace(".","")),(Fe=Ue.search(/e/i))>0?(Ne<0&&(Ne=Fe),Ne+=+Ue.slice(Fe+1),Ue=Ue.substring(0,Fe)):Ne<0&&(Ne=Ue.length)}else{if(y(Ft,2,cn.length,"Base"),10==Ft)return W(He=new H(_t),Ye+He.e+1,Je);if(Ue=String(_t),Re="number"==typeof _t){if(0*_t!=0)return Pe(He,Ue,Re,Ft);if(He.s=1/_t<0?(Ue=Ue.slice(1),-1):1,H.DEBUG&&Ue.replace(/^0\.0*|\./,"").length>15)throw Error(ve+_t)}else He.s=45===Ue.charCodeAt(0)?(Ue=Ue.slice(1),-1):1;for(Kt=cn.slice(0,Ft),Ne=Fe=0,Le=Ue.length;Fe<Le;Fe++)if(Kt.indexOf(le=Ue.charAt(Fe))<0){if("."==le){if(Fe>Ne){Ne=Le;continue}}else if(!Ce&&(Ue==Ue.toUpperCase()&&(Ue=Ue.toLowerCase())||Ue==Ue.toLowerCase()&&(Ue=Ue.toUpperCase()))){Ce=!0,Fe=-1,Ne=0;continue}return Pe(He,String(_t),Re,Ft)}Re=!1,(Ne=(Ue=Lt(Ue,Ft,10,He.s)).indexOf("."))>-1?Ue=Ue.replace(".",""):Ne=Ue.length}for(Fe=0;48===Ue.charCodeAt(Fe);Fe++);for(Le=Ue.length;48===Ue.charCodeAt(--Le););if(Ue=Ue.slice(Fe,++Le)){if(Le-=Fe,Re&&H.DEBUG&&Le>15&&(_t>Ie||_t!==Zt(_t)))throw Error(ve+He.s*_t);if((Ne=Ne-Fe-1)>nn)He.c=He.e=null;else if(Ne<tn)He.c=[He.e=0];else{if(He.e=Ne,He.c=[],Fe=(Ne+1)%Se,Ne<0&&(Fe+=Se),Fe<Le){for(Fe&&He.c.push(+Ue.slice(0,Fe)),Le-=Se;Fe<Le;)He.c.push(+Ue.slice(Fe,Fe+=Se));Fe=Se-(Ue=Ue.slice(Fe)).length}else Fe-=Le;for(;Fe--;Ue+="0");He.c.push(+Ue)}}else He.c=[He.e=0]}function G(_t,Ft,Lt,Yt){var Kt,Zt,le,ve,Ce;if(null==Lt?Lt=Je:y(Lt,0,8),!_t.c)return _t.toString();if(Kt=_t.c[0],le=_t.e,null==Ft)Ce=g(_t.c),Ce=1==Yt||2==Yt&&(le<=Qe||le>=Ze)?v(Ce,le):b(Ce,le,"0");else if(Zt=(_t=W(new H(_t),Ft,Lt)).e,ve=(Ce=g(_t.c)).length,1==Yt||2==Yt&&(Ft<=Zt||Zt<=Qe)){for(;ve<Ft;Ce+="0",ve++);Ce=v(Ce,Zt)}else if(Ft-=le,Ce=b(Ce,Zt,"0"),Zt+1>ve){if(--Ft>0)for(Ce+=".";Ft--;Ce+="0");}else if((Ft+=Zt-ve)>0)for(Zt+1==ve&&(Ce+=".");Ft--;Ce+="0");return _t.s<0&&Kt?"-"+Ce:Ce}function z(_t,Ft){for(var Lt,Yt=1,Kt=new H(_t[0]);Yt<_t.length;Yt++){if(!(Lt=new H(_t[Yt])).s){Kt=Lt;break}Ft.call(Kt,Lt)&&(Kt=Lt)}return Kt}function J(_t,Ft,Lt){for(var Yt=1,Kt=Ft.length;!Ft[--Kt];Ft.pop());for(Kt=Ft[0];Kt>=10;Kt/=10,Yt++);return(Lt=Yt+Lt*Se-1)>nn?_t.c=_t.e=null:Lt<tn?_t.c=[_t.e=0]:(_t.e=Lt,_t.c=Ft),_t}function W(_t,Ft,Lt,Yt){var le,ve,Ie,Fe,Re,Pe,Le,Ue=_t.c,He=Ne;if(Ue){t:{for(le=1,Fe=Ue[0];Fe>=10;Fe/=10,le++);if((ve=Ft-le)<0)ve+=Se,Ie=Ft,Le=(Re=Ue[Pe=0])/He[le-Ie-1]%10|0;else if((Pe=Kt((ve+1)/Se))>=Ue.length){if(!Yt)break t;for(;Ue.length<=Pe;Ue.push(0));Re=Le=0,le=1,Ie=(ve%=Se)-Se+1}else{for(Re=Fe=Ue[Pe],le=1;Fe>=10;Fe/=10,le++);Le=(Ie=(ve%=Se)-Se+le)<0?0:Re/He[le-Ie-1]%10|0}if(Yt=Yt||Ft<0||null!=Ue[Pe+1]||(Ie<0?Re:Re%He[le-Ie-1]),Yt=Lt<4?(Le||Yt)&&(0==Lt||Lt==(_t.s<0?3:2)):Le>5||5==Le&&(4==Lt||Yt||6==Lt&&(ve>0?Ie>0?Re/He[le-Ie]:0:Ue[Pe-1])%10&1||Lt==(_t.s<0?8:7)),Ft<1||!Ue[0])return Ue.length=0,Yt?(Ft-=_t.e+1,Ue[0]=He[(Se-Ft%Se)%Se],_t.e=-Ft||0):Ue[0]=_t.e=0,_t;if(0==ve?(Ue.length=Pe,Fe=1,Pe--):(Ue.length=Pe+1,Fe=He[Se-ve],Ue[Pe]=Ie>0?Zt(Re/He[le-Ie]%He[Ie])*Fe:0),Yt)for(;;){if(0==Pe){for(ve=1,Ie=Ue[0];Ie>=10;Ie/=10,ve++);for(Ie=Ue[0]+=Fe,Fe=1;Ie>=10;Ie/=10,Fe++);ve!=Fe&&(_t.e++,Ue[0]==Ce&&(Ue[0]=1));break}if(Ue[Pe]+=Fe,Ue[Pe]!=Ce)break;Ue[Pe--]=0,Fe=1}for(ve=Ue.length;0===Ue[--ve];Ue.pop());}_t.e>nn?_t.c=_t.e=null:_t.e<tn&&(_t.c=[_t.e=0])}return _t}function V(_t){var Ft,Lt=_t.e;return null===Lt?_t.toString():(Ft=g(_t.c),Ft=Lt<=Qe||Lt>=Ze?v(Ft,Lt):b(Ft,Lt,"0"),_t.s<0?"-"+Ft:Ft)}return H.clone=t,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(_t){var Ft,Lt;if(null!=_t){if("object"!=typeof _t)throw Error(le+"Object expected: "+_t);if(_t.hasOwnProperty(Ft="DECIMAL_PLACES")&&(y(Lt=_t[Ft],0,Re,Ft),Ye=Lt),_t.hasOwnProperty(Ft="ROUNDING_MODE")&&(y(Lt=_t[Ft],0,8,Ft),Je=Lt),_t.hasOwnProperty(Ft="EXPONENTIAL_AT")&&((Lt=_t[Ft])&&Lt.pop?(y(Lt[0],-Re,0,Ft),y(Lt[1],0,Re,Ft),Qe=Lt[0],Ze=Lt[1]):(y(Lt,-Re,Re,Ft),Qe=-(Ze=Lt<0?-Lt:Lt))),_t.hasOwnProperty(Ft="RANGE"))if((Lt=_t[Ft])&&Lt.pop)y(Lt[0],-Re,-1,Ft),y(Lt[1],1,Re,Ft),tn=Lt[0],nn=Lt[1];else{if(y(Lt,-Re,Re,Ft),!Lt)throw Error(le+Ft+" cannot be zero: "+Lt);tn=-(nn=Lt<0?-Lt:Lt)}if(_t.hasOwnProperty(Ft="CRYPTO")){if((Lt=_t[Ft])!==!!Lt)throw Error(le+Ft+" not true or false: "+Lt);if(Lt){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw rn=!Lt,Error(le+"crypto unavailable");rn=Lt}else rn=Lt}if(_t.hasOwnProperty(Ft="MODULO_MODE")&&(y(Lt=_t[Ft],0,9,Ft),on=Lt),_t.hasOwnProperty(Ft="POW_PRECISION")&&(y(Lt=_t[Ft],0,Re,Ft),sn=Lt),_t.hasOwnProperty(Ft="FORMAT")){if("object"!=typeof(Lt=_t[Ft]))throw Error(le+Ft+" not an object: "+Lt);an=Lt}if(_t.hasOwnProperty(Ft="ALPHABET")){if("string"!=typeof(Lt=_t[Ft])||/^.?$|[+\-.\s]|(.).*\1/.test(Lt))throw Error(le+Ft+" invalid: "+Lt);cn=Lt}}return{DECIMAL_PLACES:Ye,ROUNDING_MODE:Je,EXPONENTIAL_AT:[Qe,Ze],RANGE:[tn,nn],CRYPTO:rn,MODULO_MODE:on,POW_PRECISION:sn,FORMAT:an,ALPHABET:cn}},H.isBigNumber=function(_t){if(!_t||!0!==_t._isBigNumber)return!1;if(!H.DEBUG)return!0;var Ft,Lt,Yt=_t.c,Kt=_t.e,ve=_t.s;t:if("[object Array]"=={}.toString.call(Yt)){if((1===ve||-1===ve)&&Kt>=-Re&&Kt<=Re&&Kt===Zt(Kt)){if(0===Yt[0]){if(0===Kt&&1===Yt.length)return!0;break t}if((Ft=(Kt+1)%Se)<1&&(Ft+=Se),String(Yt[0]).length==Ft){for(Ft=0;Ft<Yt.length;Ft++)if((Lt=Yt[Ft])<0||Lt>=Ce||Lt!==Zt(Lt))break t;if(0!==Lt)return!0}}}else if(null===Yt&&null===Kt&&(null===ve||1===ve||-1===ve))return!0;throw Error(le+"Invalid BigNumber: "+_t)},H.maximum=H.max=function(){return z(arguments,$e.lt)},H.minimum=H.min=function(){return z(arguments,$e.gt)},H.random=(Le=9007199254740992,Ue=Math.random()*Le&2097151?function(){return Zt(Math.random()*Le)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(_t){var Ft,Lt,Yt,ve,Ce,Ie=0,Fe=[],Pe=new H(Xe);if(null==_t?_t=Ye:y(_t,0,Re),ve=Kt(_t/Se),rn)if(crypto.getRandomValues){for(Ft=crypto.getRandomValues(new Uint32Array(ve*=2));Ie<ve;)(Ce=131072*Ft[Ie]+(Ft[Ie+1]>>>11))>=9e15?(Lt=crypto.getRandomValues(new Uint32Array(2)),Ft[Ie]=Lt[0],Ft[Ie+1]=Lt[1]):(Fe.push(Ce%1e14),Ie+=2);Ie=ve/2}else{if(!crypto.randomBytes)throw rn=!1,Error(le+"crypto unavailable");for(Ft=crypto.randomBytes(ve*=7);Ie<ve;)(Ce=281474976710656*(31&Ft[Ie])+1099511627776*Ft[Ie+1]+4294967296*Ft[Ie+2]+16777216*Ft[Ie+3]+(Ft[Ie+4]<<16)+(Ft[Ie+5]<<8)+Ft[Ie+6])>=9e15?crypto.randomBytes(7).copy(Ft,Ie):(Fe.push(Ce%1e14),Ie+=7);Ie=ve/7}if(!rn)for(;Ie<ve;)(Ce=Ue())<9e15&&(Fe[Ie++]=Ce%1e14);for(ve=Fe[--Ie],_t%=Se,ve&&_t&&(Ce=Ne[Se-_t],Fe[Ie]=Zt(ve/Ce)*Ce);0===Fe[Ie];Fe.pop(),Ie--);if(Ie<0)Fe=[Yt=0];else{for(Yt=-1;0===Fe[0];Fe.splice(0,1),Yt-=Se);for(Ie=1,Ce=Fe[0];Ce>=10;Ce/=10,Ie++);Ie<Se&&(Yt-=Se-Ie)}return Pe.e=Yt,Pe.c=Fe,Pe}),H.sum=function(){for(var _t=1,Ft=arguments,Lt=new H(Ft[0]);_t<Ft.length;)Lt=Lt.plus(Ft[_t++]);return Lt},Lt=function(){var _t="0123456789";function e(_t,Ft,Lt,Yt){for(var Kt,Zt,le=[0],ve=0,Ce=_t.length;ve<Ce;){for(Zt=le.length;Zt--;le[Zt]*=Ft);for(le[0]+=Yt.indexOf(_t.charAt(ve++)),Kt=0;Kt<le.length;Kt++)le[Kt]>Lt-1&&(null==le[Kt+1]&&(le[Kt+1]=0),le[Kt+1]+=le[Kt]/Lt|0,le[Kt]%=Lt)}return le.reverse()}return function(Lt,Yt,Kt,Zt,le){var ve,Ce,Se,Ie,Ne,Fe,Re,Pe,Le=Lt.indexOf("."),Ue=Ye,He=Je;for(Le>=0&&(Ie=sn,sn=0,Lt=Lt.replace(".",""),Fe=(Pe=new H(Yt)).pow(Lt.length-Le),sn=Ie,Pe.c=e(b(g(Fe.c),Fe.e,"0"),10,Kt,_t),Pe.e=Pe.c.length),Se=Ie=(Re=e(Lt,Yt,Kt,le?(ve=cn,_t):(ve=_t,cn))).length;0==Re[--Ie];Re.pop());if(!Re[0])return ve.charAt(0);if(Le<0?--Se:(Fe.c=Re,Fe.e=Se,Fe.s=Zt,Re=(Fe=Ft(Fe,Pe,Ue,He,Kt)).c,Ne=Fe.r,Se=Fe.e),Le=Re[Ce=Se+Ue+1],Ie=Kt/2,Ne=Ne||Ce<0||null!=Re[Ce+1],Ne=He<4?(null!=Le||Ne)&&(0==He||He==(Fe.s<0?3:2)):Le>Ie||Le==Ie&&(4==He||Ne||6==He&&1&Re[Ce-1]||He==(Fe.s<0?8:7)),Ce<1||!Re[0])Lt=Ne?b(ve.charAt(1),-Ue,ve.charAt(0)):ve.charAt(0);else{if(Re.length=Ce,Ne)for(--Kt;++Re[--Ce]>Kt;)Re[Ce]=0,Ce||(++Se,Re=[1].concat(Re));for(Ie=Re.length;!Re[--Ie];);for(Le=0,Lt="";Le<=Ie;Lt+=ve.charAt(Re[Le++]));Lt=b(Lt,Se,ve.charAt(0))}return Lt}}(),Ft=function(){function t(_t,Ft,Lt){var Yt,Kt,Zt,le,ve=0,Ce=_t.length,Se=Ft%Fe,Ie=Ft/Fe|0;for(_t=_t.slice();Ce--;)ve=((Kt=Se*(Zt=_t[Ce]%Fe)+(Yt=Ie*Zt+(le=_t[Ce]/Fe|0)*Se)%Fe*Fe+ve)/Lt|0)+(Yt/Fe|0)+Ie*le,_t[Ce]=Kt%Lt;return ve&&(_t=[ve].concat(_t)),_t}function e(_t,Ft,Lt,Yt){var Kt,Zt;if(Lt!=Yt)Zt=Lt>Yt?1:-1;else for(Kt=Zt=0;Kt<Lt;Kt++)if(_t[Kt]!=Ft[Kt]){Zt=_t[Kt]>Ft[Kt]?1:-1;break}return Zt}function n(_t,Ft,Lt,Yt){for(var Kt=0;Lt--;)_t[Lt]-=Kt,Kt=_t[Lt]<Ft[Lt]?1:0,_t[Lt]=Kt*Yt+_t[Lt]-Ft[Lt];for(;!_t[0]&&_t.length>1;_t.splice(0,1));}return function(_t,Ft,Lt,Yt,Kt){var le,ve,Ie,Ne,Fe,Re,Pe,Le,Ue,He,qe,We,Ge,Ve,$e,Xe,Ye,Je=_t.s==Ft.s?1:-1,Qe=_t.c,Ze=Ft.c;if(!(Qe&&Qe[0]&&Ze&&Ze[0]))return new H(_t.s&&Ft.s&&(Qe?!Ze||Qe[0]!=Ze[0]:Ze)?Qe&&0==Qe[0]||!Ze?0*Je:Je/0:NaN);for(Ue=(Le=new H(Je)).c=[],Je=Lt+(ve=_t.e-Ft.e)+1,Kt||(Kt=Ce,ve=d(_t.e/Se)-d(Ft.e/Se),Je=Je/Se|0),Ie=0;Ze[Ie]==(Qe[Ie]||0);Ie++);if(Ze[Ie]>(Qe[Ie]||0)&&ve--,Je<0)Ue.push(1),Ne=!0;else{for(Ve=Qe.length,Xe=Ze.length,Ie=0,Je+=2,(Fe=Zt(Kt/(Ze[0]+1)))>1&&(Ze=t(Ze,Fe,Kt),Qe=t(Qe,Fe,Kt),Xe=Ze.length,Ve=Qe.length),Ge=Xe,qe=(He=Qe.slice(0,Xe)).length;qe<Xe;He[qe++]=0);Ye=Ze.slice(),Ye=[0].concat(Ye),$e=Ze[0],Ze[1]>=Kt/2&&$e++;do{if(Fe=0,(le=e(Ze,He,Xe,qe))<0){if(We=He[0],Xe!=qe&&(We=We*Kt+(He[1]||0)),(Fe=Zt(We/$e))>1)for(Fe>=Kt&&(Fe=Kt-1),Pe=(Re=t(Ze,Fe,Kt)).length,qe=He.length;1==e(Re,He,Pe,qe);)Fe--,n(Re,Xe<Pe?Ye:Ze,Pe,Kt),Pe=Re.length,le=1;else 0==Fe&&(le=Fe=1),Pe=(Re=Ze.slice()).length;if(Pe<qe&&(Re=[0].concat(Re)),n(He,Re,qe,Kt),qe=He.length,-1==le)for(;e(Ze,He,Xe,qe)<1;)Fe++,n(He,Xe<qe?Ye:Ze,qe,Kt),qe=He.length}else 0===le&&(Fe++,He=[0]);Ue[Ie++]=Fe,He[0]?He[qe++]=Qe[Ge]||0:(He=[Qe[Ge]],qe=1)}while((Ge++<Ve||null!=He[0])&&Je--);Ne=null!=He[0],Ue[0]||Ue.splice(0,1)}if(Kt==Ce){for(Ie=1,Je=Ue[0];Je>=10;Je/=10,Ie++);W(Le,Lt+(Le.e=Ie+ve*Se-1)+1,Yt,Ne)}else Le.e=ve,Le.r=+Ne;return Le}}(),He=/^(-?)0([xbo])(?=\w[\w.]*$)/i,qe=/^([^.]+)\.$/,We=/^\.([^.]+)$/,Ge=/^-?(Infinity|NaN)$/,Ve=/^\s*\+(?=[\w.])|^\s+|\s+$/g,Pe=function(_t,Ft,Lt,Yt){var Kt,Zt=Lt?Ft:Ft.replace(Ve,"");if(Ge.test(Zt))_t.s=isNaN(Zt)?null:Zt<0?-1:1;else{if(!Lt&&(Zt=Zt.replace(He,(function(_t,Ft,Lt){return Kt="x"==(Lt=Lt.toLowerCase())?16:"b"==Lt?2:8,Yt&&Yt!=Kt?_t:Ft})),Yt&&(Kt=Yt,Zt=Zt.replace(qe,"$1").replace(We,"0.$1")),Ft!=Zt))return new H(Zt,Kt);if(H.DEBUG)throw Error(le+"Not a"+(Yt?" base "+Yt:"")+" number: "+Ft);_t.s=null}_t.c=_t.e=null},$e.absoluteValue=$e.abs=function(){var _t=new H(this);return _t.s<0&&(_t.s=1),_t},$e.comparedTo=function(_t,Ft){return m(this,new H(_t,Ft))},$e.decimalPlaces=$e.dp=function(_t,Ft){var Lt,Yt,Kt,Zt=this;if(null!=_t)return y(_t,0,Re),null==Ft?Ft=Je:y(Ft,0,8),W(new H(Zt),_t+Zt.e+1,Ft);if(!(Lt=Zt.c))return null;if(Yt=((Kt=Lt.length-1)-d(this.e/Se))*Se,Kt=Lt[Kt])for(;Kt%10==0;Kt/=10,Yt--);return Yt<0&&(Yt=0),Yt},$e.dividedBy=$e.div=function(_t,Lt){return Ft(this,new H(_t,Lt),Ye,Je)},$e.dividedToIntegerBy=$e.idiv=function(_t,Lt){return Ft(this,new H(_t,Lt),0,1)},$e.exponentiatedBy=$e.pow=function(_t,Ft){var Lt,Yt,ve,Ce,Ie,Ne,Fe,Re,Pe=this;if((_t=new H(_t)).c&&!_t.isInteger())throw Error(le+"Exponent not an integer: "+V(_t));if(null!=Ft&&(Ft=new H(Ft)),Ie=_t.e>14,!Pe.c||!Pe.c[0]||1==Pe.c[0]&&!Pe.e&&1==Pe.c.length||!_t.c||!_t.c[0])return Re=new H(Math.pow(+V(Pe),Ie?2-w(_t):+V(_t))),Ft?Re.mod(Ft):Re;if(Ne=_t.s<0,Ft){if(Ft.c?!Ft.c[0]:!Ft.s)return new H(NaN);(Yt=!Ne&&Pe.isInteger()&&Ft.isInteger())&&(Pe=Pe.mod(Ft))}else{if(_t.e>9&&(Pe.e>0||Pe.e<-1||(0==Pe.e?Pe.c[0]>1||Ie&&Pe.c[1]>=24e7:Pe.c[0]<8e13||Ie&&Pe.c[0]<=9999975e7)))return Ce=Pe.s<0&&w(_t)?-0:0,Pe.e>-1&&(Ce=1/Ce),new H(Ne?1/Ce:Ce);sn&&(Ce=Kt(sn/Se+2))}for(Ie?(Lt=new H(.5),Ne&&(_t.s=1),Fe=w(_t)):Fe=(ve=Math.abs(+V(_t)))%2,Re=new H(Xe);;){if(Fe){if(!(Re=Re.times(Pe)).c)break;Ce?Re.c.length>Ce&&(Re.c.length=Ce):Yt&&(Re=Re.mod(Ft))}if(ve){if(0===(ve=Zt(ve/2)))break;Fe=ve%2}else if(W(_t=_t.times(Lt),_t.e+1,1),_t.e>14)Fe=w(_t);else{if(0==(ve=+V(_t)))break;Fe=ve%2}Pe=Pe.times(Pe),Ce?Pe.c&&Pe.c.length>Ce&&(Pe.c.length=Ce):Yt&&(Pe=Pe.mod(Ft))}return Yt?Re:(Ne&&(Re=Xe.div(Re)),Ft?Re.mod(Ft):Ce?W(Re,sn,Je,void 0):Re)},$e.integerValue=function(_t){var Ft=new H(this);return null==_t?_t=Je:y(_t,0,8),W(Ft,Ft.e+1,_t)},$e.isEqualTo=$e.eq=function(_t,Ft){return 0===m(this,new H(_t,Ft))},$e.isFinite=function(){return!!this.c},$e.isGreaterThan=$e.gt=function(_t,Ft){return m(this,new H(_t,Ft))>0},$e.isGreaterThanOrEqualTo=$e.gte=function(_t,Ft){return 1===(Ft=m(this,new H(_t,Ft)))||0===Ft},$e.isInteger=function(){return!!this.c&&d(this.e/Se)>this.c.length-2},$e.isLessThan=$e.lt=function(_t,Ft){return m(this,new H(_t,Ft))<0},$e.isLessThanOrEqualTo=$e.lte=function(_t,Ft){return-1===(Ft=m(this,new H(_t,Ft)))||0===Ft},$e.isNaN=function(){return!this.s},$e.isNegative=function(){return this.s<0},$e.isPositive=function(){return this.s>0},$e.isZero=function(){return!!this.c&&0==this.c[0]},$e.minus=function(_t,Ft){var Lt,Yt,Kt,Zt,le=this,ve=le.s;if(Ft=(_t=new H(_t,Ft)).s,!ve||!Ft)return new H(NaN);if(ve!=Ft)return _t.s=-Ft,le.plus(_t);var Ie=le.e/Se,Ne=_t.e/Se,Fe=le.c,Re=_t.c;if(!Ie||!Ne){if(!Fe||!Re)return Fe?(_t.s=-Ft,_t):new H(Re?le:NaN);if(!Fe[0]||!Re[0])return Re[0]?(_t.s=-Ft,_t):new H(Fe[0]?le:3==Je?-0:0)}if(Ie=d(Ie),Ne=d(Ne),Fe=Fe.slice(),ve=Ie-Ne){for((Zt=ve<0)?(ve=-ve,Kt=Fe):(Ne=Ie,Kt=Re),Kt.reverse(),Ft=ve;Ft--;Kt.push(0));Kt.reverse()}else for(Yt=(Zt=(ve=Fe.length)<(Ft=Re.length))?ve:Ft,ve=Ft=0;Ft<Yt;Ft++)if(Fe[Ft]!=Re[Ft]){Zt=Fe[Ft]<Re[Ft];break}if(Zt&&(Kt=Fe,Fe=Re,Re=Kt,_t.s=-_t.s),(Ft=(Yt=Re.length)-(Lt=Fe.length))>0)for(;Ft--;Fe[Lt++]=0);for(Ft=Ce-1;Yt>ve;){if(Fe[--Yt]<Re[Yt]){for(Lt=Yt;Lt&&!Fe[--Lt];Fe[Lt]=Ft);--Fe[Lt],Fe[Yt]+=Ce}Fe[Yt]-=Re[Yt]}for(;0==Fe[0];Fe.splice(0,1),--Ne);return Fe[0]?J(_t,Fe,Ne):(_t.s=3==Je?-1:1,_t.c=[_t.e=0],_t)},$e.modulo=$e.mod=function(_t,Lt){var Yt,Kt,Zt=this;return _t=new H(_t,Lt),!Zt.c||!_t.s||_t.c&&!_t.c[0]?new H(NaN):!_t.c||Zt.c&&!Zt.c[0]?new H(Zt):(9==on?(Kt=_t.s,_t.s=1,Yt=Ft(Zt,_t,0,3),_t.s=Kt,Yt.s*=Kt):Yt=Ft(Zt,_t,0,on),(_t=Zt.minus(Yt.times(_t))).c[0]||1!=on||(_t.s=Zt.s),_t)},$e.multipliedBy=$e.times=function(_t,Ft){var Lt,Yt,Kt,Zt,le,ve,Ie,Ne,Re,Pe,Le,Ue,He,qe,We,Ge=this,Ve=Ge.c,$e=(_t=new H(_t,Ft)).c;if(!(Ve&&$e&&Ve[0]&&$e[0]))return!Ge.s||!_t.s||Ve&&!Ve[0]&&!$e||$e&&!$e[0]&&!Ve?_t.c=_t.e=_t.s=null:(_t.s*=Ge.s,Ve&&$e?(_t.c=[0],_t.e=0):_t.c=_t.e=null),_t;for(Yt=d(Ge.e/Se)+d(_t.e/Se),_t.s*=Ge.s,(Ie=Ve.length)<(Pe=$e.length)&&(He=Ve,Ve=$e,$e=He,Kt=Ie,Ie=Pe,Pe=Kt),Kt=Ie+Pe,He=[];Kt--;He.push(0));for(qe=Ce,We=Fe,Kt=Pe;--Kt>=0;){for(Lt=0,Le=$e[Kt]%We,Ue=$e[Kt]/We|0,Zt=Kt+(le=Ie);Zt>Kt;)Lt=((Ne=Le*(Ne=Ve[--le]%We)+(ve=Ue*Ne+(Re=Ve[le]/We|0)*Le)%We*We+He[Zt]+Lt)/qe|0)+(ve/We|0)+Ue*Re,He[Zt--]=Ne%qe;He[Zt]=Lt}return Lt?++Yt:He.splice(0,1),J(_t,He,Yt)},$e.negated=function(){var _t=new H(this);return _t.s=-_t.s||null,_t},$e.plus=function(_t,Ft){var Lt,Yt=this,Kt=Yt.s;if(Ft=(_t=new H(_t,Ft)).s,!Kt||!Ft)return new H(NaN);if(Kt!=Ft)return _t.s=-Ft,Yt.minus(_t);var Zt=Yt.e/Se,le=_t.e/Se,ve=Yt.c,Ie=_t.c;if(!Zt||!le){if(!ve||!Ie)return new H(Kt/0);if(!ve[0]||!Ie[0])return Ie[0]?_t:new H(ve[0]?Yt:0*Kt)}if(Zt=d(Zt),le=d(le),ve=ve.slice(),Kt=Zt-le){for(Kt>0?(le=Zt,Lt=Ie):(Kt=-Kt,Lt=ve),Lt.reverse();Kt--;Lt.push(0));Lt.reverse()}for((Kt=ve.length)-(Ft=Ie.length)<0&&(Lt=Ie,Ie=ve,ve=Lt,Ft=Kt),Kt=0;Ft;)Kt=(ve[--Ft]=ve[Ft]+Ie[Ft]+Kt)/Ce|0,ve[Ft]=Ce===ve[Ft]?0:ve[Ft]%Ce;return Kt&&(ve=[Kt].concat(ve),++le),J(_t,ve,le)},$e.precision=$e.sd=function(_t,Ft){var Lt,Yt,Kt,Zt=this;if(null!=_t&&_t!==!!_t)return y(_t,1,Re),null==Ft?Ft=Je:y(Ft,0,8),W(new H(Zt),_t,Ft);if(!(Lt=Zt.c))return null;if(Yt=(Kt=Lt.length-1)*Se+1,Kt=Lt[Kt]){for(;Kt%10==0;Kt/=10,Yt--);for(Kt=Lt[0];Kt>=10;Kt/=10,Yt++);}return _t&&Zt.e+1>Yt&&(Yt=Zt.e+1),Yt},$e.shiftedBy=function(_t){return y(_t,-9007199254740991,Ie),this.times("1e"+_t)},$e.squareRoot=$e.sqrt=function(){var _t,Lt,Yt,Kt,Zt,le=this,ve=le.c,Ce=le.s,Se=le.e,Ie=Ye+4,Ne=new H("0.5");if(1!==Ce||!ve||!ve[0])return new H(!Ce||Ce<0&&(!ve||ve[0])?NaN:ve?le:1/0);if(0==(Ce=Math.sqrt(+V(le)))||Ce==1/0?(((Lt=g(ve)).length+Se)%2==0&&(Lt+="0"),Ce=Math.sqrt(+Lt),Se=d((Se+1)/2)-(Se<0||Se%2),Yt=new H(Lt=Ce==1/0?"5e"+Se:(Lt=Ce.toExponential()).slice(0,Lt.indexOf("e")+1)+Se)):Yt=new H(Ce+""),Yt.c[0])for((Ce=(Se=Yt.e)+Ie)<3&&(Ce=0);;)if(Zt=Yt,Yt=Ne.times(Zt.plus(Ft(le,Zt,Ie,1))),g(Zt.c).slice(0,Ce)===(Lt=g(Yt.c)).slice(0,Ce)){if(Yt.e<Se&&--Ce,"9999"!=(Lt=Lt.slice(Ce-3,Ce+1))&&(Kt||"4999"!=Lt)){+Lt&&(+Lt.slice(1)||"5"!=Lt.charAt(0))||(W(Yt,Yt.e+Ye+2,1),_t=!Yt.times(Yt).eq(le));break}if(!Kt&&(W(Zt,Zt.e+Ye+2,0),Zt.times(Zt).eq(le))){Yt=Zt;break}Ie+=4,Ce+=4,Kt=1}return W(Yt,Yt.e+Ye+1,Je,_t)},$e.toExponential=function(_t,Ft){return null!=_t&&(y(_t,0,Re),_t++),G(this,_t,Ft,1)},$e.toFixed=function(_t,Ft){return null!=_t&&(y(_t,0,Re),_t=_t+this.e+1),G(this,_t,Ft)},$e.toFormat=function(_t,Ft,Lt){var Yt,Kt=this;if(null==Lt)null!=_t&&Ft&&"object"==typeof Ft?(Lt=Ft,Ft=null):_t&&"object"==typeof _t?(Lt=_t,_t=Ft=null):Lt=an;else if("object"!=typeof Lt)throw Error(le+"Argument not an object: "+Lt);if(Yt=Kt.toFixed(_t,Ft),Kt.c){var Zt,ve=Yt.split("."),Ce=+Lt.groupSize,Se=+Lt.secondaryGroupSize,Ie=Lt.groupSeparator||"",Ne=ve[0],Fe=ve[1],Re=Kt.s<0,Pe=Re?Ne.slice(1):Ne,Le=Pe.length;if(Se&&(Zt=Ce,Ce=Se,Se=Zt,Le-=Zt),Ce>0&&Le>0){for(Zt=Le%Ce||Ce,Ne=Pe.substr(0,Zt);Zt<Le;Zt+=Ce)Ne+=Ie+Pe.substr(Zt,Ce);Se>0&&(Ne+=Ie+Pe.slice(Zt)),Re&&(Ne="-"+Ne)}Yt=Fe?Ne+(Lt.decimalSeparator||"")+((Se=+Lt.fractionGroupSize)?Fe.replace(new RegExp("\\d{"+Se+"}\\B","g"),"$&"+(Lt.fractionGroupSeparator||"")):Fe):Ne}return(Lt.prefix||"")+Yt+(Lt.suffix||"")},$e.toFraction=function(_t){var Lt,Yt,Kt,Zt,ve,Ce,Ie,Fe,Re,Pe,Le,Ue,He=this,qe=He.c;if(null!=_t&&(!(Ie=new H(_t)).isInteger()&&(Ie.c||1!==Ie.s)||Ie.lt(Xe)))throw Error(le+"Argument "+(Ie.isInteger()?"out of range: ":"not an integer: ")+V(Ie));if(!qe)return new H(He);for(Lt=new H(Xe),Re=Yt=new H(Xe),Kt=Fe=new H(Xe),Ue=g(qe),ve=Lt.e=Ue.length-He.e-1,Lt.c[0]=Ne[(Ce=ve%Se)<0?Se+Ce:Ce],_t=!_t||Ie.comparedTo(Lt)>0?ve>0?Lt:Re:Ie,Ce=nn,nn=1/0,Ie=new H(Ue),Fe.c[0]=0;Pe=Ft(Ie,Lt,0,1),1!=(Zt=Yt.plus(Pe.times(Kt))).comparedTo(_t);)Yt=Kt,Kt=Zt,Re=Fe.plus(Pe.times(Zt=Re)),Fe=Zt,Lt=Ie.minus(Pe.times(Zt=Lt)),Ie=Zt;return Zt=Ft(_t.minus(Yt),Kt,0,1),Fe=Fe.plus(Zt.times(Re)),Yt=Yt.plus(Zt.times(Kt)),Fe.s=Re.s=He.s,Le=Ft(Re,Kt,ve*=2,Je).minus(He).abs().comparedTo(Ft(Fe,Yt,ve,Je).minus(He).abs())<1?[Re,Kt]:[Fe,Yt],nn=Ce,Le},$e.toNumber=function(){return+V(this)},$e.toPrecision=function(_t,Ft){return null!=_t&&y(_t,1,Re),G(this,_t,Ft,2)},$e.toString=function(_t){var Ft,Yt=this,Kt=Yt.s,Zt=Yt.e;return null===Zt?Kt?(Ft="Infinity",Kt<0&&(Ft="-"+Ft)):Ft="NaN":(null==_t?Ft=Zt<=Qe||Zt>=Ze?v(g(Yt.c),Zt):b(g(Yt.c),Zt,"0"):10===_t?Ft=b(g((Yt=W(new H(Yt),Ye+Zt+1,Je)).c),Yt.e,"0"):(y(_t,2,cn.length,"Base"),Ft=Lt(b(g(Yt.c),Zt,"0"),10,_t,Kt,!0)),Kt<0&&Yt.c[0]&&(Ft="-"+Ft)),Ft},$e.valueOf=$e.toJSON=function(){return V(this)},$e._isBigNumber=!0,null!=_t&&H.set(_t),H}()).default=Lt.BigNumber=Lt,_t.exports?_t.exports=Lt:(Ft||(Ft="undefined"!=typeof self&&self?self:window),Ft.BigNumber=Lt)}(this)})).BigNumber;const Je={ROUNDING_MODE:Ye.ROUND_DOWN};function M(_t){return(new TextEncoder).encode(_t)}function R(_t){return"string"==typeof _t?R(D(_t)):(new TextDecoder).decode(_t)}Ye.config(Je);const Qe="INVALID_ARGUMENT";function U(_t,Ft="UNKNOWN_ERROR",Lt={}){let Yt=[];Object.keys(Lt).forEach((_t=>{try{Yt.push(_t+"="+JSON.stringify(Lt[_t]))}catch(Ft){Yt.push(_t+"="+JSON.stringify(Lt[_t].toString()))}}));let Kt=_t;Yt.length&&(_t+=" ("+Yt.join(", ")+")");let Zt=new Error(_t);return Zt.reason=Kt,Zt.code=Ft,Object.keys(Lt).forEach((function(_t){Zt[_t]=Lt[_t]})),Zt}function D(_t){if("string"!=typeof _t)throw new Error("hexToBytes only accept strings, got: "+typeof _t);if("0x"===_t.substr(0,2))return D(_t.substr(2));const Ft=new Uint8Array(Math.ceil(_t.length/2));let Lt=0;for(let Yt=0;Yt<_t.length;Yt+=2){const Kt=parseInt(_t.substr(Yt,2),16);if(isNaN(Kt))throw new Error("Cannot read hex string:"+JSON.stringify(_t));Ft[Lt]=Kt,Lt++}return Ft}function q(_t){return Array.from(_t).map((_t=>_t.toString(16).padStart(2,"0"))).join("")}function $(_t,Ft){if("string"==typeof _t){if(Ft&&"hex"===Ft.encoding&&"string"==typeof _t){let Ft=_t;Ft.length>2&&"0x"===Ft.substr(0,2)&&(Ft=Ft.substr(2));const Lt=D(Ft);return Xe(Lt)}return Xe(M(_t))}return Xe(_t)}let Ze={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function H(_t,Ft,Lt){return new Array(Ft-_t.length+1).join(Lt||"0")+_t}function G(_t){return wt(_t)&&_t.name&&-1!==_t.name.indexOf("(")?_t.name:_t.name+"("+J(!1,_t.inputs||[]).join(",")+")"}function z(..._t){const Ft=_t.reduce(((_t,Ft)=>_t+Ft.length),0);var Lt=new Uint8Array(Ft);let Yt=0;for(let Ft of _t)Lt.set(Ft,Yt),Yt+=Ft.length;return Lt}function J(_t,Ft){const Lt=[];return Ft.forEach((function(Ft){if("object"==typeof Ft.components){if("tuple"!==Ft.type.substring(0,5))throw new Error("components found but type is not tuple; report on GitHub");var Yt="",Kt=Ft.type.indexOf("[");Kt>=0&&(Yt=Ft.type.substring(Kt));var Zt=J(_t,Ft.components);bt(Zt)&&_t?Lt.push("tuple("+Zt.join(",")+")"+Yt):_t?Lt.push("("+Zt+")"):Lt.push("("+Zt.join(",")+")"+Yt)}else Lt.push(Ft.type)})),Lt}function W(_t){let Ft=_t.indexOf("("),Lt=_t.indexOf(")");return-1!==Ft&&-1!==Lt?_t.substr(0,Ft):_t}function V(_t){let Ft=_t.indexOf("("),Lt=_t.indexOf(")");return-1!==Ft&&-1!==Lt?_t.substr(Ft+1,Lt-Ft-1).replace(" ",""):""}function K(_t){return null==_t?_t:ot(_t).toNumber()}function Z(_t){return ot(_t).toNumber()}function Y(_t){return mt(_t)?_t.toString(10):""+_t}function X(_t){return"string"==typeof _t&&!_t.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t)?"0x"+_t:nt(_t)}function Q(_t){if("string"==typeof _t)return _t.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t)?nt(_t):"0x"+q(M(_t));if(_t instanceof Uint8Array)return"0x"+q(_t);throw new Error(`toStringData: Error trying to convert ${_t} (${typeof _t}) to a hex string.`)}function tt(_t){return"boolean"==typeof _t?_t:0!==ot(_t).toNumber()}function et(_t){let Ft=ot(_t),Lt=Ft.toString(16);return Ft.isLessThan(0)?"-0x"+Lt.substr(1):"0x"+Lt}function nt(_t){if(vt(_t))return et(+_t);if(mt(_t))return et(_t);if(yt(_t)){const Ft=_t;if(0===Ft.indexOf("-0x"))return et(Ft);if(0===Ft.indexOf("0x"))return Ft;if(!isFinite(Ft))return q(M(Ft))}if(_t instanceof Uint8Array)return"0x"+q(_t);if(bt(_t)||wt(_t))throw new Error("toHex can only be called with scalar values, not objects or arrays");return et(_t)}function rt(_t){let Ft=_t?_t.toLowerCase():"ether",Lt=Ze[Ft];if(void 0===Lt)throw new Error("This unit doesn't exists, please use the one of the following units"+JSON.stringify(Ze,null,2));return new Ye(Lt,10)}function ot(_t){let Ft=_t||0;return mt(Ft)?Ft:("string"==typeof Ft&&(Ft=Ft.trim()),"string"!=typeof Ft||0!==Ft.indexOf("0x")&&0!==Ft.indexOf("-0x")?Ft instanceof Uint8Array?new Ye(q(Ft),16):new Ye(Ft,10):new Ye(Ft.replace("0x","").toLowerCase(),16))}function it(_t){return new Ye(new Array(_t).fill("1").join(""),2)}function st(_t,Ft=256){let Lt=ot(_t).integerValue();return Lt.isLessThan(0)?it(Ft).plus(Lt).plus(1):Lt}function at(_t,Ft){return"1"==H(_t.toString(2),Ft,"0")[0]}function ct(_t){if("string"!=typeof _t)throw U("invalid address",Qe,{arg:"address",value:_t});if(_t.trim().match(/^(0x)?[0-9a-fA-F]{40}$/))return"0x"!==_t.trim().substring(0,2)&&(_t="0x"+_t),ft(_t);throw U("invalid address",Qe,{arg:"address",value:_t})}function ut(_t,Ft=256){if(at(_t,Ft)){const Lt=it(Ft);return _t.minus(Lt).minus(1)}return _t}function lt(_t){return/^0x[0-9a-f]{40}$/i.test(_t)}function ht(_t){return!!/^(0x)?[0-9a-f]{40}$/i.test(_t)&&(!(!/^(0x)?[0-9a-f]{40}$/.test(_t)&&!/^(0x)?[0-9A-F]{40}$/.test(_t))||pt(_t))}function pt(_t){const Ft=_t.replace("0x","");let Lt=$(Ft.toLowerCase());for(let _t=0;_t<40;_t++)if(parseInt(Lt[_t],16)>7&&Ft[_t].toUpperCase()!==Ft[_t]||parseInt(Lt[_t],16)<=7&&Ft[_t].toLowerCase()!==Ft[_t])return!1;return!0}function ft(_t){if(void 0===_t)return"";const Ft=_t.toLowerCase().replace("0x",""),Lt=$(Ft);let Yt="0x";for(let _t=0;_t<Ft.length;_t++)parseInt(Lt[_t],16)>7?Yt+=Ft[_t].toUpperCase():Yt+=Ft[_t];return Yt}function dt(_t){if(!Array.isArray(_t))throw new Error(`Value was not an array: ${JSON.stringify(_t)}`);return _t}function gt(_t){return lt(_t)?_t:/^[0-9a-f]{40}$/.test(_t)?"0x"+_t:"0x"+H(nt(_t).substr(2),40)}function mt(_t){return _t instanceof Ye}function yt(_t){return"string"==typeof _t||_t&&_t.constructor&&"String"===_t.constructor.name}function wt(_t){return null!==_t&&!Array.isArray(_t)&&"object"==typeof _t}function vt(_t){return"boolean"==typeof _t}function bt(_t){return Array.isArray(_t)}var tn,nn,rn;function Nt(Ft,Lt){if(!Ft)throw new Error("jsonrpc method should be specified!");if("string"!=typeof Ft)throw new Error(`jsonrpc must be a string, got ${typeof Ft}!`);return _t.messageId++,{jsonrpc:"2.0",id:_t.messageId,method:Ft,params:Lt||[]}}function xt(_t){return Array.isArray(_t)?_t.every(e):e(_t);function e(_t){return!(!_t||"error"in _t||"2.0"!==_t.jsonrpc||"number"!=typeof _t.id||null==_t.result&&void 0===_t.result)}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function kt(_t,Ft,Lt,Yt){var Kt,Zt=arguments.length,le=Zt<3?Ft:null===Yt?Yt=Object.getOwnPropertyDescriptor(Ft,Lt):Yt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(_t,Ft,Lt,Yt);else for(var ve=_t.length-1;ve>=0;ve--)(Kt=_t[ve])&&(le=(Zt<3?Kt(le):Zt>3?Kt(Ft,Lt,le):Kt(Ft,Lt))||le);return Zt>3&&le&&Object.defineProperty(Ft,Lt,le),le}function Tt(_t,Ft){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(_t,Ft)}function At(_t){return ot(_t)}function Et(_t){return void 0===_t?"latest":Bt(_t)}function Bt(_t){return void 0===_t||null==_t?null:function(_t){return"latest"===_t||"pending"===_t||"earliest"===_t}(_t)?_t:nt(_t)}function Ot(_t){return _t.from=_t.from,_t.from&&(_t.from=jt(_t.from)),_t.to&&(_t.to=jt(_t.to)),void 0!==_t.gasPrice&&(_t.gasPrice=et(_t.gasPrice)),void 0!==_t.gas&&(_t.gas=et(_t.gas)),void 0!==_t.value&&(_t.value=et(_t.value)),void 0!==_t.nonce&&(_t.nonce=et(_t.nonce)),_t.data&&!_t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t.data)&&(_t.data="0x"+_t.data),_t}function St(_t){if("string"!=typeof _t)throw new Error("The provided input for transactionId is not a string, got: "+JSON.stringify(_t));if(0!==_t.indexOf("0x"))throw new Error("TransactionID must start with 0x, got: "+JSON.stringify(_t));if(66!==_t.length)throw new Error("TransactionID must be a 32 byte hex, got: "+JSON.stringify(_t));return _t}function Ct(_t){if("object"!=typeof _t)throw new Error("Did not provide transaction options");if(!_t.from)throw new Error('Missing "from" in transaction options');return _t.from=jt(_t.from),_t.to&&(_t.to=jt(_t.to)),void 0!==_t.gasPrice&&(_t.gasPrice=et(_t.gasPrice)),void 0!==_t.gas&&(_t.gas=et(_t.gas)),void 0!==_t.value&&(_t.value=et(_t.value)),void 0!==_t.nonce&&(_t.nonce=et(_t.nonce)),_t.data&&!_t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t.data)&&(_t.data="0x"+_t.data),_t}function It(_t){return _t?(null!==_t.blockNumber&&(_t.blockNumber=Z(_t.blockNumber)),null!==_t.transactionIndex&&(_t.transactionIndex=Z(_t.transactionIndex)),_t.nonce=Z(_t.nonce),_t.gas=Z(_t.gas),_t.gasPrice=ot(_t.gasPrice),_t.value=ot(_t.value),_t):null}function Mt(_t){return _t?(_t.gasLimit=Z(_t.gasLimit),_t.gasUsed=Z(_t.gasUsed),_t.size=Z(_t.size),_t.timestamp=Z(_t.timestamp),null!==_t.number&&(_t.number=Z(_t.number)),_t.difficulty=ot(_t.difficulty),_t.totalDifficulty=ot(_t.totalDifficulty),bt(_t.transactions)&&_t.transactions.forEach((function(Ft,Lt){yt(Ft)||(_t.transactions[Lt]=It(Ft)||_t.transactions[Lt])})),_t):null}function Rt(_t){return _t?(_t.blockNumber&&(_t.blockNumber=Z(_t.blockNumber)),_t.transactionIndex&&(_t.transactionIndex=Z(_t.transactionIndex)),_t.logIndex&&(_t.logIndex=Z(_t.logIndex)),_t):_t}function jt(_t){if(lt(_t))return _t;if(ht(_t))return"0x"+_t;throw new Error(`Invalid address: ${JSON.stringify(_t)}`)}_t.TransactionStatus=void 0,(tn=_t.TransactionStatus||(_t.TransactionStatus={})).pending="pending",tn.confirmed="confirmed",tn.failed="failed",_t.TransactionType=void 0,(nn=_t.TransactionType||(_t.TransactionType={})).queued="queued",nn.dropped="dropped",nn.replaced="replaced",nn.pending="pending",nn.reverted="reverted",nn.confirmed="confirmed",_t.messageId=0;class qt{constructor(_t){this.callName=_t.callName,this.params=_t.params||0,this.inputFormatter=_t.inputFormatter||null,this.outputFormatter=_t.outputFormatter}validateArgs(_t){if(_t.length!==this.params)throw Ft=this.callName,Lt=_t.length,Yt=this.params,new Error(`Invalid number of input parameters to RPC method "${Ft}" given: ${Lt}, expected: ${Yt}`);var Ft,Lt,Yt}formatInput(_t){return this.inputFormatter?this.inputFormatter.map((function(Ft,Lt){return Ft?Ft(_t[Lt]):_t[Lt]})):_t}formatOutput(_t){return null!==_t?this.outputFormatter(_t):null}toPayload(_t){let Ft=this.formatInput(_t);return this.validateArgs(Ft),{method:this.callName,params:Ft}}async execute(_t,...Ft){let Lt=this.toPayload(Ft);if(!_t)throw new Error("Missing RequestManager in method#exec");const Yt=await _t.sendAsync(Lt);return this.formatOutput(Yt)}}class $t{constructor(_t){this.getter=_t.getter,this.outputFormatter=_t.outputFormatter}formatOutput(_t){return this.outputFormatter(_t)}async execute(_t,...Ft){const Lt=await _t.sendAsync({method:this.getter,params:[]});return this.formatOutput(Lt)}}function Ht(_t){return new Promise((Ft=>setTimeout(Ft,_t)))}function Gt(Ft,Lt){const Yt=_t.eth[Lt];if(!Yt)throw new Error(`Could not find the method/property named ${Lt.toString()}`);Object.defineProperty(Ft,Lt,{value:function(){return Yt.execute(this,...arguments)}})}_t.eth=void 0,(rn=_t.eth||(_t.eth={})).eth_getBalance=new qt({callName:"eth_getBalance",params:2,inputFormatter:[jt,Et],outputFormatter:At}),rn.eth_getStorageAt=new qt({callName:"eth_getStorageAt",params:3,inputFormatter:[jt,nt,Et],outputFormatter:X}),rn.eth_getCode=new qt({callName:"eth_getCode",params:2,inputFormatter:[jt,Et],outputFormatter:X}),rn.eth_getBlockByHash=new qt({callName:"eth_getBlockByHash",params:2,inputFormatter:[Bt,function(_t){return!!_t}],outputFormatter:Mt}),rn.eth_getBlockByNumber=new qt({callName:"eth_getBlockByNumber",params:2,inputFormatter:[Bt,function(_t){return!!_t}],outputFormatter:Mt}),rn.eth_getUncleByBlockHashAndIndex=new qt({callName:"eth_getUncleByBlockHashAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:Mt}),rn.eth_getUncleByBlockNumberAndIndex=new qt({callName:"eth_getUncleByBlockNumberAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:Mt}),rn.eth_getBlockTransactionCountByHash=new qt({callName:"eth_getBlockTransactionCountByHash",params:1,inputFormatter:[Bt],outputFormatter:Z}),rn.eth_getBlockTransactionCountByNumber=new qt({callName:"eth_getBlockTransactionCountByNumber",params:1,inputFormatter:[Bt],outputFormatter:Z}),rn.eth_getUncleCountByBlockHash=new qt({callName:"eth_getUncleCountByBlockHash",params:1,inputFormatter:[Bt],outputFormatter:Z}),rn.eth_getUncleCountByBlockNumber=new qt({callName:"eth_getUncleCountByBlockNumber",params:1,inputFormatter:[Bt],outputFormatter:Z}),rn.eth_getTransactionByHash=new qt({callName:"eth_getTransactionByHash",params:1,inputFormatter:[St],outputFormatter:It}),rn.eth_getTransactionByBlockHashAndIndex=new qt({callName:"eth_getTransactionByBlockHashAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:It}),rn.eth_getTransactionByBlockNumberAndIndex=new qt({callName:"eth_getTransactionByBlockNumberAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:It}),rn.eth_getTransactionReceipt=new qt({callName:"eth_getTransactionReceipt",params:1,inputFormatter:[St],outputFormatter:function(_t){return _t?(null!==_t.blockNumber&&(_t.blockNumber=Z(_t.blockNumber)),null!==_t.transactionIndex&&(_t.transactionIndex=Z(_t.transactionIndex)),_t.cumulativeGasUsed=Z(_t.cumulativeGasUsed),_t.gasUsed=Z(_t.gasUsed),_t.logs&&bt(_t.logs)&&(_t.logs=_t.logs.map((function(_t){return Rt(_t)}))),_t.status=Z(_t.status||""),_t):null}}),rn.eth_getTransactionCount=new qt({callName:"eth_getTransactionCount",params:2,inputFormatter:[jt,Et],outputFormatter:Z}),rn.eth_sendRawTransaction=new qt({callName:"eth_sendRawTransaction",params:1,inputFormatter:[null],outputFormatter:X}),rn.web3_sha3=new qt({callName:"web3_sha3",params:1,inputFormatter:[null],outputFormatter:X}),rn.eth_sendTransaction=new qt({callName:"eth_sendTransaction",params:1,inputFormatter:[Ct],outputFormatter:X}),rn.eth_sign=new qt({callName:"eth_sign",params:2,inputFormatter:[jt,null],outputFormatter:X}),rn.eth_call=new qt({callName:"eth_call",params:2,inputFormatter:[Ot,Et],outputFormatter:X}),rn.eth_estimateGas=new qt({callName:"eth_estimateGas",params:1,inputFormatter:[Ot],outputFormatter:Z}),rn.eth_submitWork=new qt({callName:"eth_submitWork",params:3,inputFormatter:[null,null,null],outputFormatter:tt}),rn.eth_getWork=new qt({callName:"eth_getWork",params:0,inputFormatter:[],outputFormatter:dt}),rn.eth_coinbase=new $t({getter:"eth_coinbase",outputFormatter:gt}),rn.eth_mining=new $t({getter:"eth_mining",outputFormatter:tt}),rn.eth_hashrate=new $t({getter:"eth_hashrate",outputFormatter:Z}),rn.eth_syncing=new $t({getter:"eth_syncing",outputFormatter:function(_t){return _t?(_t.startingBlock=Z(_t.startingBlock),_t.currentBlock=Z(_t.currentBlock),_t.highestBlock=Z(_t.highestBlock),_t.knownStates&&(_t.knownStates=Z(_t.knownStates),_t.pulledStates=Z(_t.pulledStates)),_t):_t}}),rn.eth_gasPrice=new $t({getter:"eth_gasPrice",outputFormatter:At}),rn.eth_accounts=new $t({getter:"eth_accounts",outputFormatter:dt}),rn.eth_blockNumber=new $t({getter:"eth_blockNumber",outputFormatter:Z}),rn.eth_protocolVersion=new $t({getter:"eth_protocolVersion",outputFormatter:Z}),rn.web3_clientVersion=new $t({getter:"web3_clientVersion",outputFormatter:Y}),rn.net_version=new $t({getter:"net_version",outputFormatter:Y}),rn.shh_version=new qt({callName:"shh_version",params:0,inputFormatter:[],outputFormatter:Z}),rn.shh_post=new qt({callName:"shh_post",params:1,inputFormatter:[null],outputFormatter:tt}),rn.personal_newAccount=new qt({callName:"personal_newAccount",params:1,inputFormatter:[null],outputFormatter:gt}),rn.personal_importRawKey=new qt({callName:"personal_importRawKey",params:2,inputFormatter:[null,null],outputFormatter:gt}),rn.personal_sign=new qt({callName:"personal_sign",params:3,inputFormatter:[Q,jt,null],outputFormatter:X}),rn.personal_ecRecover=new qt({callName:"personal_ecRecover",params:2,inputFormatter:[Q,null],outputFormatter:gt}),rn.personal_unlockAccount=new qt({callName:"personal_unlockAccount",params:3,inputFormatter:[jt,null,K],outputFormatter:tt}),rn.personal_sendTransaction=new qt({callName:"personal_sendTransaction",params:2,inputFormatter:[Ct,null],outputFormatter:X}),rn.personal_lockAccount=new qt({callName:"personal_lockAccount",params:1,inputFormatter:[jt],outputFormatter:tt}),rn.personal_listAccounts=new $t({getter:"personal_listAccounts",outputFormatter:dt}),rn.net_listening=new $t({getter:"net_listening",outputFormatter:tt}),rn.net_peerCount=new $t({getter:"net_peerCount",outputFormatter:Z}),rn.eth_newFilter=new qt({callName:"eth_newFilter",params:1,inputFormatter:[function(_t){return _t}],outputFormatter:nt}),rn.eth_getLogs=new qt({callName:"eth_getLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),rn.eth_newBlockFilter=new qt({callName:"eth_newBlockFilter",params:0,inputFormatter:[],outputFormatter:nt}),rn.eth_newPendingTransactionFilter=new qt({callName:"eth_newPendingTransactionFilter",params:0,inputFormatter:[],outputFormatter:nt}),rn.eth_uninstallFilter=new qt({callName:"eth_uninstallFilter",params:1,inputFormatter:[nt],outputFormatter:tt}),rn.eth_getFilterLogs=new qt({callName:"eth_getFilterLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),rn.eth_getFilterChanges=new qt({callName:"eth_getFilterChanges",params:1,inputFormatter:[nt],outputFormatter:dt}),rn.eth_submitHashrate=new qt({callName:"eth_submitHashrate",params:2,inputFormatter:[null,null],outputFormatter:tt}),rn.shh_newIdentity=new qt({callName:"shh_newIdentity",params:0,inputFormatter:[],outputFormatter:X}),rn.shh_hasIdentity=new qt({callName:"shh_hasIdentity",params:1,inputFormatter:[null],outputFormatter:tt}),rn.shh_newGroup=new qt({callName:"shh_newGroup",params:0,inputFormatter:[],outputFormatter:X}),rn.shh_addToGroup=new qt({callName:"shh_addToGroup",params:1,inputFormatter:[null],outputFormatter:tt}),rn.shh_newFilter=new qt({callName:"shh_newFilter",params:1,inputFormatter:[null],outputFormatter:nt}),rn.shh_uninstallFilter=new qt({callName:"shh_uninstallFilter",params:1,inputFormatter:[null],outputFormatter:tt}),rn.shh_getLogs=new qt({callName:"shh_getLogs",params:1,inputFormatter:[null],outputFormatter:dt}),rn.shh_getFilterMessages=new qt({callName:"shh_getFilterMessages",params:1,inputFormatter:[null],outputFormatter:dt}),rn.shh_getFilterChanges=new qt({callName:"shh_getFilterChanges",params:1,inputFormatter:[null],outputFormatter:dt}),rn.shh_getMessages=new qt({callName:"shh_getMessages",params:1,inputFormatter:[null],outputFormatter:dt});class zt{constructor(_t){this.provider=_t,this.requests=new Map}async sendAsync(_t){const Ft=await this.provider;if(!Ft)throw new Error("Provider not set or invalid");let Lt=Nt(_t.method,_t.params);const Kt=Yt();return this.requests.set(Lt.id,Kt),Ft.sendAsync(Lt,((_t,Ft)=>{this.requests.delete(Lt.id),_t?Kt.reject(_t):xt(Ft)?Kt.resolve(Ft.result):Kt.reject(function(_t){let Ft=_t&&_t.error&&_t.error.message?_t.error.message:"Invalid JSON RPC response: "+JSON.stringify(_t);return new Error(Ft)}(Ft))})),Kt}setProvider(_t){this.provider=_t}async getConfirmedTransaction(_t){const Ft=await this.waitForCompletion(_t);if(this.isFailure(Ft))throw new Error(`Transaction "${_t}" failed`);return Ft}async waitForCompletion(Ft,Lt){const Yt=St(Ft);if(await this.isTxDropped(Yt,Lt)){const Ft=await this.getTransactionAndReceipt(Yt);return Object.assign(Object.assign({},Ft),{status:_t.TransactionStatus.failed})}for(;;){const Ft=await this.getTransactionAndReceipt(Yt);if(!this.isPending(Ft)&&Ft.receipt)return Object.assign(Object.assign({},Ft),{status:this.isFailure(Ft)?_t.TransactionStatus.failed:_t.TransactionStatus.confirmed});await Ht(2e3)}}async getTransaction(Ft){let Lt,Yt=null;const Kt=St(Ft);try{const _t=(await this.eth_accounts())[0];_t&&(Yt=await this.eth_getTransactionCount(_t,"latest"))}catch(_t){Yt=null}try{if(Lt=await this.eth_getTransactionByHash(Kt),null==Lt)return null}catch(_t){return null}if(null==Lt.blockNumber){if(null!=Yt){if(Lt.nonce<Yt)return{hash:Kt,type:_t.TransactionType.replaced,nonce:Lt.nonce};if(Lt.nonce>Yt)return{hash:Kt,type:_t.TransactionType.queued,nonce:Lt.nonce}}return Object.assign({type:_t.TransactionType.pending},Lt)}let Zt;try{if(Zt=await this.eth_getTransactionReceipt(Kt),null==Zt||0===Zt.status)return Object.assign({type:_t.TransactionType.reverted},Lt)}catch(_t){return null}return Object.assign(Object.assign({type:_t.TransactionType.confirmed},Lt),{receipt:Zt})}async isTxDropped(_t,Ft=15){let Lt=Ft;for(;Lt>0;){if(null!==await this.getTransactionAndReceipt(_t))return!1;Lt-=1,await Ht(2e3)}return!0}async getTransactionAndReceipt(_t){_t=St(_t);const[Ft,Lt]=await Promise.all([this.eth_getTransactionByHash(_t),this.eth_getTransactionReceipt(_t)]);return Object.assign(Object.assign({},Ft),{receipt:Lt})}isPending(_t){return _t&&null===_t.blockNumber}isFailure(_t){return _t&&(!_t.receipt||0===_t.receipt.status)}}function Jt(_t){return"slice"in _t&&_t.slice||(_t.slice=function(){var Ft=Array.prototype.slice.call(arguments);return new Uint8Array(Array.prototype.slice.apply(_t,Ft))}),_t}function Wt(_t){if(null==_t)throw U("cannot convert null value to array",Qe,{arg:"value",value:_t});if(_t instanceof Uint8Array)return Jt(new Uint8Array(_t));if("string"==typeof _t){let Yt=_t.match(/^(0x)?[0-9a-fA-F]*$/);if(!Yt)throw U("invalid hexidecimal string",Qe,{arg:"value",value:_t});if("0x"!==Yt[1])throw U("hex string must have 0x prefix",Qe,{arg:"value",value:_t});(_t=_t.substring(2)).length%2&&(_t="0"+_t);for(var Ft=[],Lt=0;Lt<_t.length;Lt+=2)Ft.push(parseInt(_t.substr(Lt,2),16));return Jt(new Uint8Array(Ft))}if(function(_t){if(!_t||parseInt(String(_t.length))!=_t.length||"string"==typeof _t)return!1;for(var Ft=0;Ft<_t.length;Ft++){var Lt=_t[Ft];if(Lt<0||Lt>=256||parseInt(String(Lt))!=Lt)return!1}return!0}(_t))return Jt(new Uint8Array(_t));throw U("invalid arrayify value",void 0,{arg:"value",value:_t,type:typeof _t})}function Vt(_t,Ft,Lt){Object.defineProperty(_t,Ft,{enumerable:!0,value:Lt,writable:!1})}kt([Gt,Tt("design:type",Function)],zt.prototype,"web3_clientVersion",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"web3_sha3",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_version",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_peerCount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_listening",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_protocolVersion",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_syncing",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_coinbase",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_mining",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_hashrate",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_gasPrice",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_accounts",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_blockNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBalance",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getStorageAt",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionCount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getCode",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sign",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sendTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sendRawTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_call",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_estimateGas",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockByNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockHashAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockNumberAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionReceipt",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleByBlockHashAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleByBlockNumberAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newBlockFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newPendingTransactionFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_uninstallFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getFilterChanges",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getFilterLogs",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getLogs",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getWork",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_submitWork",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_submitHashrate",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_post",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_version",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newIdentity",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_hasIdentity",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newGroup",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_addToGroup",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_uninstallFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_getFilterChanges",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_getMessages",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_unlockAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_newAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_listAccounts",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_lockAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_importRawKey",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_sendTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_sign",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_ecRecover",void 0);const on=new Ye(-1),sn=new Ye(0),an=new Ye(1),cn=new Ye("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Qt(_t){return function(_t,Ft){function n(Ft){return new Error('unexpected character "'+_t[Ft]+'" at position '+Ft+' in "'+_t+'"')}for(var Lt={type:"",name:"",state:{allowType:!0}},Yt=Lt,Kt=0;Kt<_t.length;Kt++){var Zt=_t[Kt];switch(Zt){case"(":if(!Yt.state.allowParams)throw n(Kt);Yt.state.allowType=!1,Yt.type=te(Yt.type),Yt.components=[{type:"",name:"",parent:Yt,state:{allowType:!0}}],Yt=Yt.components[0];break;case")":delete Yt.state,"indexed"===Yt.name&&(Yt.indexed=!0,Yt.name=""),Yt.type=te(Yt.type);var le=Yt;if(!(Yt=Yt.parent))throw n(Kt);delete le.parent,Yt.state.allowParams=!1,Yt.state.allowName=!0,Yt.state.allowArray=!0;break;case",":delete Yt.state,"indexed"===Yt.name&&(Yt.indexed=!0,Yt.name=""),Yt.type=te(Yt.type);var ve={type:"",name:"",parent:Yt.parent,state:{allowType:!0}};Yt.parent.components.push(ve),delete Yt.parent,Yt=ve;break;case" ":Yt.state.allowType&&""!==Yt.type&&(Yt.type=te(Yt.type),delete Yt.state.allowType,Yt.state.allowName=!0,Yt.state.allowParams=!0),Yt.state.allowName&&""!==Yt.name&&("indexed"===Yt.name?(Yt.indexed=!0,Yt.name=""):Yt.state.allowName=!1);break;case"[":if(!Yt.state.allowArray)throw n(Kt);Yt.type+=Zt,Yt.state.allowArray=!1,Yt.state.allowName=!1,Yt.state.readArray=!0;break;case"]":if(!Yt.state.readArray)throw n(Kt);Yt.type+=Zt,Yt.state.readArray=!1,Yt.state.allowArray=!0,Yt.state.allowName=!0;break;default:if(Yt.state.allowType)Yt.type+=Zt,Yt.state.allowParams=!0,Yt.state.allowArray=!0;else if(Yt.state.allowName)Yt.name+=Zt,delete Yt.state.allowArray;else{if(!Yt.state.readArray)throw n(Kt);Yt.type+=Zt}}}if(Yt.parent)throw new Error("unexpected eof");return delete Lt.state,"indexed"===Yt.name&&(Yt.indexed=!0,Yt.name=""),Lt.type=te(Lt.type),Lt}(_t)}function te(_t){return _t.match(/^uint($|[^1-9])/)?_t="uint256"+_t.substring(4):_t.match(/^int($|[^1-9])/)&&(_t="int256"+_t.substring(3)),_t}const un=new RegExp(/^bytes([0-9]*)$/),ln=new RegExp(/^(u?int)([0-9]*)$/),dn=new RegExp(/^(.*)\[([0-9]*)\]$/),oe=function(_t,Ft){var Lt=_t.match(ln);return Lt&&parseInt(Lt[2])<=48?Ft.toNumber():Ft};class ie{constructor(_t,Ft,Lt,Yt="",Kt){this.coerceFunc=_t,this.name=Ft,this.type=Lt,this.localName=Yt,this.dynamic=Kt}}class se extends ie{constructor(_t){super(_t.coerceFunc,_t.name,_t.type,void 0,_t.dynamic),Vt(this,"coder",_t)}encode(_t){return this.coder.encode(_t)}decode(_t,Ft){return this.coder.decode(_t,Ft)}}class ae extends ie{constructor(_t,Ft){super(_t,"null","",Ft,!1)}encode(_t){return Wt([])}decode(_t,Ft){if(Ft>_t.length)throw new Error("invalid null");return{consumed:0,value:this.coerceFunc("null",void 0)}}}function ce(_t,Ft){return new Ye(_t.toString(2).substr(-Ft),2)}class ue extends ie{constructor(_t,Ft,Lt,Yt){const Kt=(Lt?"int":"uint")+8*Ft;super(_t,Kt,Kt,Yt,!1),this.size=Ft,this.signed=Lt}encode(_t){try{let Ft=ot(_t);if(this.signed){let _t=ce(cn,8*this.size-1);if(Ft.gt(_t))throw new Error("out-of-bounds");if(_t=_t.plus(an).multipliedBy(on),Ft.lt(_t))throw new Error("out-of-bounds")}else if(Ft.lt(sn)||Ft.gt(ce(cn,8*this.size)))throw new Error("out-of-bounds");Ft=ce(st(Ft,8*this.size),8*this.size),this.signed&&(Ft=st(ut(Ft,8*this.size),256));let Lt=H(st(Ft).toString(16),64);if(-1!=Lt.indexOf("NaN"))throw U("invalid number value, NaN",Qe,{arg:this.localName,coderType:this.name,value:_t,v:Ft,twosComplement:st(Ft),twosComplement16:st(Ft).toString(16),pad:H(st(Ft).toString(16),64),size:this.size});return D(Lt)}catch(Ft){throw U("invalid number value",Qe,{arg:this.localName,coderType:this.name,value:_t,message:Ft.toString()})}}decode(_t,Ft){if(_t.length<Ft+32)throw U("insufficient data for "+this.name+" type",Qe,{arg:this.localName,coderType:this.name,value:nt(_t.slice(Ft,Ft+32))});var Lt=32-this.size,Yt=new Ye(q(_t.slice(Ft+Lt,Ft+32)),16);return Yt=this.signed?ut(Yt,8*this.size):ce(Yt,8*this.size),{consumed:32,value:this.coerceFunc(this.name,Yt)}}}var hn=new ue((function(_t,Ft){return Ft}),32,!1,"none");class he extends ie{constructor(_t,Ft,Lt){const Yt="bytes"+Ft;super(_t,Yt,Yt,Lt,!1),this.length=Ft}encode(_t){var Ft=new Uint8Array(32);try{if("string"==typeof _t&&_t.length%2!=0)throw new Error("hex string cannot be odd-length");let Lt=Wt(_t);if(Lt.length>this.length)throw new Error("incorrect data length");Ft.set(Lt)}catch(Ft){throw U("invalid "+this.name+" value. Use hex strings or Uint8Array",Qe,{arg:this.localName,coderType:this.name,value:Ft.value||_t,details:Ft.message})}return Ft}decode(_t,Ft){if(_t.length<Ft+32)throw U("insufficient data for "+this.name+" type",Qe,{arg:this.localName,coderType:this.name,value:nt(_t.slice(Ft,Ft+32))});return{consumed:32,value:this.coerceFunc(this.name,_t.slice(Ft,Ft+this.length))}}}function pe(_t){var Ft=32*Math.ceil(_t.length/32),Lt=new Uint8Array(Ft-_t.length);return z(hn.encode(_t.length),_t,Lt)}function fe(_t,Ft,Lt){if(_t.length<Ft+32)throw U("insufficient data for dynamicBytes length",Qe,{arg:Lt,coderType:"dynamicBytes",value:nt(_t.slice(Ft,Ft+32))});var Yt=hn.decode(_t,Ft).value;try{Yt=Yt.toNumber()}catch(_t){throw _t("dynamic bytes count too large",Qe,{arg:Lt,coderType:"dynamicBytes",value:Yt.toString()})}if(_t.length<Ft+32+Yt)throw U("insufficient data for dynamicBytes type",Qe,{arg:Lt,coderType:"dynamicBytes",value:nt(_t.slice(Ft,Ft+32+Yt))});return{consumed:32+32*Math.ceil(Yt/32),value:_t.slice(Ft+32,Ft+32+Yt)}}function de(_t){return 32*Math.ceil(_t/32)}function ge(_t,Ft){if(Array.isArray(Ft));else{if(!Ft||"object"!=typeof Ft)throw U("invalid tuple value",Qe,{coderType:"tuple",value:Ft});var Lt=[];_t.forEach((function(_t){Lt.push(Ft[_t.localName])})),Ft=Lt}if(_t.length!==Ft.length)throw U("types/value length mismatch",Qe,{coderType:"tuple",value:Ft});var Yt=[];_t.forEach((function(_t,Lt){Yt.push({dynamic:_t.dynamic,value:_t.encode(Ft[Lt])})}));var Kt=0,Zt=0;Yt.forEach((function(_t){_t.dynamic?(Kt+=32,Zt+=de(_t.value.length)):Kt+=de(_t.value.length)}));var le=0,ve=Kt,Ce=new Uint8Array(Kt+Zt);return Yt.forEach((function(_t){_t.dynamic?(Ce.set(hn.encode(ve),le),le+=32,Ce.set(_t.value,ve),ve+=de(_t.value.length)):(Ce.set(_t.value,le),le+=de(_t.value.length))})),Ce}class me extends Array{}class ye extends ie{constructor(_t,Ft,Lt,Yt){super(_t,"array",Ft.type+"["+(Lt>=0?Lt:"")+"]",Yt,-1===Lt||Ft.dynamic),this.coder=Ft,this.length=Lt}encode(_t){if(!Array.isArray(_t))throw U("expected array value",Qe,{arg:this.localName,coderType:"array",value:_t});var Ft=this.length,Lt=new Uint8Array(0);-1===Ft&&(Ft=_t.length,Lt=hn.encode(Ft)),function(_t,Ft,Lt){if(Lt||(Lt=""),_t<Ft)throw U("missing argument"+Lt,"MISSING_ARGUMENT",{count:_t,expectedCount:Ft});if(_t>Ft)throw U("too many arguments"+Lt,"UNEXPECTED_ARGUMENT",{count:_t,expectedCount:Ft})}(Ft,_t.length,"in coder array"+(this.localName?" "+this.localName:""));for(var Yt=[],Kt=0;Kt<_t.length;Kt++)Yt.push(this.coder);return z(Lt,ge(Yt,_t))}decode(_t,Ft){var Lt=0,Yt=this.length;if(-1===Yt){try{var Kt=hn.decode(_t,Ft)}catch(_t){throw _t("insufficient data for dynamic array length",Qe,{arg:this.localName,coderType:"array",value:_t.value})}try{Yt=Kt.value.toNumber()}catch(_t){throw _t("array count too large",Qe,{arg:this.localName,coderType:"array",value:Kt.value.toString()})}Lt+=Kt.consumed,Ft+=Kt.consumed}for(var Zt=[],le=0;le<Yt;le++)Zt.push(new se(this.coder));var ve=function(_t,Ft,Lt){var Yt=Lt,Kt=0,Zt=[];return _t.forEach((function(_t){if(_t.dynamic){var le=hn.decode(Ft,Lt);(ve=_t.decode(Ft,Yt+le.value.toNumber())).consumed=le.consumed}else var ve=_t.decode(Ft,Lt);null!=ve.value&&Zt.push(ve.value),Lt+=ve.consumed,Kt+=ve.consumed})),{value:Zt,consumed:Kt}}(Zt,_t,Ft);return ve.consumed+=Lt,ve.value=this.coerceFunc(this.type,ve.value),ve}}class we extends ie{constructor(_t,Ft,Lt){var Yt=!1,Kt=[];Ft.forEach((function(_t){_t.dynamic&&(Yt=!0),Kt.push(_t.type)})),super(_t,"tuple","tuple("+Kt.join(",")+")",Lt,Yt),this.coders=Ft}encode(_t){return ge(this.coders,_t)}decode(_t,Ft){var Lt=function(_t,Ft,Lt){var Yt=Lt,Kt=0,Zt=new me;return _t.forEach((function(_t){if(_t.dynamic){var le=hn.decode(Ft,Lt);(ve=_t.decode(Ft,Yt+le.value.toNumber())).consumed=le.consumed}else var ve=_t.decode(Ft,Lt);null!=ve.value&&Zt.push(ve.value),Lt+=ve.consumed,Kt+=ve.consumed})),_t.forEach((function(_t,Ft){let Lt=_t.localName;Lt&&("length"===Lt&&(Lt="_length"),null==Zt[Lt]&&(Zt[Lt]=Zt[Ft]))})),{value:Zt,consumed:Kt}}(this.coders,_t,Ft);return Lt.value=this.coerceFunc(this.type,Lt.value),Lt}}const pn={address:class extends ie{constructor(_t,Ft){super(_t,"address","address",Ft,!1)}encode(_t){let Ft=new Uint8Array(32);const Lt=_t.trim();if(!ht(Lt))throw U("invalid address format",Qe,{arg:this.localName,coderType:"address",value:_t});try{Ft.set(D(jt(Lt)),12)}catch(Ft){throw U(`invalid address (${Ft.message})`,Qe,{arg:this.localName,coderType:"address",value:_t})}return Ft}decode(_t,Ft){if(_t.length<Ft+32)throw U("insufficuent data for address type",Qe,{arg:this.localName,coderType:"address",value:nt(_t.slice(Ft,Ft+32)),missingBytes:Ft+32-_t.length});return{consumed:32,value:this.coerceFunc("address",ct(nt(_t.slice(Ft+12,Ft+32))))}}},bool:class extends ie{constructor(_t,Ft){super(_t,"bool","bool",Ft,!1)}encode(_t){return hn.encode(_t?1:0)}decode(_t,Ft){try{var Lt=hn.decode(_t,Ft)}catch(_t){if("insufficient data for uint256 type"===_t.reason)throw U("insufficient data for boolean type",Qe,{arg:this.localName,coderType:"boolean",value:_t.value});throw _t}return{consumed:Lt.consumed,value:this.coerceFunc("bool",!Lt.value.isZero())}}},string:class extends ie{constructor(_t,Ft){super(_t,"string","string",Ft,!0)}encode(_t){if("string"!=typeof _t)throw U("invalid string value",Qe,{arg:this.localName,coderType:"string",value:_t});return pe(M(_t))}decode(_t,Ft){var Lt=fe(_t,Ft,this.localName);return Lt.value=this.coerceFunc("string",R(Lt.value)),Lt}},bytes:class extends ie{constructor(_t,Ft){super(_t,"bytes","bytes",Ft,!0)}encode(_t){try{return pe(Wt(_t))}catch(_t){throw _t("invalid bytes value",Qe,{arg:this.localName,coderType:"bytes",value:_t.value})}}decode(_t,Ft){var Lt=fe(_t,Ft,this.localName);return Lt.value=this.coerceFunc("bytes",Lt.value),Lt}},function:class extends he{constructor(_t,Ft){super(_t,24,Ft)}}};function be(_t,Ft){var Lt,Yt=pn[Ft.type];if(Yt)return new Yt(_t,Ft.name);if(Lt=Ft.type.match(ln)){let Yt=parseInt(Lt[2]||"256");if(0===Yt||Yt>256||Yt%8!=0)throw U("invalid "+Lt[1]+" bit length",Qe,{arg:"param",value:Ft});return new ue(_t,Yt/8,"int"===Lt[1],Ft.name)}if(Lt=Ft.type.match(un)){let Yt=parseInt(Lt[1]);if(0===Yt||Yt>32)throw U("invalid bytes length",Qe,{arg:"param",value:Ft});return new he(_t,Yt,Ft.name)}if(Lt=Ft.type.match(dn)){const Yt=Object.assign({},Ft);let Kt=parseInt(Lt[2]||"-1");return Yt.type=Lt[1],new ye(_t,be(_t,Yt),Kt,Ft.name)}if("tuple"===Ft.type.substring(0,5))return function(_t,Ft,Lt){Ft||(Ft=[]);var Yt=Ft.map((Ft=>be(_t,Ft)));return new we(_t,Yt,Lt)}(_t,Ft.components,Ft.name);if(""===Ft.type)return new ae(_t,Ft.name);throw U("invalid type",Qe,{arg:"type",value:Ft.type,fullType:Ft})}class _e{constructor(_t){!function(_t,Ft){if(!(_t instanceof Ft))throw U("missing new","MISSING_NEW",{name:Ft.name})}(this,_e),_t||(_t=oe),Vt(this,"coerceFunc",_t)}encode(_t,Ft){if(_t.length!==Ft.length)throw U("types/values length mismatch",Qe,{count:{types:_t.length,values:Ft.length},value:{types:_t,values:Ft}});const Lt=_t.map((_t=>"string"==typeof _t?Qt(_t):_t)).map((_t=>be(this.coerceFunc,_t)));return new we(this.coerceFunc,Lt,"_").encode(Ft)}decode(_t,Ft){const Lt=_t.map((_t=>"string"==typeof _t?Qt(_t):_t)).map((_t=>be(this.coerceFunc,_t)));return new we(this.coerceFunc,Lt,"_").decode(Ft,0).value}}const fn=new _e;var mn;!function(_t){_t.encodeParams=function(_t,Ft){return q(fn.encode(_t,Ft))},_t.decodeParams=function(_t,Ft){if(_t.length>0&&(!Ft||"0x"===Ft||"0X"===Ft))throw new Error("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return fn.decode(_t,D("0x"+Ft.replace(/0x/i,"")))}}(mn||(mn={}));class xe{constructor(_t){this.json=_t,this._inputTypes=_t.inputs||[],this._outputTypes=_t.outputs||[],this._constant=!!_t.constant,this._payable=!!_t.payable||"payable"===_t.stateMutability,this.needsToBeTransaction=this._payable||"constant"in _t&&!_t.constant||"nonpayable"===_t.stateMutability,this._name=G(_t)}extractDefaultBlock(_t){return _t.length>this._inputTypes.length&&!wt(_t[_t.length-1])&&Et(_t.pop())||"latest"}validateArgs(_t){if(_t.some((_t=>void 0===_t)))throw new Error("Invalid call, some arguments are undefined");let Ft=_t.filter((function(_t){return!(!0===wt(_t)&&!1===bt(_t)&&!1===mt(_t)&&!(_t instanceof Uint8Array))}));if(Ft.length!==this._inputTypes.length)throw Lt=Ft.length,Yt=this._inputTypes.length,new Error(`Invalid number of arguments to Solidity function. given: ${Lt}, expected: ${Yt}`);var Lt,Yt}toPayload(_t){let Ft={to:void 0,data:void 0,value:void 0,from:void 0};_t.length>this._inputTypes.length&&wt(_t[_t.length-1])&&(Ft=_t.pop()),this.validateArgs(_t);const Lt=this.signature();let Yt=mn.encodeParams(this._inputTypes,_t);return 0==Yt.indexOf("0x")&&(Yt=Yt.substr(2)),Ft.data="0x"+Lt+Yt,Ft}signature(){return $(this._name).slice(0,8)}unpackOutput(_t){if(!_t)return;const Ft=_t.length>=2?_t.slice(2):_t;let Lt=mn.decodeParams(this._outputTypes,Ft);return 1===Lt.length?Lt[0]:Lt}async execute(_t,Ft,...Lt){if(!_t)throw new Error(`Cannot call function ${this.displayName()} because there is no requestManager`);if(this.needsToBeTransaction){const Yt=this.toPayload(Lt);if(Yt.to=Ft,Yt.value>0&&!this._payable)throw new Error("Cannot send value to non-payable function");if(!Yt.from)throw new Error('Missing "from" in transaction options');return await _t.eth_sendTransaction(Yt)}{const Yt=this.extractDefaultBlock(Lt),Kt=this.toPayload(Lt);Kt.to=Ft;const Zt=await _t.eth_call(Kt,Yt);return this.unpackOutput(Zt)}}estimateGas(_t,Ft,...Lt){if(!(_t instanceof zt))throw new Error("estimateGas needs to receive a RequestManager as first argument");let Yt=this.toPayload(Lt);return Yt.to=Ft,_t.eth_estimateGas(Yt)}displayName(){return W(this._name)}typeName(){return V(this._name)||"void"}attachToContract(_t){let Ft=this.displayName();const Lt=Object.assign(((...Ft)=>this.execute(_t.requestManager,_t.address,...Ft)),{estimateGas:this.estimateGas.bind(this,_t.requestManager,_t.address),toPayload:(..._t)=>this.toPayload(_t)});_t[Ft]||(_t[Ft]=Lt),_t[Ft][this.typeName()]=Lt}}function ke(_t){if(null==_t)return null;const Ft=String(_t).toString();return 0===Ft.indexOf("0x")?Ft:q(M(Ft))}class Te{constructor(_t){this.requestManager=_t,this.isStarted=!1,this.isDisposed=!1,this.formatter=_t=>_t,this.filterId=Yt(),this.callbacks=[],this.stopSemaphore=Yt()}async watch(_t){if(this.isDisposed)throw new Error("The filter was disposed");_t&&(this.callbacks.push(_t),this.isStarted||await this.start())}async start(){if(this.isDisposed)throw new Error("The filter was disposed");if(!this.isStarted){this.isStarted=!0;try{const _t=await this.getNewFilter();if(!_t)throw new Error("Could not create a filter, response: "+JSON.stringify(_t));this.filterId.resolve(_t)}catch(_t){throw _t}this.stopSemaphore=Yt(),await this.poll()}}async stop(){if(!this.isStarted)return;if(this.isDisposed)return;this.isDisposed=!0;const _t=await this.filterId;if(this.isStarted=!1,this.stopSemaphore&&await this.stopSemaphore,!0!==await this.uninstall())throw new Error(`Couldn't stop the eth filter: ${_t}`)}async poll(){if(this.isStarted){if(this.callbacks.length){const _t=await this.getChanges();this.callbacks.forEach((Ft=>{this.formatter?_t.forEach((_t=>{Ft(this.formatter(_t))})):_t.forEach((_t=>Ft(_t)))}))}this.stopSemaphore.resolve(1),this.isStarted&&(this.stopSemaphore=Yt(),setTimeout((_t=()=>this.poll(),function(){_t().catch((_t=>console.error(_t)))}),500))}else this.stopSemaphore.resolve(1);var _t}}class Ae extends Te{constructor(_t,Ft,Lt=(_t=>_t)){super(_t),this.requestManager=_t,this.options=Ft,this.formatter=Lt,this.options=this.options||{},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(_t){return ke(_t)})),this.options={topics:this.options.topics,address:this.options.address?this.options.address:void 0,fromBlock:"number"==typeof this.options.fromBlock||"string"==typeof this.options.fromBlock?Bt(this.options.fromBlock)||void 0:"latest",toBlock:"number"==typeof this.options.toBlock||"string"==typeof this.options.toBlock?Bt(this.options.toBlock)||void 0:"latest"}}async getLogs(){this.isStarted||await this.start();const _t=await this.filterId;return this.requestManager.eth_getFilterLogs(_t)}async getNewFilter(){return this.requestManager.eth_newFilter(this.options)}async getChanges(){const _t=await this.filterId;return this.requestManager.eth_getFilterChanges(_t)}async uninstall(){const _t=await this.filterId;return this.requestManager.eth_uninstallFilter(_t)}}class Ee{constructor(_t,Ft,Lt){this.requestManager=_t,this.address=Lt,this._anonymous=!1,this._params=Ft.inputs||[],this._name=G(Ft),this._anonymous=Ft.anonymous||!1}types(_t){return this._params.filter((function(Ft){return Ft.indexed===_t}))}displayName(){return W(this._name)}typeName(){return V(this._name)||"void"}signature(){return $(this._name)}encode(_t={},Ft={}){let Lt={topics:[],address:this.address};void 0!==Ft.fromBlock&&(Lt.fromBlock=Bt(Ft.fromBlock)||void 0),void 0!==Ft.toBlock&&(Lt.toBlock=Bt(Ft.toBlock)||void 0),Lt.topics=Lt.topics||[],this._anonymous||Lt.topics.push("0x"+this.signature());let Yt=this._params.filter((function(_t){return!0===_t.indexed})).map((function(Ft){let Lt=_t[Ft.name];return null==Lt?null:bt(Lt)?Lt.map((function(_t){return"0x"+mn.encodeParams([Ft],[_t])})):"0x"+mn.encodeParams([Ft],[Lt])}));return Lt.topics=Lt.topics.concat(Yt),Lt}decode(_t){_t.data=_t.data||"",_t.topics=_t.topics||[];let Ft=(this._anonymous?_t.topics:_t.topics.slice(1)).map((function(_t){return _t.slice(2)})).join(""),Lt=mn.decodeParams(this.types(!0),Ft),Yt=_t.data.slice(2),Kt=mn.decodeParams(this.types(!1),Yt);const Zt=this._params.reduce((function(_t,Ft){return _t[Ft.name]=Ft.indexed?Lt.shift():Kt.shift(),_t}),{});return Object.assign(Object.assign({},Rt(_t)),{event:this.displayName(),address:_t.address,args:Zt})}async execute(_t,Ft){let Lt=this.encode(_t,Ft),Yt=this.decode.bind(this);return new Ae(this.requestManager,Lt,Yt)}attachToContract(_t){let Ft=this.execute.bind(this),Lt=this.displayName();_t.events[Lt]||(_t.events[Lt]=Ft),_t.events[Lt][this.typeName()]=this.execute.bind(this,_t)}}class Be{constructor(_t,Ft,Lt){this._requestManager=_t,this._json=Ft,this._address=Lt}encode(_t={}){let Ft={address:this._address};return void 0!==_t.fromBlock&&(Ft.fromBlock=Bt(_t.fromBlock)||void 0),void 0!==_t.toBlock&&(Ft.toBlock=Bt(_t.toBlock)||void 0),Ft}decode(_t){_t.data=_t.data||"";let Ft=bt(_t.topics)&&yt(_t.topics[0])?_t.topics[0].slice(2):"",Lt=this._json.filter((function(_t){return Ft===$(G(_t))}))[0];return Lt?new Ee(this._requestManager,Lt,this._address).decode(_t):Rt(_t)}async execute(_t){let Ft=this.encode(_t),Lt=this.decode.bind(this);return new Ae(this._requestManager,Ft,Lt)}getAllEventsFunction(){return this.execute.bind(this)}}class Oe{constructor(_t,Ft,Lt){var Yt;this.requestManager=_t,this.abi=Ft,this.address=Lt,this.events={},this.transactionHash=null,this.address=Lt,this.abi=Ft,(Yt=this).abi.filter((function(_t){return"function"===_t.type})).map((function(_t){return new xe(_t)})).forEach((function(_t){_t.attachToContract(Yt)})),this.allEvents=function(_t){let Ft=_t.abi.filter((function(_t){return"event"===_t.type})),Lt=new Be(_t.requestManager,Ft,_t.address);return Ft.map((function(Ft){return new Ee(_t.requestManager,Ft,_t.address)})).forEach((function(Ft){Ft.attachToContract(_t)})),Lt.getAllEventsFunction()}(this)}}_t.AbstractFilter=Te,_t.BigNumber=Ye,_t.Contract=Oe,_t.ContractFactory=class{constructor(_t,Ft){this.requestManager=_t,this.abi=Ft}async deploy(..._t){let Ft,Lt=_t[_t.length-1];if(wt(Lt)&&!bt(Lt)&&(Ft=_t.pop()),!Ft)throw new Error("Missing options object");if(!Ft.data||"string"!=typeof Ft.data)throw new Error("Invalid options.data");if(Z(Ft.value)>0&&!(this.abi.filter((function(Ft){return"constructor"===Ft.type&&Ft.inputs.length===_t.length}))[0]||{}).payable)throw new Error("Cannot send value to non-payable constructor");let Kt=(Zt=this.abi,le=_t,Zt.filter((function(_t){return"constructor"===_t.type&&_t.inputs&&_t.inputs.length===le.length})).map((function(_t){return _t.inputs||[]})).map((function(_t){return mn.encodeParams(_t,le)}))[0]||"");var Zt,le;Ft.data+=Kt,Ft.gas||(Ft.gas=await this.requestManager.eth_estimateGas(Ft));const ve=await this.requestManager.eth_sendTransaction(Ft);if(!ve)throw new Error("Error while sending contract creation transaction. A TxHash was not retrieved");const Ce=await async function(_t,Ft){const Lt=Yt();let Kt=0;const o=()=>{Kt++,Kt>50?Lt.reject(new Error("Contract transaction couldn't be found after 50 blocks")):_t.eth_getTransactionReceipt(Ft).then((_t=>{_t&&_t.blockHash?Lt.resolve(_t):setTimeout(o,1e3)}),(_t=>Lt.reject(_t)))};o();const Zt=await Lt,le=await _t.eth_getCode(Zt.contractAddress,"latest");if(le&&le.length>3)return Zt.contractAddress;throw Object.assign(new Error("The contract code couldn't be stored, please check your gas amount."),{response:le,receipt:Zt})}(this.requestManager,ve),Se=await this.at(Ce);return Se.transactionHash=ve,Se}async at(_t){if(!ht(_t))throw new TypeError(`Invalid address ${JSON.stringify(_t)}`);return new Oe(this.requestManager,this.abi,_t)}},_t.EthBlockFilter=class extends Ae{constructor(_t){super(_t,{})}async getNewFilter(){return this.requestManager.eth_newBlockFilter()}},_t.EthFilter=Ae,_t.EthPendingTransactionFilter=class extends Ae{constructor(_t){super(_t,{})}async getNewFilter(){return this.requestManager.eth_newPendingTransactionFilter()}},_t.HTTPProvider=class{constructor(_t,Ft={}){this.host=_t,this.options=Ft,this.debug=!1,this.host=_t||"http://localhost:8545"}send(){throw new Error("Sync requests are deprecated")}sendAsync(_t,Ft){try{let Lt=null;Lt=_t instanceof Array?_t.map((_t=>e(_t))):e(_t);const Yt=this.options.fetch||globalThis.fetch;if(void 0===Yt)throw new Error("There is no global fetch object nor it was provided. Please install and import isomorphic-fetch");const Kt={body:JSON.stringify(Lt),method:"POST",headers:Object.assign(Object.assign({},this.options.headers),{"Content-Type":"application/json"})};this.debug&&console.log("SEND >> "+Kt.body),Yt(this.host,Kt).then((async _t=>{if(_t.ok){const Lt=await _t.json();this.debug&&console.log("RECV << "+JSON.stringify(Lt)),Lt.error?Ft(Object.assign(new Error(Lt.error.json||Lt.error),Lt.error)):Ft(null,Lt)}else this.debug&&console.log("ERR << "+JSON.stringify(_t)),Ft(new Error("External error. response code: "+_t.status))}),(_t=>{this.debug&&console.log("ERR << "+JSON.stringify(_t)),Ft(_t)}))}catch(_t){this.debug&&console.log("ERR << "+JSON.stringify(_t)),Ft(_t)}}},_t.Method=qt,_t.Property=$t,_t.RequestManager=zt,_t.SHHFilter=class extends Te{constructor(_t,Ft){super(_t),this.requestManager=_t,this.options=Ft,this.options=this.options||{topics:[]},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(_t){return ke(_t)})),this.options={topics:this.options.topics,to:this.options.to}}async getMessages(){const _t=await this.filterId;return this.requestManager.shh_getMessages(_t)}async getNewFilter(){return this.requestManager.shh_newFilter(this.options)}async getChanges(){const _t=await this.filterId;return this.requestManager.shh_getFilterChanges(_t)}async uninstall(){const _t=await this.filterId;return this.requestManager.shh_uninstallFilter(_t)}},_t.SolidityEvent=Ee,_t.SolidityFunction=xe,_t.WebSocketProvider=class{constructor(_t,Ft={}){this.url=_t,this.options=Ft,this.isDisposed=!1,this.responseCallbacks=new Map,this.notificationCallbacks=new Set,this.debug=!1,this.lastChunk="",this.connect()}dispose(){this.isDisposed=!0;const _t=this.connection;this.timeout(new Error("Provider disposed.")),_t.then((_t=>_t.close()))}send(){throw new Error("Sync requests are deprecated")}sendAsync(_t,Ft){const Lt=[];let Kt;if(_t instanceof Array)Kt=Promise.all(_t.map((_t=>{const Ft=Yt();try{const Yt=e(_t);Lt.push(Yt),this.responseCallbacks.set(Yt.id,Ft)}catch(_t){Ft.reject(_t)}return Ft})));else{const Ft=Yt();try{const Yt=e(_t);Lt.push(Yt),this.responseCallbacks.set(Yt.id,Ft)}catch(_t){Ft.reject(_t)}Kt=Ft}Kt.then((_t=>Ft(null,_t)),(_t=>Ft(_t))),this.connection.then((_t=>{Lt.forEach((Ft=>{const Lt=JSON.stringify(Ft);this.debug&&console.log("SEND >> "+Lt),_t.send(Lt)}))}),(_t=>{Ft(_t)}))}parseResponse(_t){let Ft=[];return _t.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((_t=>{let Lt=_t;this.lastChunk&&(Lt=this.lastChunk+Lt);let Yt=null;try{Yt=JSON.parse(Lt)}catch(_t){return this.lastChunk=Lt,clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.timeout()}),15e3))}clearTimeout(this.lastChunkTimeout),this.lastChunk="",Yt&&Ft.push(Yt)})),Ft}processMessage(_t){if("id"in _t){const Ft=_t.id,Lt=this.responseCallbacks.get(Ft);if(!Lt)return void console.error("Error: Received a response for an unknown request",_t);this.responseCallbacks.delete(Ft),"error"in _t?Lt.reject(Object.assign(new Error(_t.error.message||_t.error),_t.error)):"result"in _t&&Lt.resolve(_t)}else this.notificationCallbacks.forEach((Ft=>Ft(null,_t)))}timeout(_t){this.connection&&this.connection.isPending||(this.connection=Yt());const Ft=_t||new Error("Connection timeout");this.responseCallbacks.forEach((_t=>_t.reject(Ft))),this.responseCallbacks.clear(),this.isDisposed||setTimeout((()=>this.connect()),1e3)}connect(){this.connection&&!this.connection.isPending&&this.connection.then((_t=>_t.close())),this.connection&&this.connection.isPending||(this.connection=Yt()),this.lastChunk="";let _t=this.options.WebSocketConstructor||("undefined"!=typeof WebSocket?WebSocket:void 0);if(!_t)throw new Error("Please provide a WebSocketConstructor");const Ft=new _t(this.url,this.options.protocol);Ft.onopen=()=>{this.connection.resolve(Ft)},Ft.onerror=_t=>{const Ft=new Error("Error in web socket");Ft.data=_t,this.timeout(Ft)},Ft.onclose=_t=>{this.timeout(new Error(`Connection closed (${_t&&_t.reason||"Unknown reason"})`))},Ft.onmessage=_t=>{let Ft="string"==typeof _t.data?_t.data:"";this.debug&&console.log("RECV << "+_t.data),this.parseResponse(Ft).forEach((_t=>{_t instanceof Array?_t.forEach((_t=>this.processMessage(_t))):this.processMessage(_t)}))}}},_t.bytesToHex=q,_t.bytesToUtf8String=R,_t.concatBytes=z,_t.default=zt,_t.extractDisplayName=W,_t.extractTypeName=V,_t.fromAscii=function(_t,Ft=0){let Lt="";for(let Ft=0;Ft<_t.length;Ft++){let Yt=_t.charCodeAt(Ft).toString(16);Lt+=Yt.length<2?"0"+Yt:Yt}return"0x"+Lt.padEnd(Ft,"0")},_t.fromDecimal=et,_t.fromTwosComplement=ut,_t.fromWei=function(_t,Ft){let Lt=ot(_t).dividedBy(rt(Ft));return mt(_t)?Lt:Lt.toString(10)},_t.getAddress=ct,_t.getValueOfUnit=rt,_t.hexToBytes=D,_t.isAddress=ht,_t.isArray=bt,_t.isBigNumber=mt,_t.isBloom=function(_t){return!!/^(0x)?[0-9a-f]{512}$/i.test(_t)&&!!/^(0x)?[0-9a-f]{512}$/i.test(_t)},_t.isBoolean=vt,_t.isChecksumAddress=pt,_t.isFunction=function(_t){return"function"==typeof _t},_t.isHex=function(_t){return"string"==typeof _t&&/^0x[0-9a-fA-F]+$/.test(_t)},_t.isJson=function(_t){try{return!!JSON.parse(_t)}catch(_t){return!1}},_t.isObject=wt,_t.isStrictAddress=lt,_t.isString=yt,_t.isTopic=function(_t){return!!/^(0x)?[0-9a-f]{64}$/i.test(_t)&&!!/^(0x)?[0-9a-f]{64}$/i.test(_t)},_t.isValidResponse=xt,_t.padLeft=H,_t.padRight=function(_t,Ft,Lt){return _t+new Array(Ft-_t.length+1).join(Lt||"0")},_t.sha3=$,_t.signedIsNegative=at,_t.stringToUtf8Bytes=M,_t.toAddress=gt,_t.toArray=dt,_t.toAscii=function(_t){let Ft="",Lt=0,Yt=_t.length;for("0x"===_t.substring(0,2)&&(Lt=2);Lt<Yt;Lt+=2){let Yt=parseInt(_t.substr(Lt,2),16);Ft+=String.fromCharCode(Yt)}return Ft},_t.toBatchPayload=function(_t){return _t.map((function(_t){return Nt(_t.method,_t.params)}))},_t.toBigNumber=ot,_t.toBoolean=tt,_t.toChecksumAddress=ft,_t.toData=X,_t.toDecimal=Z,_t.toHex=nt,_t.toJsonRpcRequest=Nt,_t.toNullDecimal=K,_t.toString=Y,_t.toStringData=Q,_t.toTwosComplement=st,_t.toWei=function(_t,Ft){let Lt=ot(_t).times(rt(Ft));return mt(_t)?Lt:Lt.toString(10)},_t.transformToFullName=G,Object.defineProperty(_t,"__esModule",{value:!0})})),define("@dcl/crypto-scene-utils",["exports","@decentraland/EthereumController","@decentraland/EnvironmentAPI","eth-connect","@decentraland/web3-provider","@dcl/ecs-scene-utils"],(function(_t,Ft,Lt,Yt,Kt,Zt){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var le,ve,Ce,Se,Ie,Ne,p=function(){return(p=Object.assign||function(_t){for(var Ft,Lt=1,Yt=arguments.length;Lt<Yt;Lt++)for(var Kt in Ft=arguments[Lt])Object.prototype.hasOwnProperty.call(Ft,Kt)&&(_t[Kt]=Ft[Kt]);return _t}).apply(this,arguments)};function y(_t,Ft,Lt,Yt){return new(Lt||(Lt=Promise))((function(Kt,Zt){function r(_t){try{o(Yt.next(_t))}catch(_t){Zt(_t)}}function d(_t){try{o(Yt.throw(_t))}catch(_t){Zt(_t)}}function o(_t){var Ft;_t.done?Kt(_t.value):(Ft=_t.value,Ft instanceof Lt?Ft:new Lt((function(_t){_t(Ft)}))).then(r,d)}o((Yt=Yt.apply(_t,Ft||[])).next())}))}function b(_t,Ft){var Lt,Yt,Kt,Zt,le={label:0,sent:function(){if(1&Kt[0])throw Kt[1];return Kt[1]},trys:[],ops:[]};return Zt={next:d(0),throw:d(1),return:d(2)},"function"==typeof Symbol&&(Zt[Symbol.iterator]=function(){return this}),Zt;function d(Zt){return function(ve){return function(Zt){if(Lt)throw new TypeError("Generator is already executing.");for(;le;)try{if(Lt=1,Yt&&(Kt=2&Zt[0]?Yt.return:Zt[0]?Yt.throw||((Kt=Yt.return)&&Kt.call(Yt),0):Yt.next)&&!(Kt=Kt.call(Yt,Zt[1])).done)return Kt;switch(Yt=0,Kt&&(Zt=[2&Zt[0],Kt.value]),Zt[0]){case 0:case 1:Kt=Zt;break;case 4:return le.label++,{value:Zt[1],done:!1};case 5:le.label++,Yt=Zt[1],Zt=[0];continue;case 7:Zt=le.ops.pop(),le.trys.pop();continue;default:if(!((Kt=(Kt=le.trys).length>0&&Kt[Kt.length-1])||6!==Zt[0]&&2!==Zt[0])){le=0;continue}if(3===Zt[0]&&(!Kt||Zt[1]>Kt[0]&&Zt[1]<Kt[3])){le.label=Zt[1];break}if(6===Zt[0]&&le.label<Kt[1]){le.label=Kt[1],Kt=Zt;break}if(Kt&&le.label<Kt[2]){le.label=Kt[2],le.ops.push(Zt);break}Kt[2]&&le.ops.pop(),le.trys.pop();continue}Zt=Ft.call(_t,le)}catch(_t){Zt=[6,_t],Yt=0}finally{Lt=Kt=0}if(5&Zt[0])throw Zt[1];return{value:Zt[0]?Zt[1]:void 0,done:!0}}([Zt,ve])}}}function m(_t){var Ft="function"==typeof Symbol&&Symbol.iterator,Lt=Ft&&_t[Ft],Yt=0;if(Lt)return Lt.call(_t);if(_t&&"number"==typeof _t.length)return{next:function(){return _t&&Yt>=_t.length&&(_t=void 0),{value:_t&&_t[Yt++],done:!_t}}};throw new TypeError(Ft?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(_t,Ft){var Lt="function"==typeof Symbol&&_t[Symbol.iterator];if(!Lt)return _t;var Yt,Kt,Zt=Lt.call(_t),le=[];try{for(;(void 0===Ft||Ft-- >0)&&!(Yt=Zt.next()).done;)le.push(Yt.value)}catch(_t){Kt={error:_t}}finally{try{Yt&&!Yt.done&&(Lt=Zt.return)&&Lt.call(Zt)}finally{if(Kt)throw Kt.error}}return le}function x(){for(var _t=[],Ft=0;Ft<arguments.length;Ft++)_t=_t.concat(f(arguments[Ft]));return _t}function v(){return Lt.getCurrentRealm().then((function(_t){return"http://127.0.0.1:8000"!=_t.domain?_t.domain:"https://peer.decentraland.org"}))}function g(_t,Ft){var Lt=Ft.id,Yt=Ft.data,Kt=Ft.rarity,Zt=Ft.i18n,le=Ft.thumbnail,ve=Ft.image,Ce=Yt.category,Se=Yt.tags,Ne=Yt.hides,Fe=Yt.replaces,Re=Yt.representations.map(T),Pe=le.substring(le.lastIndexOf("/")+1),Le=ve?ve.substring(ve.lastIndexOf("/")+1):void 0;return{id:Lt,type:Ie.Wearable,category:Ce,tags:Se,hides:Ne,replaces:Fe,rarity:Kt,representations:Re,i18n:Zt,thumbnail:Pe,image:Le,baseUrl:_t+"/content/contents/"}}function T(_t){var Ft=_t.contents,Lt=_t.bodyShapes,Yt=function(_t,Ft){var Lt={};for(var Yt in _t)Object.prototype.hasOwnProperty.call(_t,Yt)&&Ft.indexOf(Yt)<0&&(Lt[Yt]=_t[Yt]);if(null!=_t&&"function"==typeof Object.getOwnPropertySymbols){var Kt=0;for(Yt=Object.getOwnPropertySymbols(_t);Kt<Yt.length;Kt++)Ft.indexOf(Yt[Kt])<0&&Object.prototype.propertyIsEnumerable.call(_t,Yt[Kt])&&(Lt[Yt[Kt]]=_t[Yt[Kt]])}return Lt}(_t,["contents","bodyShapes"]),Kt=Ft.map((function(_t){var Ft=_t.key,Lt=_t.url;return{file:Ft,hash:Lt.substring(Lt.lastIndexOf("/")+1)}}));return p(p({},Yt),{bodyShapes:Lt,contents:Kt})}function h(_t){return y(this,void 0,void 0,(function(){var Lt,Yt;return b(this,(function(Kt){switch(Kt.label){case 0:return _t?(Yt="https://peer.decentraland.org",[3,3]):[3,1];case 1:return[4,v()];case 2:Yt=Kt.sent(),Kt.label=3;case 3:return Lt=Yt,_t?[3,5]:[4,Ft.getUserAccount().then((function(_t){return _t.toLowerCase()}))];case 4:_t=Kt.sent(),Kt.label=5;case 5:return[4,fetch(Lt+"/content/entities/profiles?pointer="+(null==_t?void 0:_t.toLowerCase())).then((function(_t){return _t.json()})).then((function(_t){return _t.length?_t[0]:_t}))];case 6:return[2,Kt.sent()]}}))}))}function _(_t){return y(this,void 0,void 0,(function(){var Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Ne,Fe;return b(this,(function(Re){switch(Re.label){case 0:return _t?[3,2]:[4,Ft.getUserAccount()];case 1:_t=Re.sent(),Re.label=2;case 2:return[4,v()];case 3:return Lt=Re.sent(),[4,fetch(Lt+"/lambdas/collections/wearables-by-owner/"+_t)];case 4:return[4,Re.sent().json()];case 5:Yt=Re.sent(),Kt=[];try{for(Zt=m(Yt),le=Zt.next();!le.done;le=Zt.next())for(ve=le.value,Ce=ve.urn,Se=ve.amount,Ie=0;Ie<Se;Ie++)Kt.push(Ce)}catch(_t){Ne={error:_t}}finally{try{le&&!le.done&&(Fe=Zt.return)&&Fe.call(Zt)}finally{if(Ne)throw Ne.error}}return[2,Kt]}}))}))}function w(_t){return y(this,void 0,void 0,(function(){var Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Ne,Fe,Re;return b(this,(function(Pe){switch(Pe.label){case 0:return _t?[3,2]:[4,Ft.getUserAccount()];case 1:_t=Pe.sent(),Pe.label=2;case 2:return[4,v()];case 3:return Lt=Pe.sent(),[4,fetch(Lt+"/lambdas/collections/wearables-by-owner/"+_t+"?includeDefinitions")];case 4:return[4,Pe.sent().json()];case 5:Yt=Pe.sent(),Kt=[];try{for(Zt=m(Yt),le=Zt.next();!le.done;le=Zt.next())if(ve=le.value,Ce=ve.definition,Se=ve.amount,Ce)for(Ie=g(Lt,Ce),Ne=0;Ne<Se;Ne++)Kt.push(Ie)}catch(_t){Fe={error:_t}}finally{try{le&&!le.done&&(Re=Zt.return)&&Re.call(Zt)}finally{if(Fe)throw Fe.error}}return[2,Kt]}}))}))}function A(_t,Ft){return void 0===Ft&&(Ft=!1),y(this,void 0,void 0,(function(){var Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Ne,Fe,Re,Pe;return b(this,(function(Le){switch(Le.label){case 0:return Lt=_t.map(I),Ft?[4,M()]:[3,2];case 1:Yt=Le.sent(),Kt=Yt.map(I);try{for(Zt=m(Kt),le=Zt.next();!le.done;le=Zt.next())if(Ie=le.value,-1!=Lt.indexOf(Ie))return[2,!0]}catch(_t){Ne={error:_t}}finally{try{le&&!le.done&&(Fe=Zt.return)&&Fe.call(Zt)}finally{if(Ne)throw Ne.error}}return[3,4];case 2:return[4,_()];case 3:ve=Le.sent();try{for(Ce=m(ve),Se=Ce.next();!Se.done;Se=Ce.next())if(Ie=Se.value,-1!=Lt.indexOf(Ie))return[2,!0]}catch(_t){Re={error:_t}}finally{try{Se&&!Se.done&&(Pe=Ce.return)&&Pe.call(Ce)}finally{if(Re)throw Re.error}}Le.label=4;case 4:return[2,!1]}}))}))}function M(){var _t;return y(this,void 0,void 0,(function(){var Ft;return b(this,(function(Lt){switch(Lt.label){case 0:return[4,h()];case 1:return Ft=Lt.sent(),[2,null===(_t=Ft.metadata.avatars[0])||void 0===_t?void 0:_t.avatar.wearables]}}))}))}!function(_t){_t.BodyShape="body_shape",_t.Earring="earring",_t.Empty="",_t.Eyebrows="eyebrows",_t.Eyes="eyes",_t.Eyewear="eyewear",_t.FacialHair="facial_hair",_t.Feet="feet",_t.Hair="hair",_t.Hat="hat",_t.Head="head",_t.Helmet="helmet",_t.LowerBody="lower_body",_t.Mask="mask",_t.Mouth="mouth",_t.Tiara="tiara",_t.TopHead="top_head",_t.UpperBody="upper_body"}(le||(le={})),function(_t){_t.En="en",_t.Es="es"}(ve||(ve={})),function(_t){_t.Unique="unique",_t.Legendary="legendary",_t.Mythic="mythic",_t.Epic="epic",_t.Rare="rare",_t.Uncommon="uncommon",_t.Common="common"}(Ce||(Ce={})),function(_t){_t.Basefemale="Basefemale",_t.DCLBaseAvatarsBaseFemale="dcl://base-avatars/BaseFemale",_t.DCLBaseAvatarsBaseMale="dcl://base-avatars/BaseMale"}(Se||(Se={})),function(_t){_t.Wearable="wearable"}(Ie||(Ie={})),function(_t){_t[_t.none=0]="none",_t[_t.common=1]="common",_t[_t.uncommon=2]="uncommon",_t[_t.rare=3]="rare",_t[_t.epic=4]="epic",_t[_t.mythic=5]="mythic",_t[_t.legendary=6]="legendary",_t[_t.unique=7]="unique"}(Ne||(Ne={}));var Fe=0;function k(_t){var Ft=0;switch(_t){case"common":Ft=1;break;case"uncommon":Ft=2;break;case"rare":Ft=3;break;case"epic":Ft=4;break;case"mythic":Ft=5;break;case"legendary":Ft=6;break;case"unique":Ft=7}Ft>Fe&&(Fe=Ft)}function I(_t){if(_t.indexOf("dcl://")<0)return _t;var Ft=f(_t.replace("dcl://","").split("/"),2),Lt=Ft[0],Yt=Ft[1];return"base-avatars"===Lt?"urn:decentraland:off-chain:base-avatars:"+Yt:"urn:decentraland:ethereum:collections-v1:"+Lt+":"+Yt}var Re=Object.freeze({__proto__:null,getUserInfo:h,getUserInventory:_,getUserFullInventory:w,itemInInventory:function(_t,Ft){return void 0===Ft&&(Ft=!1),A([_t],Ft)},itemsInInventory:A,equipedItems:M,rarestItem:function(_t){var Ft;return void 0===_t&&(_t=!1),y(this,void 0,void 0,(function(){var Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Re,Pe,Le,Ue,He,qe,We;return b(this,(function(Ge){switch(Ge.label){case 0:return[4,h()];case 1:return Lt=Ge.sent(),[4,w()];case 2:if(Yt=Ge.sent(),!Lt||!Yt)return[2,Ne.none];if(_t)try{for(Kt=m(null===(Ft=Lt.metadata.avatars[0])||void 0===Ft?void 0:Ft.avatar.wearables),Zt=Kt.next();!Zt.done;Zt=Kt.next()){le=Zt.value;try{for(Ue=void 0,ve=m(Yt),Ce=ve.next();!Ce.done;Ce=ve.next())Re=Ce.value,le==Re.id&&Re.rarity&&k(Re.rarity)}catch(_t){Ue={error:_t}}finally{try{Ce&&!Ce.done&&(He=ve.return)&&He.call(ve)}finally{if(Ue)throw Ue.error}}}}catch(_t){Pe={error:_t}}finally{try{Zt&&!Zt.done&&(Le=Kt.return)&&Le.call(Kt)}finally{if(Pe)throw Pe.error}}else try{for(Se=m(Yt),Ie=Se.next();!Ie.done;Ie=Se.next())(Re=Ie.value).rarity&&k(Re.rarity)}catch(_t){qe={error:_t}}finally{try{Ie&&!Ie.done&&(We=Se.return)&&We.call(Se)}finally{if(qe)throw qe.error}}return log(Ne[Fe]),[2,Fe]}}))}))},updateRarity:k,getPlayerSnapshots:function(_t){return y(this,void 0,void 0,(function(){var Ft,Lt;return b(this,(function(Yt){switch(Yt.label){case 0:return _t?[3,2]:[4,h()];case 1:Ft=Yt.sent(),_t=Ft.id,Yt.label=2;case 2:return[4,v()];case 3:return Lt=Yt.sent(),[4,fetch(Lt+"/lambdas/profiles?field=snapshots&id="+_t.toLowerCase()).then((function(_t){return _t.json()})).then((function(_t){return _t[0].avatars.length?_t[0].avatars[0].avatar.snapshots:null}))];case 4:return[2,Yt.sent()]}}))}))}}),Pe=Object.freeze({__proto__:null,signMessage:function(_t){return y(this,void 0,void 0,(function(){var Lt,Yt,Kt,Zt;return b(this,(function(le){switch(le.label){case 0:return[4,Ft.convertMessageToObject(_t)];case 1:return Lt=le.sent(),[4,Ft.signMessage(Lt)];case 2:return Yt=le.sent(),Kt=Yt.message,Zt=Yt.signature,[2,{message:Kt,signature:Zt}]}}))}))}}),Le=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];function S(_t){return new Promise((function(Ft,Lt){var Yt=new Entity;engine.addEntity(Yt),Yt.addComponent(new Zt.Delay(_t,(function(){Ft(),engine.removeEntity(Yt)})))}))}function N(_t){return y(this,void 0,void 0,(function(){var Ft,Lt;return b(this,(function(Zt){switch(Zt.label){case 0:return[4,Kt.getProvider()];case 1:return Ft=Zt.sent(),Lt=new Yt.RequestManager(Ft),[4,new Yt.ContractFactory(Lt,Le).at(_t)];case 2:return[2,{contract:Zt.sent(),provider:Ft,requestManager:Lt}]}}))}))}function L(_t,Lt,Yt,Kt){return void 0===Kt&&(Kt=!1),y(this,void 0,void 0,(function(){var Zt,le,ve,Ce,Se,Ie;return b(this,(function(Ne){switch(Ne.label){case 0:return[4,N(_t)];case 1:return Zt=Ne.sent(),le=Zt.contract,ve=Zt.requestManager,[4,Ft.getUserAccount()];case 2:return Ce=Ne.sent(),[4,le.transfer(Lt.toLowerCase(),Yt,{from:Ce})];case 3:if(Se=Ne.sent(),Ie=null,!Kt)return[3,8];Ne.label=4;case 4:return null!=Ie?[3,7]:[4,S(2e3)];case 5:return Ne.sent(),[4,ve.eth_getTransactionReceipt(Se.toString())];case 6:return Ie=Ne.sent(),[3,4];case 7:return[2,Ie];case 8:return[2,Se]}}))}))}function D(_t,Ft,Lt){return y(this,void 0,void 0,(function(){return b(this,(function(Yt){switch(Yt.label){case 0:return[4,N(_t)];case 1:return[4,Yt.sent().contract.allowance(Ft,Lt)];case 2:return[2,+Yt.sent()>1e24]}}))}))}function P(_t,Lt,Yt,Kt){return void 0===Yt&&(Yt=!1),void 0===Kt&&(Kt="0x0000000000000000001000000000000000000000000000000000000000000000"),y(this,void 0,void 0,(function(){var Zt,le,ve,Ce,Se,Ie;return b(this,(function(Ne){switch(Ne.label){case 0:return[4,N(_t)];case 1:return Zt=Ne.sent(),le=Zt.contract,ve=Zt.requestManager,[4,Ft.getUserAccount()];case 2:return Ce=Ne.sent(),[4,le.approve(Lt,Kt,{from:Ce})];case 3:if(Se=Ne.sent(),Ie=null,!Yt)return[3,8];Ne.label=4;case 4:return null!=Ie?[3,7]:[4,S(2e3)];case 5:return Ne.sent(),[4,ve.eth_getTransactionReceipt(Se.toString())];case 6:return Ie=Ne.sent(),[3,4];case 7:return[2,Ie];case 8:return[2,Se]}}))}))}function B(_t,Ft,Lt){return y(this,void 0,void 0,(function(){return b(this,(function(Yt){switch(Yt.label){case 0:return[4,N(_t)];case 1:return[4,Yt.sent().contract.allowance(Ft,Lt)];case 2:return[2,Yt.sent()]}}))}))}function F(_t,Ft){return y(this,void 0,void 0,(function(){return b(this,(function(Lt){switch(Lt.label){case 0:return[4,N(_t)];case 1:return[4,Lt.sent().contract.balanceOf(Ft)];case 2:return[2,Lt.sent()]}}))}))}var Ue=Object.freeze({__proto__:null,getContract:N,send:L,isApproved:D,setApproval:P,allowance:B,balance:F});function q(){return y(this,void 0,void 0,(function(){return b(this,(function(_t){switch(_t.label){case 0:return[4,Ft.getUserAccount()];case 1:return[2,F("0x0f5d2fb29fb7d3cfee444a200298f468908cc942",_t.sent())]}}))}))}var He=Object.freeze({__proto__:null,send:function(_t,Ft,Lt){return void 0===Lt&&(Lt=!1),L("0x0f5d2fb29fb7d3cfee444a200298f468908cc942",_t.toLowerCase(),+Yt.toWei(Ft.toString(),"ether").toString(),Lt)},myBalance:q,balance:function(_t){return y(this,void 0,void 0,(function(){return b(this,(function(Ft){return[2,F("0x0f5d2fb29fb7d3cfee444a200298f468908cc942",_t)]}))}))}}),qe=[{constant:!0,inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256[]",name:"_tokenIds",type:"uint256[]"}],name:"safeBatchTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address[]",name:"_beneficiaries",type:"address[]"},{internalType:"bytes32[]",name:"_wearableIds",type:"bytes32[]"}],name:"issueTokens",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256[]",name:"_tokenIds",type:"uint256[]"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"string",name:"_wearableId",type:"string"},{internalType:"uint256",name:"_maxIssuance",type:"uint256"}],name:"addWearable",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32[]",name:"_wearableIds",type:"bytes32[]"},{internalType:"uint256[]",name:"_maxIssuances",type:"uint256[]"}],name:"addWearables",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_operator",type:"address"},{internalType:"bool",name:"_allowed",type:"bool"}],name:"setAllowed",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"string",name:"_baseURI",type:"string"}],name:"setBaseURI",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_beneficiary",type:"address"},{internalType:"string",name:"_wearableId",type:"string"}],name:"issueToken",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"string",name:"_wearableId",type:"string"}],name:"getWearableKey",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"isComplete",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"wearables",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"issued",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"allowed",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"wearablesCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"maxIssuance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256[]",name:"_tokenIds",type:"uint256[]"}],name:"batchTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"completeCollection",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"address",name:"_operator",type:"address"},{internalType:"string",name:"_baseURI",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"_oldBaseURI",type:"string"},{indexed:!1,internalType:"string",name:"_newBaseURI",type:"string"}],name:"BaseURI",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_operator",type:"address"},{indexed:!1,internalType:"bool",name:"_allowed",type:"bool"}],name:"Allowed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"_wearableIdKey",type:"bytes32"},{indexed:!1,internalType:"string",name:"_wearableId",type:"string"},{indexed:!1,internalType:"uint256",name:"_maxIssuance",type:"uint256"}],name:"AddWearable",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_beneficiary",type:"address"},{indexed:!0,internalType:"uint256",name:"_tokenId",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"_wearableIdKey",type:"bytes32"},{indexed:!1,internalType:"string",name:"_wearableId",type:"string"},{indexed:!1,internalType:"uint256",name:"_issuedId",type:"uint256"}],name:"Issue",type:"event"},{anonymous:!1,inputs:[],name:"Complete",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"}];function z(_t){return y(this,void 0,void 0,(function(){var Ft,Lt;return b(this,(function(Zt){switch(Zt.label){case 0:return[4,Kt.getProvider()];case 1:return Ft=Zt.sent(),Lt=new Yt.RequestManager(Ft),[4,new Yt.ContractFactory(Lt,qe).at(_t)];case 2:return[2,{contract:Zt.sent(),provider:Ft,requestManager:Lt}]}}))}))}function W(_t,Ft,Lt){return void 0===Lt&&(Lt=!0),y(this,void 0,void 0,(function(){return b(this,(function(Yt){switch(Yt.label){case 0:return[4,z(_t)];case 1:return[4,Yt.sent().contract.setApprovalForAll(Ft,Lt)];case 2:return[2,!!Yt.sent()]}}))}))}function j(_t,Ft,Lt){return y(this,void 0,void 0,(function(){return b(this,(function(Yt){switch(Yt.label){case 0:return[4,z(_t)];case 1:return[4,Yt.sent().contract.isApprovedForAll(Ft,Lt)];case 2:return[2,!!Yt.sent()]}}))}))}var We=Object.freeze({__proto__:null,getContract:z,transfer:function(_t,Lt,Yt,Kt){return void 0===Kt&&(Kt=!1),y(this,void 0,void 0,(function(){var Zt,le,ve,Ce,Se,Ie;return b(this,(function(Ne){switch(Ne.label){case 0:return[4,z(_t)];case 1:return Zt=Ne.sent(),le=Zt.contract,ve=Zt.requestManager,[4,Ft.getUserAccount()];case 2:return Ce=Ne.sent(),[4,le.transferFrom(Ce.toLowerCase(),Lt.toLowerCase(),Yt,{from:Ce})];case 3:if(Se=Ne.sent(),Ie=null,!Kt)return[3,8];Ne.label=4;case 4:return null!=Ie?[3,7]:[4,S(2e3)];case 5:return Ne.sent(),[4,ve.eth_getTransactionReceipt(Se.toString())];case 6:return Ie=Ne.sent(),[3,4];case 7:return[2,Ie];case 8:return[2,Se]}}))}))},setApprovalForAll:W,isApprovedForAll:j,checkTokens:function(_t,Lt){return y(this,void 0,void 0,(function(){var Yt,Kt,Zt,le,ve,Ce,Se,Ie;return b(this,(function(Ne){switch(Ne.label){case 0:return[4,z(_t)];case 1:return Yt=Ne.sent().contract,[4,Ft.getUserAccount()];case 2:return Kt=Ne.sent(),[4,Yt.balanceOf(Kt)];case 3:return Zt=Ne.sent(),0!=Number(Zt)?[3,4]:[2,!1];case 4:if(!Lt)return[2,!0];le=!1,ve=0,Ne.label=5;case 5:return ve<Number(Zt)?(Se=Number,[4,Yt.tokenOfOwnerByIndex(Kt,ve)]):[3,8];case 6:if(Ce=Se.apply(void 0,[Ne.sent()]),"number"==typeof Lt){if(Ce==Lt)return le=!0,[3,8]}else for(Ie=0;Ie<Lt.length;Ie++)if(Ce==Lt[Ie]){le=!0;break}Ne.label=7;case 7:return ve++,[3,5];case 8:return[2,le]}}))}))}}),Ge=[{constant:!1,inputs:[{name:"_ownerCutPerMillion",type:"uint256"}],name:"setOwnerCutPerMillion",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_legacyNFTAddress",type:"address"}],name:"setLegacyNFTAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"ERC721_Interface",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"InterfaceId_ValidateFingerprint",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"acceptedToken",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"assetId",type:"uint256"}],name:"cancelOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"nftAddress",type:"address"},{name:"assetId",type:"uint256"}],name:"cancelOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"nftAddress",type:"address"},{name:"assetId",type:"uint256"},{name:"priceInWei",type:"uint256"},{name:"expiresAt",type:"uint256"}],name:"createOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"nftAddress",type:"address"},{name:"assetId",type:"uint256"},{name:"price",type:"uint256"},{name:"fingerprint",type:"bytes"}],name:"safeExecuteOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"ownerCutPerMillion",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"assetId",type:"uint256"},{name:"priceInWei",type:"uint256"},{name:"expiresAt",type:"uint256"}],name:"createOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"publicationFeeInWei",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"nftAddress",type:"address"},{name:"assetId",type:"uint256"},{name:"price",type:"uint256"}],name:"executeOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_publicationFee",type:"uint256"}],name:"setPublicationFee",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"contractName",type:"string"},{name:"migrationId",type:"string"}],name:"isMigrated",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_acceptedToken",type:"address"},{name:"_legacyNFTAddress",type:"address"},{name:"_owner",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_sender",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"legacyNFTAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"assetId",type:"uint256"}],name:"auctionByAssetId",outputs:[{name:"",type:"bytes32"},{name:"",type:"address"},{name:"",type:"uint256"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"orderByAssetId",outputs:[{name:"id",type:"bytes32"},{name:"seller",type:"address"},{name:"nftAddress",type:"address"},{name:"price",type:"uint256"},{name:"expiresAt",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"assetId",type:"uint256"},{name:"price",type:"uint256"}],name:"executeOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"nftAddress",type:"address"},{indexed:!1,name:"priceInWei",type:"uint256"},{indexed:!1,name:"expiresAt",type:"uint256"}],name:"OrderCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"nftAddress",type:"address"},{indexed:!1,name:"totalPrice",type:"uint256"},{indexed:!0,name:"buyer",type:"address"}],name:"OrderSuccessful",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"nftAddress",type:"address"}],name:"OrderCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"publicationFee",type:"uint256"}],name:"ChangedPublicationFee",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"ownerCutPerMillion",type:"uint256"}],name:"ChangedOwnerCutPerMillion",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"legacyNFTAddress",type:"address"}],name:"ChangeLegacyNFTAddress",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"priceInWei",type:"uint256"},{indexed:!1,name:"expiresAt",type:"uint256"}],name:"AuctionCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"totalPrice",type:"uint256"},{indexed:!0,name:"winner",type:"address"}],name:"AuctionSuccessful",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"}],name:"AuctionCancelled",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"contractName",type:"string"},{indexed:!1,name:"migrationId",type:"string"}],name:"Migrated",type:"event"}];function Q(_t){return void 0===_t&&(_t="0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539"),y(this,void 0,void 0,(function(){var Ft,Lt;return b(this,(function(Zt){switch(Zt.label){case 0:return[4,Kt.getProvider()];case 1:return Ft=Zt.sent(),Lt=new Yt.RequestManager(Ft),[4,new Yt.ContractFactory(Lt,Ge).at(_t)];case 2:return[2,{contract:Zt.sent(),provider:Ft,requestManager:Lt}]}}))}))}var Ve={MANAToken:"0x0f5d2fb29fb7d3cfee444a200298f468908cc942",LANDRegistry:"0xa57e126b341b18c262ad25b86bb4f65b5e2ade45",LANDProxy:"0xf87e31492faf9a91b02ee0deaad50d51d56d5d4d",TerraformReserve:"0xcca95e580bbbd04851ebfb85f77fd46c9b91f11c",ReturnVesting:"0x79c1fdaba012b9a094c495a86ce5c6199cf86368",LegacyMarketplace:"0xb3bca6f5052c7e24726b44da7403b56a8a1b98f8",Marketplace:"0x19a8ed4860007a66805782ed7e0bed4e44fc6717",MarketplaceProxy:"0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539",ServiceLocator:"0x151b11892dd6ab1f91055dcd01d23d03a2c47570",MortgageHelper:"0x90263ea5c57dc6603ca7202920735a6e31235bb9",MortgageManager:"0x9abf1295086afa0e49c60e95c437aa400c5333b8",RCNEngine:"0xba5a17f8ad40dc2c955d95c0547f3e6318bd72e7",RCNToken:"0xf970b8e36e23f7fc3fd752eea86f8be8d83375a6",KyberOracle:"0x2aaf69a2df2828b55fa4a5e30ee8c3c7cd9e5d5b",DecentralandInvite:"0xf886313f213c198458eba7ae9329525e64eb763a",EstateRegistry:"0x1784ef41af86e97f8d28afe95b573a24aeda966e",EstateProxy:"0x959e104e1a4db6317fa58f8295f586e1a978c297",LANDAuction:"0x54b7a124b44054da3692dbc56b116a35c6a3e561",MANABurner:"0xadfeb1de7876fcabeaf87df5a6c566b70f970018",MultiSigWallet:"0x4eac6325e1dbf1ac90434d39766e164dca71139e",Nobody:"0xDf861993Edbe95BAFbfA7760838f8ebbd5Afda9F",ERC721Bid:"0xe479dfd9664c693b2e2992300930b00bfde08233",BidMANABurner:"0x0fcf114c63a5387878e0da051c81cb6febd93b6c",MultisigContractOwner:"0xefc549434a03756f6e37a43757a2927605d8839b",AvatarNameRegistry:"0x894b883905bfEe2CC448880F1b59f4A762E67566",AvatarNameRegistryProxy:"0xcd816354450015A5644857FEd507afEeaE7263af",ExclusiveMasksCollection:"0xc04528c14c8ffd84c7c1fb6719b4a89853035cdd",Halloween2019Collection:"0xc1f4b0eea2bd6690930e6c66efd3e197d620b9c2",Halloween2019CollectionFactory:"0x07ccfd0fbada4ac3c22ecd38037ca5e5c0ad8cfa",Xmas2019Collection:"0xc3af02c0fd486c8e9da5788b915d6fff3f049866",DCLRegistrar:"0x2a187453064356c898cae034eaed119e1663acb8",DCLController:"0x6843291bd86857d97f0d269e698939fb10d60772",Catalyst:"0xcc054fab08127c19f621ab83ade5962cd10584ec",CatalystProxy:"0x4a2f10076101650f40342885b99b6b101d83c486",MCHCollection:"0xf64dc33a192e056bb5f0e5049356a0498b502d50",CommunityContestCollection:"0x32b7495895264ac9d0b12d32afd435453458b1c6",DCLLaunchCollection:"0xd35147be6401dcb20811f2104c33de8e97ed6818",DCGCollection:"0x3163d2cfee3183f9874e2869942cc62649eeb004",StaySafeCollection:"0x201c3af8c471e5842428b74d1e7c0249adda2a92",StaySafeDonation:"0x56505a0313ba2b4bc0be23dbb7eb71b7885fca9e",ClaimWearableForFree:"0x8dd61d1a67bce13a87e20a76c6f164c388a726d6",Moonshot2020Collection:"0x6a99abebb48819d2abe92c5e4dc4f48dc09a3ee8",DAOAgent:"0x9A6ebE7E2a7722F8200d0ffB63a1F6406A0d7dce",LANDMiniMeToken:"0x20dfe381ca71ade2582094cf569a8cb020af5ab1",EstateMiniMeToken:"0x8568f23f343694650370fe5e254b55bfb704a6c7",BuyAdapter:"0xf4fbd84193f9aaf9779dedbb415a806933eb1c95",AdapterFeeCollector:"0x0d58aaae9f0c4d020486f534363f3fca7a6aecb6",AdapterConverter:"0x2859581da59bd4e16a866dd06b461b76d8e489a4",DappcraftMoonminerCollection:"0x1e1d4e6262787c8a8783a37fee698bd42aa42bec",DGSummer2020Collection:"0xbf53c33235cbfc22cef5a61a83484b86342679c5",PMOuttathisworldCollection:"0x75a3752579dc2d63ca229eebbe3537fbabf85a12",DgtbleHeadspaceCollection:"0x574f64ac2e7215cba9752b85fc73030f35166bc0",WonderzoneMeteorchaserCollection:"0x34ed0aa248f60f54dd32fbc9883d6137a491f4f3",BurningStore:"0x0822d44c2e2f96d4cccad80610134861802b2cca",BaseList:"0x21b6EFf834d7cc8c12A5Ec924939aa521F0FE83F",POIAllowListProxy:"0x0ef15a1c7a49429a36cb46d4da8c53119242b54e",NameDenyListProxy:"0x0c4c90a4f29872a2e9ef4c4be3d419792bca9a36"},$e=Object.freeze({__proto__:null,mainnet:Ve,ropsten:{PrivateNodeWallet:"0x62ba62ff92917edf8ac0386fa10e3b27950bce8d",MANAToken:"0x2a8fd99c19271f4f04b1b7b9c4f7cf264b626edb",LANDRegistry:"0x255baf4096cb1723c00c4b4390a4b3028ecaa8ba",LANDProxy:"0x7a73483784ab79257bb11b96fd62a2c3ae4fb75b",TerraformReserve:"0x4bc79175f1f6fded07f04aa1b4b0465ecff6f1b3",ReturnVesting:"0x58c7e6e382c1c19c132b0361c12cbc33e2b13076",LegacyMarketplace:"0x80faa2b517b84a5aec1078d3600eab4c0b3aff56",Marketplace:"0x3d2f10c76b115db93a418ed286ca0c5abfdbf5d0",MarketplaceProxy:"0x5424912699dabaa5f2998750c1c66e73d67ad219",ServiceLocator:"0xb240b30c12d2a9ea6ba3abbf663d9ae265fbebeb",MortgageHelper:"0x0e4c24f71c8679b8af8e5a22aac3816e2b23f1cc",MortgageManager:"0x31ebb4ffd5e34acfc87ea21a0c56157188f3f0e1",RCNEngine:"0xbeE217bfe06C6FAaa2d5f2e06eBB84C5fb70d9bF",RCNToken:"0x2f45b6fb2f28a73f110400386da31044b2e953d4",KyberOracle:"0x4931d0621360187199de494a1469165079b31bfc",DecentralandInvite:"0x7557dfa02f3bd7d274851e3f627de2ed2ff390e8",EstateRegistry:"0x60e315992d5e62457215dd1e6a49d1ceb7983dfc",EstateProxy:"0x124bf28a423b2ca80b3846c3aa0eb944fe7ebb95",ERC721Bid:"0x250fa138c0a994799c7a49df3097dc71e37b3d6f",BidMANABurner:"0x01f43c3133b83086d4776027fbd152fa8a685fb4",AvatarNameRegistry:"0xd127F8d9C736d91Acdee34645e0b4C9db7178160",AvatarNameRegistryProxy:"0x2d794a7c956624fb93Eb3ff6E48D5b5d6dBA127b",ExclusiveMasksCollection:"0x30ae57840b0e9b8ea55334083d53d80b2cfe80e0",DCLRegistrar:"0xeb6f5d94d79f0750781cc962908b161b95192f53",DCLController:"0xd4e92f6ea18412dbae8b2d2b69e498a2d1064fa2",Catalyst:"0xadd085f2318e9678bbb18b3e0711328f902b374b",BuyAdapter:"0xd1e4e2880ff56cd0d5c68da9bed58bfbf0150948",AdapterFeeCollector:"0x5DC888024cB599CfDdb9E6483ED6bAe1fA9e9D18",AdapterConverter:"0x2782eb28Dcb1eF4E7632273cd4e347e130Ce4646",POIAllowlist:"0x5DC4a5C214f2161F0D5595a6dDd9352409aE3Ab4",NAMEDenylist:"0x20c6f1e86eba703a14414a0cbc1b55c89dba7a0f"},kovan:{MANAToken:"0x230fc362413d9e862326c2c7084610a5a2fdf78a",LANDRegistry:"0x2059291430b9aa2F79547f657816eFb816b36614",LANDProxy:"0x537263c440943f6a6808bCb8CcB3fe03EE838aD1",Marketplace:"0x6f44f195999f06aeb5872db96cdc517f1e839f13"},rinkeby:{MANAToken:"0x28bce5263f5d7f4eb7e8c6d5d78275ca455bac63",LANDProxy:"0x28bef22df3e2040a4be64a9ca0e8b5ae2b91462d",LANDRegistry:"0xaf29226656fade9c97f51741e40f60c5bd67ee31",Multisig:"0x0de35b8b47b129877e0efca24e294b61d7e7eee3"},getContract:function(_t,Ft){return y(this,void 0,void 0,(function(){var Lt,Zt;return b(this,(function(le){switch(le.label){case 0:return[4,Kt.getProvider()];case 1:return Lt=le.sent(),Zt=new Yt.RequestManager(Lt),[4,new Yt.ContractFactory(Zt,Ft).at(_t)];case 2:return[2,{contract:le.sent(),provider:Lt,requestManager:Zt}]}}))}))}}),Xe=Object.freeze({__proto__:null,getContract:Q,isAuthorizedAndHasBalance:function(_t,Lt){return y(this,void 0,void 0,(function(){var Kt,Zt,le;return b(this,(function(ve){switch(ve.label){case 0:return Kt=B,Zt=[Ve.MANAToken],Lt?(le=Lt,[3,3]):[3,1];case 1:return[4,Ft.getUserAccount()];case 2:le=ve.sent(),ve.label=3;case 3:return[4,Kt.apply(void 0,Zt.concat([le,Ve.MarketplaceProxy]))];case 4:return+ve.sent()<+Yt.toWei(_t,"ether").toString()?[2,!1]:[4,q()];case 5:return+ve.sent()>=+Yt.toWei(_t,"ether").toString()?[2,!0]:[2,!1]}}))}))},isAuthorizedAll:function(_t){return y(this,void 0,void 0,(function(){var Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie;return b(this,(function(Ne){switch(Ne.label){case 0:return _t?[3,2]:[4,Ft.getUserAccount()];case 1:_t=Ne.sent(),Ne.label=2;case 2:return Yt=(Lt={buying:{mana:{address:Ve.MANAToken,authorized:!1}},bidding:{mana:{address:Ve.MANAToken,authorized:!1}},selling:{land:{address:Ve.LANDProxy,authorized:!1},estates:{address:Ve.EstateProxy,authorized:!1},exclusiveMasks:{address:Ve.ExclusiveMasksCollection,authorized:!1},halloween:{address:Ve.Halloween2019Collection,authorized:!1},xmas:{address:Ve.Xmas2019Collection,authorized:!1},mch:{address:Ve.MCHCollection,authorized:!1},communityContest:{address:Ve.CommunityContestCollection,authorized:!1},dclLaunch:{address:Ve.DCLLaunchCollection,authorized:!1},dcg:{address:Ve.DCGCollection,authorized:!1},staySafe:{address:Ve.StaySafeCollection,authorized:!1},names:{address:Ve.DCLRegistrar,authorized:!1}}}).buying.mana,[4,D(Ve.MANAToken,_t,"0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539")];case 3:return Yt.authorized=Ne.sent(),Kt=Lt.bidding.mana,[4,D(Ve.MANAToken,_t,"0xe479dfd9664c693b2e2992300930b00bfde08233")];case 4:for(le in Kt.authorized=Ne.sent(),Zt=[],Lt.selling)Zt.push(le);ve=0,Ne.label=5;case 5:return ve<Zt.length?(Ce=Zt[ve],Se=Ce,Ie=Lt.selling[Se],[4,j(Lt.selling[Se].address,_t,"0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539")]):[3,8];case 6:Ie.authorized=Ne.sent(),Ne.label=7;case 7:return ve++,[3,5];case 8:return[2,Lt]}}))}))},cancelOrder:function(_t,Lt){return y(this,void 0,void 0,(function(){var Yt,Kt;return b(this,(function(Zt){switch(Zt.label){case 0:return[4,Q()];case 1:return Yt=Zt.sent().contract,[4,Ft.getUserAccount()];case 2:return Kt=Zt.sent(),[4,Yt.cancelOrder(_t,Lt,{from:Kt})];case 3:return[2,Zt.sent()]}}))}))},createOrder:function(_t,Lt,Kt,Zt){return void 0===Zt&&(Zt=+new Date/1e3+2592e3),y(this,void 0,void 0,(function(){var le,ve,Ce,Se,Ie=this;return b(this,(function(Ne){switch(Ne.label){case 0:return[4,Q()];case 1:return le=Ne.sent(),ve=le.contract,Ce=le.requestManager,[4,Ft.getUserAccount()];case 2:return Se=Ne.sent(),[4,j(_t,Se,ve.address)];case 3:return Ne.sent()?[3,5]:[4,W(_t,ve.address,!0).then((function(_t){return y(Ie,void 0,void 0,(function(){var Ft;return b(this,(function(Lt){switch(Lt.label){case 0:Ft=null,Lt.label=1;case 1:return null!=Ft?[3,4]:[4,S(2e3)];case 2:return Lt.sent(),[4,Ce.eth_getTransactionReceipt(_t.toString())];case 3:return Ft=Lt.sent(),[3,1];case 4:return[2]}}))}))}))];case 4:Ne.sent(),Ne.label=5;case 5:return[4,ve.createOrder(_t,Lt,Yt.toWei(Kt,"ether").toString(),Zt,{from:Se})];case 6:return[2,Ne.sent()]}}))}))},executeOrder:function(_t,Lt,Kt){return y(this,void 0,void 0,(function(){var Zt,le,ve,Ce,Se=this;return b(this,(function(Ie){switch(Ie.label){case 0:return[4,Q()];case 1:return Zt=Ie.sent(),le=Zt.contract,ve=Zt.requestManager,[4,Ft.getUserAccount()];case 2:return[4,D("0x0F5D2fB29fb7d3CFeE444a200298f468908cC942",Ce=Ie.sent(),le.address)];case 3:return Ie.sent()?[3,5]:[4,P("0x0F5D2fB29fb7d3CFeE444a200298f468908cC942",le.address).then((function(_t){return y(Se,void 0,void 0,(function(){var Ft;return b(this,(function(Lt){switch(Lt.label){case 0:Ft=null,Lt.label=1;case 1:return null!=Ft?[3,4]:[4,S(2e3)];case 2:return Lt.sent(),[4,ve.eth_getTransactionReceipt(_t.toString())];case 3:return Ft=Lt.sent(),[3,1];case 4:return[2]}}))}))}))];case 4:Ie.sent(),Ie.label=5;case 5:return[4,le.executeOrder(_t,Lt,Yt.toWei(Kt,"ether").toString(),{from:Ce})];case 6:return[2,Ie.sent()]}}))}))}}),Ye={data:[{symbol:"ETH",name:"Ethereum",address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",decimals:18,gasLimit:"0",sp_limit_order:!0,is_quote:!0,quote_priority:2},{symbol:"WETH",name:"Wrapped Ether",address:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",decimals:18,sp_limit_order:!0,is_quote:!0,quote_priority:2},{symbol:"KNC",name:"KyberNetwork",address:"0xdd974d5c2e2928dea5f71b9825b8b646686bd200",decimals:18,sp_limit_order:!0},{symbol:"DAI",name:"DAI",address:"0x6b175474e89094c44da98b954eedeac495271d0f",decimals:18,gasLimit:"650000",sp_limit_order:!0,is_quote:!0,quote_priority:3,is_gas_fixed:!0},{symbol:"OMG",name:"OmiseGO",address:"0xd26114cd6ee289accf82350c8d8487fedb8a0c07",decimals:18,sp_limit_order:!0},{symbol:"SNT",name:"Status",address:"0x744d70fdbe2ba4cf95131626614a1763df805b9e",decimals:18,sp_limit_order:!0},{symbol:"ELF",name:"Aelf",address:"0xbf2179859fc6d5bee9bf9158632dc51678a4100e",decimals:18,sp_limit_order:!0},{symbol:"POWR",name:"Power Ledger",address:"0x595832f8fc6bf59c85c527fec3740a1b7a361269",decimals:6,sp_limit_order:!0},{symbol:"MANA",name:"Mana",address:"0x0f5d2fb29fb7d3cfee444a200298f468908cc942",decimals:18,sp_limit_order:!0},{symbol:"BAT",name:"Basic Attention Token",address:"0x0d8775f648430679a709e98d2b0cb6250d2887ef",decimals:18,sp_limit_order:!0},{symbol:"REQ",name:"Request",address:"0x8f8221afbb33998d8584a2b05749ba73c37a938a",decimals:18,listing_time:1588683600,sp_limit_order:!0},{symbol:"LINK",name:"Chain Link",address:"0x514910771af9ca656af840dff83e8264ecf986ca",decimals:18,sp_limit_order:!0},{symbol:"DGX",name:"Digix Gold Token",address:"0x4f3afec4e5a3f2a6a1a411def7d7dfe50ee057bf",decimals:9,gasApprove:12e4,gasLimit:"975000"},{symbol:"IOST",name:"IOStoken",address:"0xfa1a856cfa3409cfa145fa4e20eb270df3eb21ab",decimals:18},{symbol:"ENJ",name:"Enjin Coin",address:"0xf629cbd94d3791c9250152bd8dfbdf380e2a3b9c",decimals:18,sp_limit_order:!0},{symbol:"BLZ",name:"Bluzelle",address:"0x5732046a883704404f284ce41ffadd5b007fd668",decimals:18},{symbol:"POLY",name:"Polymath",address:"0x9992ec3cf6a55b00978cddf2b27bc6882d88d1ec",decimals:18},{symbol:"CVC",name:"Civic",address:"0x41e5560054824ea6b0732e656e3ad64e20e94e45",decimals:8},{symbol:"PAY",name:"TenX",address:"0xb97048628db6b661d4c2aa833e95dbe1a905b280",decimals:18,sp_limit_order:!0},{symbol:"BNT",name:"Bancor",address:"0x1f573d6fb3f13d689ff844b4ce37794d79a7ff1c",decimals:18,gasLimit:"650000",sp_limit_order:!0},{symbol:"TUSD",name:"TrueUSD",address:"0x8dd5fbce2f6a956c3022ba3663759011dd51e73e",decimals:18,gasLimit:"780000",sp_limit_order:!0,is_quote:!0,quote_priority:3,is_gas_fixed:!0},{symbol:"LEND",name:"EthLend",address:"0x80fb784b7ed66730e8b1dbd9820afd29931aab03",decimals:18,sp_limit_order:!0},{symbol:"MTL",name:"Metal",address:"0xf433089366899d83a9f26a773d59ec7ecf30355e",decimals:8},{symbol:"REP",name:"Augur",address:"0x1985365e9f78359a9b6ad760e32412f4a445e862",decimals:18,sp_limit_order:!0},{symbol:"ZRX",name:"0x Protocol",address:"0xe41d2489571d322189246dafa5ebde1f4699f498",decimals:18,sp_limit_order:!0},{symbol:"REN",name:"Republic",address:"0x408e41876cccdc0f92210600ef50372656052a38",decimals:18,gasLimit:"650000",sp_limit_order:!0},{symbol:"QKC",name:"QuarkChain",address:"0xea26c4ac16d4a5a106820bc8aee85fd0b7b2b664",decimals:18},{symbol:"MKR",name:"Maker",address:"0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2",decimals:18,gasLimit:"650000",sp_limit_order:!0},{symbol:"OST",name:"Open Simple Token",address:"0x2c4e8f2d746113d0696ce89b35f0d8bf88e0aeca",decimals:18,listing_time:1542027600},{symbol:"PT",name:"Promotion Token",address:"0x094c875704c14783049ddf8136e298b3a099c446",decimals:18,gasLimit:"650000"},{symbol:"ABYSS",name:"ABYSS",address:"0x0e8d6b471e332f140e7d9dbb99e5e3822f728da6",decimals:18,listing_time:1547560800,sp_limit_order:!0},{symbol:"WBTC",name:"Wrapped BTC",address:"0x2260fac5e5542a773aa44fbcfedf7c193bc2c599",decimals:8,listing_time:1548853200,gasLimit:"650000",sp_limit_order:!0,is_quote:!0,quote_priority:1},{symbol:"MLN",name:"Melon Token",address:"0xec67005c4e498ec7f55e092bd1d35cbc47c91892",decimals:18,listing_time:1549321200,sp_limit_order:!0},{symbol:"USDC",name:"USD Coin",address:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",decimals:6,listing_time:1549976400,gasLimit:"715000",sp_limit_order:!0,is_quote:!0,quote_priority:3},{symbol:"EURS",name:"STASIS EURS",address:"0xdb25f211ab05b1c97d595516f45794528a807ad8",decimals:2,listing_time:1549976400},{symbol:"MCO",name:"Monaco",address:"0xb63b606ac810a52cca15e44bb630fd42d8d1d83d",decimals:8,listing_time:1556283600},{symbol:"PAX",name:"Paxos Standard",address:"0x8e870d67f660d95d5be530380d0ec0bd388289e1",decimals:18,listing_time:1556542800,sp_limit_order:!0},{symbol:"GEN",name:"DAOStack",address:"0x543ff227f64aa17ea132bf9886cab5db55dcaddf",decimals:18,listing_time:1560258e3},{symbol:"LRC",name:"Loopring",address:"0xbbbbca6a901c926f240b89eacb641d8aec7aeafd",decimals:18,listing_time:1560258e3},{symbol:"RLC",name:"iExec RLC",address:"0x607f4c5bb672230e8672085532f7e901544a7375",decimals:9,listing_time:1560258e3,sp_limit_order:!0},{symbol:"NPXS",name:"Pundi X",address:"0xa15c7ebe1f07caf6bff097d8a589fb8ac49ae5b3",decimals:18,listing_time:1560258e3,sp_limit_order:!0},{symbol:"GNO",name:"Gnosis",address:"0x6810e776880c02933d47db1b9fc05908e5386b96",decimals:18,listing_time:1560862800,gasLimit:"780000"},{symbol:"MYB",name:"MyBit",address:"0x5d60d8d7ef6d37e16ebabc324de3be57f135e0bc",decimals:18,listing_time:1562245200},{symbol:"BAM",name:"Bamboo",address:"0x22b3faaa8df978f6bafe18aade18dc2e3dfa0e0c",decimals:18,listing_time:1562311800},{symbol:"SPN",name:"Sapien Network",address:"0x20f7a3ddf244dc9299975b4da1c39f8d5d75f05a",decimals:6,listing_time:1562677200},{symbol:"EQUAD",name:"Quadrant Protocol",address:"0xc28e931814725bbeb9e670676fabbcb694fe7df2",decimals:18,listing_time:1563195600},{symbol:"UPP",name:"Sentinel Protocol",address:"0xc86d054809623432210c107af2e3f619dcfbf652",decimals:18,listing_time:1563973200},{symbol:"CND",name:"Cindicator",address:"0xd4c435f5b09f855c3317c8524cb1f586e42795fa",decimals:18,listing_time:1593522e3},{symbol:"USDT",name:"Tether USD",address:"0xdac17f958d2ee523a2206206994597c13d831ec7",decimals:6,listing_time:1565960400,sp_limit_order:!0,is_quote:!0,quote_priority:3},{symbol:"SNX",name:"Synthetix Network",address:"0xc011a73ee8576fb46f5e1c5751ca3b9fe0af2a6f",decimals:18,listing_time:1565960400,gasLimit:"975000",sp_limit_order:!0},{symbol:"BTU",name:"BTU Protocol",address:"0xb683d83a532e2cb7dfa5275eed3698436371cc9f",decimals:18,listing_time:156933e4},{symbol:"TKN",name:"Monolith",address:"0xaaaf91d9b90df800df4f55c205fd6989c977e73a",decimals:8,listing_time:156933e4},{symbol:"RAE",name:"Receive Access Ecosystem",address:"0xe5a3229ccb22b6484594973a03a3851dcd948756",decimals:18,listing_time:157365e4},{symbol:"SUSD",name:"sUSD",address:"0x57ab1ec28d129707052df4df418d58a2d46d5f51",decimals:18,listing_time:1574686800,gasLimit:"650000"},{symbol:"SPIKE",name:"Spiking",address:"0xa7fc5d2453e3f68af0cc1b78bcfee94a1b293650",decimals:10,listing_time:1575637200},{symbol:"SAN",name:"Santiment",address:"0x7c5a0ce9267ed19b22f8cae653f198e3e8daf098",decimals:18,listing_time:1575896400},{symbol:"USDS",name:"StableUSD",address:"0xa4bdb11dc0a2bec88d24a3aa1e6bb17201112ebe",decimals:6,listing_time:1576328400},{symbol:"NEXXO",name:"Nexxo",address:"0x278a83b64c3e3e1139f8e8a52d96360ca3c69a3d",decimals:18,listing_time:1576846800},{symbol:"EKG",name:"Ekon Gold",address:"0x6a9b3e36436b7abde8c4e2e2a98ea40455e615cf",decimals:18,listing_time:157797e4},{symbol:"ANT",name:"Aragon",address:"0x960b236a07cf122663c4303350609a66a7b288c0",decimals:18,listing_time:1578488400,gasLimit:"520000"},{symbol:"GDC",name:"Global Digital Content",address:"0x301c755ba0fca00b1923768fffb3df7f4e63af31",decimals:18,listing_time:1579611600,gasLimit:"600000"},{symbol:"AMPL",name:"Ampleforth",address:"0xd46ba6d942050d489dbd938a2c909a5d5039a161",decimals:9,listing_time:1580389200,sp_limit_order:!0},{symbol:"TKX",name:"Tokenize Xchange",address:"0x667102bd3413bfeaa3dffb48fa8288819e480a88",decimals:8,listing_time:1580994e3},{symbol:"MET",name:"Metronome",address:"0xa3d58c4e56fedcae3a7c43a725aee9a71f0ece4e",decimals:18,listing_time:1581944400},{symbol:"MFG",name:"SyncFab",address:"0x6710c63432a2de02954fc0f851db07146a6c0312",decimals:18,listing_time:1582203600},{symbol:"FXC",name:"Flexacoin",address:"0x4a57e687b9126435a9b19e4a802113e266adebde",decimals:18,listing_time:1582808400},{symbol:"UBT",name:"Unibright",address:"0x8400d94a5cb0fa0d041a3788e395285d61c9ee5e",decimals:8,listing_time:1583154e3,gasLimit:"650000",sp_limit_order:!0},{symbol:"LOOM",name:"Loom Network",address:"0xa4e8c3ec456107ea67d3075bf9e3df3a75823db0",decimals:18,listing_time:1583499600},{symbol:"PBTC",name:"pTokens BTC",address:"0x5228a22e72ccc52d415ecfd199f99d0665e7733b",decimals:18,listing_time:1583758800},{symbol:"OGN",name:"Origin Protocol",address:"0x8207c1ffc5b6804f6024322ccf34f29c3541ae26",decimals:18,listing_time:1584018e3},{symbol:"BAND",name:"Band Protocol",address:"0xba11d00c5f74255f56a5e366f4f77f5a186d7f55",decimals:18,listing_time:1586264400,gasLimit:"650000",sp_limit_order:!0},{symbol:"RSV",name:"Reserve",address:"0x196f4727526ea7fb1e17b2071b3d8eaa38486988",decimals:18,listing_time:1586782800},{symbol:"RSR",name:"Reserve Rights",address:"0x8762db106b2c2a0bccb3a80d1ed41273552616e8",decimals:18,listing_time:1586782800},{symbol:"KEY",name:"SelfKey",address:"0x4cc19356f2d37338b9802aa8e8fc58b0373296e7",decimals:18,listing_time:1587128400},{symbol:"PNK",name:"Kleros",address:"0x93ed3fbe21207ec2e8f2d3c3de6e058cb73bc04d",decimals:18,listing_time:1587646800},{symbol:"GHT",name:"Global Human Trust",address:"0xbe30f684d62c9f7883a75a29c162c332c0d98f23",decimals:18,listing_time:1588683600},{symbol:"TRYB",name:"BiLira",address:"0x2c537e5624e4af88a7ae4060c022609376c8d0eb",decimals:6,listing_time:1589202e3},{symbol:"2KEY",name:"TwoKeyEconomy",address:"0xE48972fCd82a274411c01834e2f031D4377Fa2c0",decimals:18,listing_time:1589893200},{symbol:"PLR",name:"Pillar",address:"0xe3818504c1b32bf1557b16c238b2e01fd3149c17",decimals:18,listing_time:1589979600},{symbol:"BUSD",name:"Binance USD",address:"0x4fabb145d64652a948d72533023f6e7a623c7c53",decimals:18,listing_time:1590584400},{symbol:"QNT",name:"Quant",address:"0x4a220e6096b25eadb88358cb44068a3248254675",decimals:18,listing_time:1591016400},{symbol:"PNT",name:"pNetwork Token",address:"0x89Ab32156e46F46D02ade3FEcbe5Fc4243B9AAeD",decimals:18,listing_time:1592917200},{symbol:"COMP",name:"Compound",address:"0xc00e94cb662c3520282e6f5717214004a7f26888",decimals:18,listing_time:1593608400},{symbol:"BZRX",name:"bZx Protocol Token",address:"0x56d811088235f11c8920698a204a5010a788f4b3",decimals:18,listing_time:1594833120},{symbol:"RENBTC",name:"renBTC",address:"0xeb4c2781e4eba804ce9a9803c67d0893436bb27d",decimals:8,listing_time:1595336400},{symbol:"VIDT",name:"V-ID blockchain",address:"0x445f51299ef3307dbd75036dd896565f5b4bf7a5",decimals:18,listing_time:1596114e3},{symbol:"PLTC",name:"pTokens LTC",address:"0x5979f50f1d4c08f9a53863c2f39a7b0492c38d0f",decimals:18,listing_time:1596459600},{symbol:"KAI",name:"KardiaChain",address:"0xbd6467a31899590474ce1e84f70594c53d628e46",decimals:18,listing_time:1596632400},{symbol:"REPV2",name:"Kyber REPv2 Token",address:"0x221657776846890989a759ba2973e427dff5c9bb",decimals:18,listing_time:1596718800},{symbol:"STMX",name:"Kyber StormX Token",address:"0xbe9375c6a420d2eeb258962efb95551a5b722803",decimals:18,listing_time:1596718800},{symbol:"MATIC",name:"MATIC Token",address:"0x7d1afa7b718fb893db30a3abc0cfc608aacfebb0",decimals:18,listing_time:1598446800}],success:!0},Je=[{inputs:[{internalType:"address",name:"_admin",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newAdmin",type:"address"},{indexed:!1,internalType:"address",name:"previousAdmin",type:"address"}],name:"AdminClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newAlerter",type:"address"},{indexed:!1,internalType:"bool",name:"isAdd",type:"bool"}],name:"AlerterAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"address",name:"sendTo",type:"address"}],name:"EtherWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"trader",type:"address"},{indexed:!1,internalType:"contract IERC20",name:"src",type:"address"},{indexed:!1,internalType:"contract IERC20",name:"dest",type:"address"},{indexed:!1,internalType:"address",name:"destAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"actualSrcAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"actualDestAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"platformWallet",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"ExecuteTrade",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IKyberHint",name:"kyberHintHandler",type:"address"}],name:"KyberHintHandlerSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IKyberNetwork",name:"newKyberNetwork",type:"address"},{indexed:!1,internalType:"contract IKyberNetwork",name:"previousKyberNetwork",type:"address"}],name:"KyberNetworkSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newOperator",type:"address"},{indexed:!1,internalType:"bool",name:"isAdd",type:"bool"}],name:"OperatorAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IERC20",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"address",name:"sendTo",type:"address"}],name:"TokenWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"pendingAdmin",type:"address"}],name:"TransferAdminPending",type:"event"},{inputs:[{internalType:"address",name:"newAlerter",type:"address"}],name:"addAlerter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOperator",type:"address"}],name:"addOperator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"enabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAlerters",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ERC20",name:"src",type:"address"},{internalType:"contract ERC20",name:"dest",type:"address"},{internalType:"uint256",name:"srcQty",type:"uint256"}],name:"getExpectedRate",outputs:[{internalType:"uint256",name:"expectedRate",type:"uint256"},{internalType:"uint256",name:"worstRate",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IERC20",name:"src",type:"address"},{internalType:"contract IERC20",name:"dest",type:"address"},{internalType:"uint256",name:"srcQty",type:"uint256"},{internalType:"uint256",name:"platformFeeBps",type:"uint256"},{internalType:"bytes",name:"hint",type:"bytes"}],name:"getExpectedRateAfterFee",outputs:[{internalType:"uint256",name:"expectedRate",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getOperators",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"kyberHintHandler",outputs:[{internalType:"contract IKyberHint",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"kyberNetwork",outputs:[{internalType:"contract IKyberNetwork",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxGasPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingAdmin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"alerter",type:"address"}],name:"removeAlerter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"removeOperator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IKyberHint",name:"_kyberHintHandler",type:"address"}],name:"setHintHandler",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IKyberNetwork",name:"_kyberNetwork",type:"address"}],name:"setKyberNetwork",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"minConversionRate",type:"uint256"}],name:"swapEtherToToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"uint256",name:"minConversionRate",type:"uint256"}],name:"swapTokenToEther",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"src",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"contract IERC20",name:"dest",type:"address"},{internalType:"uint256",name:"minConversionRate",type:"uint256"}],name:"swapTokenToToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"src",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"contract IERC20",name:"dest",type:"address"},{internalType:"address payable",name:"destAddress",type:"address"},{internalType:"uint256",name:"maxDestAmount",type:"uint256"},{internalType:"uint256",name:"minConversionRate",type:"uint256"},{internalType:"address payable",name:"platformWallet",type:"address"}],name:"trade",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"contract ERC20",name:"src",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"contract ERC20",name:"dest",type:"address"},{internalType:"address payable",name:"destAddress",type:"address"},{internalType:"uint256",name:"maxDestAmount",type:"uint256"},{internalType:"uint256",name:"minConversionRate",type:"uint256"},{internalType:"address payable",name:"walletId",type:"address"},{internalType:"bytes",name:"hint",type:"bytes"}],name:"tradeWithHint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"src",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"contract IERC20",name:"dest",type:"address"},{internalType:"address payable",name:"destAddress",type:"address"},{internalType:"uint256",name:"maxDestAmount",type:"uint256"},{internalType:"uint256",name:"minConversionRate",type:"uint256"},{internalType:"address payable",name:"platformWallet",type:"address"},{internalType:"uint256",name:"platformFeeBps",type:"uint256"},{internalType:"bytes",name:"hint",type:"bytes"}],name:"tradeWithHintAndFee",outputs:[{internalType:"uint256",name:"destAmount",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"newAdmin",type:"address"}],name:"transferAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAdmin",type:"address"}],name:"transferAdminQuickly",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address payable",name:"sendTo",type:"address"}],name:"withdrawEther",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"sendTo",type:"address"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"}];function ee(_t){return y(this,void 0,void 0,(function(){var Ft,Lt;return b(this,(function(Zt){switch(Zt.label){case 0:return[4,Kt.getProvider()];case 1:return Ft=Zt.sent(),Lt=new Yt.RequestManager(Ft),[4,new Yt.ContractFactory(Lt,Je).at(_t)];case 2:return[2,{contract:Zt.sent(),provider:Ft,requestManager:Lt}]}}))}))}function te(){return y(this,void 0,void 0,(function(){return b(this,(function(_t){return[2,Ye]}))}))}function ne(_t){return y(this,void 0,void 0,(function(){var Ft,Lt,Yt,Kt,Zt;return b(this,(function(le){try{for(Ft=m(Ye.data),Lt=Ft.next();!Lt.done;Lt=Ft.next()){if((Yt=Lt.value).symbol==_t)return[2,Yt];if(Yt.name==_t)return[2,Yt];if(Yt.address==_t)return[2,Yt]}}catch(_t){Kt={error:_t}}finally{try{Lt&&!Lt.done&&(Zt=Ft.return)&&Zt.call(Ft)}finally{if(Kt)throw Kt.error}}return[2]}))}))}function ae(_t,Ft,Lt){return y(this,void 0,void 0,(function(){return b(this,(function(Yt){switch(Yt.label){case 0:return[4,fetch("https://api.kyber.network/expectedRate?source="+_t+"&dest="+Ft+"&sourceAmount="+Lt).then((function(_t){return _t.json()}))];case 1:return[2,Yt.sent()]}}))}))}var Qe=Object.freeze({__proto__:null,getContract:ee,getCurrencies:te,getACurrency:ne,getMarketPair:function(){return y(this,void 0,void 0,(function(){return b(this,(function(_t){switch(_t.label){case 0:return[4,fetch("https://api.kyber.network/pairs/market",{headers:{}}).then((function(_t){return _t.json()}))];case 1:return[2,_t.sent()]}}))}))},getQuote:function(_t,Ft,Lt){return y(this,void 0,void 0,(function(){return b(this,(function(Yt){switch(Yt.label){case 0:return[4,fetch("https://api.kyber.network/quote_amount?quote="+Ft+"&base="+_t+"&base_amount="+Lt+"&type=buy").then((function(_t){return _t.json()}))];case 1:return[2,Yt.sent()]}}))}))},getExpectedRate:ae,exchange:function(_t,Lt,Kt,Zt){return y(this,void 0,void 0,(function(){var le,ve,Ce,Se,Ie,Ne,Fe,Re,Pe,Le,Ue,He;return b(this,(function(qe){switch(qe.label){case 0:return[4,te()];case 1:le=qe.sent(),ve="",Ce="";try{for(Se=m(le.data),Ie=Se.next();!Ie.done;Ie=Se.next())(Ne=Ie.value).symbol.toLowerCase()==_t.toLowerCase()?ve=Ne.address:Ne.symbol.toLowerCase()==Lt.toLowerCase()&&(Ce=Ne.address)}catch(_t){Ue={error:_t}}finally{try{Ie&&!Ie.done&&(He=Se.return)&&He.call(Se)}finally{if(Ue)throw Ue.error}}return[4,ne(ve)];case 2:return Fe=qe.sent(),Re=Yt.toBigNumber(Kt).times("1e"+(null==Fe?void 0:Fe.decimals)).toString(),[4,Ft.getUserAccount()];case 3:return Pe=qe.sent(),[4,ae(ve,Ce,Re)];case 4:return Le=qe.sent(),[4,ee("0x818E6FECD516Ecc3849DAf6845e3EC868087B755")];case 5:return qe.sent().contract.tradeWithHint(ve,Re,Ce,Pe,"0x57896044618658097711785492504343953926634992332820282019728792003956564819968",Zt?Le.expectedRate*((100-Zt)/100):Le.slippageRate,"0x440bbd6a888a36de6e2f6a25f65bc4e16874faa9",[parseInt("0x5045524d")]),[2]}}))}))}}),Ze=Object.freeze({__proto__:null,kyberswap:Qe}),tn=Object.freeze({__proto__:null,getListOfWearables:function(_t){return y(this,void 0,void 0,(function(){var Ft,Lt;return b(this,(function(Yt){switch(Yt.label){case 0:return Ft=function(_t){var Ft="";for(var Lt in _t){var Yt=_t[Lt];if(Yt){var Kt="s"===Lt.substr(Lt.length-1)?Lt.slice(0,-1):Lt,Zt=void 0;Zt=Array.isArray(Yt)?x(Yt).map((function(_t){return""+_t})):[""+Yt],Ft+=0===Ft.length?"?":"&",Ft+=Kt+"="+Zt.join("&"+Kt+"=")}}return Ft}(_t),[4,v()];case 1:return Lt=Yt.sent(),[2,fetch(Lt+"/lambdas/collections/wearables"+Ft).then((function(_t){return _t.json()})).then((function(_t){return _t.wearables})).then((function(_t){return _t.map((function(_t){return g(Lt,_t)}))}))]}}))}))}});_t.avatar=Re,_t.contract=$e,_t.currency=Ue,_t.ethereum=Pe,_t.mana=He,_t.marketplace=Xe,_t.nft=We,_t.services=Ze,_t.wearable=tn,Object.defineProperty(_t,"__esModule",{value:!0})})),define("@dcl/ecs-scene-utils",["exports","@decentraland/EnvironmentAPI"],(function(_t,Ft){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var n=function(_t,Ft){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Ft){_t.__proto__=Ft}||function(_t,Ft){for(var Lt in Ft)Object.prototype.hasOwnProperty.call(Ft,Lt)&&(_t[Lt]=Ft[Lt])})(_t,Ft)};function i(_t,Ft){function i(){this.constructor=_t}n(_t,Ft),_t.prototype=null===Ft?Object.create(Ft):(i.prototype=Ft.prototype,new i)}function r(_t,Ft,Lt,Yt){var Kt,Zt=arguments.length,le=Zt<3?Ft:null===Yt?Yt=Object.getOwnPropertyDescriptor(Ft,Lt):Yt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(_t,Ft,Lt,Yt);else for(var ve=_t.length-1;ve>=0;ve--)(Kt=_t[ve])&&(le=(Zt<3?Kt(le):Zt>3?Kt(Ft,Lt,le):Kt(Ft,Lt))||le);return Zt>3&&le&&Object.defineProperty(Ft,Lt,le),le}function o(_t,Ft,Lt,Yt){return new(Lt||(Lt=Promise))((function(Kt,Zt){function a(_t){try{u(Yt.next(_t))}catch(_t){Zt(_t)}}function s(_t){try{u(Yt.throw(_t))}catch(_t){Zt(_t)}}function u(_t){var Ft;_t.done?Kt(_t.value):(Ft=_t.value,Ft instanceof Lt?Ft:new Lt((function(_t){_t(Ft)}))).then(a,s)}u((Yt=Yt.apply(_t,Ft||[])).next())}))}function a(_t,Ft){var Lt,Yt,Kt,Zt,le={label:0,sent:function(){if(1&Kt[0])throw Kt[1];return Kt[1]},trys:[],ops:[]};return Zt={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(Zt[Symbol.iterator]=function(){return this}),Zt;function s(Zt){return function(ve){return function(Zt){if(Lt)throw new TypeError("Generator is already executing.");for(;le;)try{if(Lt=1,Yt&&(Kt=2&Zt[0]?Yt.return:Zt[0]?Yt.throw||((Kt=Yt.return)&&Kt.call(Yt),0):Yt.next)&&!(Kt=Kt.call(Yt,Zt[1])).done)return Kt;switch(Yt=0,Kt&&(Zt=[2&Zt[0],Kt.value]),Zt[0]){case 0:case 1:Kt=Zt;break;case 4:return le.label++,{value:Zt[1],done:!1};case 5:le.label++,Yt=Zt[1],Zt=[0];continue;case 7:Zt=le.ops.pop(),le.trys.pop();continue;default:if(!((Kt=(Kt=le.trys).length>0&&Kt[Kt.length-1])||6!==Zt[0]&&2!==Zt[0])){le=0;continue}if(3===Zt[0]&&(!Kt||Zt[1]>Kt[0]&&Zt[1]<Kt[3])){le.label=Zt[1];break}if(6===Zt[0]&&le.label<Kt[1]){le.label=Kt[1],Kt=Zt;break}if(Kt&&le.label<Kt[2]){le.label=Kt[2],le.ops.push(Zt);break}Kt[2]&&le.ops.pop(),le.trys.pop();continue}Zt=Ft.call(_t,le)}catch(_t){Zt=[6,_t],Yt=0}finally{Lt=Kt=0}if(5&Zt[0])throw Zt[1];return{value:Zt[0]?Zt[1]:void 0,done:!0}}([Zt,ve])}}}function s(_t){var Ft="function"==typeof Symbol&&Symbol.iterator,Lt=Ft&&_t[Ft],Yt=0;if(Lt)return Lt.call(_t);if(_t&&"number"==typeof _t.length)return{next:function(){return _t&&Yt>=_t.length&&(_t=void 0),{value:_t&&_t[Yt++],done:!_t}}};throw new TypeError(Ft?"Object is not iterable.":"Symbol.iterator is not defined.")}var Lt,Yt=function(){function e(){this._components=[],this._componentGroups=[],e._instance=this}return e.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new e,engine.addSystem(this._instance)),this._instance},e.registerCustomComponent=function(_t){this.createAndAddToEngine()._components.push(_t)},e.prototype.addComponentType=function(_t){var Ft,Lt;try{for(var Yt=s(this._components),Kt=Yt.next();!Kt.done;Kt=Yt.next())if(_t==Kt.value)return}catch(_t){Ft={error:_t}}finally{try{Kt&&!Kt.done&&(Lt=Yt.return)&&Lt.call(Yt)}finally{if(Ft)throw Ft.error}}this._components.push(_t),this._componentGroups.push(engine.getComponentGroup(_t,Transform))},e.prototype.update=function(_t){for(var Ft=0;Ft<this._components.length;Ft++)this.updateComponent(_t,this._components[Ft],this._componentGroups[Ft])},e.prototype.updateComponent=function(_t,Ft,Lt){Lt.entities.forEach((function(Lt){var Yt=Lt.getComponent(Transform),Kt=Lt.getComponent(Ft);Kt.update(_t),Kt.assignValueToTransform(Yt),Kt.hasFinished()&&(Lt.removeComponent(Kt),null!=Kt.onFinishCallback&&Kt.onFinishCallback())}))},e._instance=null,e}();function h(Ft,Lt){switch(Ft){case _t.InterpolationType.LINEAR:return Lt;case _t.InterpolationType.EASEINQUAD:return function(_t){return _t*_t}(Lt);case _t.InterpolationType.EASEOUTQUAD:return function(_t){return _t*(2-_t)}(Lt);case _t.InterpolationType.EASEQUAD:return function(_t){return _t*_t/(2*(_t*_t-_t)+1)}(Lt);case _t.InterpolationType.EASEINSINE:return function(_t){return 1-Math.cos(_t*Math.PI/2)}(Lt);case _t.InterpolationType.EASEOUTSINE:return function(_t){return Math.sin(_t*Math.PI/2)}(Lt);case _t.InterpolationType.EASESINE:return function(_t){return-(Math.cos(Math.PI*_t)-1)/2}(Lt);case _t.InterpolationType.EASEINEXPO:return function(_t){return 0===_t?0:Math.pow(2,10*_t-10)}(Lt);case _t.InterpolationType.EASEOUTEXPO:return function(_t){return 1===_t?1:1-Math.pow(2,-10*_t)}(Lt);case _t.InterpolationType.EASEEXPO:return function(_t){return 0===_t?0:1===_t?1:_t<.5?Math.pow(2,20*_t-10)/2:(2-Math.pow(2,-20*_t+10))/2}(Lt);case _t.InterpolationType.EASEINELASTIC:return function(_t){var Ft=2*Math.PI/3;return 0===_t?0:1===_t?1:-Math.pow(2,10*_t-10)*Math.sin((10*_t-10.75)*Ft)}(Lt);case _t.InterpolationType.EASEOUTELASTIC:return function(_t){var Ft=2*Math.PI/3;return 0===_t?0:1===_t?1:Math.pow(2,-10*_t)*Math.sin((10*_t-.75)*Ft)+1}(Lt);case _t.InterpolationType.EASEELASTIC:return function(_t){var Ft=2*Math.PI/4.5;return 0===_t?0:1===_t?1:_t<.5?-Math.pow(2,20*_t-10)*Math.sin((20*_t-11.125)*Ft)/2:Math.pow(2,-20*_t+10)*Math.sin((20*_t-11.125)*Ft)/2+1}(Lt);case _t.InterpolationType.EASEINBOUNCE:return function(_t){return 1-l(1-_t)}(Lt);case _t.InterpolationType.EASEOUTEBOUNCE:return function(_t){return l(_t)}(Lt);case _t.InterpolationType.EASEBOUNCE:return function(_t){return _t<.5?(1-l(1-2*_t))/2:(1+l(2*_t-1))/2}(Lt);default:return Lt}}function l(_t){var Ft=7.5625,Lt=2.75;return _t<1/Lt?Ft*_t*_t:_t<2/Lt?Ft*(_t-=1.5/Lt)*_t+.75:_t<2.5/Lt?Ft*(_t-=2.25/Lt)*_t+.9375:Ft*(_t-=2.625/Lt)*_t+.984375}_t.InterpolationType=void 0,(Lt=_t.InterpolationType||(_t.InterpolationType={}))[Lt.LINEAR=0]="LINEAR",Lt[Lt.EASEINQUAD=1]="EASEINQUAD",Lt[Lt.EASEOUTQUAD=2]="EASEOUTQUAD",Lt[Lt.EASEQUAD=3]="EASEQUAD",Lt.EASEINSINE="easeinsine",Lt.EASEOUTSINE="easeoutsine",Lt.EASESINE="easeinoutsine",Lt.EASEINEXPO="easeinexpo",Lt.EASEOUTEXPO="easeoutexpo",Lt.EASEEXPO="easeinoutexpo",Lt.EASEINELASTIC="easeinelastic",Lt.EASEOUTELASTIC="easeoutelastic",Lt.EASEELASTIC="easeinoutelastic",Lt.EASEINBOUNCE="easeinbounce",Lt.EASEOUTEBOUNCE="easeoutbounce",Lt.EASEBOUNCE="easeinoutbounce";var Kt,Zt=function(){function t(Lt,Kt,Zt,le,ve){void 0===ve&&(ve=_t.InterpolationType.LINEAR),this.start=Lt,this.end=Kt,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=le,this.interpolationType=ve,0!=Zt?this.speed=1/Zt:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),Yt.createAndAddToEngine().addComponentType(Ft)}var Ft;return Ft=t,t.prototype.update=function(_t){this.normalizedTime=Scalar.Clamp(this.normalizedTime+_t*this.speed,0,1),this.lerpTime=h(this.interpolationType,this.normalizedTime)},t.prototype.hasFinished=function(){return this.normalizedTime>=1},t.prototype.assignValueToTransform=function(_t){_t.position=Vector3.Lerp(this.start,this.end,this.lerpTime)},Ft=r([Component("moveTransformComponent")],t)}(),le=function(){function t(Lt,Kt,Zt,le,ve){void 0===ve&&(ve=_t.InterpolationType.LINEAR),this.start=Lt,this.end=Kt,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=le,this.interpolationType=ve,0!=Zt?this.speed=1/Zt:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),Yt.createAndAddToEngine().addComponentType(Ft)}var Ft;return Ft=t,t.prototype.update=function(_t){this.normalizedTime=Scalar.Clamp(this.normalizedTime+_t*this.speed,0,1),this.lerpTime=h(this.interpolationType,this.normalizedTime)},t.prototype.hasFinished=function(){return this.normalizedTime>=1},t.prototype.assignValueToTransform=function(_t){_t.rotation=Quaternion.Slerp(this.start,this.end,this.lerpTime)},Ft=r([Component("rotateTransformComponent")],t)}(),ve=function(){function t(Lt,Kt,Zt,le,ve){void 0===ve&&(ve=_t.InterpolationType.LINEAR),this.start=Lt,this.end=Kt,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=le,this.interpolationType=ve,0!=Zt?this.speed=1/Zt:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),Yt.createAndAddToEngine().addComponentType(Ft)}var Ft;return Ft=t,t.prototype.update=function(_t){this.normalizedTime=Scalar.Clamp(this.normalizedTime+_t*this.speed,0,1),this.lerpTime=h(this.interpolationType,this.normalizedTime)},t.prototype.hasFinished=function(){return this.normalizedTime>=1},t.prototype.assignValueToTransform=function(_t){_t.scale=Vector3.Lerp(this.start,this.end,this.lerpTime)},Ft=r([Component("scaleTransformComponent")],t)}(),Ce=function(){function e(Ft,Lt,Kt,Zt){if(this.speed=[],this.normalizedTime=0,this.currentIndex=0,this.points=Ft,this.onFinishCallback=Kt,this.onPointReachedCallback=Zt,Ft.length<2)throw new Error("At least 2 points are needed for FollowPathComponent.");if(Lt>0){for(var le=0,ve=[],Ce=0;Ce<Ft.length-1;Ce++){var Se=Vector3.Distance(Ft[Ce],Ft[Ce+1]);le+=Se,ve.push(Se)}for(Ce=0;Ce<ve.length;Ce++)this.speed.push(1/(ve[Ce]/le*Lt))}else this.normalizedTime=1,this.currentIndex=Ft.length-2;Yt.createAndAddToEngine().addComponentType(_t)}var _t;return _t=e,e.prototype.update=function(_t){this.normalizedTime=Scalar.Clamp(this.normalizedTime+_t*this.speed[this.currentIndex],0,1),this.normalizedTime>=1&&this.currentIndex<this.points.length-2&&(this.currentIndex++,this.normalizedTime=0,this.onPointReachedCallback&&this.currentIndex<this.points.length-1&&this.onPointReachedCallback(this.points[this.currentIndex],this.points[this.currentIndex+1]))},e.prototype.hasFinished=function(){return this.currentIndex>=this.points.length-2&&this.normalizedTime>=1},e.prototype.assignValueToTransform=function(_t){_t.position=Vector3.Lerp(this.points[this.currentIndex],this.points[this.currentIndex+1],this.normalizedTime)},_t=r([Component("followPathComponent")],e)}(),Se=function(){function e(Ft,Lt,Kt,Zt,le,ve){if(this.speed=[],this.turnToFaceNext=!1,this.facingNext=!1,this.normalizedTime=0,this.currentIndex=0,this.points=Curve3.CreateCatmullRomSpline(Ft,Kt,!!le).getPoints(),this.onFinishCallback=ve,this.turnToFaceNext=Zt||!1,this.points.length<2)throw new Error("At least 2 points are needed for FollowPathComponent.");if(Lt>0){for(var Ce=0,Se=[],Ie=0;Ie<this.points.length-1;Ie++){var Ne=Vector3.Distance(this.points[Ie],this.points[Ie+1]);Ce+=Ne,Se.push(Ne)}for(Ie=0;Ie<Se.length;Ie++)this.speed.push(1/(Se[Ie]/Ce*Lt))}else this.normalizedTime=1,this.currentIndex=Ft.length-2;Yt.createAndAddToEngine().addComponentType(_t)}var _t;return _t=e,e.prototype.update=function(_t){this.normalizedTime=Scalar.Clamp(this.normalizedTime+_t*this.speed[this.currentIndex],0,1),this.normalizedTime>=1&&this.currentIndex<this.points.length-2&&(this.currentIndex++,this.normalizedTime=0,1==this.turnToFaceNext&&(this.facingNext=!1))},e.prototype.hasFinished=function(){return this.currentIndex>=this.points.length-2&&this.normalizedTime>=1},e.prototype.assignValueToTransform=function(_t){_t.position=Vector3.Lerp(this.points[this.currentIndex],this.points[this.currentIndex+1],this.normalizedTime),this.facingNext||(this.facingNext=!0,this.currentIndex<this.points.length-1?_t.lookAt(this.points[this.currentIndex+1]):_t.lookAt(this.points[0]))},_t=r([Component("followCurvedPathComponent")],e)}(),Ie=function(){function e(Ft,Lt){this.rotationVelocity=Ft,this.onFinishCallback=Lt,this.rotation=Quaternion.Identity,this.finished=!1,Yt.createAndAddToEngine().addComponentType(_t)}var _t;return _t=e,e.prototype.update=function(_t){this.rotation=Quaternion.Slerp(Quaternion.Identity,this.rotationVelocity,_t)},e.prototype.hasFinished=function(){return this.finished},e.prototype.assignValueToTransform=function(_t){_t.rotation=_t.rotation.multiply(this.rotation)},e.prototype.stop=function(){this.finished=!0},_t=r([Component("keepRotatingComponent")],e)}();_t.ToggleState=void 0,(Kt=_t.ToggleState||(_t.ToggleState={}))[Kt.Off=0]="Off",Kt[Kt.On=1]="On";var Ne=function(){function t(Ft,Lt){void 0===Ft&&(Ft=_t.ToggleState.On),this.enabled=!0,this.state=_t.ToggleState.Off,this.set(Ft),Lt&&this.setCallback(Lt)}return t.prototype.set=function(_t){this.state=_t,this.onValueChangedCallback&&this.onValueChangedCallback(_t)},t.prototype.toggle=function(){this.enabled&&this.set(1-this.state)},t.prototype.isOn=function(){return this.state==_t.ToggleState.On},t.prototype.setCallback=function(_t){this.onValueChangedCallback=_t},r([Component("toggle")],t)}(),Fe=function(){function e(){this._components=[],e._instance=this}return e.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new e,engine.addSystem(this._instance)),this._instance},e.registerCustomComponent=function(_t){this.createAndAddToEngine()._components.push(_t)},e.prototype.addComponentType=function(_t){var Ft,Lt;try{for(var Yt=s(this._components),Kt=Yt.next();!Kt.done;Kt=Yt.next())if(_t==Kt.value)return}catch(_t){Ft={error:_t}}finally{try{Kt&&!Kt.done&&(Lt=Yt.return)&&Lt.call(Yt)}finally{if(Ft)throw Ft.error}}this._components.push(_t)},e.prototype.update=function(_t){var Ft=this;this._components.forEach((function(Lt){Ft.updateComponent(_t,Lt)}))},e.prototype.updateComponent=function(_t,Ft){var Lt=engine.getEntitiesWithComponent(Ft);for(var Yt in Lt)if(Lt.hasOwnProperty(Yt)){var Kt=Lt[Yt],Zt=Kt.getComponent(Ft);Zt.elapsedTime+=_t,Zt.elapsedTime>=Zt.targetTime&&Zt.onTargetTimeReached(Kt)}},e._instance=null,e}(),Re=function(){function e(Ft,Lt){var Yt=this;Fe.createAndAddToEngine().addComponentType(_t),this.elapsedTime=0,this.targetTime=Ft/1e3,this.onTimeReachedCallback=Lt,this.onTargetTimeReached=function(_t){Yt.onTimeReachedCallback&&Yt.onTimeReachedCallback(),_t.removeComponent(Yt)}}var _t;return _t=e,e.prototype.setCallback=function(_t){this.onTimeReachedCallback=_t},_t=r([Component("timerDelay")],e)}(),Pe=function(){function e(Ft,Lt){var Yt=this;Fe.createAndAddToEngine().addComponentType(_t),this.elapsedTime=0,this.targetTime=Ft/1e3,this.onTimeReachedCallback=Lt,this.onTargetTimeReached=function(_t){Yt.onTimeReachedCallback&&Yt.onTimeReachedCallback(),_t.removeComponent(Yt),engine.removeEntity(_t)}}var _t;return _t=e,e.prototype.setCallback=function(_t){this.onTimeReachedCallback=_t},_t=r([Component("timerExpireIn")],e)}(),Le=function(){function e(Ft,Lt){var Yt=this;Fe.createAndAddToEngine().addComponentType(_t),this.elapsedTime=0,this.targetTime=Ft/1e3,this.onTimeReachedCallback=Lt,this.onTargetTimeReached=function(){Yt.elapsedTime=0,Yt.onTimeReachedCallback&&Yt.onTimeReachedCallback()}}var _t;return _t=e,e.prototype.setCallback=function(_t){this.onTimeReachedCallback=_t},_t=r([Component("timerInterval")],e)}();function I(_t,Ft,Lt,Yt,Kt,Zt){var le=new Entity;le.addComponent(new Transform(Zt||{position:new Vector3(0,1.5,0)})),le.setParent(Ft);var ve=new TextShape(_t);return ve.fontSize=Kt||3,ve.color=Yt||Color3.Black(),le.addComponent(ve),Lt&&le.addComponent(new Billboard),engine.addEntity(le),le}var Ue,He,qe=function(){function e(){this._triggers={},e._instance=this,this._cameraTriggerWrapper=new Ge(new P(new Vector3(.5,1.8,.5),new Vector3(0,.91,0))),this._componentGroup=engine.getComponentGroup(Ve)}return Object.defineProperty(e,"instance",{get:function(){return this.createAndAddToEngine()},enumerable:!1,configurable:!0}),e.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new e,engine.addSystem(this._instance)),this._instance},e.prototype.setCameraTriggerShape=function(_t){this._cameraTriggerWrapper.setShape(_t)},e.prototype.update=function(){var _t=this,Ft=this._componentGroup.entities;for(var Lt in Ft.forEach((function(Ft){_t.shouldWrapTriggerEntity(Ft)&&_t.wrapTriggerEntity(Ft)})),this._triggers)if(this._triggers.hasOwnProperty(Lt)){var Yt=this._triggers[Lt];Yt.isDebugging()&&Yt.updateDebugEntity(),Yt.isInEngine()?null!=Yt.trigger&&Yt.trigger.enabled?(Yt.wasEnabled||Yt.isDebugging()&&Yt.addDebugEntity(),Yt.wasEnabled=!0,(Yt.trigger.onCameraEnter||Yt.trigger.onCameraExit)&&this.checkCollisionAgainstCamera(Yt),(Yt.trigger.onTriggerEnter||Yt.trigger.onTriggerExit)&&this.checkCollisionAgainstOtherTriggers(Yt)):Yt.wasEnabled&&(Yt.wasEnabled=!1,Yt.isDebugging()&&Yt.removeDebugEntity(),e.removeTriggerFromSystem(Yt)):(Yt.isDebugging()&&Yt.removeDebugEntity(),e.removeTriggerFromSystem(Yt),delete this._triggers[Lt])}},e.prototype.shouldWrapTriggerEntity=function(_t){return null==this._triggers[_t.uuid]||null==this._triggers[_t.uuid]},e.prototype.wrapTriggerEntity=function(_t){this._triggers[_t.uuid]=new We(_t)},e.removeTriggerFromSystem=function(_t){for(var Ft,Lt=_t.getActiveCollisions(),Yt=0;Yt<Lt.length;Yt++)!(Lt[Yt]===(null===(Ft=e._instance)||void 0===Ft?void 0:Ft._cameraTriggerWrapper)||null==Lt[Yt].trigger)&&Lt[Yt].trigger.onTriggerExit&&_t.entity&&Lt[Yt].trigger.onTriggerExit(_t.entity),Lt[Yt].disengageActiveCollision(_t),_t.disengageActiveCollision(Lt[Yt])},e.disengageCollision=function(_t,Ft){_t.disengageActiveCollision(Ft),Ft.disengageActiveCollision(_t),_t.trigger.onTriggerExit&&Ft.entity&&_t.trigger.onTriggerExit(Ft.entity),Ft.trigger.onTriggerExit&&_t.entity&&Ft.trigger.onTriggerExit(_t.entity)},e.engageCollision=function(_t,Ft){_t.engageCollision(Ft),Ft.engageCollision(_t),_t.trigger.onTriggerEnter&&Ft.entity&&_t.trigger.onTriggerEnter(Ft.entity),Ft.trigger.onTriggerEnter&&_t.entity&&Ft.trigger.onTriggerEnter(_t.entity)},e.prototype.checkCollisionAgainstCamera=function(_t){var Ft=_t.hasActiveCollision(this._cameraTriggerWrapper),Lt=e.areColliding(_t,this._cameraTriggerWrapper);Ft&&!Lt?(_t.disengageActiveCollision(this._cameraTriggerWrapper),_t.trigger.onCameraExit&&_t.trigger.onCameraExit()):!Ft&&Lt&&(_t.engageCollision(this._cameraTriggerWrapper),_t.trigger.onCameraEnter&&_t.trigger.onCameraEnter())},e.prototype.checkCollisionAgainstOtherTriggers=function(_t){for(var Ft in this._triggers)if(this._triggers.hasOwnProperty(Ft)&&Ft!=_t.uuid&&this._triggers[Ft].trigger.enabled&&e.canTriggersCollide(_t,this._triggers[Ft])){var Lt=_t.hasActiveCollision(this._triggers[Ft]),Yt=e.areColliding(_t,this._triggers[Ft]);Lt&&!Yt?e.disengageCollision(_t,this._triggers[Ft]):!Lt&&Yt&&e.engageCollision(_t,this._triggers[Ft])}},e.canTriggersCollide=function(_t,Ft){return 0==_t.trigger.triggeredByLayer||0!=(Ft.trigger.layer&_t.trigger.triggeredByLayer)},e.areColliding=function(_t,Ft){return _t.getShape()instanceof P&&Ft.getShape()instanceof P?e.areCollidingAABB(_t.getGlobalPosition(),_t.getShape(),Ft.getGlobalPosition(),Ft.getShape()):_t.getShape()instanceof k&&Ft.getShape()instanceof k?e.areCollidingSphere(_t.getGlobalPosition(),_t.getShape(),Ft.getGlobalPosition(),Ft.getShape()):_t.getShape()instanceof P&&Ft.getShape()instanceof k?e.areCollidingAABBSphere(_t.getGlobalPosition(),_t.getShape(),Ft.getGlobalPosition(),Ft.getShape()):_t.getShape()instanceof k&&Ft.getShape()instanceof P&&e.areCollidingAABBSphere(Ft.getGlobalPosition(),Ft.getShape(),_t.getGlobalPosition(),_t.getShape())},e.areCollidingAABB=function(_t,Ft,Lt,Yt){var Kt=e.getBoxShapeValues(_t,Ft),Zt=e.getBoxShapeValues(Lt,Yt);return Kt.min.x<=Zt.max.x&&Kt.max.x>=Zt.min.x&&Kt.min.y<=Zt.max.y&&Kt.max.y>=Zt.min.y&&Kt.min.z<=Zt.max.z&&Kt.max.z>=Zt.min.z},e.areCollidingSphere=function(_t,Ft,Lt,Yt){return Vector3.DistanceSquared(_t.add(Ft.position),Lt.add(Yt.position))<Ft.radius*Ft.radius+Yt.radius*Yt.radius},e.areCollidingAABBSphere=function(_t,Ft,Lt,Yt){var Kt=e.getBoxShapeValues(_t,Ft),Zt=Lt.add(Yt.position),le=Yt.radius,ve=0;return Zt.x<Kt.min.x&&(ve+=(Kt.min.x-Zt.x)*(Kt.min.x-Zt.x)),Zt.x>Kt.max.x&&(ve+=(Zt.x-Kt.max.x)*(Zt.x-Kt.max.x)),Zt.y<Kt.min.y&&(ve+=(Kt.min.y-Zt.y)*(Kt.min.y-Zt.y)),Zt.y>Kt.max.y&&(ve+=(Zt.y-Kt.max.y)*(Zt.y-Kt.max.y)),Zt.z<Kt.min.z&&(ve+=(Kt.min.z-Zt.z)*(Kt.min.z-Zt.z)),Zt.z>Kt.max.z&&(ve+=(Zt.z-Kt.max.z)*(Zt.z-Kt.max.z)),ve<le*le},e.getBoxShapeValues=function(_t,Ft){var Lt=_t.add(Ft.position);return{center:Lt,min:Lt.subtract(Ft.size.scale(.5)),max:Lt.add(Ft.size.scale(.5))}},e._instance=null,e}(),We=function(){function e(_t){this.wasEnabled=!0,this._uuid="",this._collidingWith={},this._isDebug=!1,this._debugEntity=null,this._entity=_t,_t&&(this._trigger=_t.getComponent(Ve),this._uuid=_t.uuid,this._isDebug=this._trigger.debugEnabled,this._isDebug&&this.addDebugEntity())}return Object.defineProperty(e.prototype,"entity",{get:function(){return this._entity},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trigger",{get:function(){return this._trigger},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uuid",{get:function(){return this._uuid},enumerable:!1,configurable:!0}),e.prototype.getGlobalPosition=function(){return this._entity?e.getEntityWorldPosition(this._entity):Vector3.Zero()},e.prototype.getShape=function(){return this._trigger.shape},e.prototype.isInEngine=function(){return null!=this._entity&&this._entity.isAddedToEngine()},e.prototype.getActiveCollisions=function(){var _t=[];for(var Ft in this._collidingWith)this._collidingWith.hasOwnProperty(Ft)&&_t.push(this._collidingWith[Ft]);return _t},e.prototype.hasActiveCollision=function(_t){return null!=this._collidingWith[_t.uuid]&&null!=this._collidingWith[_t.uuid]},e.prototype.disengageActiveCollision=function(_t){delete this._collidingWith[_t.uuid]},e.prototype.engageCollision=function(_t){this._collidingWith[_t.uuid]=_t},e.prototype.isDebugging=function(){return this._isDebug},e.prototype.addDebugEntity=function(){return o(this,void 0,void 0,(function(){var _t,Lt,Yt;return a(this,(function(Kt){switch(Kt.label){case 0:return[4,!Ft.isPreviewMode()];case 1:return Kt.sent()||(e._debugMaterial||(e._debugMaterial=new Material,e._debugMaterial.alphaTest=.5),null==this._debugEntity&&(this._debugEntity=new Entity,_t=new Transform,this._debugEntity.addComponent(_t),this._debugEntity.addComponent(e._debugMaterial),this.getShape()instanceof P&&((Lt=new BoxShape).withCollisions=!1,this._debugEntity.addComponent(Lt),_t.scale=this.getShape().size),this.getShape()instanceof k&&((Lt=new SphereShape).withCollisions=!1,this._debugEntity.addComponent(Lt),Yt=this.getShape().radius,_t.scale=new Vector3(Yt,Yt,Yt))),engine.addEntity(this._debugEntity)),[2]}}))}))},e.prototype.removeDebugEntity=function(){null!=this._debugEntity&&engine.removeEntity(this._debugEntity)},e.prototype.updateDebugEntity=function(){this._debugEntity&&(this._debugEntity.getComponent(Transform).position=this.getGlobalPosition().add(this.getShape().position))},e.getEntityWorldPosition=function(_t){var Ft=_t.hasComponent(Transform)?_t.getComponent(Transform).position.clone():Vector3.Zero(),Lt=_t.getParent();if(null!=Lt){var Yt=Lt.hasComponent(Transform)?Lt.getComponent(Transform).rotation:Quaternion.Identity;return this.getEntityWorldPosition(Lt).add(Ft.rotate(Yt))}return Ft},e._debugMaterial=null,e}(),Ge=function(_t){function t(Ft){var Lt=_t.call(this)||this;return Lt._shape=Ft,Lt._uuid="cameraTrigger",Lt}return i(t,_t),t.prototype.getGlobalPosition=function(){return Camera.instance.position},t.prototype.getShape=function(){return this._shape},t.prototype.setShape=function(_t){this._shape=_t},t.prototype.isInEngine=function(){return!1},t.prototype.hasActiveCollision=function(_t){return!1},t.prototype.disengageActiveCollision=function(_t){},t.prototype.engageCollision=function(_t){},t.prototype.isDebugging=function(){return!1},t}(We),Ve=function(){function e(_t,Ft){this.enabled=!0,this.layer=0,this.triggeredByLayer=0,this._debugEnabled=!1,qe.createAndAddToEngine(),this.shape=_t,Ft&&(Ft.layer&&(this.layer=Ft.layer),Ft.triggeredByLayer&&(this.triggeredByLayer=Ft.triggeredByLayer),Ft.onTriggerEnter&&(this.onTriggerEnter=Ft.onTriggerEnter),Ft.onTriggerExit&&(this.onTriggerExit=Ft.onTriggerExit),Ft.onCameraEnter&&(this.onCameraEnter=Ft.onCameraEnter),Ft.onCameraExit&&(this.onCameraExit=Ft.onCameraExit),Ft.enableDebug&&(this._debugEnabled=Ft.enableDebug))}return Object.defineProperty(e.prototype,"debugEnabled",{get:function(){return this._debugEnabled},enumerable:!1,configurable:!0}),r([Component("triggerComponent")],e)}(),P=function(_t,Ft){void 0===_t&&(_t=Vector3.One().scale(2)),void 0===Ft&&(Ft=Vector3.Zero()),this.size=_t,this.position=Ft},k=function(_t,Ft){void 0===_t&&(_t=2),void 0===Ft&&(Ft=Vector3.Zero()),this.radius=_t,this.position=Ft};_t.ActionsSequenceSystem=function(){function e(_t){this.beginSequenceNode=null,this.currentSequenceNode=null,this.running=!1,this.started=!1,_t&&this.startSequence(_t)}return e.prototype.startSequence=function(_t){this.beginSequenceNode=_t.beginSequenceNode,this.currentSequenceNode=this.beginSequenceNode,this.running=!0,this.started=!1},e.prototype.setOnFinishCallback=function(_t){this.onFinishCallback=_t},e.prototype.isRunning=function(){return this.running},e.prototype.stop=function(){this.running=!1},e.prototype.resume=function(){null!=this.beginSequenceNode&&(this.running=!0)},e.prototype.reset=function(){this.currentSequenceNode=this.beginSequenceNode,this.running=!0,this.started=!1},e.prototype.getRunningAction=function(){var _t=this.currentSequenceNode;if(this.currentSequenceNode instanceof Xe)do{_t=_t.currentInnerSequence}while(_t instanceof Xe);return _t.action},e.prototype.update=function(_t){this.running&&(this.started?this.currentSequenceNode.hasFinish()?(this.currentSequenceNode.onFinish(),this.currentSequenceNode=this.currentSequenceNode.next,this.currentSequenceNode?this.currentSequenceNode.onStart():(this.running=!1,this.onFinishCallback&&this.onFinishCallback())):this.currentSequenceNode.update(_t):(this.currentSequenceNode.onStart(),this.started=!0))},e}(),Ue=_t.ActionsSequenceSystem||(_t.ActionsSequenceSystem={}),He=function(){function e(){this.currentSequenceNode=null,this.beginSequenceNode=null,this.whileNodeStack=[]}return e.prototype.then=function(_t){if(null==this.currentSequenceNode)this.currentSequenceNode=new $e,this.currentSequenceNode.action=_t,this.beginSequenceNode=this.currentSequenceNode;else{var Ft=new $e;Ft.action=_t,this.currentSequenceNode=this.currentSequenceNode.then(Ft)}return this},e.prototype.if=function(_t){var Ft=new Ye(_t);return null==this.currentSequenceNode?(this.currentSequenceNode=Ft,this.beginSequenceNode=Ft):this.currentSequenceNode=this.currentSequenceNode.then(Ft),this},e.prototype.else=function(){var _t=this.currentSequenceNode.getSequence();if(!(_t instanceof Ye))throw new Error("IF statement is needed to be called before ELSE statement.");_t.closed=!0;var Ft=new Je(_t);return this.currentSequenceNode=this.currentSequenceNode.then(Ft),this},e.prototype.endIf=function(){var _t=this.currentSequenceNode.getSequence();if(!(_t instanceof Ye||_t instanceof Je))throw new Error("IF statement is needed to be called before ENDIF statement.");return _t.closed=!0,this},e.prototype.while=function(_t){var Ft=new Qe(_t);return null==this.currentSequenceNode?(this.currentSequenceNode=Ft,this.beginSequenceNode=Ft):this.currentSequenceNode=this.currentSequenceNode.then(Ft),this.whileNodeStack.push(Ft),this},e.prototype.endWhile=function(){var _t=this.currentSequenceNode.getSequence();if(!(_t instanceof Qe))throw new Error("WHILE statement is needed to be called before ENDWHILE statement.");return _t.closed=!0,this.whileNodeStack.length>0&&this.whileNodeStack.splice(this.whileNodeStack.length-1,1),this},e.prototype.breakWhile=function(){if(!(this.whileNodeStack.length>0))throw new Error("WHILE statement is needed to be called before BREAKWHILE statement.");return this.currentSequenceNode=this.currentSequenceNode.then(new Ze(this.whileNodeStack[this.whileNodeStack.length-1])),this},e}(),Ue.SequenceBuilder=He;var $e=function(){function e(){this.action=null,this.next=null}return e.prototype.then=function(_t){return this.next=_t,_t},e.prototype.onStart=function(){this.action&&this.action.onStart()},e.prototype.update=function(_t){this.action&&this.action.update(_t)},e.prototype.onFinish=function(){this.action&&this.action.onFinish()},e.prototype.hasFinish=function(){return!this.action||this.action.hasFinished},e.prototype.getSequence=function(){return this},e}(),Xe=function(_t){function t(){var Ft=null!==_t&&_t.apply(this,arguments)||this;return Ft.currentInnerSequence=null,Ft.startingInnerSequence=null,Ft.closed=!1,Ft}return i(t,_t),t.prototype.then=function(_t){if(null==this.currentInnerSequence)this.currentInnerSequence=_t,this.startingInnerSequence=_t;else{if(this.closed)return this.next=_t,_t;this.currentInnerSequence=this.currentInnerSequence.then(_t)}return this},t.prototype.onStart=function(){this.currentInnerSequence=this.startingInnerSequence,this.currentInnerSequence&&this.currentInnerSequence.onStart()},t.prototype.update=function(_t){this.currentInnerSequence&&(this.currentInnerSequence.hasFinish()?(this.currentInnerSequence.onFinish(),this.currentInnerSequence=this.currentInnerSequence.next,this.currentInnerSequence&&this.currentInnerSequence.onStart()):this.currentInnerSequence.update(_t))},t.prototype.onFinish=function(){this.currentInnerSequence&&this.currentInnerSequence.onFinish()},t.prototype.hasFinish=function(){return null==this.currentInnerSequence},t.prototype.getSequence=function(){if(this.currentInnerSequence){var _t=this.currentInnerSequence.getSequence();if(_t instanceof t&&!_t.closed)return _t}return this},t}($e),Ye=function(_t){function t(Ft){var Lt=_t.call(this)||this;return Lt.result=!1,Lt.condition=Ft,Lt}return i(t,_t),t.prototype.onStart=function(){this.result=this.condition(),this.result?_t.prototype.onStart.call(this):this.currentInnerSequence=null},t}(Xe),Je=function(_t){function t(Ft){var Lt=_t.call(this)||this;return Lt.ifSequence=null,Lt.ifSequence=Ft,Lt}return i(t,_t),t.prototype.onStart=function(){this.ifSequence&&!this.ifSequence.result?_t.prototype.onStart.call(this):this.currentInnerSequence=null},t}(Xe),Qe=function(_t){function t(Ft){var Lt=_t.call(this)||this;return Lt.breakWhile=!1,Lt.condition=Ft,Lt}return i(t,_t),t.prototype.onStart=function(){this.breakWhile=!1,this.condition()?_t.prototype.onStart.call(this):this.currentInnerSequence=null},t.prototype.update=function(_t){this.currentInnerSequence&&(this.currentInnerSequence.hasFinish()?(this.currentInnerSequence.onFinish(),this.currentInnerSequence=this.currentInnerSequence.next,null==this.currentInnerSequence&&(this.currentInnerSequence=this.startingInnerSequence),this.currentInnerSequence&&this.currentInnerSequence.onStart()):this.currentInnerSequence.update(_t))},t.prototype.hasFinish=function(){return this.breakWhile||!this.condition()},t}(Xe),Ze=function(_t){function t(Ft){var Lt=_t.call(this)||this;return Lt.whileNode=Ft,Lt}return i(t,_t),t.prototype.onStart=function(){this.whileNode.breakWhile=!0},t}($e);_t.Delay=Re,_t.ExpireIn=Pe,_t.FollowCurvedPathComponent=Se,_t.FollowPathComponent=Ce,_t.Interpolate=h,_t.Interval=Le,_t.KeepRotatingComponent=Ie,_t.MoveTransformComponent=Zt,_t.RotateTransformComponent=le,_t.ScaleTransformComponent=ve,_t.SequenceNode=$e,_t.ToggleComponent=Ne,_t.TransformSystem=Yt,_t.TriggerBoxShape=P,_t.TriggerComponent=Ve,_t.TriggerSphereShape=k,_t.TriggerSystem=qe,_t.addLabel=I,_t.addOneTimeTrigger=function(_t,Ft,Lt){var Yt=!1,Kt=!1,Zt=new Entity;Zt.addComponent(new Transform({}));var le={};return Ft.layer&&(le.layer=Ft.layer),Ft.triggeredByLayer&&(le.triggeredByLayer=Ft.triggeredByLayer),Ft.onCameraEnter&&(le.onCameraEnter=function(){Yt||(Yt=!0,Ft.onCameraEnter()),!Yt&&Ft.onCameraEnter||!Kt&&Ft.onCameraExit||engine.removeEntity(Zt)}),Ft.onCameraExit&&(le.onCameraExit=function(){Kt||(Kt=!0,Ft.onCameraExit()),!Yt&&Ft.onCameraEnter||!Kt&&Ft.onCameraExit||engine.removeEntity(Zt)}),Ft.enableDebug&&(le.enableDebug=Ft.enableDebug),Zt.addComponent(new Ve(_t,le)),Lt&&Zt.setParent(Lt),engine.addEntity(Zt),Zt},_t.addTestCube=function(_t,Lt,Yt,Kt,Zt,le,ve){return o(this,void 0,void 0,(function(){var Ce,Se,Ie;return a(this,(function(Ne){switch(Ne.label){case 0:return(Ce=!ve)?[4,!Ft.isPreviewMode()]:[3,2];case 1:Ce=Ne.sent(),Ne.label=2;case 2:return Ce?[2]:((Se=new Entity).addComponent(new Transform(_t)),Zt?(Se.addComponent(new SphereShape),Se.getComponent(Transform).scale.setAll(.5)):Se.addComponent(new BoxShape),engine.addEntity(Se),Se.addComponent(new OnPointerDown(Lt,{hoverText:Yt||"click",button:ActionButton.POINTER})),Kt&&((Ie=new Material).albedoColor=Kt,Se.addComponent(Ie)),le&&(Se.getComponent(BoxShape).withCollisions=!1),Yt&&I(Yt,Se,!0),[2,Se])}}))}))},_t.clamp=function(_t,Ft,Lt){var Yt=_t;return _t>Lt?Yt=Lt:_t<Ft&&(Yt=Ft),Yt},_t.getEntityWorldPosition=function e(_t){var Ft=_t.hasComponent(Transform)?_t.getComponent(Transform).position.clone():Vector3.Zero(),Lt=_t.getParent();if(null!=Lt&&"0"!=Lt.uuid){if("FirstPersonCameraEntityReference"==Lt.uuid){var Yt=Camera.instance.rotation.clone();return Camera.instance.position.clone().add(Ft.rotate(Yt))}if("AvatarEntityReference"==Lt.uuid){var Kt=Camera.instance.rotation;return Yt=Quaternion.Euler(0,Kt.eulerAngles.y,0),Camera.instance.position.clone().add(Ft.rotate(Yt)).add(new Vector3(0,-.875,0))}return Yt=Lt.hasComponent(Transform)?Lt.getComponent(Transform).rotation:Quaternion.Identity,e(Lt).add(Ft.rotate(Yt))}return Ft},_t.getEntityWorldRotation=function e(_t){var Ft=_t.hasComponent(Transform)?_t.getComponent(Transform).rotation.clone():Quaternion.Zero(),Lt=_t.getParent();if(null!=Lt&&"0"!=Lt.uuid){if("FirstPersonCameraEntityReference"==Lt.uuid){var Yt=Camera.instance.rotation.clone();return Ft.multiply(Yt)}return"AvatarEntityReference"==Lt.uuid?(Yt=Quaternion.Euler(0,Camera.instance.rotation.eulerAngles.y,0),Ft.multiply(Yt)):(Yt=e(Lt),Ft.multiply(Yt))}return Ft},_t.map=function(_t,Ft,Lt,Yt,Kt){return(_t-Ft)/(Lt-Ft)*(Kt-Yt)+Yt},_t.sendRequest=function(_t,Ft,Lt,Yt){return o(this,void 0,void 0,(function(){var Kt,Zt,le;return a(this,(function(ve){switch(ve.label){case 0:return ve.trys.push([0,6,,7]),Kt={method:Ft||"GET"},Lt&&(Kt.headers=Lt),Yt&&(Kt.body=JSON.stringify(Yt)),[4,fetch(_t,Kt)];case 1:Zt=ve.sent(),ve.label=2;case 2:return ve.trys.push([2,4,,5]),[4,Zt.json()];case 3:return[2,ve.sent()];case 4:return ve.sent(),[2,Zt];case 5:return[3,7];case 6:return le=ve.sent(),log("error fetching from ",_t," : ",le),[3,7];case 7:return[2]}}))}))},_t.setTimeout=function(_t,Ft){var Lt=new Entity;return Lt.addComponent(new Re(_t,(function(){Ft(),engine.removeEntity(Lt)}))),engine.addEntity(Lt),Lt},Object.defineProperty(_t,"__esModule",{value:!0})})),function(_t,Ft){"object"==typeof exports&&"undefined"!=typeof module?Ft(exports):"function"==typeof define&&define.amd?define("@dcl/ui-scene-utils",["exports"],Ft):Ft((_t="undefined"!=typeof globalThis?globalThis:_t||self)["ui-utils"]={})}(this,(function(_t){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var e=function(_t,Ft){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Ft){_t.__proto__=Ft}||function(_t,Ft){for(var Lt in Ft)Object.prototype.hasOwnProperty.call(Ft,Lt)&&(_t[Lt]=Ft[Lt])})(_t,Ft)};function i(_t,Ft){function o(){this.constructor=_t}e(_t,Ft),_t.prototype=null===Ft?Object.create(Ft):(o.prototype=Ft.prototype,new o)}var o=function(){return(o=Object.assign||function(_t){for(var Ft,Lt=1,Yt=arguments.length;Lt<Yt;Lt++)for(var Kt in Ft=arguments[Lt])Object.prototype.hasOwnProperty.call(Ft,Kt)&&(_t[Kt]=Ft[Kt]);return _t}).apply(this,arguments)};function n(_t,Ft){var Lt={};for(var Yt in _t)Object.prototype.hasOwnProperty.call(_t,Yt)&&Ft.indexOf(Yt)<0&&(Lt[Yt]=_t[Yt]);if(null!=_t&&"function"==typeof Object.getOwnPropertySymbols){var Kt=0;for(Yt=Object.getOwnPropertySymbols(_t);Kt<Yt.length;Kt++)Ft.indexOf(Yt[Kt])<0&&Object.prototype.propertyIsEnumerable.call(_t,Yt[Kt])&&(Lt[Yt[Kt]]=_t[Yt[Kt]])}return Lt}function r(_t){var Ft="function"==typeof Symbol&&Symbol.iterator,Lt=Ft&&_t[Ft],Yt=0;if(Lt)return Lt.call(_t);if(_t&&"number"==typeof _t.length)return{next:function(){return _t&&Yt>=_t.length&&(_t=void 0),{value:_t&&_t[Yt++],done:!_t}}};throw new TypeError(Ft?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ft=function(){function t(Ft,Lt){var Kt=this;Yt.createAndAddToEngine(),this.elapsedTime=0,this.targetTime=Ft,this.onTimeReachedCallback=Lt,this.onTargetTimeReached=function(Ft){Kt.onTimeReachedCallback(),Ft.removeComponent(_t)}}var _t;return _t=t,t.prototype.setCallback=function(_t){this.onTimeReachedCallback=_t},_t=function(_t,Ft,Lt,Yt){var Kt,Zt=arguments.length,le=Zt<3?Ft:null===Yt?Yt=Object.getOwnPropertyDescriptor(Ft,Lt):Yt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(_t,Ft,Lt,Yt);else for(var ve=_t.length-1;ve>=0;ve--)(Kt=_t[ve])&&(le=(Zt<3?Kt(le):Zt>3?Kt(Ft,Lt,le):Kt(Ft,Lt))||le);return Zt>3&&le&&Object.defineProperty(Ft,Lt,le),le}([Component("UItimerDelay")],t)}(),Lt=engine.getComponentGroup(Ft),Yt=function(){function t(){t._instance=this}return t.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new t,engine.addSystem(this._instance)),this._instance},t.prototype.update=function(_t){var Yt,Kt;try{for(var Zt=r(Lt.entities),le=Zt.next();!le.done;le=Zt.next()){var ve=le.value,Ce=ve.getComponent(Ft);Ce.elapsedTime+=_t,Ce.elapsedTime>=Ce.targetTime&&Ce.onTargetTimeReached(ve)}}catch(_t){Yt={error:_t}}finally{try{le&&!le.done&&(Kt=Zt.return)&&Kt.call(Zt)}finally{if(Yt)throw Yt.error}}},t._instance=null,t}(),Kt=new UICanvas;Kt.visible=!0;var Zt=new Font(Fonts.SanFrancisco),le=new Font(Fonts.SanFrancisco_Heavy),ve=new Texture("https://decentraland.org/images/ui/light-atlas-v3.png"),Ce=new Texture("https://decentraland.org/images/ui/dark-atlas-v3.png"),Se=new UIText(Kt);Se.vAlign="center",Se.hAlign="center",Se.hTextAlign="center",Se.vTextAlign="center",Se.font=Zt,Se.fontSize=60,Se.color=new Color4(0,0,0,1),Se.visible=!1,Se.positionY=80;var Ie=new UIImage(Kt,ve);Ie.hAlign="center",Ie.vAlign="center",Ie.width=400,Ie.height=250,Ie.visible=!1;var Ne,Fe,Re,Pe,Le=function(_t){function e(Ft,Lt,Yt,le,ve,Ce,Se){var Ie=_t.call(this)||this;return Ie.canvas=Kt,Ie.valueAsNum=Ft,Ie.uiText=new UIText(Kt),Ie.fixedDigits=Se||null,Ie.uiText.value=Ie.toFixedLengthString(Ft),Ie.uiText.hAlign="right",Ie.uiText.vAlign="bottom",Ie.uiText.positionX=Lt||0,Ie.uiText.positionY=Yt||0,Ie.uiText.fontSize=ve||25,Ie.uiText.font=Zt,Ie.uiText.vTextAlign="center",Ie.uiText.hTextAlign="center",Ie.uiText.color=le||Color4.White(),Ie.uiText.outlineColor=Color4.Black(),Ie.uiText.outlineWidth=Ce?0:.1,Ie}return i(e,_t),e.prototype.read=function(){return this.valueAsNum},e.prototype.increase=function(_t){this.valueAsNum+=_t||1,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.decrease=function(_t){this.valueAsNum-=_t||1,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.set=function(_t){this.valueAsNum=_t,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.hide=function(){this.uiText.visible=!1},e.prototype.show=function(){this.uiText.visible=!0},e.prototype.toFixedLengthString=function(_t){var Ft=_t.toString();if(!this.fixedDigits)return Ft;for(var Lt=Ft.length-this.fixedDigits;Lt<0;)Ft="0".concat(Ft),Lt+=1;return Lt>0&&(Ft=_t.toPrecision(this.fixedDigits)),Ft},e}(Entity);(Ne=_t.PromptStyles||(_t.PromptStyles={})).LIGHT="light",Ne.DARK="dark",Ne.LIGHTLARGE="lightlarge",Ne.DARKLARGE="darklarge",Ne.LIGHTSLANTED="lightslanted",Ne.DARKSLANTED="darkslanted",(Fe=_t.BarStyles||(_t.BarStyles={})).ROUNDBLACK="roundblack",Fe.ROUNDWHITE="roundwhite",Fe.ROUNDSILVER="roundsilver",Fe.ROUNDGOLD="roundgold",Fe.SQUAREBLACK="squareblack",Fe.SQUAREWHITE="squarewhite",Fe.SQUARESILVER="squaresilver",Fe.SQUAREGOLD="squaregold",(Re=_t.ButtonStyles||(_t.ButtonStyles={})).E="e",Re.F="f",Re.DARK="dark",Re.RED="red",Re.ROUNDBLACK="roundblack",Re.ROUNDWHITE="roundwhite",Re.ROUNDSILVER="roundsilver",Re.ROUNDGOLD="roundgold",Re.SQUAREBLACK="squareblack",Re.SQUAREWHITE="squarewhite",Re.SQUARESILVER="squaresilver",Re.SQUAREGOLD="squaregold",(Pe=_t.SwitchStyles||(_t.SwitchStyles={})).ROUNDGREEN="roundgreen",Pe.ROUNDRED="roundred",Pe.SQUAREGREEN="squaregreen",Pe.SQUARERED="squarered";var Ue={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:662},He={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:612},qe={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:662},We={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:612},Ge={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:458},Ve={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:457},$e={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:494},Xe={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:493},Ye={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:531},Je={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:531},Qe={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:567},Ze={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:567},tn={sourceWidth:26,sourceHeight:26,sourceLeft:697,sourceTop:611},nn={sourceWidth:26,sourceHeight:26,sourceLeft:733,sourceTop:611},rn={sourceWidth:416,sourceHeight:352,sourceLeft:501,sourceTop:12},on={sourceWidth:480,sourceHeight:384,sourceLeft:7,sourceTop:12},sn={sourceWidth:486,sourceHeight:326,sourceLeft:7,sourceTop:413},an={closeW:{sourceWidth:32,sourceHeight:32,sourceLeft:942,sourceTop:306},closeD:{sourceWidth:32,sourceHeight:32,sourceLeft:986,sourceTop:306},closeWLarge:{sourceWidth:64,sourceHeight:64,sourceLeft:512,sourceTop:381},closeDLarge:{sourceWidth:64,sourceHeight:64,sourceLeft:583,sourceTop:381},closeWNoBack:{sourceWidth:24,sourceHeight:24,sourceLeft:946,sourceTop:252},closeDNoBack:{sourceWidth:24,sourceHeight:24,sourceLeft:946,sourceTop:214},closeWNoBackLarge:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:214},closeDNoBackLarge:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:260},FDark:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:4},FWhite:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:4},EDark:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:40},EWhite:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:40},Timer:{sourceWidth:24,sourceHeight:32.2,sourceLeft:718,sourceTop:388},TimerLarge:{sourceWidth:48,sourceHeight:68,sourceLeft:662,sourceTop:386},ClickWhite:{sourceWidth:32,sourceHeight:48,sourceLeft:799,sourceTop:389},ClickDark:{sourceWidth:32,sourceHeight:48,sourceLeft:757,sourceTop:389}},cn={sourceWidth:24,sourceHeight:24,sourceLeft:987,sourceTop:76},un={sourceWidth:24,sourceHeight:24,sourceLeft:987,sourceTop:104},ln={sourceWidth:24,sourceHeight:24,sourceLeft:958,sourceTop:76},dn={sourceWidth:24,sourceHeight:24,sourceLeft:958,sourceTop:104},hn={sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:132},pn={sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:168},fn={sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:132},mn={sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:168},yn={sourceWidth:64,sourceHeight:32,sourceLeft:783,sourceTop:454},gn={sourceWidth:64,sourceHeight:32,sourceLeft:853,sourceTop:454},bn={sourceWidth:64,sourceHeight:32,sourceLeft:923,sourceTop:454},vn={sourceWidth:64,sourceHeight:32,sourceLeft:783,sourceTop:501},wn={sourceWidth:64,sourceHeight:32,sourceLeft:852,sourceTop:501},Tn={sourceWidth:64,sourceHeight:32,sourceLeft:921,sourceTop:501};function S(_t,Ft){_t.sourceWidth=Ft.sourceWidth,_t.sourceHeight=Ft.sourceHeight,_t.sourceLeft=Ft.sourceLeft?Ft.sourceLeft:0,_t.sourceTop=Ft.sourceTop?Ft.sourceTop:0}function B(_t){var Ft=-10-4*_t;return Ft>-65?Ft:-65}var xn=function(Ft){function o(Lt,Yt,Zt,le,Ce,Se,Ie){var Ne=Ft.call(this)||this;if(Ne.canvas=Kt,Ne.valueAsNum=Lt>1?1:Lt,Ne.fullWidth=Se?128*Se:128,Ne.background=new UIImage(Kt,ve),Ne.background.width=Se?128*Se:128,Ne.background.height=Se?32*Se:32,Ne.background.hAlign="right",Ne.background.vAlign="bottom",Ne.background.positionX=Yt||0,Ne.background.positionY=Zt||0,Ce)switch(Ce){case _t.BarStyles.ROUNDBLACK:S(Ne.background,Ge);break;case _t.BarStyles.ROUNDWHITE:S(Ne.background,$e);break;case _t.BarStyles.ROUNDSILVER:S(Ne.background,Ye);break;case _t.BarStyles.ROUNDGOLD:S(Ne.background,Qe);break;case _t.BarStyles.SQUAREBLACK:S(Ne.background,Ve);break;case _t.BarStyles.SQUAREWHITE:S(Ne.background,Xe);break;case _t.BarStyles.SQUARESILVER:S(Ne.background,Je);break;case _t.BarStyles.SQUAREGOLD:S(Ne.background,Ze)}else S(Ne.background,Ye);return Ne.background.sourceWidth=128,Ne.background.sourceHeight=32,Ne.background.visible=!0,Ne.bar=new UIContainerRect(Ne.background),Ne.bar.color=le||Color4.Red(),Ne.bar.thickness=0,Ne.bar.hAlign="left",Ne.bar.vAlign="center",Ne.bar.positionX=Se?2.55*Se:2.55,Ne.bar.positionY=0,Ne.bar.height=Se?32*Se-7.5*Se:24.5,Ne.bar.width=Se?Ne.fullWidth*Ne.valueAsNum-5.1*Se:Ne.fullWidth*Ne.valueAsNum-5.1,Ie&&Ne.hide(),Ne}return i(o,Ft),o.prototype.read=function(){return this.valueAsNum},o.prototype.increase=function(_t){this.valueAsNum+=_t||.1,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.decrease=function(_t){this.valueAsNum-=_t||.1,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.set=function(_t){this.valueAsNum=_t,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.hide=function(){this.background.visible=!1,this.bar.visible=!1},o.prototype.show=function(){this.background.visible=!0,this.bar.visible=!0},o}(Entity),An=function(_t){function e(Ft,Lt,Yt,Zt,le,ve){var Ce=_t.call(this)||this;Ce.canvas=Kt;var Se=new Texture(Ft);return Ce.image=new UIImage(Kt,Se),Ce.image.hAlign="right",Ce.image.vAlign="bottom",Ce.image.positionX=Lt||0,Ce.image.positionY=Yt||0,Ce.image.width=Zt||64,Ce.image.height=le||64,Ce.image.sourceLeft=ve&&ve.sourceLeft?ve.sourceLeft:0,Ce.image.sourceTop=ve&&ve.sourceTop?ve.sourceTop:0,Ce.image.sourceWidth=ve&&ve.sourceWidth?ve.sourceWidth:Zt||64,Ce.image.sourceHeight=ve&&ve.sourceHeight?ve.sourceHeight:le||64,Ce}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(_t){var Lt=this;if(this.image.visible=!0,_t){var Yt=new Entity;engine.addEntity(Yt),Yt.addComponentOrReplace(new Ft(_t,(function(){Lt.hide()})))}},e}(Entity),Cn=function(_t){function e(Ft,Lt,Yt,Zt,le,ve){var Ce=_t.call(this)||this;Ce.canvas=Kt;var Se=new Texture(Ft);return Ce.image=new UIImage(Kt,Se),Ce.image.hAlign="right",Ce.image.vAlign="bottom",Ce.image.positionX=Lt||0,Ce.image.positionY=Yt||0,Ce.image.width=Zt||32,Ce.image.height=le||32,Ce.image.sourceLeft=ve&&ve.sourceLeft?ve.sourceLeft:0,Ce.image.sourceTop=ve&&ve.sourceTop?ve.sourceTop:0,Ce.image.sourceWidth=ve?ve.sourceWidth:Zt||32,Ce.image.sourceHeight=ve?ve.sourceHeight:le||32,Ce}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(_t){var Lt=this;if(this.image.visible=!0,_t){var Yt=new Entity;engine.addEntity(Yt),Yt.addComponentOrReplace(new Ft(_t,(function(){Lt.hide()})))}},e}(Entity),_n=function(_t){function e(Ft,Lt,Yt,Zt,le,ve){var Ce=_t.call(this)||this;Ce.canvas=Kt;var Se=new Texture(Ft);return Ce.image=new UIImage(Kt,Se),Ce.image.hAlign="right",Ce.image.vAlign="bottom",Ce.image.positionX=Lt||0,Ce.image.positionY=Yt||0,Ce.image.width=Zt||128,Ce.image.height=le||128,Ce.image.sourceLeft=ve&&ve.sourceLeft?ve.sourceLeft:0,Ce.image.sourceTop=ve&&ve.sourceTop?ve.sourceTop:0,Ce.image.sourceWidth=ve?ve.sourceWidth:Zt||128,Ce.image.sourceHeight=ve?ve.sourceHeight:le||128,Ce}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(_t){var Lt=this;if(this.image.visible=!0,_t){var Yt=new Entity;engine.addEntity(Yt),Yt.addComponentOrReplace(new Ft(_t,(function(){Lt.hide()})))}},e}(Entity),Sn=function(_t){function e(Lt,Yt,Zt,le,ve,Ce,Se,Ie){var Ne=_t.call(this)||this;Ne.canvas=Kt;var Fe=new Texture(Lt);if(Ne.image=new UIImage(Kt,Fe),Ne.image.hAlign="center",Ne.image.vAlign="center",Ne.image.positionX=le||0,Ne.image.positionY=ve||0,Ne.image.width=Ce||512,Ne.image.height=Se||512,Ne.image.sourceLeft=Ie&&Ie.sourceLeft?Ie.sourceLeft:0,Ne.image.sourceTop=Ie&&Ie.sourceTop?Ie.sourceTop:0,Ne.image.sourceWidth=Ie?Ie.sourceWidth:Ce||512,Ne.image.sourceHeight=Ie?Ie.sourceHeight:Se||512,Ne.image.visible=!Zt,-1!=Yt){var Re=new Entity;engine.addEntity(Re),Re.addComponentOrReplace(new Ft(Yt||3,(function(){Ne.hide()})))}return Ne}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(_t){var Lt=this;if(this.image.visible=!0,_t){var Yt=new Entity;engine.addEntity(Yt),Yt.addComponentOrReplace(new Ft(_t,(function(){Lt.hide()})))}},e}(Entity),En=function(_t){function e(Ft,Lt,Yt,le){var Se=_t.call(this)||this;Se.canvas=Kt,Se.UIOpenTime=+Date.now(),Se.background=new UIImage(Kt,ve),Se.background.hAlign="center",Se.background.vAlign="center",Se.onAccept=Lt||null;var Ie=le?Ce:ve;return Se.background.source=Ie,Se.background.width=400,Se.background.height=250,Se.background.positionY=0,S(Se.background,rn),Se.background.visible=!0,Se.closeIcon=new UIImage(Se.background,Ie),Se.closeIcon.positionX=175,Se.closeIcon.positionY=100,Se.closeIcon.width=32,Se.closeIcon.height=32,S(Se.closeIcon,le?an.closeW:an.closeD),Se.closeIcon.onClick=new OnClick((function(){Se.close()})),Se.text=new UIText(Se.background),Se.text.value=Ft,Se.text.adaptWidth=!1,Se.text.textWrapping=!0,Se.text.width=380,Se.text.hAlign="center",Se.text.vAlign="top",Se.text.positionX=0,Se.text.positionY=-65,Se.text.fontSize=24,Se.text.font=Zt,Se.text.vTextAlign="center",Se.text.hTextAlign="center",Se.text.color=le?Color4.White():Color4.Black(),Se.button=new UIImage(Se.background,Ie),Se.button.positionX=0,Se.button.positionY=-60,Se.button.width=174,Se.button.height=46,S(Se.button,Ue),Se.icon=new UIImage(Se.button,1==le?Ce:ve),Se.icon.width=26,Se.icon.height=26,Se.icon.hAlign="center",Se.icon.vAlign="center",Se.icon.isPointerBlocker=!1,S(Se.icon,tn),Se.icon.positionX=B(Yt?Yt.length:2),Se.buttonLabel=new UIText(Se.button),Se.buttonLabel.value=Yt||"Ok",Se.buttonLabel.hTextAlign="center",Se.buttonLabel.vTextAlign="center",Se.buttonLabel.positionX=30,Se.buttonLabel.fontSize=18,Se.buttonLabel.font=Zt,Se.buttonLabel.color=Color4.White(),Se.buttonLabel.isPointerBlocker=!1,Se.button.onClick=new OnClick((function(){Se.accept()})),Se.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(_t){Se.button.visible&&+Date.now()-Se.UIOpenTime>100&&Se.accept()})),Se}return i(e,_t),e.prototype.close=function(){this.background.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1},e.prototype.accept=function(){this.onAccept&&this.onAccept(),this.hide()},e.prototype.hide=function(){this.background.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1,Input.instance.unsubscribe("BUTTON_DOWN",ActionButton.PRIMARY,this.EButtonAction)},e.prototype.show=function(){this.background.visible=!0,this.closeIcon.visible=!0,this.button.visible=!0,this.text.visible=!0,this.buttonLabel.visible=!0,Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,this.EButtonAction)},e}(Entity),kn=function(_t){function e(Ft,Lt,Yt,Se,Ie,Ne,Fe){var Re=_t.call(this)||this;Re.canvas=Kt,Re.UIOpenTime=+Date.now(),Re.background=new UIImage(Kt,ve),Re.background.hAlign="center",Re.background.vAlign="center",Re.onAccept=Yt,Re.onReject=Se||null;var Pe=Fe?Ce:ve;return Re.background.source=Pe,Re.background.width=480,Re.background.height=384,S(Re.background,on),Re.background.visible=!0,Re.closeIcon=new UIImage(Re.background,Pe),Re.closeIcon.positionX=215,Re.closeIcon.positionY=164,Re.closeIcon.width=32,Re.closeIcon.height=32,S(Re.closeIcon,Fe?an.closeW:an.closeD),Re.closeIcon.onClick=new OnClick((function(){Re.close()})),Re.title=new UIText(Re.background),Re.title.value=Ft,Re.title.adaptWidth=!1,Re.title.textWrapping=!0,Re.title.width=380,Re.title.hAlign="center",Re.title.vAlign="top",Re.title.positionX=0,Re.title.positionY=-20,Re.title.font=le,Re.title.fontSize=24,Re.title.vTextAlign="center",Re.title.hTextAlign="center",Re.title.color=Fe?Color4.White():Color4.Black(),Re.text=new UIText(Re.background),Re.text.value=Lt,Re.text.adaptWidth=!1,Re.text.textWrapping=!0,Re.text.width=380,Re.text.hAlign="center",Re.text.vAlign="top",Re.text.positionX=0,Re.text.positionY=-145,Re.text.fontSize=24,Re.text.font=Zt,Re.text.vTextAlign="center",Re.text.hTextAlign="center",Re.text.color=Fe?Color4.White():Color4.Black(),Re.buttonE=new UIImage(Re.background,Pe),Re.buttonE.positionX=-100,Re.buttonE.positionY=-120,Re.buttonE.width=174,Re.buttonE.height=46,S(Re.buttonE,Ue),Re.buttonEIcon=new UIImage(Re.buttonE,1==Fe?Ce:ve),Re.buttonEIcon.width=26,Re.buttonEIcon.height=26,Re.buttonEIcon.hAlign="center",Re.buttonEIcon.vAlign="center",Re.buttonEIcon.isPointerBlocker=!1,S(Re.buttonEIcon,tn),Re.buttonEIcon.positionX=B(Ie?Ie.length:2),Re.buttonELabel=new UIText(Re.buttonE),Re.buttonELabel.value=Ie||"Ok",Re.buttonELabel.hTextAlign="center",Re.buttonELabel.vTextAlign="center",Re.buttonELabel.positionX=30,Re.buttonELabel.fontSize=18,Re.buttonELabel.font=Zt,Re.buttonELabel.color=Color4.White(),Re.buttonELabel.isPointerBlocker=!1,Re.buttonE.onClick=new OnClick((function(){Re.accept()})),Re.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(_t){Re.buttonE.visible&&+Date.now()-Re.UIOpenTime>100&&Re.accept()})),Re.buttonF=new UIImage(Re.background,Pe),Re.buttonF.positionX=100,Re.buttonF.positionY=-120,Re.buttonF.width=174,Re.buttonF.height=46,S(Re.buttonF,He),Re.buttonFIcon=new UIImage(Re.buttonF,1==Fe?Ce:ve),Re.buttonFIcon.width=26,Re.buttonFIcon.height=26,Re.buttonFIcon.hAlign="center",Re.buttonFIcon.vAlign="center",Re.buttonFIcon.isPointerBlocker=!1,S(Re.buttonFIcon,nn),Re.buttonFIcon.positionX=B(Ne?Ne.length:6),Re.buttonFLabel=new UIText(Re.buttonF),Re.buttonFLabel.value=Ne||"Cancel",Re.buttonFLabel.hTextAlign="center",Re.buttonFLabel.vTextAlign="center",Re.buttonFLabel.positionX=30,Re.buttonFLabel.fontSize=18,Re.buttonFLabel.font=Zt,Re.buttonFLabel.color=Color4.White(),Re.buttonFLabel.isPointerBlocker=!1,Re.buttonF.onClick=new OnClick((function(){Re.reject()})),Re.FButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,(function(_t){Re.buttonF.visible&&+Date.now()-Re.UIOpenTime>100&&Re.reject()})),Re}return i(e,_t),e.prototype.close=function(){this.background.visible=!1,this.closeIcon.visible=!1,this.buttonE.visible=!1,this.buttonF.visible=!1,this.text.visible=!1,this.buttonELabel.visible=!1,this.buttonFLabel.visible=!1,this.title.visible=!1},e.prototype.accept=function(){this.onAccept&&this.onAccept(),this.hide()},e.prototype.reject=function(){this.onReject&&this.onReject(),this.hide()},e.prototype.hide=function(){this.background.visible=!1,this.closeIcon.visible=!1,this.buttonE.visible=!1,this.buttonF.visible=!1,this.text.visible=!1,this.buttonELabel.visible=!1,this.buttonFLabel.visible=!1,this.buttonEIcon.visible=!1,this.buttonFIcon.visible=!1,Input.instance.unsubscribe("BUTTON_DOWN",ActionButton.PRIMARY,this.EButtonAction),Input.instance.unsubscribe("BUTTON_DOWN",ActionButton.SECONDARY,this.FButtonAction)},e.prototype.show=function(){this.background.visible=!0,this.closeIcon.visible=!0,this.buttonE.visible=!0,this.buttonF.visible=!0,this.text.visible=!0,this.buttonELabel.visible=!0,this.buttonFLabel.visible=!0,this.buttonEIcon.visible=!0,this.buttonFIcon.visible=!0,Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,this.EButtonAction),Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,this.FButtonAction)},e}(Entity),In=function(_t){function e(Ft,Lt,Yt,Se,Ie){var Ne=_t.call(this)||this;Ne.canvas=Kt,Ne.UIOpenTime=+Date.now(),Ne.background=new UIImage(Kt,ve),Ne.background.hAlign="center",Ne.background.vAlign="center",Ne.onAccept=Lt;var Fe=Ie?Ce:ve;Ne.background.source=Fe,Ne.background.width=400,Ne.background.height=250,S(Ne.background,rn),Ne.background.visible=!0,Ne.text=new UIText(Ne.background),Ne.text.value=Ft,Ne.text.adaptWidth=!1,Ne.text.textWrapping=!0,Ne.text.width=320,Ne.text.hAlign="center",Ne.text.vAlign="top",Ne.text.positionX=0,Ne.text.positionY=-20,Ne.text.fontSize=24,Ne.text.font=le,Ne.text.vTextAlign="center",Ne.text.hTextAlign="center",Ne.text.color=Ie?Color4.White():Color4.Black(),Ne.closeIcon=new UIImage(Ne.background,Fe),Ne.closeIcon.positionX=175,Ne.closeIcon.positionY=100,Ne.closeIcon.width=32,Ne.closeIcon.height=32,S(Ne.closeIcon,Ie?an.closeW:an.closeD),Ne.closeIcon.onClick=new OnClick((function(){Ne.hide()})),Ne.button=new UIImage(Ne.background,Fe),Ne.button.positionX=0,Ne.button.positionY=-60,Ne.button.width=174,Ne.button.height=46,S(Ne.button,Ue),Ne.icon=new UIImage(Ne.button,1==Ie?Ce:ve),Ne.icon.width=26,Ne.icon.height=26,Ne.icon.hAlign="center",Ne.icon.vAlign="center",Ne.icon.isPointerBlocker=!1,S(Ne.icon,tn),Ne.icon.positionX=B(Yt?Yt.length:6),Ne.buttonLabel=new UIText(Ne.button),Ne.buttonLabel.value=Yt||"Submit",Ne.buttonLabel.hTextAlign="center",Ne.buttonLabel.vTextAlign="center",Ne.buttonLabel.positionX=30,Ne.buttonLabel.fontSize=18,Ne.buttonLabel.font=Zt,Ne.buttonLabel.color=Color4.White(),Ne.buttonLabel.isPointerBlocker=!1,Ne.fillInBox=new UIInputText(Ne.background),Ne.fillInBox.color=Color4.Black(),Ne.fillInBox.font=Zt,Ne.fillInBox.width=312,Ne.fillInBox.height=46,Ne.fillInBox.positionX=0,Ne.fillInBox.positionY=15,Ne.fillInBox.placeholder=Se||"Fill in",Ne.fillInBox.hTextAlign="center",Ne.fillInBox.vTextAlign="center",Ne.fillInBox.fontSize=22;var Re="";return Ne.fillInBox.onChanged=new OnChanged((function(_t){Re=_t.value})),Ne.fillInBox.onTextSubmit=new OnTextSubmit((function(_t){Ne.accept(Re)})),Ne.button.onClick=new OnClick((function(){Ne.accept(Re)})),Ne.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(_t){Ne.button.visible&&+Date.now()-Ne.UIOpenTime>100&&Ne.accept(Re)})),Ne}return i(e,_t),e.prototype.close=function(){this.background.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1,this.fillInBox.visible=!1},e.prototype.accept=function(_t){this.onAccept(_t),this.hide()},e.prototype.hide=function(){this.background.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1,this.fillInBox.visible=!1,Input.instance.unsubscribe("BUTTON_DOWN",ActionButton.PRIMARY,this.EButtonAction)},e.prototype.show=function(){this.background.visible=!0,this.closeIcon.visible=!0,this.button.visible=!0,this.text.visible=!0,this.buttonLabel.visible=!0,this.fillInBox.visible=!0,Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,this.EButtonAction)},e}(Entity),Nn=function(Ft){function o(Lt,Yt,Zt,le){var Se=Ft.call(this)||this;switch(Se.elements=[],Se.texture=ve,Se.darkTheme=!1,Se.UIOpenTime=0,Se.canvas=Kt,Se.UIOpenTime=+Date.now(),Se.background=new UIImage(Kt,ve),Se.background.hAlign="center",Se.background.vAlign="center",Se.closeIcon=new UIImage(Se.background,Se.texture),Lt||(Lt=_t.PromptStyles.LIGHT),Lt){case _t.PromptStyles.LIGHT:Se.texture=ve,S(Se.background,rn),S(Se.closeIcon,an.closeD),Se.closeIcon.positionX=Yt?Yt/2-25:175,Se.closeIcon.positionY=Zt?Zt/2-25:145;break;case _t.PromptStyles.DARK:Se.texture=Ce,Se.darkTheme=!0,S(Se.background,rn),S(Se.closeIcon,an.closeW),Se.closeIcon.positionX=Yt?Yt/2-25:175,Se.closeIcon.positionY=Zt?Zt/2-25:145;break;case _t.PromptStyles.LIGHTLARGE:Se.texture=ve,S(Se.background,on),S(Se.closeIcon,an.closeD),Se.closeIcon.positionX=Yt?Yt/2-25:215,Se.closeIcon.positionY=Zt?Zt/2-25:165;break;case _t.PromptStyles.DARKLARGE:Se.texture=Ce,Se.darkTheme=!0,S(Se.background,on),S(Se.closeIcon,an.closeW),Se.closeIcon.positionX=Yt?Yt/2-25:215,Se.closeIcon.positionY=Zt?Zt/2-25:165;break;case _t.PromptStyles.LIGHTSLANTED:Se.texture=ve,S(Se.background,sn),S(Se.closeIcon,an.closeD),Se.closeIcon.positionX=Yt?Yt/2-25:215,Se.closeIcon.positionY=Zt?Zt/2-25:138;break;case _t.PromptStyles.DARKSLANTED:Se.texture=Ce,Se.darkTheme=!0,S(Se.background,sn),S(Se.closeIcon,an.closeW),Se.closeIcon.positionX=Yt?Yt/2-25:215,Se.closeIcon.positionY=Zt?Zt/2-25:138;break;default:Se.texture=new Texture(Lt),Se.closeIcon.visible=!1}return Se.background.source=Se.texture,Se.background.width=Yt||Se.background.sourceWidth,Se.background.height=Zt||Se.background.sourceHeight,Se.background.visible=!0,Se.closeIcon.width=32,Se.closeIcon.height=32,Se.closeIcon.source=Se.texture,Se.closeIcon.onClick=new OnClick((function(){Se.hide()})),le&&Se.hide(),Se}return i(o,Ft),o.prototype.hide=function(){var _t,Ft;this.background.visible=!1,this.closeIcon.visible=!1;try{for(var Lt=r(this.elements),Yt=Lt.next();!Yt.done;Yt=Lt.next())Yt.value.hide()}catch(Ft){_t={error:Ft}}finally{try{Yt&&!Yt.done&&(Ft=Lt.return)&&Ft.call(Lt)}finally{if(_t)throw _t.error}}},o.prototype.show=function(){var _t,Ft;this.background.visible=!0,this.closeIcon.visible=!0;try{for(var Lt=r(this.elements),Yt=Lt.next();!Yt.done;Yt=Lt.next())Yt.value.show()}catch(Ft){_t={error:Ft}}finally{try{Yt&&!Yt.done&&(Ft=Lt.return)&&Ft.call(Lt)}finally{if(_t)throw _t.error}}},o.prototype.addText=function(_t,Ft,Lt,Yt,Kt){var Zt=new Pn(this,_t,Ft,Lt,this.darkTheme,Yt||void 0,Kt||void 0);return this.elements.push(Zt),Zt},o.prototype.addButton=function(_t,Ft,Lt,Yt,Kt){var Zt=new Bn(this,this.texture,this.UIOpenTime,_t,Ft,Lt,Yt,Kt||void 0);return this.elements.push(Zt),Zt},o.prototype.addCheckbox=function(_t,Ft,Lt,Yt,Kt,Zt,le){var ve=new Fn(this,this.texture,this.darkTheme,_t,Ft,Lt,Yt||void 0,Kt||void 0,Zt||void 0,le||void 0);return this.elements.push(ve),ve},o.prototype.addSwitch=function(_t,Ft,Lt,Yt,Kt,Zt,le){var ve=new On(this,this.texture,this.darkTheme,_t,Ft,Lt,Yt||void 0,Kt||void 0,Zt||void 0,le||void 0);return this.elements.push(ve),ve},o.prototype.addIcon=function(_t,Ft,Lt,Yt,Kt,Zt){var le=new Texture(_t),ve=new Rn(this,le,Ft,Lt,Yt||void 0,Kt||void 0,Zt||void 0);return this.elements.push(ve),ve},o.prototype.addTextBox=function(_t,Ft,Lt,Yt){var Kt=new Mn(this,_t,Ft,Lt||void 0,Yt||void 0);return this.elements.push(Kt),Kt},o}(Entity),Bn=function(Ft){function o(Lt,Yt,Kt,le,ve,Ce,Se,Ie){var Ne=Ft.call(this)||this;if(Ne.icon=null,Ne.image=new UIImage(Lt.background,Yt),Ne.image.positionX=ve,Ne.image.positionY=Ce,Ne.image.width=174,Ne.image.height=46,Ne.label=new UIText(Ne.image),Ie)switch(Ie){case _t.ButtonStyles.E:S(Ne.image,Ue),Ne.label.positionX=25,Ne.icon=new UIImage(Ne.image,Yt),Ne.icon.width=26,Ne.icon.height=26,Ne.icon.hAlign="center",Ne.icon.vAlign="center",Ne.icon.isPointerBlocker=!1,S(Ne.icon,tn),Ne.icon.positionX=B(le.length);break;case _t.ButtonStyles.F:S(Ne.image,He),Ne.label.positionX=25,Ne.icon=new UIImage(Ne.image,Yt),Ne.icon.width=26,Ne.icon.height=26,Ne.icon.hAlign="center",Ne.icon.vAlign="center",Ne.icon.isPointerBlocker=!1,S(Ne.icon,nn),Ne.icon.positionX=B(le.length);break;case _t.ButtonStyles.RED:S(Ne.image,qe);break;case _t.ButtonStyles.DARK:S(Ne.image,We);break;case _t.ButtonStyles.ROUNDBLACK:S(Ne.image,Ge);break;case _t.ButtonStyles.ROUNDWHITE:S(Ne.image,$e);break;case _t.ButtonStyles.ROUNDSILVER:S(Ne.image,Ye);break;case _t.ButtonStyles.ROUNDGOLD:S(Ne.image,Qe);break;case _t.ButtonStyles.SQUAREBLACK:S(Ne.image,Ve);break;case _t.ButtonStyles.SQUAREWHITE:S(Ne.image,Xe);break;case _t.ButtonStyles.SQUARESILVER:S(Ne.image,Je);break;case _t.ButtonStyles.SQUAREGOLD:S(Ne.image,Ze);break;default:S(Ne.image,Ye)}else S(Ne.image,Ye);return Ne.label.value=le,Ne.label.hTextAlign="center",Ne.label.vTextAlign="center",Ne.label.fontSize=20,Ne.label.font=Zt,Ne.label.color=Ie==_t.ButtonStyles.ROUNDWHITE||Ie==_t.ButtonStyles.SQUAREWHITE?Color4.Black():Color4.White(),Ne.label.isPointerBlocker=!1,Ne.image.onClick=new OnClick((function(){Se()})),Ie==_t.ButtonStyles.E?Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(_t){Ne.image.visible&&+Date.now()-Kt>100&&Se()})):Ie==_t.ButtonStyles.F&&Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,(function(_t){Ne.image.visible&&+Date.now()-Kt>100&&Se()})),Ne}return i(o,Ft),o.prototype.hide=function(){this.image.visible=!1},o.prototype.show=function(){this.image.visible=!0},o.prototype.grayOut=function(){this.label.color=Color4.Gray(),this.image.isPointerBlocker=!1,this.icon&&(this.icon.visible=!1)},o.prototype.enable=function(){this.label.color=Color4.White(),this.image.isPointerBlocker=!0,this.icon&&(this.icon.visible=!0)},o}(Entity),Fn=function(_t){function e(Ft,Lt,Yt,Kt,le,ve,Ce,Se,Ie,Ne){var Fe=_t.call(this)||this;return Fe.checked=!!Ne,Fe.darkTheme=Yt,Fe.large=Ie||!1,Fe.image=new UIImage(Ft.background,Lt),Fe.image.positionX=le,Fe.image.positionY=ve,Fe.image.width=Ie?32:24,Fe.image.height=Ie?32:24,0==Fe.checked?Fe.uncheck():Fe.check(),Fe.label=new UIText(Fe.image),Fe.label.positionX=Ie?40:30,Fe.label.color=Yt?Color4.White():Color4.Black(),Fe.label.value=Kt,Fe.label.hTextAlign="left",Fe.label.vTextAlign="center",Fe.label.fontSize=20,Fe.label.font=Zt,Fe.label.isPointerBlocker=!1,Fe.image.onClick=new OnClick((function(){0==Fe.checked?Fe.check():Fe.uncheck(),Fe.checked?Ce&&Ce():Se&&Se()})),Fe}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1,this.label.visible=!1},e.prototype.show=function(){this.image.visible=!0,this.label.visible=!0},e.prototype.uncheck=function(){this.checked=!1,this.darkTheme?this.large?S(this.image,hn):S(this.image,cn):this.large?S(this.image,fn):S(this.image,ln)},e.prototype.check=function(){this.checked=!0,this.darkTheme?this.large?S(this.image,pn):S(this.image,un):this.large?S(this.image,mn):S(this.image,dn)},e}(Entity),On=function(Ft){function o(Lt,Yt,Kt,le,ve,Ce,Se,Ie,Ne,Fe){var Re=Ft.call(this)||this;return Re.checked=!!Fe,Re.darkTheme=Kt,Re.style=Ne||_t.SwitchStyles.ROUNDGREEN,Re.image=new UIImage(Lt.background,Yt),Re.image.positionX=ve,Re.image.positionY=Ce,Re.image.width=64,Re.image.height=32,0==Re.checked?Re.check():Re.uncheck(),Re.label=new UIText(Re.image),Re.label.positionX=80,Re.label.color=Kt?Color4.White():Color4.Black(),Re.label.value=le,Re.label.hTextAlign="left",Re.label.vTextAlign="center",Re.label.fontSize=20,Re.label.font=Zt,Re.label.isPointerBlocker=!1,Re.image.onClick=new OnClick((function(){0==Re.checked?Re.check():Re.uncheck(),Re.checked?Se&&Se():Ie&&Ie()})),Re}return i(o,Ft),o.prototype.hide=function(){this.image.visible=!1,this.label.visible=!1},o.prototype.show=function(){this.image.visible=!0,this.label.visible=!0},o.prototype.check=function(){switch(this.checked=!0,this.style){case _t.SwitchStyles.ROUNDGREEN:S(this.image,bn);break;case _t.SwitchStyles.ROUNDRED:S(this.image,gn);break;case _t.SwitchStyles.SQUAREGREEN:S(this.image,Tn);break;case _t.SwitchStyles.SQUARERED:S(this.image,wn)}},o.prototype.uncheck=function(){this.checked=!1,this.style==_t.SwitchStyles.ROUNDGREEN||this.style==_t.SwitchStyles.ROUNDRED?S(this.image,yn):S(this.image,vn)},o}(Entity),Rn=function(_t){function e(Ft,Lt,Yt,Kt,Zt,le,ve){var Ce=_t.call(this)||this;return Ce.image=new UIImage(Ft.background,Lt),Ce.image.positionX=Yt,Ce.image.positionY=Kt,Ce.image.width=Zt||128,Ce.image.height=le||128,Ce.image.sourceLeft=ve&&ve.sourceLeft?ve.sourceLeft:0,Ce.image.sourceTop=ve&&ve.sourceTop?ve.sourceTop:0,Ce.image.sourceWidth=ve&&ve.sourceWidth?ve.sourceWidth:Zt||128,Ce.image.sourceHeight=ve&&ve.sourceHeight?ve.sourceHeight:le||128,Ce}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(){this.image.visible=!0},e}(Entity),Pn=function(_t){function e(Ft,Lt,Yt,Kt,Zt,le,ve){var Ce=_t.call(this)||this;return Ce.text=new UIText(Ft.background),Ce.text.value=Lt,Ce.text.positionX=Yt||0,Ce.text.positionY=Kt||0,Ce.text.hTextAlign="center",Ce.text.color=le||(Zt?Color4.White():Color4.Black()),Ce.text.fontSize=ve||15,Ce}return i(e,_t),e.prototype.hide=function(){this.text.visible=!1},e.prototype.show=function(){this.text.visible=!0},e}(Entity),Mn=function(_t){function e(Ft,Lt,Yt,Kt,le){var ve=_t.call(this)||this;return ve.currentText="",ve.fillInBox=new UIInputText(Ft.background),ve.fillInBox.color=Color4.Black(),ve.fillInBox.font=Zt,ve.fillInBox.width=312,ve.fillInBox.height=46,ve.fillInBox.positionX=Lt,ve.fillInBox.positionY=Yt,ve.fillInBox.placeholder=Kt||"Fill in",ve.fillInBox.hTextAlign="center",ve.fillInBox.vTextAlign="center",ve.fillInBox.fontSize=22,ve.fillInBox.onChanged=new OnChanged((function(_t){ve.fillInBox&&!ve.fillInBox.visible||(ve.currentText=_t.value,le&&le(ve.currentText))})),ve.fillInBox.onTextSubmit=new OnTextSubmit((function(_t){ve.fillInBox&&!ve.fillInBox.visible||(ve.currentText=_t.text,le&&le(ve.currentText))})),ve}return i(e,_t),e.prototype.hide=function(){this.fillInBox.visible=!1},e.prototype.show=function(){this.fillInBox.visible=!0},e}(Entity),Ln=function(_t){function e(Ft,Lt,Yt,le,ve,Ce){var Se=_t.call(this)||this;return Se.canvas=Kt,Se.uiText=new UIText(Kt),Se.uiText.value=Ft,Se.uiText.hAlign="right",Se.uiText.vAlign="bottom",Se.uiText.positionX=Lt||0,Se.uiText.positionY=Yt||0,Se.uiText.fontSize=ve||25,Se.uiText.font=Zt,Se.uiText.vTextAlign="center",Se.uiText.hTextAlign="center",Se.uiText.color=le||Color4.White(),Se.uiText.outlineColor=Color4.Black(),Se.uiText.outlineWidth=Ce?0:.1,Se}return i(e,_t),e.prototype.hide=function(){this.uiText.visible=!1},e.prototype.show=function(){this.uiText.visible=!0},e.prototype.set=function(_t){this.uiText.value=_t,this.uiText.visible=!0},e}(Entity),zn=function(_t){function e(Lt,Yt,Zt,le){var Ce=_t.call(this)||this;if(Ce.canvas=Kt,Ce.image=new UIImage(Kt,ve),Ce.image.hAlign="center",Ce.image.vAlign="center",Ce.image.positionX=Yt||0,Ce.image.positionY=Zt?Zt+80:80,Ce.image.width=le?48*le:48,Ce.image.height=le?64*le:64,S(Ce.image,an.TimerLarge),Lt&&0!=Lt){var Se=new Entity;engine.addEntity(Se),Se.addComponentOrReplace(new Ft(Lt||3,(function(){Ce.hide()})))}return Ce}return i(e,_t),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(){this.image.visible=!0},e}(Entity);function Q(_t){return _t&&"object"==typeof _t&&!Array.isArray(_t)}function q(_t,Ft){var Lt=o({},_t);return Q(_t)&&Q(Ft)&&Object.keys(Ft).forEach((function(Yt){var Kt,Zt;Q(Ft[Yt])?Yt in _t?Lt[Yt]=q(_t[Yt],Ft[Yt]):Lt=o(o({},Lt),((Kt={})[Yt]=Ft[Yt],Kt)):Lt=o(o({},Lt),((Zt={})[Yt]=Ft[Yt],Zt))})),Lt}var Dn=function(){function t(_t,Ft){this.shape=_t,Ft&&this.setProperties(Ft)}return t.prototype.setProperties=function(_t){var Ft,Lt;try{for(var Yt=r(Object.keys(_t)),Kt=Yt.next();!Kt.done;Kt=Yt.next()){var Zt=Kt.value;this.shape[Zt]=_t[Zt]}}catch(_t){Ft={error:_t}}finally{try{Kt&&!Kt.done&&(Lt=Yt.return)&&Lt.call(Yt)}finally{if(Ft)throw Ft.error}}},t.prototype.getProperty=function(_t){return this.shape[_t]},t}(),Un=function(_t){function e(Ft,Lt){var Yt,Kt,Zt,le=_t.call(this,new UIInputText(Ft),o(o({},Lt),{placeholder:null!==(Yt=null==Lt?void 0:Lt.placeholder)&&void 0!==Yt?Yt:null==Lt?void 0:Lt.value,onFocus:new OnFocus((function(){var _t;le.isInputFocused=!0,null===(_t=null==Lt?void 0:Lt.onFocus)||void 0===_t||_t.call(Lt)})),onBlur:new OnBlur((function(){var _t,Ft;le.isInputFocused=!1,""===le.inputValue&&void 0!==le.placeholder?(le.setInputValue(le.placeholder),null===(_t=null==Lt?void 0:Lt.onBlur)||void 0===_t||_t.call(Lt,!0)):null===(Ft=null==Lt?void 0:Lt.onBlur)||void 0===Ft||Ft.call(Lt,!1)})),onChanged:new OnChanged((function(_t){var Ft,Yt=_t.value;if(le.shape.visible&&(le.inputValue=Yt,Yt!==le.placeholder&&(""===Yt&&(le.shape.placeholder=""),le.isInputFocused||""===Yt))){var Kt=null!==(Ft=null==Lt?void 0:Lt.waitTime)&&void 0!==Ft?Ft:e.DEFAULT_WAIT_TIME;setTimeout((function(){var _t;le.inputValue===Yt&&(null===(_t=null==Lt?void 0:Lt.onChanged)||void 0===_t||_t.call(Lt,Yt))}),Kt)}})),onTextSubmit:new OnTextSubmit((function(_t){var Ft=_t.text,Yt=Ft.substr(0,Ft.length-1),Kt=null==Lt?void 0:Lt.onTextSubmit;Kt?Kt(Yt):setTimeout((function(){return le.shape.placeholder=Yt}),0)}))}))||this;return le.inputValue="",le.isInputFocused=!1,le.placeholder=le.shape.placeholder,le.inputValue=null!==(Zt=null!==(Kt=null==Lt?void 0:Lt.value)&&void 0!==Kt?Kt:null==Lt?void 0:Lt.placeholder)&&void 0!==Zt?Zt:"",le.isInputFocused=!1,le}return i(e,_t),e.prototype.getValue=function(){return this.inputValue},e.prototype.isFocused=function(){return this.isInputFocused},e.prototype.setInputValue=function(_t){var Ft=this.isInputFocused;this.isInputFocused=!1,this.shape.placeholder="",this.inputValue=this.shape.placeholder=_t,this.isInputFocused=Ft},e.prototype.reset=function(){this.setInputValue(this.placeholder)},e.prototype.hide=function(){this.setProperties({visible:!1})},e.prototype.show=function(){this.setProperties({visible:!0}),this.setInputValue(this.inputValue)},e.DEFAULT_WAIT_TIME=650,e}(Dn),Hn=function(_t){function e(Ft,Lt){var Yt=_t.call(this,new UIContainerRect(Ft),o({isPointerBlocker:!0},Lt))||this,Kt=new UIImage(Yt.shape,new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="));return Kt.width="100%",Kt.height="100%",Kt.sourceWidth=1,Kt.sourceHeight=1,Kt.isPointerBlocker=!0,Yt.image=Kt,(null==Lt?void 0:Lt.onClick)&&Yt.setOnClick(Lt.onClick),Yt}return i(e,_t),e.prototype.performClick=function(){var _t;null===(_t=this.image.onClick)||void 0===_t||_t.callback({})},e.prototype.setOnClick=function(_t){this.image.onClick=new OnClick(_t)},e.prototype.clearOnClick=function(){this.image.onClick=null},e}(Dn),qn=function(_t){function e(Ft,Lt){var Yt=_t.call(this,new UIContainerRect(Ft),o({width:"100%",vAlign:"top",visible:!1},Lt))||this;Yt.config=o(o({},e.DEFAULTS),Lt);var Kt=new Hn(Yt.shape,{width:"100%",height:"100%",color:Color4.Clear()});Yt.clickableContainer=Kt;var Zt=new UIImage(Kt.shape,new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="));Zt.width=Zt.height=Yt.config.imageSize,Zt.hAlign="left",Zt.positionX=10,Zt.vAlign="center",Yt.image=Zt;var le=new UIText(Kt.shape);le.vAlign="top",le.hAlign="left",le.vTextAlign="top",le.fontSize=Yt.config.topFontSize,le.color=Yt.config.topTextColor,le.positionX=55,le.positionY=-10,le.isPointerBlocker=!1,Yt.topLeftText=le;var ve=new UIText(Kt.shape);ve.vAlign="top",ve.hAlign="right",ve.vTextAlign="top",ve.hTextAlign="right",ve.fontSize=le.fontSize,ve.color=le.color,ve.isPointerBlocker=!1,ve.positionX=-10,ve.positionY=le.positionY,Yt.topRightText=ve;var Ce=new UIText(Kt.shape);Ce.vAlign="bottom",Ce.hAlign="left",Ce.vTextAlign="bottom",Ce.fontSize=Yt.config.bottomFontSize,Ce.color=Yt.config.bottomTextColor,Ce.positionX=le.positionX,Ce.positionY=10,Ce.isPointerBlocker=!1,Yt.bottomLeftText=Ce;var Se=new UIText(Kt.shape);return Se.vAlign="bottom",Se.hAlign="right",Se.vTextAlign="bottom",Se.hTextAlign="right",Se.fontSize=Ce.fontSize,Se.color=Ce.color,Se.isPointerBlocker=!1,Se.positionX=ve.positionX,Se.positionY=Ce.positionY,Yt.bottomRightText=Se,Yt}return i(e,_t),e.prototype.setOption=function(_t,Ft){this.image.visible=!1,this.topRightText.visible=!1,this.bottomLeftText.visible=!1,this.bottomRightText.visible=!1,_t.image?(this.image.source=new Texture(_t.image.src),this.image.sourceWidth=_t.image.sourceWidth,this.image.sourceHeight=_t.image.sourceHeight,this.image.visible=!0,this.topLeftText.positionX=this.config.imageSize+20):this.topLeftText.positionX=10,"string"==typeof _t.visualText?(this.topLeftText.value=_t.visualText,this.topLeftText.vAlign=this.topLeftText.vTextAlign="center",this.topLeftText.positionY=0):"text"in _t.visualText?(this.topLeftText.vAlign=this.topLeftText.vTextAlign="top",this.topLeftText.positionY=-10,this.topLeftText.value=_t.visualText.text,this.bottomLeftText.value=_t.visualText.subText,this.bottomLeftText.visible=!0,this.bottomLeftText.positionX=this.topLeftText.positionX):"bottomLeft"in _t.visualText&&(this.topLeftText.vAlign=this.topLeftText.vTextAlign="top",this.topLeftText.positionY=-10,this.topLeftText.value=_t.visualText.topLeft,this.topRightText.value=_t.visualText.topRight,this.bottomLeftText.value=_t.visualText.bottomLeft,this.bottomRightText.value=_t.visualText.bottomRight,this.topRightText.visible=!0,this.bottomLeftText.visible=!0,this.bottomRightText.visible=!0,this.bottomLeftText.positionX=this.topLeftText.positionX),Ft?this.clickableContainer.setOnClick(Ft):this.clickableContainer.clearOnClick()},e.prototype.setProperties=function(Ft){_t.prototype.setProperties.call(this,Ft)},e.prototype.getProperty=function(Ft){return _t.prototype.getProperty.call(this,Ft)},e.prototype.performClick=function(){this.clickableContainer.performClick()},e.DEFAULTS={topFontSize:14,bottomFontSize:14,imageSize:36,topTextColor:Color4.FromInts(14,16,60,255),bottomTextColor:Color4.FromInts(117,120,181,255)},e}(Dn),Wn=function(_t){function e(Ft,Lt,Yt,Kt){var Zt=_t.call(this,new UIContainerRect(Ft),o({},Yt))||this;Zt.onSuccessfulSelection=Kt,Zt.uiOptions=[],Zt.options={},Yt.visible,Yt.opacity,Yt.hAlign,Yt.vAlign,Yt.positionX,Yt.positionY;var le=n(Yt,["visible","opacity","hAlign","vAlign","positionX","positionY"]);Zt.config=q(e.DEFAULTS,le),Zt.setProperties({width:Zt.config.width,height:Zt.config.initialHeight,color:Zt.config.borderColor}),Zt.setItems(Lt.items,Lt.dropdownDefaultItemIds);var Ce=new UIContainerRect(Zt.shape);Ce.color=Zt.config.backgroundColor,Ce.width=Zt.config.width-2*Zt.config.borderSize,Ce.height=Zt.config.initialHeight-2*Zt.config.borderSize,Zt.insideContainer=Ce;var Se=new Un(Ce,{vAlign:"top",hTextAlign:"left",vTextAlign:"center",width:"92%",fontSize:Zt.config.search.fontSize,placeholder:Zt.config.search.placeholder.defaultText,color:Zt.config.search.textColor,focusedBackground:Color4.Clear(),height:.95*Zt.config.initialHeight,onBlur:function(){return Zt.close()},onTextSubmit:function(){Zt.uiOptions[0].getProperty("visible")?Zt.uiOptions[0].performClick():Zt.close()},onChanged:function(_t){if(Zt.hideAllOptions(),_t===Zt.config.search.placeholder.defaultText||""===_t)Zt.showDefaultOptions();else{var Ft=_t.toLowerCase(),Lt=[];for(var Yt in Zt.options){var Kt=Zt.options[Yt];if(Kt.searchBy.toLowerCase().indexOf(Ft)>=0&&(Lt.push(Kt),Lt.length===Zt.config.options.maxVisibleOptions))break}Lt.length>0?Zt.showOptions(Lt):Zt.showErrorMessage("Sorry, we can't find \""+_t+'"')}}});Zt.inputText=Se;for(var Ie=0;Ie<Zt.config.options.maxVisibleOptions;Ie++){var Ne=new qn(Ce,o(o({},Zt.config.options),{height:Zt.config.initialHeight,positionY:-Zt.config.initialHeight-Zt.config.initialHeight*Ie,color:Ie%2==0?Zt.config.options.oddBackgroundColor:Ce.color}));Zt.uiOptions.push(Ne)}var Fe=new UIImage(Ce,ve);Fe.onClick=new OnClick((function(){return Zt.close()})),Fe.sourceTop=305,Fe.sourceLeft=985,Fe.sourceWidth=Fe.sourceHeight=35,Fe.width=Fe.height=18,Fe.hAlign="right",Fe.vAlign="top",Fe.positionX=-12,Fe.positionY=-12,Fe.visible=Fe.isPointerBlocker=!0;var Re=new UIText(Ce);return Re.height=20,Re.visible=!1,Re.width="92%",Re.hTextAlign="center",Re.vAlign="bottom",Re.positionY=20,Re.fontSize=Zt.config.errorMessage.fontSize,Re.color=Zt.config.errorMessage.textColor,Zt.errorMessage=Re,Zt}return i(e,_t),e.prototype.open=function(){this.setProperties({visible:!0}),this.showDefaultOptions()},e.prototype.close=function(){this.setProperties({visible:!1}),this.inputText.reset()},e.prototype.setItems=function(_t,Ft){this.options=_t.reduce((function(_t,Ft){var Lt;return Ft.searchBy=null!==(Lt=Ft.searchBy)&&void 0!==Lt?Lt:"string"==typeof Ft.visualText?Ft.visualText:"text"in Ft.visualText?Ft.visualText.text:Ft.visualText.topLeft,_t[Ft.id]=Ft,_t}),{}),Ft?this.setDropdownDefaults(Ft):this.defaultOptions=Ft,this.hideAllOptions()},e.prototype.setDropdownDefaults=function(_t){var Ft,Lt;try{for(var Yt=r(_t),Kt=Yt.next();!Kt.done;Kt=Yt.next()){var Zt=Kt.value;if(!(Zt in this.options))return void error("Couldn't find an option with id '"+Zt+"'. Will not set new defaults")}}catch(_t){Ft={error:_t}}finally{try{Kt&&!Kt.done&&(Lt=Yt.return)&&Lt.call(Yt)}finally{if(Ft)throw Ft.error}}this.defaultOptions=_t},e.prototype.showDefaultOptions=function(){var _t,Ft=this;if(this.defaultOptions)_t=this.defaultOptions.map((function(_t){return Ft.options[_t]})).slice(0,this.config.options.maxVisibleOptions);else for(var Lt in _t=[],this.options)if(_t.push(this.options[Lt]),_t.length===this.config.options.maxVisibleOptions)break;this.showOptions(_t)},e.prototype.showOptions=function(_t){var Ft=this;this.resizeHeight(this.config.initialHeight*_t.length+2*this.config.borderSize),_t.forEach((function(_t,Lt){var Yt=Ft.uiOptions[Lt];Yt.setOption(_t,(function(){Ft.onSuccessfulSelection(_t),Ft.setProperties({visible:!1})})),Yt.setProperties({visible:!0})})),this.errorMessage.visible=!1},e.prototype.hideAllOptions=function(){this.uiOptions.forEach((function(_t){return _t.setProperties({visible:!1})}))},e.prototype.showErrorMessage=function(_t){this.errorMessage.visible=!0,this.errorMessage.value=_t,this.resizeHeight(60)},e.prototype.resizeHeight=function(_t){this.setProperties({height:this.config.initialHeight+_t}),this.insideContainer.height=this.config.initialHeight+_t-2*this.config.borderSize},e.DEFAULTS={borderColor:Color4.FromInts(232,236,253,255),backgroundColor:Color4.White(),borderSize:2,width:300,initialHeight:60,search:{fontSize:16,textColor:Color4.FromInts(24,26,70,255),placeholder:{defaultText:"Click to search",textColor:Color4.FromInts(118,120,181,200)}},options:{maxVisibleOptions:5,oddBackgroundColor:Color4.FromInts(246,246,255,255),topFontSize:14,bottomFontSize:14,imageSize:36,topTextColor:Color4.FromInts(14,16,60,255),bottomTextColor:Color4.FromInts(117,120,181,255)},errorMessage:{fontSize:13,textColor:Color4.FromInts(125,127,157,255)}},e}(Dn),jn=function(_t){function e(Ft,Lt,Yt,Kt){var Zt=_t.call(this,new UIContainerRect(Ft),o({},Yt))||this;Zt.onSuccessfulSelection=Kt,Yt.visible,Yt.opacity,Yt.hAlign,Yt.vAlign,Yt.positionX,Yt.positionY;var le=n(Yt,["visible","opacity","hAlign","vAlign","positionX","positionY"]);Zt.config=q(Wn.DEFAULTS,le),Zt.setProperties({width:Zt.config.width,height:Zt.config.initialHeight,color:Zt.config.borderColor});var ve=new Hn(Zt.shape,{color:Zt.config.backgroundColor,width:Zt.config.width-2*Zt.config.borderSize,height:Zt.config.initialHeight-2*Zt.config.borderSize,onClick:function(){return Zt.uiSearchPrompt.open()}}),Ce=new qn(ve.shape,o(o({},Zt.config.options),{height:Zt.config.initialHeight,color:Color4.Clear(),width:Zt.config.width-2*Zt.config.borderSize-20,visible:!0,hAlign:"left",isPointerBlocker:!1})),Se=new UIText(ve.shape);if(Se.value="Click to select an option",Se.fontSize=Zt.config.search.fontSize,Se.color=Zt.config.search.placeholder.textColor,Se.vTextAlign=Se.hTextAlign="center",Se.positionX=-Zt.config.borderSize-10,Se.isPointerBlocker=!1,Se.opacity=Se.color.a,Zt.initialText=Se,null==Lt?void 0:Lt.initialItemId){var Ie=Lt.items.filter((function(_t){return _t.id===Lt.initialItemId}))[0];Ie&&(Ce.setOption(Ie),Zt.initialText.visible=!1)}var Ne=new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAgMAAADXB5lNAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAN5AAADeQELGyzWAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAAlQTFRF////AAAAAAAAflGpXQAAAAJ0Uk5TAICbK04YAAAAeklEQVQ4je3PsRXEMAgE0VFCEapG9agaiiDRVXkJxlpq8IYT/AfwTbZ/ssPUEJgGZ2hYDTmgSIAiDoqsdskBRQIUcVBktXdO/jeVuBDPMBpRyEMUEhVMiUKKSOQlEokrmBKJXARsJWAqAaYEjEbAVgJmtGDewmjEt9wfISOqAUzY2sAAAAAASUVORK5CYII="),Fe=new UIImage(ve.shape,Ne);return Fe.sourceWidth=Fe.sourceHeight=64,Fe.height=15,Fe.width=12,Fe.hAlign="right",Fe.vAlign="center",Fe.positionX=-10,Fe.visible=!0,Fe.isPointerBlocker=!1,Zt.uiSearchPrompt=new Wn(Zt.shape,Lt,o(o({},Yt),{visible:!1,vAlign:"top",initialHeight:Zt.config.initialHeight-2*Zt.config.borderSize}),(function(_t){Ce.setOption(_t),Zt.initialText.visible=!1,Zt.onSuccessfulSelection(_t)})),Zt}return i(e,_t),e.prototype.open=function(){this.setProperties({visible:!0})},e.prototype.close=function(){this.setProperties({visible:!1})},e.prototype.setSearchItems=function(_t,Ft){this.uiSearchPrompt.setItems(_t,Ft)},e.prototype.setSearchDropdownDefaults=function(_t){this.uiSearchPrompt.setDropdownDefaults(_t)},e}(Dn);_t.CenterImage=Sn,_t.CornerLabel=Ln,_t.CustomPrompt=Nn,_t.CustomPromptButton=Bn,_t.CustomPromptCheckBox=Fn,_t.CustomPromptIcon=Rn,_t.CustomPromptSwitch=On,_t.CustomPromptText=Pn,_t.CustomPromptTextBox=Mn,_t.FillInPrompt=In,_t.LargeIcon=_n,_t.LoadingIcon=zn,_t.MediumIcon=An,_t.OkPrompt=En,_t.OptionPrompt=kn,_t.SFFont=Zt,_t.SFHeavyFont=le,_t.SmallIcon=Cn,_t.UIBar=xn,_t.UICounter=Le,_t.UISearchPrompt=Wn,_t.UISelectBox=jn,_t.canvas=Kt,_t.darkTheme=Ce,_t.displayAnnouncement=function(_t,Lt,Yt,Kt,Zt){Se.visible=!0,Se.value=_t,Se.color=Yt||Color4.Yellow(),Se.fontSize=Kt||50,Se.font=le,Se.outlineColor=Color4.Black(),Se.outlineWidth=Zt?0:.1,Se.adaptWidth=!1,Se.textWrapping=!0,Se.width=900;var ve=new Entity;engine.addEntity(ve),-1!=Lt&&ve.addComponentOrReplace(new Ft(Lt||3,(function(){Se.visible=!1})))},_t.hideAnnouncements=function(){Se.visible=!1},_t.lightTheme=ve,Object.defineProperty(_t,"__esModule",{value:!0})})),function(_t,Ft){"object"==typeof exports&&"undefined"!=typeof module?Ft(exports):"function"==typeof define&&define.amd?define("eth-connect",["exports"],Ft):Ft((_t="undefined"!=typeof globalThis?globalThis:_t||self).ethconnect={})}(this,(function(_t){function e(_t){if(_t.jsonrpc="2.0",!_t.id||"number"!=typeof _t.id||Math.floor(_t.id)!==_t.id)throw new Error(`Invalid RPC message(invalid id) message: ${JSON.stringify(_t)}`);if(!_t.method||"string"!=typeof _t.method||0===_t.method.trim().length)throw new Error(`Invalid RPC message(invalid method) message: ${JSON.stringify(_t)}`);if(!_t.params||"object"!=typeof _t.params)throw new Error(`Invalid RPC message(invalid params) message: ${JSON.stringify(_t)}`);return _t}function n(_t,Ft){return _t(Ft={exports:{}},Ft.exports),Ft.exports}var Ft,Lt=n((function(_t,Ft){function n(){let _t,Ft;const Lt=new Promise(((Yt,Kt)=>{_t=_t=>{Yt(_t),Lt.isPending=!1},Ft=_t=>{Kt(_t),Lt.isPending=!1}})).catch((_t=>Promise.reject(_t)));return Lt.resolve=_t,Lt.reject=Ft,"finally"in Lt||(Lt.finally=_t=>{Lt.then(_t),Lt.catch(_t)}),Lt.isPending=!0,Lt}Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.future=n,Ft.default=n}));(Ft=Lt)&&Ft.__esModule&&Object.prototype.hasOwnProperty.call(Ft,"default")&&Ft.default;var Yt=Lt.future,Kt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}var Zt=a,le=c;function h(_t){if(Zt===setTimeout)return setTimeout(_t,0);if((Zt===a||!Zt)&&setTimeout)return Zt=setTimeout,setTimeout(_t,0);try{return Zt(_t,0)}catch(Ft){try{return Zt.call(null,_t,0)}catch(Ft){return Zt.call(this,_t,0)}}}"function"==typeof Kt.setTimeout&&(Zt=setTimeout),"function"==typeof Kt.clearTimeout&&(le=clearTimeout);var ve,Ce=[],Se=!1,Ie=-1;function m(){Se&&ve&&(Se=!1,ve.length?Ce=ve.concat(Ce):Ie=-1,Ce.length&&y())}function y(){if(!Se){var _t=h(m);Se=!0;for(var Ft=Ce.length;Ft;){for(ve=Ce,Ce=[];++Ie<Ft;)ve&&ve[Ie].run();Ie=-1,Ft=Ce.length}ve=null,Se=!1,function(_t){if(le===clearTimeout)return clearTimeout(_t);if((le===c||!le)&&clearTimeout)return le=clearTimeout,clearTimeout(_t);try{le(_t)}catch(Ft){try{return le.call(null,_t)}catch(Ft){return le.call(this,_t)}}}(_t)}}function w(_t,Ft){this.fun=_t,this.array=Ft}function v(){}w.prototype.run=function(){this.fun.apply(null,this.array)};var Ne=v,Fe=v,Re=v,Pe=v,Le=v,Ue=v,He=v,qe=Kt.performance||{},We=qe.now||qe.mozNow||qe.msNow||qe.oNow||qe.webkitNow||function(){return(new Date).getTime()},Ge=new Date,Ve={nextTick:function(_t){var Ft=new Array(arguments.length-1);if(arguments.length>1)for(var Lt=1;Lt<arguments.length;Lt++)Ft[Lt-1]=arguments[Lt];Ce.push(new w(_t,Ft)),1!==Ce.length||Se||h(y)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Ne,addListener:Fe,once:Re,off:Pe,removeListener:Le,removeAllListeners:Ue,emit:He,binding:function(_t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(_t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(_t){var Ft=.001*We.call(qe),Lt=Math.floor(Ft),Yt=Math.floor(Ft%1*1e9);return _t&&(Lt-=_t[0],(Yt-=_t[1])<0&&(Lt--,Yt+=1e9)),[Lt,Yt]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Ge)/1e3}},$e=n((function(_t){!function(){var Ft="input is invalid type",Lt="object"==typeof window,Yt=Lt?window:{};Yt.JS_SHA3_NO_WINDOW&&(Lt=!1);var Zt=!Lt&&"object"==typeof self;!Yt.JS_SHA3_NO_NODE_JS&&"object"==typeof Ve&&Ve.versions&&Ve.versions.node?Yt=Kt:Zt&&(Yt=self);var le=!Yt.JS_SHA3_NO_COMMON_JS&&_t.exports,ve=!Yt.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,Ce="0123456789abcdef".split(""),Se=[4,1024,262144,67108864],Ie=[0,8,16,24],Ne=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],Fe=[224,256,384,512],Re=[128,256],Pe=["hex","buffer","arrayBuffer","array","digest"],Le={128:168,256:136};!Yt.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(_t){return"[object Array]"===Object.prototype.toString.call(_t)}),!ve||!Yt.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(_t){return"object"==typeof _t&&_t.buffer&&_t.buffer.constructor===ArrayBuffer});for(var m=function(_t,Ft,Lt){return function(Yt){return new C(_t,Ft,_t).update(Yt)[Lt]()}},y=function(_t,Ft,Lt){return function(Yt,Kt){return new C(_t,Ft,Kt).update(Yt)[Lt]()}},w=function(_t,Ft,Lt){return function(Ft,Yt,Kt,Zt){return He["cshake"+_t].update(Ft,Yt,Kt,Zt)[Lt]()}},v=function(_t,Ft,Lt){return function(Ft,Yt,Kt,Zt){return He["kmac"+_t].update(Ft,Yt,Kt,Zt)[Lt]()}},b=function(_t,Ft,Lt,Yt){for(var Kt=0;Kt<Pe.length;++Kt){var Zt=Pe[Kt];_t[Zt]=Ft(Lt,Yt,Zt)}return _t},_=function(_t,Ft){var Lt=m(_t,Ft,"hex");return Lt.create=function(){return new C(_t,Ft,_t)},Lt.update=function(_t){return Lt.create().update(_t)},b(Lt,m,_t,Ft)},Ue=[{name:"keccak",padding:[1,256,65536,16777216],bits:Fe,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:Fe,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:Re,createMethod:function(_t,Ft){var Lt=y(_t,Ft,"hex");return Lt.create=function(Lt){return new C(_t,Ft,Lt)},Lt.update=function(_t,Ft){return Lt.create(Ft).update(_t)},b(Lt,y,_t,Ft)}},{name:"cshake",padding:Se,bits:Re,createMethod:function(_t,Ft){var Lt=Le[_t],Yt=w(_t,0,"hex");return Yt.create=function(Yt,Kt,Zt){return Kt||Zt?new C(_t,Ft,Yt).bytepad([Kt,Zt],Lt):He["shake"+_t].create(Yt)},Yt.update=function(_t,Ft,Lt,Kt){return Yt.create(Ft,Lt,Kt).update(_t)},b(Yt,w,_t,Ft)}},{name:"kmac",padding:Se,bits:Re,createMethod:function(_t,Ft){var Lt=Le[_t],Yt=v(_t,0,"hex");return Yt.create=function(Yt,Kt,Zt){return new I(_t,Ft,Kt).bytepad(["KMAC",Zt],Lt).bytepad([Yt],Lt)},Yt.update=function(_t,Ft,Lt,Kt){return Yt.create(_t,Lt,Kt).update(Ft)},b(Yt,v,_t,Ft)}}],He={},qe=[],We=0;We<Ue.length;++We)for(var Ge=Ue[We],$e=Ge.bits,Xe=0;Xe<$e.length;++Xe){var Ye=Ge.name+"_"+$e[Xe];if(qe.push(Ye),He[Ye]=Ge.createMethod($e[Xe],Ge.padding),"sha3"!==Ge.name){var Je=Ge.name+$e[Xe];qe.push(Je),He[Je]=He[Ye]}}function C(_t,Ft,Lt){this.blocks=[],this.s=[],this.padding=Ft,this.outputBits=Lt,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(_t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=Lt>>5,this.extraBytes=(31&Lt)>>3;for(var Yt=0;Yt<50;++Yt)this.s[Yt]=0}function I(_t,Ft,Lt){C.call(this,_t,Ft,Lt)}C.prototype.update=function(_t){if(this.finalized)throw new Error("finalize already called");var Lt,Yt=typeof _t;if("string"!==Yt){if("object"!==Yt)throw new Error(Ft);if(null===_t)throw new Error(Ft);if(ve&&_t.constructor===ArrayBuffer)_t=new Uint8Array(_t);else if(!(Array.isArray(_t)||ve&&ArrayBuffer.isView(_t)))throw new Error(Ft);Lt=!0}for(var Kt,Zt,le=this.blocks,Ce=this.byteCount,Se=_t.length,Ne=this.blockCount,Fe=0,Re=this.s;Fe<Se;){if(this.reset)for(this.reset=!1,le[0]=this.block,Kt=1;Kt<Ne+1;++Kt)le[Kt]=0;if(Lt)for(Kt=this.start;Fe<Se&&Kt<Ce;++Fe)le[Kt>>2]|=_t[Fe]<<Ie[3&Kt++];else for(Kt=this.start;Fe<Se&&Kt<Ce;++Fe)(Zt=_t.charCodeAt(Fe))<128?le[Kt>>2]|=Zt<<Ie[3&Kt++]:Zt<2048?(le[Kt>>2]|=(192|Zt>>6)<<Ie[3&Kt++],le[Kt>>2]|=(128|63&Zt)<<Ie[3&Kt++]):Zt<55296||Zt>=57344?(le[Kt>>2]|=(224|Zt>>12)<<Ie[3&Kt++],le[Kt>>2]|=(128|Zt>>6&63)<<Ie[3&Kt++],le[Kt>>2]|=(128|63&Zt)<<Ie[3&Kt++]):(Zt=65536+((1023&Zt)<<10|1023&_t.charCodeAt(++Fe)),le[Kt>>2]|=(240|Zt>>18)<<Ie[3&Kt++],le[Kt>>2]|=(128|Zt>>12&63)<<Ie[3&Kt++],le[Kt>>2]|=(128|Zt>>6&63)<<Ie[3&Kt++],le[Kt>>2]|=(128|63&Zt)<<Ie[3&Kt++]);if(this.lastByteIndex=Kt,Kt>=Ce){for(this.start=Kt-Ce,this.block=le[Ne],Kt=0;Kt<Ne;++Kt)Re[Kt]^=le[Kt];P(Re),this.reset=!0}else this.start=Kt}return this},C.prototype.encode=function(_t,Ft){var Lt=255&_t,Yt=1,Kt=[Lt];for(Lt=255&(_t>>=8);Lt>0;)Kt.unshift(Lt),Lt=255&(_t>>=8),++Yt;return Ft?Kt.push(Yt):Kt.unshift(Yt),this.update(Kt),Kt.length},C.prototype.encodeString=function(_t){var Lt,Yt=typeof _t;if("string"!==Yt){if("object"!==Yt)throw new Error(Ft);if(null===_t)throw new Error(Ft);if(ve&&_t.constructor===ArrayBuffer)_t=new Uint8Array(_t);else if(!(Array.isArray(_t)||ve&&ArrayBuffer.isView(_t)))throw new Error(Ft);Lt=!0}var Kt=0,Zt=_t.length;if(Lt)Kt=Zt;else for(var le=0;le<_t.length;++le){var Ce=_t.charCodeAt(le);Ce<128?Kt+=1:Ce<2048?Kt+=2:Ce<55296||Ce>=57344?Kt+=3:(Ce=65536+((1023&Ce)<<10|1023&_t.charCodeAt(++le)),Kt+=4)}return Kt+=this.encode(8*Kt),this.update(_t),Kt},C.prototype.bytepad=function(_t,Ft){for(var Lt=this.encode(Ft),Yt=0;Yt<_t.length;++Yt)Lt+=this.encodeString(_t[Yt]);var Kt=Ft-Lt%Ft,Zt=[];return Zt.length=Kt,this.update(Zt),this},C.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var _t=this.blocks,Ft=this.lastByteIndex,Lt=this.blockCount,Yt=this.s;if(_t[Ft>>2]|=this.padding[3&Ft],this.lastByteIndex===this.byteCount)for(_t[0]=_t[Lt],Ft=1;Ft<Lt+1;++Ft)_t[Ft]=0;for(_t[Lt-1]|=2147483648,Ft=0;Ft<Lt;++Ft)Yt[Ft]^=_t[Ft];P(Yt)}},C.prototype.toString=C.prototype.hex=function(){this.finalize();for(var _t,Ft=this.blockCount,Lt=this.s,Yt=this.outputBlocks,Kt=this.extraBytes,Zt=0,le=0,ve="";le<Yt;){for(Zt=0;Zt<Ft&&le<Yt;++Zt,++le)_t=Lt[Zt],ve+=Ce[_t>>4&15]+Ce[15&_t]+Ce[_t>>12&15]+Ce[_t>>8&15]+Ce[_t>>20&15]+Ce[_t>>16&15]+Ce[_t>>28&15]+Ce[_t>>24&15];le%Ft==0&&(P(Lt),Zt=0)}return Kt&&(_t=Lt[Zt],ve+=Ce[_t>>4&15]+Ce[15&_t],Kt>1&&(ve+=Ce[_t>>12&15]+Ce[_t>>8&15]),Kt>2&&(ve+=Ce[_t>>20&15]+Ce[_t>>16&15])),ve},C.prototype.arrayBuffer=function(){this.finalize();var _t,Ft=this.blockCount,Lt=this.s,Yt=this.outputBlocks,Kt=this.extraBytes,Zt=0,le=0,ve=this.outputBits>>3;_t=Kt?new ArrayBuffer(Yt+1<<2):new ArrayBuffer(ve);for(var Ce=new Uint32Array(_t);le<Yt;){for(Zt=0;Zt<Ft&&le<Yt;++Zt,++le)Ce[le]=Lt[Zt];le%Ft==0&&P(Lt)}return Kt&&(Ce[Zt]=Lt[Zt],_t=_t.slice(0,ve)),_t},C.prototype.buffer=C.prototype.arrayBuffer,C.prototype.digest=C.prototype.array=function(){this.finalize();for(var _t,Ft,Lt=this.blockCount,Yt=this.s,Kt=this.outputBlocks,Zt=this.extraBytes,le=0,ve=0,Ce=[];ve<Kt;){for(le=0;le<Lt&&ve<Kt;++le,++ve)_t=ve<<2,Ft=Yt[le],Ce[_t]=255&Ft,Ce[_t+1]=Ft>>8&255,Ce[_t+2]=Ft>>16&255,Ce[_t+3]=Ft>>24&255;ve%Lt==0&&P(Yt)}return Zt&&(_t=ve<<2,Ft=Yt[le],Ce[_t]=255&Ft,Zt>1&&(Ce[_t+1]=Ft>>8&255),Zt>2&&(Ce[_t+2]=Ft>>16&255)),Ce},I.prototype=new C,I.prototype.finalize=function(){return this.encode(this.outputBits,!0),C.prototype.finalize.call(this)};var P=function(_t){var Ft,Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Fe,Re,Pe,Le,Ue,He,qe,We,Ge,Ve,$e,Xe,Ye,Je,Qe,Ze,tn,nn,rn,on,sn,an,cn,un,ln,dn,hn,pn,fn,mn,yn,gn,bn,vn,wn,Tn,xn,An,Cn,_n,Sn,En,kn,In,Nn,Bn,Fn,On,Rn,Pn,Mn,Ln,zn;for(Yt=0;Yt<48;Yt+=2)Kt=_t[0]^_t[10]^_t[20]^_t[30]^_t[40],Zt=_t[1]^_t[11]^_t[21]^_t[31]^_t[41],le=_t[2]^_t[12]^_t[22]^_t[32]^_t[42],ve=_t[3]^_t[13]^_t[23]^_t[33]^_t[43],Ce=_t[4]^_t[14]^_t[24]^_t[34]^_t[44],Se=_t[5]^_t[15]^_t[25]^_t[35]^_t[45],Ie=_t[6]^_t[16]^_t[26]^_t[36]^_t[46],Fe=_t[7]^_t[17]^_t[27]^_t[37]^_t[47],Ft=(Re=_t[8]^_t[18]^_t[28]^_t[38]^_t[48])^(le<<1|ve>>>31),Lt=(Pe=_t[9]^_t[19]^_t[29]^_t[39]^_t[49])^(ve<<1|le>>>31),_t[0]^=Ft,_t[1]^=Lt,_t[10]^=Ft,_t[11]^=Lt,_t[20]^=Ft,_t[21]^=Lt,_t[30]^=Ft,_t[31]^=Lt,_t[40]^=Ft,_t[41]^=Lt,Ft=Kt^(Ce<<1|Se>>>31),Lt=Zt^(Se<<1|Ce>>>31),_t[2]^=Ft,_t[3]^=Lt,_t[12]^=Ft,_t[13]^=Lt,_t[22]^=Ft,_t[23]^=Lt,_t[32]^=Ft,_t[33]^=Lt,_t[42]^=Ft,_t[43]^=Lt,Ft=le^(Ie<<1|Fe>>>31),Lt=ve^(Fe<<1|Ie>>>31),_t[4]^=Ft,_t[5]^=Lt,_t[14]^=Ft,_t[15]^=Lt,_t[24]^=Ft,_t[25]^=Lt,_t[34]^=Ft,_t[35]^=Lt,_t[44]^=Ft,_t[45]^=Lt,Ft=Ce^(Re<<1|Pe>>>31),Lt=Se^(Pe<<1|Re>>>31),_t[6]^=Ft,_t[7]^=Lt,_t[16]^=Ft,_t[17]^=Lt,_t[26]^=Ft,_t[27]^=Lt,_t[36]^=Ft,_t[37]^=Lt,_t[46]^=Ft,_t[47]^=Lt,Ft=Ie^(Kt<<1|Zt>>>31),Lt=Fe^(Zt<<1|Kt>>>31),_t[8]^=Ft,_t[9]^=Lt,_t[18]^=Ft,_t[19]^=Lt,_t[28]^=Ft,_t[29]^=Lt,_t[38]^=Ft,_t[39]^=Lt,_t[48]^=Ft,_t[49]^=Lt,Le=_t[0],Ue=_t[1],Tn=_t[11]<<4|_t[10]>>>28,xn=_t[10]<<4|_t[11]>>>28,nn=_t[20]<<3|_t[21]>>>29,rn=_t[21]<<3|_t[20]>>>29,Pn=_t[31]<<9|_t[30]>>>23,Mn=_t[30]<<9|_t[31]>>>23,gn=_t[40]<<18|_t[41]>>>14,bn=_t[41]<<18|_t[40]>>>14,un=_t[2]<<1|_t[3]>>>31,ln=_t[3]<<1|_t[2]>>>31,He=_t[13]<<12|_t[12]>>>20,qe=_t[12]<<12|_t[13]>>>20,An=_t[22]<<10|_t[23]>>>22,Cn=_t[23]<<10|_t[22]>>>22,on=_t[33]<<13|_t[32]>>>19,sn=_t[32]<<13|_t[33]>>>19,Ln=_t[42]<<2|_t[43]>>>30,zn=_t[43]<<2|_t[42]>>>30,In=_t[5]<<30|_t[4]>>>2,Nn=_t[4]<<30|_t[5]>>>2,dn=_t[14]<<6|_t[15]>>>26,hn=_t[15]<<6|_t[14]>>>26,We=_t[25]<<11|_t[24]>>>21,Ge=_t[24]<<11|_t[25]>>>21,_n=_t[34]<<15|_t[35]>>>17,Sn=_t[35]<<15|_t[34]>>>17,an=_t[45]<<29|_t[44]>>>3,cn=_t[44]<<29|_t[45]>>>3,Je=_t[6]<<28|_t[7]>>>4,Qe=_t[7]<<28|_t[6]>>>4,Bn=_t[17]<<23|_t[16]>>>9,Fn=_t[16]<<23|_t[17]>>>9,pn=_t[26]<<25|_t[27]>>>7,fn=_t[27]<<25|_t[26]>>>7,Ve=_t[36]<<21|_t[37]>>>11,$e=_t[37]<<21|_t[36]>>>11,En=_t[47]<<24|_t[46]>>>8,kn=_t[46]<<24|_t[47]>>>8,vn=_t[8]<<27|_t[9]>>>5,wn=_t[9]<<27|_t[8]>>>5,Ze=_t[18]<<20|_t[19]>>>12,tn=_t[19]<<20|_t[18]>>>12,On=_t[29]<<7|_t[28]>>>25,Rn=_t[28]<<7|_t[29]>>>25,mn=_t[38]<<8|_t[39]>>>24,yn=_t[39]<<8|_t[38]>>>24,Xe=_t[48]<<14|_t[49]>>>18,Ye=_t[49]<<14|_t[48]>>>18,_t[0]=Le^~He&We,_t[1]=Ue^~qe&Ge,_t[10]=Je^~Ze&nn,_t[11]=Qe^~tn&rn,_t[20]=un^~dn&pn,_t[21]=ln^~hn&fn,_t[30]=vn^~Tn&An,_t[31]=wn^~xn&Cn,_t[40]=In^~Bn&On,_t[41]=Nn^~Fn&Rn,_t[2]=He^~We&Ve,_t[3]=qe^~Ge&$e,_t[12]=Ze^~nn&on,_t[13]=tn^~rn&sn,_t[22]=dn^~pn&mn,_t[23]=hn^~fn&yn,_t[32]=Tn^~An&_n,_t[33]=xn^~Cn&Sn,_t[42]=Bn^~On&Pn,_t[43]=Fn^~Rn&Mn,_t[4]=We^~Ve&Xe,_t[5]=Ge^~$e&Ye,_t[14]=nn^~on&an,_t[15]=rn^~sn&cn,_t[24]=pn^~mn&gn,_t[25]=fn^~yn&bn,_t[34]=An^~_n&En,_t[35]=Cn^~Sn&kn,_t[44]=On^~Pn&Ln,_t[45]=Rn^~Mn&zn,_t[6]=Ve^~Xe&Le,_t[7]=$e^~Ye&Ue,_t[16]=on^~an&Je,_t[17]=sn^~cn&Qe,_t[26]=mn^~gn&un,_t[27]=yn^~bn&ln,_t[36]=_n^~En&vn,_t[37]=Sn^~kn&wn,_t[46]=Pn^~Ln&In,_t[47]=Mn^~zn&Nn,_t[8]=Xe^~Le&He,_t[9]=Ye^~Ue&qe,_t[18]=an^~Je&Ze,_t[19]=cn^~Qe&tn,_t[28]=gn^~un&dn,_t[29]=bn^~ln&hn,_t[38]=En^~vn&Tn,_t[39]=kn^~wn&xn,_t[48]=Ln^~In&Bn,_t[49]=zn^~Nn&Fn,_t[0]^=Ne[Yt],_t[1]^=Ne[Yt+1]};if(le)_t.exports=He;else for(We=0;We<qe.length;++We)Yt[qe[We]]=He[qe[We]]}()}));$e.keccak_224,$e.keccak224,$e.keccak_256;var Xe=$e.keccak256;$e.keccak_384,$e.keccak384,$e.keccak_512,$e.keccak512,$e.sha3_224,$e.sha3_256,$e.sha3_384,$e.sha3_512,$e.shake_128,$e.shake128,$e.shake_256,$e.shake256,$e.cshake_128,$e.cshake128,$e.cshake_256,$e.cshake256,$e.kmac_128,$e.kmac128,$e.kmac_256,$e.kmac256;var Ye=n((function(_t){!function(Ft){var Lt,Yt=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Kt=Math.ceil,Zt=Math.floor,le="[BigNumber Error] ",ve=le+"Number primitive has more than 15 significant digits: ",Ce=1e14,Se=14,Ie=9007199254740991,Ne=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Fe=1e7,Re=1e9;function d(_t){var Ft=0|_t;return _t>0||_t===Ft?Ft:Ft-1}function g(_t){for(var Ft,Lt,Yt=1,Kt=_t.length,Zt=_t[0]+"";Yt<Kt;){for(Ft=_t[Yt++]+"",Lt=Se-Ft.length;Lt--;Ft="0"+Ft);Zt+=Ft}for(Kt=Zt.length;48===Zt.charCodeAt(--Kt););return Zt.slice(0,Kt+1||1)}function m(_t,Ft){var Lt,Yt,Kt=_t.c,Zt=Ft.c,le=_t.s,ve=Ft.s,Ce=_t.e,Se=Ft.e;if(!le||!ve)return null;if(Lt=Kt&&!Kt[0],Yt=Zt&&!Zt[0],Lt||Yt)return Lt?Yt?0:-ve:le;if(le!=ve)return le;if(Lt=le<0,Yt=Ce==Se,!Kt||!Zt)return Yt?0:!Kt^Lt?1:-1;if(!Yt)return Ce>Se^Lt?1:-1;for(ve=(Ce=Kt.length)<(Se=Zt.length)?Ce:Se,le=0;le<ve;le++)if(Kt[le]!=Zt[le])return Kt[le]>Zt[le]^Lt?1:-1;return Ce==Se?0:Ce>Se^Lt?1:-1}function y(_t,Ft,Lt,Yt){if(_t<Ft||_t>Lt||_t!==Zt(_t))throw Error(le+(Yt||"Argument")+("number"==typeof _t?_t<Ft||_t>Lt?" out of range: ":" not an integer: ":" not a primitive number: ")+String(_t))}function w(_t){var Ft=_t.c.length-1;return d(_t.e/Se)==Ft&&_t.c[Ft]%2!=0}function v(_t,Ft){return(_t.length>1?_t.charAt(0)+"."+_t.slice(1):_t)+(Ft<0?"e":"e+")+Ft}function b(_t,Ft,Lt){var Yt,Kt;if(Ft<0){for(Kt=Lt+".";++Ft;Kt+=Lt);_t=Kt+_t}else if(++Ft>(Yt=_t.length)){for(Kt=Lt,Ft-=Yt;--Ft;Kt+=Lt);_t+=Kt}else Ft<Yt&&(_t=_t.slice(0,Ft)+"."+_t.slice(Ft));return _t}(Lt=function t(_t){var Ft,Lt,Pe,Le,Ue,He,qe,We,Ge,Ve,$e=H.prototype={constructor:H,toString:null,valueOf:null},Xe=new H(1),Ye=20,Je=4,Qe=-7,Ze=21,tn=-1e7,nn=1e7,rn=!1,on=1,sn=0,an={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},cn="0123456789abcdefghijklmnopqrstuvwxyz";function H(_t,Ft){var Kt,le,Ce,Ne,Fe,Re,Le,Ue,He=this;if(!(He instanceof H))return new H(_t,Ft);if(null==Ft){if(_t&&!0===_t._isBigNumber)return He.s=_t.s,void(!_t.c||_t.e>nn?He.c=He.e=null:_t.e<tn?He.c=[He.e=0]:(He.e=_t.e,He.c=_t.c.slice()));if((Re="number"==typeof _t)&&0*_t==0){if(He.s=1/_t<0?(_t=-_t,-1):1,_t===~~_t){for(Ne=0,Fe=_t;Fe>=10;Fe/=10,Ne++);return void(Ne>nn?He.c=He.e=null:(He.e=Ne,He.c=[_t]))}Ue=String(_t)}else{if(!Yt.test(Ue=String(_t)))return Pe(He,Ue,Re);He.s=45==Ue.charCodeAt(0)?(Ue=Ue.slice(1),-1):1}(Ne=Ue.indexOf("."))>-1&&(Ue=Ue.replace(".","")),(Fe=Ue.search(/e/i))>0?(Ne<0&&(Ne=Fe),Ne+=+Ue.slice(Fe+1),Ue=Ue.substring(0,Fe)):Ne<0&&(Ne=Ue.length)}else{if(y(Ft,2,cn.length,"Base"),10==Ft)return W(He=new H(_t),Ye+He.e+1,Je);if(Ue=String(_t),Re="number"==typeof _t){if(0*_t!=0)return Pe(He,Ue,Re,Ft);if(He.s=1/_t<0?(Ue=Ue.slice(1),-1):1,H.DEBUG&&Ue.replace(/^0\.0*|\./,"").length>15)throw Error(ve+_t)}else He.s=45===Ue.charCodeAt(0)?(Ue=Ue.slice(1),-1):1;for(Kt=cn.slice(0,Ft),Ne=Fe=0,Le=Ue.length;Fe<Le;Fe++)if(Kt.indexOf(le=Ue.charAt(Fe))<0){if("."==le){if(Fe>Ne){Ne=Le;continue}}else if(!Ce&&(Ue==Ue.toUpperCase()&&(Ue=Ue.toLowerCase())||Ue==Ue.toLowerCase()&&(Ue=Ue.toUpperCase()))){Ce=!0,Fe=-1,Ne=0;continue}return Pe(He,String(_t),Re,Ft)}Re=!1,(Ne=(Ue=Lt(Ue,Ft,10,He.s)).indexOf("."))>-1?Ue=Ue.replace(".",""):Ne=Ue.length}for(Fe=0;48===Ue.charCodeAt(Fe);Fe++);for(Le=Ue.length;48===Ue.charCodeAt(--Le););if(Ue=Ue.slice(Fe,++Le)){if(Le-=Fe,Re&&H.DEBUG&&Le>15&&(_t>Ie||_t!==Zt(_t)))throw Error(ve+He.s*_t);if((Ne=Ne-Fe-1)>nn)He.c=He.e=null;else if(Ne<tn)He.c=[He.e=0];else{if(He.e=Ne,He.c=[],Fe=(Ne+1)%Se,Ne<0&&(Fe+=Se),Fe<Le){for(Fe&&He.c.push(+Ue.slice(0,Fe)),Le-=Se;Fe<Le;)He.c.push(+Ue.slice(Fe,Fe+=Se));Fe=Se-(Ue=Ue.slice(Fe)).length}else Fe-=Le;for(;Fe--;Ue+="0");He.c.push(+Ue)}}else He.c=[He.e=0]}function G(_t,Ft,Lt,Yt){var Kt,Zt,le,ve,Ce;if(null==Lt?Lt=Je:y(Lt,0,8),!_t.c)return _t.toString();if(Kt=_t.c[0],le=_t.e,null==Ft)Ce=g(_t.c),Ce=1==Yt||2==Yt&&(le<=Qe||le>=Ze)?v(Ce,le):b(Ce,le,"0");else if(Zt=(_t=W(new H(_t),Ft,Lt)).e,ve=(Ce=g(_t.c)).length,1==Yt||2==Yt&&(Ft<=Zt||Zt<=Qe)){for(;ve<Ft;Ce+="0",ve++);Ce=v(Ce,Zt)}else if(Ft-=le,Ce=b(Ce,Zt,"0"),Zt+1>ve){if(--Ft>0)for(Ce+=".";Ft--;Ce+="0");}else if((Ft+=Zt-ve)>0)for(Zt+1==ve&&(Ce+=".");Ft--;Ce+="0");return _t.s<0&&Kt?"-"+Ce:Ce}function z(_t,Ft){for(var Lt,Yt=1,Kt=new H(_t[0]);Yt<_t.length;Yt++){if(!(Lt=new H(_t[Yt])).s){Kt=Lt;break}Ft.call(Kt,Lt)&&(Kt=Lt)}return Kt}function J(_t,Ft,Lt){for(var Yt=1,Kt=Ft.length;!Ft[--Kt];Ft.pop());for(Kt=Ft[0];Kt>=10;Kt/=10,Yt++);return(Lt=Yt+Lt*Se-1)>nn?_t.c=_t.e=null:Lt<tn?_t.c=[_t.e=0]:(_t.e=Lt,_t.c=Ft),_t}function W(_t,Ft,Lt,Yt){var le,ve,Ie,Fe,Re,Pe,Le,Ue=_t.c,He=Ne;if(Ue){t:{for(le=1,Fe=Ue[0];Fe>=10;Fe/=10,le++);if((ve=Ft-le)<0)ve+=Se,Ie=Ft,Le=(Re=Ue[Pe=0])/He[le-Ie-1]%10|0;else if((Pe=Kt((ve+1)/Se))>=Ue.length){if(!Yt)break t;for(;Ue.length<=Pe;Ue.push(0));Re=Le=0,le=1,Ie=(ve%=Se)-Se+1}else{for(Re=Fe=Ue[Pe],le=1;Fe>=10;Fe/=10,le++);Le=(Ie=(ve%=Se)-Se+le)<0?0:Re/He[le-Ie-1]%10|0}if(Yt=Yt||Ft<0||null!=Ue[Pe+1]||(Ie<0?Re:Re%He[le-Ie-1]),Yt=Lt<4?(Le||Yt)&&(0==Lt||Lt==(_t.s<0?3:2)):Le>5||5==Le&&(4==Lt||Yt||6==Lt&&(ve>0?Ie>0?Re/He[le-Ie]:0:Ue[Pe-1])%10&1||Lt==(_t.s<0?8:7)),Ft<1||!Ue[0])return Ue.length=0,Yt?(Ft-=_t.e+1,Ue[0]=He[(Se-Ft%Se)%Se],_t.e=-Ft||0):Ue[0]=_t.e=0,_t;if(0==ve?(Ue.length=Pe,Fe=1,Pe--):(Ue.length=Pe+1,Fe=He[Se-ve],Ue[Pe]=Ie>0?Zt(Re/He[le-Ie]%He[Ie])*Fe:0),Yt)for(;;){if(0==Pe){for(ve=1,Ie=Ue[0];Ie>=10;Ie/=10,ve++);for(Ie=Ue[0]+=Fe,Fe=1;Ie>=10;Ie/=10,Fe++);ve!=Fe&&(_t.e++,Ue[0]==Ce&&(Ue[0]=1));break}if(Ue[Pe]+=Fe,Ue[Pe]!=Ce)break;Ue[Pe--]=0,Fe=1}for(ve=Ue.length;0===Ue[--ve];Ue.pop());}_t.e>nn?_t.c=_t.e=null:_t.e<tn&&(_t.c=[_t.e=0])}return _t}function V(_t){var Ft,Lt=_t.e;return null===Lt?_t.toString():(Ft=g(_t.c),Ft=Lt<=Qe||Lt>=Ze?v(Ft,Lt):b(Ft,Lt,"0"),_t.s<0?"-"+Ft:Ft)}return H.clone=t,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(_t){var Ft,Lt;if(null!=_t){if("object"!=typeof _t)throw Error(le+"Object expected: "+_t);if(_t.hasOwnProperty(Ft="DECIMAL_PLACES")&&(y(Lt=_t[Ft],0,Re,Ft),Ye=Lt),_t.hasOwnProperty(Ft="ROUNDING_MODE")&&(y(Lt=_t[Ft],0,8,Ft),Je=Lt),_t.hasOwnProperty(Ft="EXPONENTIAL_AT")&&((Lt=_t[Ft])&&Lt.pop?(y(Lt[0],-Re,0,Ft),y(Lt[1],0,Re,Ft),Qe=Lt[0],Ze=Lt[1]):(y(Lt,-Re,Re,Ft),Qe=-(Ze=Lt<0?-Lt:Lt))),_t.hasOwnProperty(Ft="RANGE"))if((Lt=_t[Ft])&&Lt.pop)y(Lt[0],-Re,-1,Ft),y(Lt[1],1,Re,Ft),tn=Lt[0],nn=Lt[1];else{if(y(Lt,-Re,Re,Ft),!Lt)throw Error(le+Ft+" cannot be zero: "+Lt);tn=-(nn=Lt<0?-Lt:Lt)}if(_t.hasOwnProperty(Ft="CRYPTO")){if((Lt=_t[Ft])!==!!Lt)throw Error(le+Ft+" not true or false: "+Lt);if(Lt){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw rn=!Lt,Error(le+"crypto unavailable");rn=Lt}else rn=Lt}if(_t.hasOwnProperty(Ft="MODULO_MODE")&&(y(Lt=_t[Ft],0,9,Ft),on=Lt),_t.hasOwnProperty(Ft="POW_PRECISION")&&(y(Lt=_t[Ft],0,Re,Ft),sn=Lt),_t.hasOwnProperty(Ft="FORMAT")){if("object"!=typeof(Lt=_t[Ft]))throw Error(le+Ft+" not an object: "+Lt);an=Lt}if(_t.hasOwnProperty(Ft="ALPHABET")){if("string"!=typeof(Lt=_t[Ft])||/^.?$|[+\-.\s]|(.).*\1/.test(Lt))throw Error(le+Ft+" invalid: "+Lt);cn=Lt}}return{DECIMAL_PLACES:Ye,ROUNDING_MODE:Je,EXPONENTIAL_AT:[Qe,Ze],RANGE:[tn,nn],CRYPTO:rn,MODULO_MODE:on,POW_PRECISION:sn,FORMAT:an,ALPHABET:cn}},H.isBigNumber=function(_t){if(!_t||!0!==_t._isBigNumber)return!1;if(!H.DEBUG)return!0;var Ft,Lt,Yt=_t.c,Kt=_t.e,ve=_t.s;t:if("[object Array]"=={}.toString.call(Yt)){if((1===ve||-1===ve)&&Kt>=-Re&&Kt<=Re&&Kt===Zt(Kt)){if(0===Yt[0]){if(0===Kt&&1===Yt.length)return!0;break t}if((Ft=(Kt+1)%Se)<1&&(Ft+=Se),String(Yt[0]).length==Ft){for(Ft=0;Ft<Yt.length;Ft++)if((Lt=Yt[Ft])<0||Lt>=Ce||Lt!==Zt(Lt))break t;if(0!==Lt)return!0}}}else if(null===Yt&&null===Kt&&(null===ve||1===ve||-1===ve))return!0;throw Error(le+"Invalid BigNumber: "+_t)},H.maximum=H.max=function(){return z(arguments,$e.lt)},H.minimum=H.min=function(){return z(arguments,$e.gt)},H.random=(Le=9007199254740992,Ue=Math.random()*Le&2097151?function(){return Zt(Math.random()*Le)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(_t){var Ft,Lt,Yt,ve,Ce,Ie=0,Fe=[],Pe=new H(Xe);if(null==_t?_t=Ye:y(_t,0,Re),ve=Kt(_t/Se),rn)if(crypto.getRandomValues){for(Ft=crypto.getRandomValues(new Uint32Array(ve*=2));Ie<ve;)(Ce=131072*Ft[Ie]+(Ft[Ie+1]>>>11))>=9e15?(Lt=crypto.getRandomValues(new Uint32Array(2)),Ft[Ie]=Lt[0],Ft[Ie+1]=Lt[1]):(Fe.push(Ce%1e14),Ie+=2);Ie=ve/2}else{if(!crypto.randomBytes)throw rn=!1,Error(le+"crypto unavailable");for(Ft=crypto.randomBytes(ve*=7);Ie<ve;)(Ce=281474976710656*(31&Ft[Ie])+1099511627776*Ft[Ie+1]+4294967296*Ft[Ie+2]+16777216*Ft[Ie+3]+(Ft[Ie+4]<<16)+(Ft[Ie+5]<<8)+Ft[Ie+6])>=9e15?crypto.randomBytes(7).copy(Ft,Ie):(Fe.push(Ce%1e14),Ie+=7);Ie=ve/7}if(!rn)for(;Ie<ve;)(Ce=Ue())<9e15&&(Fe[Ie++]=Ce%1e14);for(ve=Fe[--Ie],_t%=Se,ve&&_t&&(Ce=Ne[Se-_t],Fe[Ie]=Zt(ve/Ce)*Ce);0===Fe[Ie];Fe.pop(),Ie--);if(Ie<0)Fe=[Yt=0];else{for(Yt=-1;0===Fe[0];Fe.splice(0,1),Yt-=Se);for(Ie=1,Ce=Fe[0];Ce>=10;Ce/=10,Ie++);Ie<Se&&(Yt-=Se-Ie)}return Pe.e=Yt,Pe.c=Fe,Pe}),H.sum=function(){for(var _t=1,Ft=arguments,Lt=new H(Ft[0]);_t<Ft.length;)Lt=Lt.plus(Ft[_t++]);return Lt},Lt=function(){var _t="0123456789";function e(_t,Ft,Lt,Yt){for(var Kt,Zt,le=[0],ve=0,Ce=_t.length;ve<Ce;){for(Zt=le.length;Zt--;le[Zt]*=Ft);for(le[0]+=Yt.indexOf(_t.charAt(ve++)),Kt=0;Kt<le.length;Kt++)le[Kt]>Lt-1&&(null==le[Kt+1]&&(le[Kt+1]=0),le[Kt+1]+=le[Kt]/Lt|0,le[Kt]%=Lt)}return le.reverse()}return function(Lt,Yt,Kt,Zt,le){var ve,Ce,Se,Ie,Ne,Fe,Re,Pe,Le=Lt.indexOf("."),Ue=Ye,He=Je;for(Le>=0&&(Ie=sn,sn=0,Lt=Lt.replace(".",""),Fe=(Pe=new H(Yt)).pow(Lt.length-Le),sn=Ie,Pe.c=e(b(g(Fe.c),Fe.e,"0"),10,Kt,_t),Pe.e=Pe.c.length),Se=Ie=(Re=e(Lt,Yt,Kt,le?(ve=cn,_t):(ve=_t,cn))).length;0==Re[--Ie];Re.pop());if(!Re[0])return ve.charAt(0);if(Le<0?--Se:(Fe.c=Re,Fe.e=Se,Fe.s=Zt,Re=(Fe=Ft(Fe,Pe,Ue,He,Kt)).c,Ne=Fe.r,Se=Fe.e),Le=Re[Ce=Se+Ue+1],Ie=Kt/2,Ne=Ne||Ce<0||null!=Re[Ce+1],Ne=He<4?(null!=Le||Ne)&&(0==He||He==(Fe.s<0?3:2)):Le>Ie||Le==Ie&&(4==He||Ne||6==He&&1&Re[Ce-1]||He==(Fe.s<0?8:7)),Ce<1||!Re[0])Lt=Ne?b(ve.charAt(1),-Ue,ve.charAt(0)):ve.charAt(0);else{if(Re.length=Ce,Ne)for(--Kt;++Re[--Ce]>Kt;)Re[Ce]=0,Ce||(++Se,Re=[1].concat(Re));for(Ie=Re.length;!Re[--Ie];);for(Le=0,Lt="";Le<=Ie;Lt+=ve.charAt(Re[Le++]));Lt=b(Lt,Se,ve.charAt(0))}return Lt}}(),Ft=function(){function t(_t,Ft,Lt){var Yt,Kt,Zt,le,ve=0,Ce=_t.length,Se=Ft%Fe,Ie=Ft/Fe|0;for(_t=_t.slice();Ce--;)ve=((Kt=Se*(Zt=_t[Ce]%Fe)+(Yt=Ie*Zt+(le=_t[Ce]/Fe|0)*Se)%Fe*Fe+ve)/Lt|0)+(Yt/Fe|0)+Ie*le,_t[Ce]=Kt%Lt;return ve&&(_t=[ve].concat(_t)),_t}function e(_t,Ft,Lt,Yt){var Kt,Zt;if(Lt!=Yt)Zt=Lt>Yt?1:-1;else for(Kt=Zt=0;Kt<Lt;Kt++)if(_t[Kt]!=Ft[Kt]){Zt=_t[Kt]>Ft[Kt]?1:-1;break}return Zt}function n(_t,Ft,Lt,Yt){for(var Kt=0;Lt--;)_t[Lt]-=Kt,Kt=_t[Lt]<Ft[Lt]?1:0,_t[Lt]=Kt*Yt+_t[Lt]-Ft[Lt];for(;!_t[0]&&_t.length>1;_t.splice(0,1));}return function(_t,Ft,Lt,Yt,Kt){var le,ve,Ie,Ne,Fe,Re,Pe,Le,Ue,He,qe,We,Ge,Ve,$e,Xe,Ye,Je=_t.s==Ft.s?1:-1,Qe=_t.c,Ze=Ft.c;if(!(Qe&&Qe[0]&&Ze&&Ze[0]))return new H(_t.s&&Ft.s&&(Qe?!Ze||Qe[0]!=Ze[0]:Ze)?Qe&&0==Qe[0]||!Ze?0*Je:Je/0:NaN);for(Ue=(Le=new H(Je)).c=[],Je=Lt+(ve=_t.e-Ft.e)+1,Kt||(Kt=Ce,ve=d(_t.e/Se)-d(Ft.e/Se),Je=Je/Se|0),Ie=0;Ze[Ie]==(Qe[Ie]||0);Ie++);if(Ze[Ie]>(Qe[Ie]||0)&&ve--,Je<0)Ue.push(1),Ne=!0;else{for(Ve=Qe.length,Xe=Ze.length,Ie=0,Je+=2,(Fe=Zt(Kt/(Ze[0]+1)))>1&&(Ze=t(Ze,Fe,Kt),Qe=t(Qe,Fe,Kt),Xe=Ze.length,Ve=Qe.length),Ge=Xe,qe=(He=Qe.slice(0,Xe)).length;qe<Xe;He[qe++]=0);Ye=Ze.slice(),Ye=[0].concat(Ye),$e=Ze[0],Ze[1]>=Kt/2&&$e++;do{if(Fe=0,(le=e(Ze,He,Xe,qe))<0){if(We=He[0],Xe!=qe&&(We=We*Kt+(He[1]||0)),(Fe=Zt(We/$e))>1)for(Fe>=Kt&&(Fe=Kt-1),Pe=(Re=t(Ze,Fe,Kt)).length,qe=He.length;1==e(Re,He,Pe,qe);)Fe--,n(Re,Xe<Pe?Ye:Ze,Pe,Kt),Pe=Re.length,le=1;else 0==Fe&&(le=Fe=1),Pe=(Re=Ze.slice()).length;if(Pe<qe&&(Re=[0].concat(Re)),n(He,Re,qe,Kt),qe=He.length,-1==le)for(;e(Ze,He,Xe,qe)<1;)Fe++,n(He,Xe<qe?Ye:Ze,qe,Kt),qe=He.length}else 0===le&&(Fe++,He=[0]);Ue[Ie++]=Fe,He[0]?He[qe++]=Qe[Ge]||0:(He=[Qe[Ge]],qe=1)}while((Ge++<Ve||null!=He[0])&&Je--);Ne=null!=He[0],Ue[0]||Ue.splice(0,1)}if(Kt==Ce){for(Ie=1,Je=Ue[0];Je>=10;Je/=10,Ie++);W(Le,Lt+(Le.e=Ie+ve*Se-1)+1,Yt,Ne)}else Le.e=ve,Le.r=+Ne;return Le}}(),He=/^(-?)0([xbo])(?=\w[\w.]*$)/i,qe=/^([^.]+)\.$/,We=/^\.([^.]+)$/,Ge=/^-?(Infinity|NaN)$/,Ve=/^\s*\+(?=[\w.])|^\s+|\s+$/g,Pe=function(_t,Ft,Lt,Yt){var Kt,Zt=Lt?Ft:Ft.replace(Ve,"");if(Ge.test(Zt))_t.s=isNaN(Zt)?null:Zt<0?-1:1;else{if(!Lt&&(Zt=Zt.replace(He,(function(_t,Ft,Lt){return Kt="x"==(Lt=Lt.toLowerCase())?16:"b"==Lt?2:8,Yt&&Yt!=Kt?_t:Ft})),Yt&&(Kt=Yt,Zt=Zt.replace(qe,"$1").replace(We,"0.$1")),Ft!=Zt))return new H(Zt,Kt);if(H.DEBUG)throw Error(le+"Not a"+(Yt?" base "+Yt:"")+" number: "+Ft);_t.s=null}_t.c=_t.e=null},$e.absoluteValue=$e.abs=function(){var _t=new H(this);return _t.s<0&&(_t.s=1),_t},$e.comparedTo=function(_t,Ft){return m(this,new H(_t,Ft))},$e.decimalPlaces=$e.dp=function(_t,Ft){var Lt,Yt,Kt,Zt=this;if(null!=_t)return y(_t,0,Re),null==Ft?Ft=Je:y(Ft,0,8),W(new H(Zt),_t+Zt.e+1,Ft);if(!(Lt=Zt.c))return null;if(Yt=((Kt=Lt.length-1)-d(this.e/Se))*Se,Kt=Lt[Kt])for(;Kt%10==0;Kt/=10,Yt--);return Yt<0&&(Yt=0),Yt},$e.dividedBy=$e.div=function(_t,Lt){return Ft(this,new H(_t,Lt),Ye,Je)},$e.dividedToIntegerBy=$e.idiv=function(_t,Lt){return Ft(this,new H(_t,Lt),0,1)},$e.exponentiatedBy=$e.pow=function(_t,Ft){var Lt,Yt,ve,Ce,Ie,Ne,Fe,Re,Pe=this;if((_t=new H(_t)).c&&!_t.isInteger())throw Error(le+"Exponent not an integer: "+V(_t));if(null!=Ft&&(Ft=new H(Ft)),Ie=_t.e>14,!Pe.c||!Pe.c[0]||1==Pe.c[0]&&!Pe.e&&1==Pe.c.length||!_t.c||!_t.c[0])return Re=new H(Math.pow(+V(Pe),Ie?2-w(_t):+V(_t))),Ft?Re.mod(Ft):Re;if(Ne=_t.s<0,Ft){if(Ft.c?!Ft.c[0]:!Ft.s)return new H(NaN);(Yt=!Ne&&Pe.isInteger()&&Ft.isInteger())&&(Pe=Pe.mod(Ft))}else{if(_t.e>9&&(Pe.e>0||Pe.e<-1||(0==Pe.e?Pe.c[0]>1||Ie&&Pe.c[1]>=24e7:Pe.c[0]<8e13||Ie&&Pe.c[0]<=9999975e7)))return Ce=Pe.s<0&&w(_t)?-0:0,Pe.e>-1&&(Ce=1/Ce),new H(Ne?1/Ce:Ce);sn&&(Ce=Kt(sn/Se+2))}for(Ie?(Lt=new H(.5),Ne&&(_t.s=1),Fe=w(_t)):Fe=(ve=Math.abs(+V(_t)))%2,Re=new H(Xe);;){if(Fe){if(!(Re=Re.times(Pe)).c)break;Ce?Re.c.length>Ce&&(Re.c.length=Ce):Yt&&(Re=Re.mod(Ft))}if(ve){if(0===(ve=Zt(ve/2)))break;Fe=ve%2}else if(W(_t=_t.times(Lt),_t.e+1,1),_t.e>14)Fe=w(_t);else{if(0==(ve=+V(_t)))break;Fe=ve%2}Pe=Pe.times(Pe),Ce?Pe.c&&Pe.c.length>Ce&&(Pe.c.length=Ce):Yt&&(Pe=Pe.mod(Ft))}return Yt?Re:(Ne&&(Re=Xe.div(Re)),Ft?Re.mod(Ft):Ce?W(Re,sn,Je,void 0):Re)},$e.integerValue=function(_t){var Ft=new H(this);return null==_t?_t=Je:y(_t,0,8),W(Ft,Ft.e+1,_t)},$e.isEqualTo=$e.eq=function(_t,Ft){return 0===m(this,new H(_t,Ft))},$e.isFinite=function(){return!!this.c},$e.isGreaterThan=$e.gt=function(_t,Ft){return m(this,new H(_t,Ft))>0},$e.isGreaterThanOrEqualTo=$e.gte=function(_t,Ft){return 1===(Ft=m(this,new H(_t,Ft)))||0===Ft},$e.isInteger=function(){return!!this.c&&d(this.e/Se)>this.c.length-2},$e.isLessThan=$e.lt=function(_t,Ft){return m(this,new H(_t,Ft))<0},$e.isLessThanOrEqualTo=$e.lte=function(_t,Ft){return-1===(Ft=m(this,new H(_t,Ft)))||0===Ft},$e.isNaN=function(){return!this.s},$e.isNegative=function(){return this.s<0},$e.isPositive=function(){return this.s>0},$e.isZero=function(){return!!this.c&&0==this.c[0]},$e.minus=function(_t,Ft){var Lt,Yt,Kt,Zt,le=this,ve=le.s;if(Ft=(_t=new H(_t,Ft)).s,!ve||!Ft)return new H(NaN);if(ve!=Ft)return _t.s=-Ft,le.plus(_t);var Ie=le.e/Se,Ne=_t.e/Se,Fe=le.c,Re=_t.c;if(!Ie||!Ne){if(!Fe||!Re)return Fe?(_t.s=-Ft,_t):new H(Re?le:NaN);if(!Fe[0]||!Re[0])return Re[0]?(_t.s=-Ft,_t):new H(Fe[0]?le:3==Je?-0:0)}if(Ie=d(Ie),Ne=d(Ne),Fe=Fe.slice(),ve=Ie-Ne){for((Zt=ve<0)?(ve=-ve,Kt=Fe):(Ne=Ie,Kt=Re),Kt.reverse(),Ft=ve;Ft--;Kt.push(0));Kt.reverse()}else for(Yt=(Zt=(ve=Fe.length)<(Ft=Re.length))?ve:Ft,ve=Ft=0;Ft<Yt;Ft++)if(Fe[Ft]!=Re[Ft]){Zt=Fe[Ft]<Re[Ft];break}if(Zt&&(Kt=Fe,Fe=Re,Re=Kt,_t.s=-_t.s),(Ft=(Yt=Re.length)-(Lt=Fe.length))>0)for(;Ft--;Fe[Lt++]=0);for(Ft=Ce-1;Yt>ve;){if(Fe[--Yt]<Re[Yt]){for(Lt=Yt;Lt&&!Fe[--Lt];Fe[Lt]=Ft);--Fe[Lt],Fe[Yt]+=Ce}Fe[Yt]-=Re[Yt]}for(;0==Fe[0];Fe.splice(0,1),--Ne);return Fe[0]?J(_t,Fe,Ne):(_t.s=3==Je?-1:1,_t.c=[_t.e=0],_t)},$e.modulo=$e.mod=function(_t,Lt){var Yt,Kt,Zt=this;return _t=new H(_t,Lt),!Zt.c||!_t.s||_t.c&&!_t.c[0]?new H(NaN):!_t.c||Zt.c&&!Zt.c[0]?new H(Zt):(9==on?(Kt=_t.s,_t.s=1,Yt=Ft(Zt,_t,0,3),_t.s=Kt,Yt.s*=Kt):Yt=Ft(Zt,_t,0,on),(_t=Zt.minus(Yt.times(_t))).c[0]||1!=on||(_t.s=Zt.s),_t)},$e.multipliedBy=$e.times=function(_t,Ft){var Lt,Yt,Kt,Zt,le,ve,Ie,Ne,Re,Pe,Le,Ue,He,qe,We,Ge=this,Ve=Ge.c,$e=(_t=new H(_t,Ft)).c;if(!(Ve&&$e&&Ve[0]&&$e[0]))return!Ge.s||!_t.s||Ve&&!Ve[0]&&!$e||$e&&!$e[0]&&!Ve?_t.c=_t.e=_t.s=null:(_t.s*=Ge.s,Ve&&$e?(_t.c=[0],_t.e=0):_t.c=_t.e=null),_t;for(Yt=d(Ge.e/Se)+d(_t.e/Se),_t.s*=Ge.s,(Ie=Ve.length)<(Pe=$e.length)&&(He=Ve,Ve=$e,$e=He,Kt=Ie,Ie=Pe,Pe=Kt),Kt=Ie+Pe,He=[];Kt--;He.push(0));for(qe=Ce,We=Fe,Kt=Pe;--Kt>=0;){for(Lt=0,Le=$e[Kt]%We,Ue=$e[Kt]/We|0,Zt=Kt+(le=Ie);Zt>Kt;)Lt=((Ne=Le*(Ne=Ve[--le]%We)+(ve=Ue*Ne+(Re=Ve[le]/We|0)*Le)%We*We+He[Zt]+Lt)/qe|0)+(ve/We|0)+Ue*Re,He[Zt--]=Ne%qe;He[Zt]=Lt}return Lt?++Yt:He.splice(0,1),J(_t,He,Yt)},$e.negated=function(){var _t=new H(this);return _t.s=-_t.s||null,_t},$e.plus=function(_t,Ft){var Lt,Yt=this,Kt=Yt.s;if(Ft=(_t=new H(_t,Ft)).s,!Kt||!Ft)return new H(NaN);if(Kt!=Ft)return _t.s=-Ft,Yt.minus(_t);var Zt=Yt.e/Se,le=_t.e/Se,ve=Yt.c,Ie=_t.c;if(!Zt||!le){if(!ve||!Ie)return new H(Kt/0);if(!ve[0]||!Ie[0])return Ie[0]?_t:new H(ve[0]?Yt:0*Kt)}if(Zt=d(Zt),le=d(le),ve=ve.slice(),Kt=Zt-le){for(Kt>0?(le=Zt,Lt=Ie):(Kt=-Kt,Lt=ve),Lt.reverse();Kt--;Lt.push(0));Lt.reverse()}for((Kt=ve.length)-(Ft=Ie.length)<0&&(Lt=Ie,Ie=ve,ve=Lt,Ft=Kt),Kt=0;Ft;)Kt=(ve[--Ft]=ve[Ft]+Ie[Ft]+Kt)/Ce|0,ve[Ft]=Ce===ve[Ft]?0:ve[Ft]%Ce;return Kt&&(ve=[Kt].concat(ve),++le),J(_t,ve,le)},$e.precision=$e.sd=function(_t,Ft){var Lt,Yt,Kt,Zt=this;if(null!=_t&&_t!==!!_t)return y(_t,1,Re),null==Ft?Ft=Je:y(Ft,0,8),W(new H(Zt),_t,Ft);if(!(Lt=Zt.c))return null;if(Yt=(Kt=Lt.length-1)*Se+1,Kt=Lt[Kt]){for(;Kt%10==0;Kt/=10,Yt--);for(Kt=Lt[0];Kt>=10;Kt/=10,Yt++);}return _t&&Zt.e+1>Yt&&(Yt=Zt.e+1),Yt},$e.shiftedBy=function(_t){return y(_t,-9007199254740991,Ie),this.times("1e"+_t)},$e.squareRoot=$e.sqrt=function(){var _t,Lt,Yt,Kt,Zt,le=this,ve=le.c,Ce=le.s,Se=le.e,Ie=Ye+4,Ne=new H("0.5");if(1!==Ce||!ve||!ve[0])return new H(!Ce||Ce<0&&(!ve||ve[0])?NaN:ve?le:1/0);if(0==(Ce=Math.sqrt(+V(le)))||Ce==1/0?(((Lt=g(ve)).length+Se)%2==0&&(Lt+="0"),Ce=Math.sqrt(+Lt),Se=d((Se+1)/2)-(Se<0||Se%2),Yt=new H(Lt=Ce==1/0?"5e"+Se:(Lt=Ce.toExponential()).slice(0,Lt.indexOf("e")+1)+Se)):Yt=new H(Ce+""),Yt.c[0])for((Ce=(Se=Yt.e)+Ie)<3&&(Ce=0);;)if(Zt=Yt,Yt=Ne.times(Zt.plus(Ft(le,Zt,Ie,1))),g(Zt.c).slice(0,Ce)===(Lt=g(Yt.c)).slice(0,Ce)){if(Yt.e<Se&&--Ce,"9999"!=(Lt=Lt.slice(Ce-3,Ce+1))&&(Kt||"4999"!=Lt)){+Lt&&(+Lt.slice(1)||"5"!=Lt.charAt(0))||(W(Yt,Yt.e+Ye+2,1),_t=!Yt.times(Yt).eq(le));break}if(!Kt&&(W(Zt,Zt.e+Ye+2,0),Zt.times(Zt).eq(le))){Yt=Zt;break}Ie+=4,Ce+=4,Kt=1}return W(Yt,Yt.e+Ye+1,Je,_t)},$e.toExponential=function(_t,Ft){return null!=_t&&(y(_t,0,Re),_t++),G(this,_t,Ft,1)},$e.toFixed=function(_t,Ft){return null!=_t&&(y(_t,0,Re),_t=_t+this.e+1),G(this,_t,Ft)},$e.toFormat=function(_t,Ft,Lt){var Yt,Kt=this;if(null==Lt)null!=_t&&Ft&&"object"==typeof Ft?(Lt=Ft,Ft=null):_t&&"object"==typeof _t?(Lt=_t,_t=Ft=null):Lt=an;else if("object"!=typeof Lt)throw Error(le+"Argument not an object: "+Lt);if(Yt=Kt.toFixed(_t,Ft),Kt.c){var Zt,ve=Yt.split("."),Ce=+Lt.groupSize,Se=+Lt.secondaryGroupSize,Ie=Lt.groupSeparator||"",Ne=ve[0],Fe=ve[1],Re=Kt.s<0,Pe=Re?Ne.slice(1):Ne,Le=Pe.length;if(Se&&(Zt=Ce,Ce=Se,Se=Zt,Le-=Zt),Ce>0&&Le>0){for(Zt=Le%Ce||Ce,Ne=Pe.substr(0,Zt);Zt<Le;Zt+=Ce)Ne+=Ie+Pe.substr(Zt,Ce);Se>0&&(Ne+=Ie+Pe.slice(Zt)),Re&&(Ne="-"+Ne)}Yt=Fe?Ne+(Lt.decimalSeparator||"")+((Se=+Lt.fractionGroupSize)?Fe.replace(new RegExp("\\d{"+Se+"}\\B","g"),"$&"+(Lt.fractionGroupSeparator||"")):Fe):Ne}return(Lt.prefix||"")+Yt+(Lt.suffix||"")},$e.toFraction=function(_t){var Lt,Yt,Kt,Zt,ve,Ce,Ie,Fe,Re,Pe,Le,Ue,He=this,qe=He.c;if(null!=_t&&(!(Ie=new H(_t)).isInteger()&&(Ie.c||1!==Ie.s)||Ie.lt(Xe)))throw Error(le+"Argument "+(Ie.isInteger()?"out of range: ":"not an integer: ")+V(Ie));if(!qe)return new H(He);for(Lt=new H(Xe),Re=Yt=new H(Xe),Kt=Fe=new H(Xe),Ue=g(qe),ve=Lt.e=Ue.length-He.e-1,Lt.c[0]=Ne[(Ce=ve%Se)<0?Se+Ce:Ce],_t=!_t||Ie.comparedTo(Lt)>0?ve>0?Lt:Re:Ie,Ce=nn,nn=1/0,Ie=new H(Ue),Fe.c[0]=0;Pe=Ft(Ie,Lt,0,1),1!=(Zt=Yt.plus(Pe.times(Kt))).comparedTo(_t);)Yt=Kt,Kt=Zt,Re=Fe.plus(Pe.times(Zt=Re)),Fe=Zt,Lt=Ie.minus(Pe.times(Zt=Lt)),Ie=Zt;return Zt=Ft(_t.minus(Yt),Kt,0,1),Fe=Fe.plus(Zt.times(Re)),Yt=Yt.plus(Zt.times(Kt)),Fe.s=Re.s=He.s,Le=Ft(Re,Kt,ve*=2,Je).minus(He).abs().comparedTo(Ft(Fe,Yt,ve,Je).minus(He).abs())<1?[Re,Kt]:[Fe,Yt],nn=Ce,Le},$e.toNumber=function(){return+V(this)},$e.toPrecision=function(_t,Ft){return null!=_t&&y(_t,1,Re),G(this,_t,Ft,2)},$e.toString=function(_t){var Ft,Yt=this,Kt=Yt.s,Zt=Yt.e;return null===Zt?Kt?(Ft="Infinity",Kt<0&&(Ft="-"+Ft)):Ft="NaN":(null==_t?Ft=Zt<=Qe||Zt>=Ze?v(g(Yt.c),Zt):b(g(Yt.c),Zt,"0"):10===_t?Ft=b(g((Yt=W(new H(Yt),Ye+Zt+1,Je)).c),Yt.e,"0"):(y(_t,2,cn.length,"Base"),Ft=Lt(b(g(Yt.c),Zt,"0"),10,_t,Kt,!0)),Kt<0&&Yt.c[0]&&(Ft="-"+Ft)),Ft},$e.valueOf=$e.toJSON=function(){return V(this)},$e._isBigNumber=!0,null!=_t&&H.set(_t),H}()).default=Lt.BigNumber=Lt,_t.exports?_t.exports=Lt:(Ft||(Ft="undefined"!=typeof self&&self?self:window),Ft.BigNumber=Lt)}(this)})).BigNumber;const Je={ROUNDING_MODE:Ye.ROUND_DOWN};function M(_t){return(new TextEncoder).encode(_t)}function R(_t){return"string"==typeof _t?R(D(_t)):(new TextDecoder).decode(_t)}Ye.config(Je);const Qe="INVALID_ARGUMENT";function U(_t,Ft="UNKNOWN_ERROR",Lt={}){let Yt=[];Object.keys(Lt).forEach((_t=>{try{Yt.push(_t+"="+JSON.stringify(Lt[_t]))}catch(Ft){Yt.push(_t+"="+JSON.stringify(Lt[_t].toString()))}}));let Kt=_t;Yt.length&&(_t+=" ("+Yt.join(", ")+")");let Zt=new Error(_t);return Zt.reason=Kt,Zt.code=Ft,Object.keys(Lt).forEach((function(_t){Zt[_t]=Lt[_t]})),Zt}function D(_t){if("string"!=typeof _t)throw new Error("hexToBytes only accept strings, got: "+typeof _t);if("0x"===_t.substr(0,2))return D(_t.substr(2));const Ft=new Uint8Array(Math.ceil(_t.length/2));let Lt=0;for(let Yt=0;Yt<_t.length;Yt+=2){const Kt=parseInt(_t.substr(Yt,2),16);if(isNaN(Kt))throw new Error("Cannot read hex string:"+JSON.stringify(_t));Ft[Lt]=Kt,Lt++}return Ft}function q(_t){return Array.from(_t).map((_t=>_t.toString(16).padStart(2,"0"))).join("")}function $(_t,Ft){if("string"==typeof _t){if(Ft&&"hex"===Ft.encoding&&"string"==typeof _t){let Ft=_t;Ft.length>2&&"0x"===Ft.substr(0,2)&&(Ft=Ft.substr(2));const Lt=D(Ft);return Xe(Lt)}return Xe(M(_t))}return Xe(_t)}let Ze={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function H(_t,Ft,Lt){return new Array(Ft-_t.length+1).join(Lt||"0")+_t}function G(_t){return wt(_t)&&_t.name&&-1!==_t.name.indexOf("(")?_t.name:_t.name+"("+J(!1,_t.inputs||[]).join(",")+")"}function z(..._t){const Ft=_t.reduce(((_t,Ft)=>_t+Ft.length),0);var Lt=new Uint8Array(Ft);let Yt=0;for(let Ft of _t)Lt.set(Ft,Yt),Yt+=Ft.length;return Lt}function J(_t,Ft){const Lt=[];return Ft.forEach((function(Ft){if("object"==typeof Ft.components){if("tuple"!==Ft.type.substring(0,5))throw new Error("components found but type is not tuple; report on GitHub");var Yt="",Kt=Ft.type.indexOf("[");Kt>=0&&(Yt=Ft.type.substring(Kt));var Zt=J(_t,Ft.components);bt(Zt)&&_t?Lt.push("tuple("+Zt.join(",")+")"+Yt):_t?Lt.push("("+Zt+")"):Lt.push("("+Zt.join(",")+")"+Yt)}else Lt.push(Ft.type)})),Lt}function W(_t){let Ft=_t.indexOf("("),Lt=_t.indexOf(")");return-1!==Ft&&-1!==Lt?_t.substr(0,Ft):_t}function V(_t){let Ft=_t.indexOf("("),Lt=_t.indexOf(")");return-1!==Ft&&-1!==Lt?_t.substr(Ft+1,Lt-Ft-1).replace(" ",""):""}function K(_t){return null==_t?_t:ot(_t).toNumber()}function Z(_t){return ot(_t).toNumber()}function Y(_t){return mt(_t)?_t.toString(10):""+_t}function X(_t){return"string"==typeof _t&&!_t.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t)?"0x"+_t:nt(_t)}function Q(_t){if("string"==typeof _t)return _t.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t)?nt(_t):"0x"+q(M(_t));if(_t instanceof Uint8Array)return"0x"+q(_t);throw new Error(`toStringData: Error trying to convert ${_t} (${typeof _t}) to a hex string.`)}function tt(_t){return"boolean"==typeof _t?_t:0!==ot(_t).toNumber()}function et(_t){let Ft=ot(_t),Lt=Ft.toString(16);return Ft.isLessThan(0)?"-0x"+Lt.substr(1):"0x"+Lt}function nt(_t){if(vt(_t))return et(+_t);if(mt(_t))return et(_t);if(yt(_t)){const Ft=_t;if(0===Ft.indexOf("-0x"))return et(Ft);if(0===Ft.indexOf("0x"))return Ft;if(!isFinite(Ft))return q(M(Ft))}if(_t instanceof Uint8Array)return"0x"+q(_t);if(bt(_t)||wt(_t))throw new Error("toHex can only be called with scalar values, not objects or arrays");return et(_t)}function rt(_t){let Ft=_t?_t.toLowerCase():"ether",Lt=Ze[Ft];if(void 0===Lt)throw new Error("This unit doesn't exists, please use the one of the following units"+JSON.stringify(Ze,null,2));return new Ye(Lt,10)}function ot(_t){let Ft=_t||0;return mt(Ft)?Ft:("string"==typeof Ft&&(Ft=Ft.trim()),"string"!=typeof Ft||0!==Ft.indexOf("0x")&&0!==Ft.indexOf("-0x")?Ft instanceof Uint8Array?new Ye(q(Ft),16):new Ye(Ft,10):new Ye(Ft.replace("0x","").toLowerCase(),16))}function it(_t){return new Ye(new Array(_t).fill("1").join(""),2)}function st(_t,Ft=256){let Lt=ot(_t).integerValue();return Lt.isLessThan(0)?it(Ft).plus(Lt).plus(1):Lt}function at(_t,Ft){return"1"==H(_t.toString(2),Ft,"0")[0]}function ct(_t){if("string"!=typeof _t)throw U("invalid address",Qe,{arg:"address",value:_t});if(_t.trim().match(/^(0x)?[0-9a-fA-F]{40}$/))return"0x"!==_t.trim().substring(0,2)&&(_t="0x"+_t),ft(_t);throw U("invalid address",Qe,{arg:"address",value:_t})}function ut(_t,Ft=256){if(at(_t,Ft)){const Lt=it(Ft);return _t.minus(Lt).minus(1)}return _t}function lt(_t){return/^0x[0-9a-f]{40}$/i.test(_t)}function ht(_t){return!!/^(0x)?[0-9a-f]{40}$/i.test(_t)&&(!(!/^(0x)?[0-9a-f]{40}$/.test(_t)&&!/^(0x)?[0-9A-F]{40}$/.test(_t))||pt(_t))}function pt(_t){const Ft=_t.replace("0x","");let Lt=$(Ft.toLowerCase());for(let _t=0;_t<40;_t++)if(parseInt(Lt[_t],16)>7&&Ft[_t].toUpperCase()!==Ft[_t]||parseInt(Lt[_t],16)<=7&&Ft[_t].toLowerCase()!==Ft[_t])return!1;return!0}function ft(_t){if(void 0===_t)return"";const Ft=_t.toLowerCase().replace("0x",""),Lt=$(Ft);let Yt="0x";for(let _t=0;_t<Ft.length;_t++)parseInt(Lt[_t],16)>7?Yt+=Ft[_t].toUpperCase():Yt+=Ft[_t];return Yt}function dt(_t){if(!Array.isArray(_t))throw new Error(`Value was not an array: ${JSON.stringify(_t)}`);return _t}function gt(_t){return lt(_t)?_t:/^[0-9a-f]{40}$/.test(_t)?"0x"+_t:"0x"+H(nt(_t).substr(2),40)}function mt(_t){return _t instanceof Ye}function yt(_t){return"string"==typeof _t||_t&&_t.constructor&&"String"===_t.constructor.name}function wt(_t){return null!==_t&&!Array.isArray(_t)&&"object"==typeof _t}function vt(_t){return"boolean"==typeof _t}function bt(_t){return Array.isArray(_t)}var tn,nn,rn;function Nt(Ft,Lt){if(!Ft)throw new Error("jsonrpc method should be specified!");if("string"!=typeof Ft)throw new Error(`jsonrpc must be a string, got ${typeof Ft}!`);return _t.messageId++,{jsonrpc:"2.0",id:_t.messageId,method:Ft,params:Lt||[]}}function xt(_t){return Array.isArray(_t)?_t.every(e):e(_t);function e(_t){return!(!_t||"error"in _t||"2.0"!==_t.jsonrpc||"number"!=typeof _t.id||null==_t.result&&void 0===_t.result)}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function kt(_t,Ft,Lt,Yt){var Kt,Zt=arguments.length,le=Zt<3?Ft:null===Yt?Yt=Object.getOwnPropertyDescriptor(Ft,Lt):Yt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(_t,Ft,Lt,Yt);else for(var ve=_t.length-1;ve>=0;ve--)(Kt=_t[ve])&&(le=(Zt<3?Kt(le):Zt>3?Kt(Ft,Lt,le):Kt(Ft,Lt))||le);return Zt>3&&le&&Object.defineProperty(Ft,Lt,le),le}function Tt(_t,Ft){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(_t,Ft)}function At(_t){return ot(_t)}function Et(_t){return void 0===_t?"latest":Bt(_t)}function Bt(_t){return void 0===_t||null==_t?null:function(_t){return"latest"===_t||"pending"===_t||"earliest"===_t}(_t)?_t:nt(_t)}function Ot(_t){return _t.from=_t.from,_t.from&&(_t.from=jt(_t.from)),_t.to&&(_t.to=jt(_t.to)),void 0!==_t.gasPrice&&(_t.gasPrice=et(_t.gasPrice)),void 0!==_t.gas&&(_t.gas=et(_t.gas)),void 0!==_t.value&&(_t.value=et(_t.value)),void 0!==_t.nonce&&(_t.nonce=et(_t.nonce)),_t.data&&!_t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t.data)&&(_t.data="0x"+_t.data),_t}function St(_t){if("string"!=typeof _t)throw new Error("The provided input for transactionId is not a string, got: "+JSON.stringify(_t));if(0!==_t.indexOf("0x"))throw new Error("TransactionID must start with 0x, got: "+JSON.stringify(_t));if(66!==_t.length)throw new Error("TransactionID must be a 32 byte hex, got: "+JSON.stringify(_t));return _t}function Ct(_t){if("object"!=typeof _t)throw new Error("Did not provide transaction options");if(!_t.from)throw new Error('Missing "from" in transaction options');return _t.from=jt(_t.from),_t.to&&(_t.to=jt(_t.to)),void 0!==_t.gasPrice&&(_t.gasPrice=et(_t.gasPrice)),void 0!==_t.gas&&(_t.gas=et(_t.gas)),void 0!==_t.value&&(_t.value=et(_t.value)),void 0!==_t.nonce&&(_t.nonce=et(_t.nonce)),_t.data&&!_t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t.data)&&(_t.data="0x"+_t.data),_t}function It(_t){return _t?(null!==_t.blockNumber&&(_t.blockNumber=Z(_t.blockNumber)),null!==_t.transactionIndex&&(_t.transactionIndex=Z(_t.transactionIndex)),_t.nonce=Z(_t.nonce),_t.gas=Z(_t.gas),_t.gasPrice=ot(_t.gasPrice),_t.value=ot(_t.value),_t):null}function Mt(_t){return _t?(_t.gasLimit=Z(_t.gasLimit),_t.gasUsed=Z(_t.gasUsed),_t.size=Z(_t.size),_t.timestamp=Z(_t.timestamp),null!==_t.number&&(_t.number=Z(_t.number)),_t.difficulty=ot(_t.difficulty),_t.totalDifficulty=ot(_t.totalDifficulty),bt(_t.transactions)&&_t.transactions.forEach((function(Ft,Lt){yt(Ft)||(_t.transactions[Lt]=It(Ft)||_t.transactions[Lt])})),_t):null}function Rt(_t){return _t?(_t.blockNumber&&(_t.blockNumber=Z(_t.blockNumber)),_t.transactionIndex&&(_t.transactionIndex=Z(_t.transactionIndex)),_t.logIndex&&(_t.logIndex=Z(_t.logIndex)),_t):_t}function jt(_t){if(lt(_t))return _t;if(ht(_t))return"0x"+_t;throw new Error(`Invalid address: ${JSON.stringify(_t)}`)}_t.TransactionStatus=void 0,(tn=_t.TransactionStatus||(_t.TransactionStatus={})).pending="pending",tn.confirmed="confirmed",tn.failed="failed",_t.TransactionType=void 0,(nn=_t.TransactionType||(_t.TransactionType={})).queued="queued",nn.dropped="dropped",nn.replaced="replaced",nn.pending="pending",nn.reverted="reverted",nn.confirmed="confirmed",_t.messageId=0;class qt{constructor(_t){this.callName=_t.callName,this.params=_t.params||0,this.inputFormatter=_t.inputFormatter||null,this.outputFormatter=_t.outputFormatter}validateArgs(_t){if(_t.length!==this.params)throw Ft=this.callName,Lt=_t.length,Yt=this.params,new Error(`Invalid number of input parameters to RPC method "${Ft}" given: ${Lt}, expected: ${Yt}`);var Ft,Lt,Yt}formatInput(_t){return this.inputFormatter?this.inputFormatter.map((function(Ft,Lt){return Ft?Ft(_t[Lt]):_t[Lt]})):_t}formatOutput(_t){return null!==_t?this.outputFormatter(_t):null}toPayload(_t){let Ft=this.formatInput(_t);return this.validateArgs(Ft),{method:this.callName,params:Ft}}async execute(_t,...Ft){let Lt=this.toPayload(Ft);if(!_t)throw new Error("Missing RequestManager in method#exec");const Yt=await _t.sendAsync(Lt);return this.formatOutput(Yt)}}class $t{constructor(_t){this.getter=_t.getter,this.outputFormatter=_t.outputFormatter}formatOutput(_t){return this.outputFormatter(_t)}async execute(_t,...Ft){const Lt=await _t.sendAsync({method:this.getter,params:[]});return this.formatOutput(Lt)}}function Ht(_t){return new Promise((Ft=>setTimeout(Ft,_t)))}function Gt(Ft,Lt){const Yt=_t.eth[Lt];if(!Yt)throw new Error(`Could not find the method/property named ${Lt.toString()}`);Object.defineProperty(Ft,Lt,{value:function(){return Yt.execute(this,...arguments)}})}_t.eth=void 0,(rn=_t.eth||(_t.eth={})).eth_getBalance=new qt({callName:"eth_getBalance",params:2,inputFormatter:[jt,Et],outputFormatter:At}),rn.eth_getStorageAt=new qt({callName:"eth_getStorageAt",params:3,inputFormatter:[jt,nt,Et],outputFormatter:X}),rn.eth_getCode=new qt({callName:"eth_getCode",params:2,inputFormatter:[jt,Et],outputFormatter:X}),rn.eth_getBlockByHash=new qt({callName:"eth_getBlockByHash",params:2,inputFormatter:[Bt,function(_t){return!!_t}],outputFormatter:Mt}),rn.eth_getBlockByNumber=new qt({callName:"eth_getBlockByNumber",params:2,inputFormatter:[Bt,function(_t){return!!_t}],outputFormatter:Mt}),rn.eth_getUncleByBlockHashAndIndex=new qt({callName:"eth_getUncleByBlockHashAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:Mt}),rn.eth_getUncleByBlockNumberAndIndex=new qt({callName:"eth_getUncleByBlockNumberAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:Mt}),rn.eth_getBlockTransactionCountByHash=new qt({callName:"eth_getBlockTransactionCountByHash",params:1,inputFormatter:[Bt],outputFormatter:Z}),rn.eth_getBlockTransactionCountByNumber=new qt({callName:"eth_getBlockTransactionCountByNumber",params:1,inputFormatter:[Bt],outputFormatter:Z}),rn.eth_getUncleCountByBlockHash=new qt({callName:"eth_getUncleCountByBlockHash",params:1,inputFormatter:[Bt],outputFormatter:Z}),rn.eth_getUncleCountByBlockNumber=new qt({callName:"eth_getUncleCountByBlockNumber",params:1,inputFormatter:[Bt],outputFormatter:Z}),rn.eth_getTransactionByHash=new qt({callName:"eth_getTransactionByHash",params:1,inputFormatter:[St],outputFormatter:It}),rn.eth_getTransactionByBlockHashAndIndex=new qt({callName:"eth_getTransactionByBlockHashAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:It}),rn.eth_getTransactionByBlockNumberAndIndex=new qt({callName:"eth_getTransactionByBlockNumberAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:It}),rn.eth_getTransactionReceipt=new qt({callName:"eth_getTransactionReceipt",params:1,inputFormatter:[St],outputFormatter:function(_t){return _t?(null!==_t.blockNumber&&(_t.blockNumber=Z(_t.blockNumber)),null!==_t.transactionIndex&&(_t.transactionIndex=Z(_t.transactionIndex)),_t.cumulativeGasUsed=Z(_t.cumulativeGasUsed),_t.gasUsed=Z(_t.gasUsed),_t.logs&&bt(_t.logs)&&(_t.logs=_t.logs.map((function(_t){return Rt(_t)}))),_t.status=Z(_t.status||""),_t):null}}),rn.eth_getTransactionCount=new qt({callName:"eth_getTransactionCount",params:2,inputFormatter:[jt,Et],outputFormatter:Z}),rn.eth_sendRawTransaction=new qt({callName:"eth_sendRawTransaction",params:1,inputFormatter:[null],outputFormatter:X}),rn.web3_sha3=new qt({callName:"web3_sha3",params:1,inputFormatter:[null],outputFormatter:X}),rn.eth_sendTransaction=new qt({callName:"eth_sendTransaction",params:1,inputFormatter:[Ct],outputFormatter:X}),rn.eth_sign=new qt({callName:"eth_sign",params:2,inputFormatter:[jt,null],outputFormatter:X}),rn.eth_call=new qt({callName:"eth_call",params:2,inputFormatter:[Ot,Et],outputFormatter:X}),rn.eth_estimateGas=new qt({callName:"eth_estimateGas",params:1,inputFormatter:[Ot],outputFormatter:Z}),rn.eth_submitWork=new qt({callName:"eth_submitWork",params:3,inputFormatter:[null,null,null],outputFormatter:tt}),rn.eth_getWork=new qt({callName:"eth_getWork",params:0,inputFormatter:[],outputFormatter:dt}),rn.eth_coinbase=new $t({getter:"eth_coinbase",outputFormatter:gt}),rn.eth_mining=new $t({getter:"eth_mining",outputFormatter:tt}),rn.eth_hashrate=new $t({getter:"eth_hashrate",outputFormatter:Z}),rn.eth_syncing=new $t({getter:"eth_syncing",outputFormatter:function(_t){return _t?(_t.startingBlock=Z(_t.startingBlock),_t.currentBlock=Z(_t.currentBlock),_t.highestBlock=Z(_t.highestBlock),_t.knownStates&&(_t.knownStates=Z(_t.knownStates),_t.pulledStates=Z(_t.pulledStates)),_t):_t}}),rn.eth_gasPrice=new $t({getter:"eth_gasPrice",outputFormatter:At}),rn.eth_accounts=new $t({getter:"eth_accounts",outputFormatter:dt}),rn.eth_blockNumber=new $t({getter:"eth_blockNumber",outputFormatter:Z}),rn.eth_protocolVersion=new $t({getter:"eth_protocolVersion",outputFormatter:Z}),rn.web3_clientVersion=new $t({getter:"web3_clientVersion",outputFormatter:Y}),rn.net_version=new $t({getter:"net_version",outputFormatter:Y}),rn.shh_version=new qt({callName:"shh_version",params:0,inputFormatter:[],outputFormatter:Z}),rn.shh_post=new qt({callName:"shh_post",params:1,inputFormatter:[null],outputFormatter:tt}),rn.personal_newAccount=new qt({callName:"personal_newAccount",params:1,inputFormatter:[null],outputFormatter:gt}),rn.personal_importRawKey=new qt({callName:"personal_importRawKey",params:2,inputFormatter:[null,null],outputFormatter:gt}),rn.personal_sign=new qt({callName:"personal_sign",params:3,inputFormatter:[Q,jt,null],outputFormatter:X}),rn.personal_ecRecover=new qt({callName:"personal_ecRecover",params:2,inputFormatter:[Q,null],outputFormatter:gt}),rn.personal_unlockAccount=new qt({callName:"personal_unlockAccount",params:3,inputFormatter:[jt,null,K],outputFormatter:tt}),rn.personal_sendTransaction=new qt({callName:"personal_sendTransaction",params:2,inputFormatter:[Ct,null],outputFormatter:X}),rn.personal_lockAccount=new qt({callName:"personal_lockAccount",params:1,inputFormatter:[jt],outputFormatter:tt}),rn.personal_listAccounts=new $t({getter:"personal_listAccounts",outputFormatter:dt}),rn.net_listening=new $t({getter:"net_listening",outputFormatter:tt}),rn.net_peerCount=new $t({getter:"net_peerCount",outputFormatter:Z}),rn.eth_newFilter=new qt({callName:"eth_newFilter",params:1,inputFormatter:[function(_t){return _t}],outputFormatter:nt}),rn.eth_getLogs=new qt({callName:"eth_getLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),rn.eth_newBlockFilter=new qt({callName:"eth_newBlockFilter",params:0,inputFormatter:[],outputFormatter:nt}),rn.eth_newPendingTransactionFilter=new qt({callName:"eth_newPendingTransactionFilter",params:0,inputFormatter:[],outputFormatter:nt}),rn.eth_uninstallFilter=new qt({callName:"eth_uninstallFilter",params:1,inputFormatter:[nt],outputFormatter:tt}),rn.eth_getFilterLogs=new qt({callName:"eth_getFilterLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),rn.eth_getFilterChanges=new qt({callName:"eth_getFilterChanges",params:1,inputFormatter:[nt],outputFormatter:dt}),rn.eth_submitHashrate=new qt({callName:"eth_submitHashrate",params:2,inputFormatter:[null,null],outputFormatter:tt}),rn.shh_newIdentity=new qt({callName:"shh_newIdentity",params:0,inputFormatter:[],outputFormatter:X}),rn.shh_hasIdentity=new qt({callName:"shh_hasIdentity",params:1,inputFormatter:[null],outputFormatter:tt}),rn.shh_newGroup=new qt({callName:"shh_newGroup",params:0,inputFormatter:[],outputFormatter:X}),rn.shh_addToGroup=new qt({callName:"shh_addToGroup",params:1,inputFormatter:[null],outputFormatter:tt}),rn.shh_newFilter=new qt({callName:"shh_newFilter",params:1,inputFormatter:[null],outputFormatter:nt}),rn.shh_uninstallFilter=new qt({callName:"shh_uninstallFilter",params:1,inputFormatter:[null],outputFormatter:tt}),rn.shh_getLogs=new qt({callName:"shh_getLogs",params:1,inputFormatter:[null],outputFormatter:dt}),rn.shh_getFilterMessages=new qt({callName:"shh_getFilterMessages",params:1,inputFormatter:[null],outputFormatter:dt}),rn.shh_getFilterChanges=new qt({callName:"shh_getFilterChanges",params:1,inputFormatter:[null],outputFormatter:dt}),rn.shh_getMessages=new qt({callName:"shh_getMessages",params:1,inputFormatter:[null],outputFormatter:dt});class zt{constructor(_t){this.provider=_t,this.requests=new Map}async sendAsync(_t){const Ft=await this.provider;if(!Ft)throw new Error("Provider not set or invalid");let Lt=Nt(_t.method,_t.params);const Kt=Yt();return this.requests.set(Lt.id,Kt),Ft.sendAsync(Lt,((_t,Ft)=>{this.requests.delete(Lt.id),_t?Kt.reject(_t):xt(Ft)?Kt.resolve(Ft.result):Kt.reject(function(_t){let Ft=_t&&_t.error&&_t.error.message?_t.error.message:"Invalid JSON RPC response: "+JSON.stringify(_t);return new Error(Ft)}(Ft))})),Kt}setProvider(_t){this.provider=_t}async getConfirmedTransaction(_t){const Ft=await this.waitForCompletion(_t);if(this.isFailure(Ft))throw new Error(`Transaction "${_t}" failed`);return Ft}async waitForCompletion(Ft,Lt){const Yt=St(Ft);if(await this.isTxDropped(Yt,Lt)){const Ft=await this.getTransactionAndReceipt(Yt);return Object.assign(Object.assign({},Ft),{status:_t.TransactionStatus.failed})}for(;;){const Ft=await this.getTransactionAndReceipt(Yt);if(!this.isPending(Ft)&&Ft.receipt)return Object.assign(Object.assign({},Ft),{status:this.isFailure(Ft)?_t.TransactionStatus.failed:_t.TransactionStatus.confirmed});await Ht(2e3)}}async getTransaction(Ft){let Lt,Yt=null;const Kt=St(Ft);try{const _t=(await this.eth_accounts())[0];_t&&(Yt=await this.eth_getTransactionCount(_t,"latest"))}catch(_t){Yt=null}try{if(Lt=await this.eth_getTransactionByHash(Kt),null==Lt)return null}catch(_t){return null}if(null==Lt.blockNumber){if(null!=Yt){if(Lt.nonce<Yt)return{hash:Kt,type:_t.TransactionType.replaced,nonce:Lt.nonce};if(Lt.nonce>Yt)return{hash:Kt,type:_t.TransactionType.queued,nonce:Lt.nonce}}return Object.assign({type:_t.TransactionType.pending},Lt)}let Zt;try{if(Zt=await this.eth_getTransactionReceipt(Kt),null==Zt||0===Zt.status)return Object.assign({type:_t.TransactionType.reverted},Lt)}catch(_t){return null}return Object.assign(Object.assign({type:_t.TransactionType.confirmed},Lt),{receipt:Zt})}async isTxDropped(_t,Ft=15){let Lt=Ft;for(;Lt>0;){if(null!==await this.getTransactionAndReceipt(_t))return!1;Lt-=1,await Ht(2e3)}return!0}async getTransactionAndReceipt(_t){_t=St(_t);const[Ft,Lt]=await Promise.all([this.eth_getTransactionByHash(_t),this.eth_getTransactionReceipt(_t)]);return Object.assign(Object.assign({},Ft),{receipt:Lt})}isPending(_t){return _t&&null===_t.blockNumber}isFailure(_t){return _t&&(!_t.receipt||0===_t.receipt.status)}}function Jt(_t){return"slice"in _t&&_t.slice||(_t.slice=function(){var Ft=Array.prototype.slice.call(arguments);return new Uint8Array(Array.prototype.slice.apply(_t,Ft))}),_t}function Wt(_t){if(null==_t)throw U("cannot convert null value to array",Qe,{arg:"value",value:_t});if(_t instanceof Uint8Array)return Jt(new Uint8Array(_t));if("string"==typeof _t){let Yt=_t.match(/^(0x)?[0-9a-fA-F]*$/);if(!Yt)throw U("invalid hexidecimal string",Qe,{arg:"value",value:_t});if("0x"!==Yt[1])throw U("hex string must have 0x prefix",Qe,{arg:"value",value:_t});(_t=_t.substring(2)).length%2&&(_t="0"+_t);for(var Ft=[],Lt=0;Lt<_t.length;Lt+=2)Ft.push(parseInt(_t.substr(Lt,2),16));return Jt(new Uint8Array(Ft))}if(function(_t){if(!_t||parseInt(String(_t.length))!=_t.length||"string"==typeof _t)return!1;for(var Ft=0;Ft<_t.length;Ft++){var Lt=_t[Ft];if(Lt<0||Lt>=256||parseInt(String(Lt))!=Lt)return!1}return!0}(_t))return Jt(new Uint8Array(_t));throw U("invalid arrayify value",void 0,{arg:"value",value:_t,type:typeof _t})}function Vt(_t,Ft,Lt){Object.defineProperty(_t,Ft,{enumerable:!0,value:Lt,writable:!1})}kt([Gt,Tt("design:type",Function)],zt.prototype,"web3_clientVersion",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"web3_sha3",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_version",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_peerCount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_listening",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_protocolVersion",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_syncing",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_coinbase",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_mining",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_hashrate",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_gasPrice",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_accounts",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_blockNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBalance",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getStorageAt",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionCount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getCode",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sign",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sendTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sendRawTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_call",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_estimateGas",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockByNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockHashAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockNumberAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionReceipt",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleByBlockHashAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleByBlockNumberAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newBlockFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newPendingTransactionFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_uninstallFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getFilterChanges",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getFilterLogs",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getLogs",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getWork",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_submitWork",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_submitHashrate",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_post",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_version",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newIdentity",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_hasIdentity",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newGroup",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_addToGroup",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_uninstallFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_getFilterChanges",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_getMessages",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_unlockAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_newAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_listAccounts",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_lockAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_importRawKey",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_sendTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_sign",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_ecRecover",void 0);const on=new Ye(-1),sn=new Ye(0),an=new Ye(1),cn=new Ye("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Qt(_t){return function(_t,Ft){function n(Ft){return new Error('unexpected character "'+_t[Ft]+'" at position '+Ft+' in "'+_t+'"')}for(var Lt={type:"",name:"",state:{allowType:!0}},Yt=Lt,Kt=0;Kt<_t.length;Kt++){var Zt=_t[Kt];switch(Zt){case"(":if(!Yt.state.allowParams)throw n(Kt);Yt.state.allowType=!1,Yt.type=te(Yt.type),Yt.components=[{type:"",name:"",parent:Yt,state:{allowType:!0}}],Yt=Yt.components[0];break;case")":delete Yt.state,"indexed"===Yt.name&&(Yt.indexed=!0,Yt.name=""),Yt.type=te(Yt.type);var le=Yt;if(!(Yt=Yt.parent))throw n(Kt);delete le.parent,Yt.state.allowParams=!1,Yt.state.allowName=!0,Yt.state.allowArray=!0;break;case",":delete Yt.state,"indexed"===Yt.name&&(Yt.indexed=!0,Yt.name=""),Yt.type=te(Yt.type);var ve={type:"",name:"",parent:Yt.parent,state:{allowType:!0}};Yt.parent.components.push(ve),delete Yt.parent,Yt=ve;break;case" ":Yt.state.allowType&&""!==Yt.type&&(Yt.type=te(Yt.type),delete Yt.state.allowType,Yt.state.allowName=!0,Yt.state.allowParams=!0),Yt.state.allowName&&""!==Yt.name&&("indexed"===Yt.name?(Yt.indexed=!0,Yt.name=""):Yt.state.allowName=!1);break;case"[":if(!Yt.state.allowArray)throw n(Kt);Yt.type+=Zt,Yt.state.allowArray=!1,Yt.state.allowName=!1,Yt.state.readArray=!0;break;case"]":if(!Yt.state.readArray)throw n(Kt);Yt.type+=Zt,Yt.state.readArray=!1,Yt.state.allowArray=!0,Yt.state.allowName=!0;break;default:if(Yt.state.allowType)Yt.type+=Zt,Yt.state.allowParams=!0,Yt.state.allowArray=!0;else if(Yt.state.allowName)Yt.name+=Zt,delete Yt.state.allowArray;else{if(!Yt.state.readArray)throw n(Kt);Yt.type+=Zt}}}if(Yt.parent)throw new Error("unexpected eof");return delete Lt.state,"indexed"===Yt.name&&(Yt.indexed=!0,Yt.name=""),Lt.type=te(Lt.type),Lt}(_t)}function te(_t){return _t.match(/^uint($|[^1-9])/)?_t="uint256"+_t.substring(4):_t.match(/^int($|[^1-9])/)&&(_t="int256"+_t.substring(3)),_t}const un=new RegExp(/^bytes([0-9]*)$/),ln=new RegExp(/^(u?int)([0-9]*)$/),dn=new RegExp(/^(.*)\[([0-9]*)\]$/),oe=function(_t,Ft){var Lt=_t.match(ln);return Lt&&parseInt(Lt[2])<=48?Ft.toNumber():Ft};class ie{constructor(_t,Ft,Lt,Yt="",Kt){this.coerceFunc=_t,this.name=Ft,this.type=Lt,this.localName=Yt,this.dynamic=Kt}}class se extends ie{constructor(_t){super(_t.coerceFunc,_t.name,_t.type,void 0,_t.dynamic),Vt(this,"coder",_t)}encode(_t){return this.coder.encode(_t)}decode(_t,Ft){return this.coder.decode(_t,Ft)}}class ae extends ie{constructor(_t,Ft){super(_t,"null","",Ft,!1)}encode(_t){return Wt([])}decode(_t,Ft){if(Ft>_t.length)throw new Error("invalid null");return{consumed:0,value:this.coerceFunc("null",void 0)}}}function ce(_t,Ft){return new Ye(_t.toString(2).substr(-Ft),2)}class ue extends ie{constructor(_t,Ft,Lt,Yt){const Kt=(Lt?"int":"uint")+8*Ft;super(_t,Kt,Kt,Yt,!1),this.size=Ft,this.signed=Lt}encode(_t){try{let Ft=ot(_t);if(this.signed){let _t=ce(cn,8*this.size-1);if(Ft.gt(_t))throw new Error("out-of-bounds");if(_t=_t.plus(an).multipliedBy(on),Ft.lt(_t))throw new Error("out-of-bounds")}else if(Ft.lt(sn)||Ft.gt(ce(cn,8*this.size)))throw new Error("out-of-bounds");Ft=ce(st(Ft,8*this.size),8*this.size),this.signed&&(Ft=st(ut(Ft,8*this.size),256));let Lt=H(st(Ft).toString(16),64);if(-1!=Lt.indexOf("NaN"))throw U("invalid number value, NaN",Qe,{arg:this.localName,coderType:this.name,value:_t,v:Ft,twosComplement:st(Ft),twosComplement16:st(Ft).toString(16),pad:H(st(Ft).toString(16),64),size:this.size});return D(Lt)}catch(Ft){throw U("invalid number value",Qe,{arg:this.localName,coderType:this.name,value:_t,message:Ft.toString()})}}decode(_t,Ft){if(_t.length<Ft+32)throw U("insufficient data for "+this.name+" type",Qe,{arg:this.localName,coderType:this.name,value:nt(_t.slice(Ft,Ft+32))});var Lt=32-this.size,Yt=new Ye(q(_t.slice(Ft+Lt,Ft+32)),16);return Yt=this.signed?ut(Yt,8*this.size):ce(Yt,8*this.size),{consumed:32,value:this.coerceFunc(this.name,Yt)}}}var hn=new ue((function(_t,Ft){return Ft}),32,!1,"none");class he extends ie{constructor(_t,Ft,Lt){const Yt="bytes"+Ft;super(_t,Yt,Yt,Lt,!1),this.length=Ft}encode(_t){var Ft=new Uint8Array(32);try{if("string"==typeof _t&&_t.length%2!=0)throw new Error("hex string cannot be odd-length");let Lt=Wt(_t);if(Lt.length>this.length)throw new Error("incorrect data length");Ft.set(Lt)}catch(Ft){throw U("invalid "+this.name+" value. Use hex strings or Uint8Array",Qe,{arg:this.localName,coderType:this.name,value:Ft.value||_t,details:Ft.message})}return Ft}decode(_t,Ft){if(_t.length<Ft+32)throw U("insufficient data for "+this.name+" type",Qe,{arg:this.localName,coderType:this.name,value:nt(_t.slice(Ft,Ft+32))});return{consumed:32,value:this.coerceFunc(this.name,_t.slice(Ft,Ft+this.length))}}}function pe(_t){var Ft=32*Math.ceil(_t.length/32),Lt=new Uint8Array(Ft-_t.length);return z(hn.encode(_t.length),_t,Lt)}function fe(_t,Ft,Lt){if(_t.length<Ft+32)throw U("insufficient data for dynamicBytes length",Qe,{arg:Lt,coderType:"dynamicBytes",value:nt(_t.slice(Ft,Ft+32))});var Yt=hn.decode(_t,Ft).value;try{Yt=Yt.toNumber()}catch(_t){throw _t("dynamic bytes count too large",Qe,{arg:Lt,coderType:"dynamicBytes",value:Yt.toString()})}if(_t.length<Ft+32+Yt)throw U("insufficient data for dynamicBytes type",Qe,{arg:Lt,coderType:"dynamicBytes",value:nt(_t.slice(Ft,Ft+32+Yt))});return{consumed:32+32*Math.ceil(Yt/32),value:_t.slice(Ft+32,Ft+32+Yt)}}function de(_t){return 32*Math.ceil(_t/32)}function ge(_t,Ft){if(Array.isArray(Ft));else{if(!Ft||"object"!=typeof Ft)throw U("invalid tuple value",Qe,{coderType:"tuple",value:Ft});var Lt=[];_t.forEach((function(_t){Lt.push(Ft[_t.localName])})),Ft=Lt}if(_t.length!==Ft.length)throw U("types/value length mismatch",Qe,{coderType:"tuple",value:Ft});var Yt=[];_t.forEach((function(_t,Lt){Yt.push({dynamic:_t.dynamic,value:_t.encode(Ft[Lt])})}));var Kt=0,Zt=0;Yt.forEach((function(_t){_t.dynamic?(Kt+=32,Zt+=de(_t.value.length)):Kt+=de(_t.value.length)}));var le=0,ve=Kt,Ce=new Uint8Array(Kt+Zt);return Yt.forEach((function(_t){_t.dynamic?(Ce.set(hn.encode(ve),le),le+=32,Ce.set(_t.value,ve),ve+=de(_t.value.length)):(Ce.set(_t.value,le),le+=de(_t.value.length))})),Ce}class me extends Array{}class ye extends ie{constructor(_t,Ft,Lt,Yt){super(_t,"array",Ft.type+"["+(Lt>=0?Lt:"")+"]",Yt,-1===Lt||Ft.dynamic),this.coder=Ft,this.length=Lt}encode(_t){if(!Array.isArray(_t))throw U("expected array value",Qe,{arg:this.localName,coderType:"array",value:_t});var Ft=this.length,Lt=new Uint8Array(0);-1===Ft&&(Ft=_t.length,Lt=hn.encode(Ft)),function(_t,Ft,Lt){if(Lt||(Lt=""),_t<Ft)throw U("missing argument"+Lt,"MISSING_ARGUMENT",{count:_t,expectedCount:Ft});if(_t>Ft)throw U("too many arguments"+Lt,"UNEXPECTED_ARGUMENT",{count:_t,expectedCount:Ft})}(Ft,_t.length,"in coder array"+(this.localName?" "+this.localName:""));for(var Yt=[],Kt=0;Kt<_t.length;Kt++)Yt.push(this.coder);return z(Lt,ge(Yt,_t))}decode(_t,Ft){var Lt=0,Yt=this.length;if(-1===Yt){try{var Kt=hn.decode(_t,Ft)}catch(_t){throw _t("insufficient data for dynamic array length",Qe,{arg:this.localName,coderType:"array",value:_t.value})}try{Yt=Kt.value.toNumber()}catch(_t){throw _t("array count too large",Qe,{arg:this.localName,coderType:"array",value:Kt.value.toString()})}Lt+=Kt.consumed,Ft+=Kt.consumed}for(var Zt=[],le=0;le<Yt;le++)Zt.push(new se(this.coder));var ve=function(_t,Ft,Lt){var Yt=Lt,Kt=0,Zt=[];return _t.forEach((function(_t){if(_t.dynamic){var le=hn.decode(Ft,Lt);(ve=_t.decode(Ft,Yt+le.value.toNumber())).consumed=le.consumed}else var ve=_t.decode(Ft,Lt);null!=ve.value&&Zt.push(ve.value),Lt+=ve.consumed,Kt+=ve.consumed})),{value:Zt,consumed:Kt}}(Zt,_t,Ft);return ve.consumed+=Lt,ve.value=this.coerceFunc(this.type,ve.value),ve}}class we extends ie{constructor(_t,Ft,Lt){var Yt=!1,Kt=[];Ft.forEach((function(_t){_t.dynamic&&(Yt=!0),Kt.push(_t.type)})),super(_t,"tuple","tuple("+Kt.join(",")+")",Lt,Yt),this.coders=Ft}encode(_t){return ge(this.coders,_t)}decode(_t,Ft){var Lt=function(_t,Ft,Lt){var Yt=Lt,Kt=0,Zt=new me;return _t.forEach((function(_t){if(_t.dynamic){var le=hn.decode(Ft,Lt);(ve=_t.decode(Ft,Yt+le.value.toNumber())).consumed=le.consumed}else var ve=_t.decode(Ft,Lt);null!=ve.value&&Zt.push(ve.value),Lt+=ve.consumed,Kt+=ve.consumed})),_t.forEach((function(_t,Ft){let Lt=_t.localName;Lt&&("length"===Lt&&(Lt="_length"),null==Zt[Lt]&&(Zt[Lt]=Zt[Ft]))})),{value:Zt,consumed:Kt}}(this.coders,_t,Ft);return Lt.value=this.coerceFunc(this.type,Lt.value),Lt}}const pn={address:class extends ie{constructor(_t,Ft){super(_t,"address","address",Ft,!1)}encode(_t){let Ft=new Uint8Array(32);const Lt=_t.trim();if(!ht(Lt))throw U("invalid address format",Qe,{arg:this.localName,coderType:"address",value:_t});try{Ft.set(D(jt(Lt)),12)}catch(Ft){throw U(`invalid address (${Ft.message})`,Qe,{arg:this.localName,coderType:"address",value:_t})}return Ft}decode(_t,Ft){if(_t.length<Ft+32)throw U("insufficuent data for address type",Qe,{arg:this.localName,coderType:"address",value:nt(_t.slice(Ft,Ft+32)),missingBytes:Ft+32-_t.length});return{consumed:32,value:this.coerceFunc("address",ct(nt(_t.slice(Ft+12,Ft+32))))}}},bool:class extends ie{constructor(_t,Ft){super(_t,"bool","bool",Ft,!1)}encode(_t){return hn.encode(_t?1:0)}decode(_t,Ft){try{var Lt=hn.decode(_t,Ft)}catch(_t){if("insufficient data for uint256 type"===_t.reason)throw U("insufficient data for boolean type",Qe,{arg:this.localName,coderType:"boolean",value:_t.value});throw _t}return{consumed:Lt.consumed,value:this.coerceFunc("bool",!Lt.value.isZero())}}},string:class extends ie{constructor(_t,Ft){super(_t,"string","string",Ft,!0)}encode(_t){if("string"!=typeof _t)throw U("invalid string value",Qe,{arg:this.localName,coderType:"string",value:_t});return pe(M(_t))}decode(_t,Ft){var Lt=fe(_t,Ft,this.localName);return Lt.value=this.coerceFunc("string",R(Lt.value)),Lt}},bytes:class extends ie{constructor(_t,Ft){super(_t,"bytes","bytes",Ft,!0)}encode(_t){try{return pe(Wt(_t))}catch(_t){throw _t("invalid bytes value",Qe,{arg:this.localName,coderType:"bytes",value:_t.value})}}decode(_t,Ft){var Lt=fe(_t,Ft,this.localName);return Lt.value=this.coerceFunc("bytes",Lt.value),Lt}},function:class extends he{constructor(_t,Ft){super(_t,24,Ft)}}};function be(_t,Ft){var Lt,Yt=pn[Ft.type];if(Yt)return new Yt(_t,Ft.name);if(Lt=Ft.type.match(ln)){let Yt=parseInt(Lt[2]||"256");if(0===Yt||Yt>256||Yt%8!=0)throw U("invalid "+Lt[1]+" bit length",Qe,{arg:"param",value:Ft});return new ue(_t,Yt/8,"int"===Lt[1],Ft.name)}if(Lt=Ft.type.match(un)){let Yt=parseInt(Lt[1]);if(0===Yt||Yt>32)throw U("invalid bytes length",Qe,{arg:"param",value:Ft});return new he(_t,Yt,Ft.name)}if(Lt=Ft.type.match(dn)){const Yt=Object.assign({},Ft);let Kt=parseInt(Lt[2]||"-1");return Yt.type=Lt[1],new ye(_t,be(_t,Yt),Kt,Ft.name)}if("tuple"===Ft.type.substring(0,5))return function(_t,Ft,Lt){Ft||(Ft=[]);var Yt=Ft.map((Ft=>be(_t,Ft)));return new we(_t,Yt,Lt)}(_t,Ft.components,Ft.name);if(""===Ft.type)return new ae(_t,Ft.name);throw U("invalid type",Qe,{arg:"type",value:Ft.type,fullType:Ft})}class _e{constructor(_t){!function(_t,Ft){if(!(_t instanceof Ft))throw U("missing new","MISSING_NEW",{name:Ft.name})}(this,_e),_t||(_t=oe),Vt(this,"coerceFunc",_t)}encode(_t,Ft){if(_t.length!==Ft.length)throw U("types/values length mismatch",Qe,{count:{types:_t.length,values:Ft.length},value:{types:_t,values:Ft}});const Lt=_t.map((_t=>"string"==typeof _t?Qt(_t):_t)).map((_t=>be(this.coerceFunc,_t)));return new we(this.coerceFunc,Lt,"_").encode(Ft)}decode(_t,Ft){const Lt=_t.map((_t=>"string"==typeof _t?Qt(_t):_t)).map((_t=>be(this.coerceFunc,_t)));return new we(this.coerceFunc,Lt,"_").decode(Ft,0).value}}const fn=new _e;var mn;!function(_t){_t.encodeParams=function(_t,Ft){return q(fn.encode(_t,Ft))},_t.decodeParams=function(_t,Ft){if(_t.length>0&&(!Ft||"0x"===Ft||"0X"===Ft))throw new Error("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return fn.decode(_t,D("0x"+Ft.replace(/0x/i,"")))}}(mn||(mn={}));class xe{constructor(_t){this.json=_t,this._inputTypes=_t.inputs||[],this._outputTypes=_t.outputs||[],this._constant=!!_t.constant,this._payable=!!_t.payable||"payable"===_t.stateMutability,this.needsToBeTransaction=this._payable||"constant"in _t&&!_t.constant||"nonpayable"===_t.stateMutability,this._name=G(_t)}extractDefaultBlock(_t){return _t.length>this._inputTypes.length&&!wt(_t[_t.length-1])&&Et(_t.pop())||"latest"}validateArgs(_t){if(_t.some((_t=>void 0===_t)))throw new Error("Invalid call, some arguments are undefined");let Ft=_t.filter((function(_t){return!(!0===wt(_t)&&!1===bt(_t)&&!1===mt(_t)&&!(_t instanceof Uint8Array))}));if(Ft.length!==this._inputTypes.length)throw Lt=Ft.length,Yt=this._inputTypes.length,new Error(`Invalid number of arguments to Solidity function. given: ${Lt}, expected: ${Yt}`);var Lt,Yt}toPayload(_t){let Ft={to:void 0,data:void 0,value:void 0,from:void 0};_t.length>this._inputTypes.length&&wt(_t[_t.length-1])&&(Ft=_t.pop()),this.validateArgs(_t);const Lt=this.signature();let Yt=mn.encodeParams(this._inputTypes,_t);return 0==Yt.indexOf("0x")&&(Yt=Yt.substr(2)),Ft.data="0x"+Lt+Yt,Ft}signature(){return $(this._name).slice(0,8)}unpackOutput(_t){if(!_t)return;const Ft=_t.length>=2?_t.slice(2):_t;let Lt=mn.decodeParams(this._outputTypes,Ft);return 1===Lt.length?Lt[0]:Lt}async execute(_t,Ft,...Lt){if(!_t)throw new Error(`Cannot call function ${this.displayName()} because there is no requestManager`);if(this.needsToBeTransaction){const Yt=this.toPayload(Lt);if(Yt.to=Ft,Yt.value>0&&!this._payable)throw new Error("Cannot send value to non-payable function");if(!Yt.from)throw new Error('Missing "from" in transaction options');return await _t.eth_sendTransaction(Yt)}{const Yt=this.extractDefaultBlock(Lt),Kt=this.toPayload(Lt);Kt.to=Ft;const Zt=await _t.eth_call(Kt,Yt);return this.unpackOutput(Zt)}}estimateGas(_t,Ft,...Lt){if(!(_t instanceof zt))throw new Error("estimateGas needs to receive a RequestManager as first argument");let Yt=this.toPayload(Lt);return Yt.to=Ft,_t.eth_estimateGas(Yt)}displayName(){return W(this._name)}typeName(){return V(this._name)||"void"}attachToContract(_t){let Ft=this.displayName();const Lt=Object.assign(((...Ft)=>this.execute(_t.requestManager,_t.address,...Ft)),{estimateGas:this.estimateGas.bind(this,_t.requestManager,_t.address),toPayload:(..._t)=>this.toPayload(_t)});_t[Ft]||(_t[Ft]=Lt),_t[Ft][this.typeName()]=Lt}}function ke(_t){if(null==_t)return null;const Ft=String(_t).toString();return 0===Ft.indexOf("0x")?Ft:q(M(Ft))}class Te{constructor(_t){this.requestManager=_t,this.isStarted=!1,this.isDisposed=!1,this.formatter=_t=>_t,this.filterId=Yt(),this.callbacks=[],this.stopSemaphore=Yt()}async watch(_t){if(this.isDisposed)throw new Error("The filter was disposed");_t&&(this.callbacks.push(_t),this.isStarted||await this.start())}async start(){if(this.isDisposed)throw new Error("The filter was disposed");if(!this.isStarted){this.isStarted=!0;try{const _t=await this.getNewFilter();if(!_t)throw new Error("Could not create a filter, response: "+JSON.stringify(_t));this.filterId.resolve(_t)}catch(_t){throw _t}this.stopSemaphore=Yt(),await this.poll()}}async stop(){if(!this.isStarted)return;if(this.isDisposed)return;this.isDisposed=!0;const _t=await this.filterId;if(this.isStarted=!1,this.stopSemaphore&&await this.stopSemaphore,!0!==await this.uninstall())throw new Error(`Couldn't stop the eth filter: ${_t}`)}async poll(){if(this.isStarted){if(this.callbacks.length){const _t=await this.getChanges();this.callbacks.forEach((Ft=>{this.formatter?_t.forEach((_t=>{Ft(this.formatter(_t))})):_t.forEach((_t=>Ft(_t)))}))}this.stopSemaphore.resolve(1),this.isStarted&&(this.stopSemaphore=Yt(),setTimeout((_t=()=>this.poll(),function(){_t().catch((_t=>console.error(_t)))}),500))}else this.stopSemaphore.resolve(1);var _t}}class Ae extends Te{constructor(_t,Ft,Lt=(_t=>_t)){super(_t),this.requestManager=_t,this.options=Ft,this.formatter=Lt,this.options=this.options||{},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(_t){return ke(_t)})),this.options={topics:this.options.topics,address:this.options.address?this.options.address:void 0,fromBlock:"number"==typeof this.options.fromBlock||"string"==typeof this.options.fromBlock?Bt(this.options.fromBlock)||void 0:"latest",toBlock:"number"==typeof this.options.toBlock||"string"==typeof this.options.toBlock?Bt(this.options.toBlock)||void 0:"latest"}}async getLogs(){this.isStarted||await this.start();const _t=await this.filterId;return this.requestManager.eth_getFilterLogs(_t)}async getNewFilter(){return this.requestManager.eth_newFilter(this.options)}async getChanges(){const _t=await this.filterId;return this.requestManager.eth_getFilterChanges(_t)}async uninstall(){const _t=await this.filterId;return this.requestManager.eth_uninstallFilter(_t)}}class Ee{constructor(_t,Ft,Lt){this.requestManager=_t,this.address=Lt,this._anonymous=!1,this._params=Ft.inputs||[],this._name=G(Ft),this._anonymous=Ft.anonymous||!1}types(_t){return this._params.filter((function(Ft){return Ft.indexed===_t}))}displayName(){return W(this._name)}typeName(){return V(this._name)||"void"}signature(){return $(this._name)}encode(_t={},Ft={}){let Lt={topics:[],address:this.address};void 0!==Ft.fromBlock&&(Lt.fromBlock=Bt(Ft.fromBlock)||void 0),void 0!==Ft.toBlock&&(Lt.toBlock=Bt(Ft.toBlock)||void 0),Lt.topics=Lt.topics||[],this._anonymous||Lt.topics.push("0x"+this.signature());let Yt=this._params.filter((function(_t){return!0===_t.indexed})).map((function(Ft){let Lt=_t[Ft.name];return null==Lt?null:bt(Lt)?Lt.map((function(_t){return"0x"+mn.encodeParams([Ft],[_t])})):"0x"+mn.encodeParams([Ft],[Lt])}));return Lt.topics=Lt.topics.concat(Yt),Lt}decode(_t){_t.data=_t.data||"",_t.topics=_t.topics||[];let Ft=(this._anonymous?_t.topics:_t.topics.slice(1)).map((function(_t){return _t.slice(2)})).join(""),Lt=mn.decodeParams(this.types(!0),Ft),Yt=_t.data.slice(2),Kt=mn.decodeParams(this.types(!1),Yt);const Zt=this._params.reduce((function(_t,Ft){return _t[Ft.name]=Ft.indexed?Lt.shift():Kt.shift(),_t}),{});return Object.assign(Object.assign({},Rt(_t)),{event:this.displayName(),address:_t.address,args:Zt})}async execute(_t,Ft){let Lt=this.encode(_t,Ft),Yt=this.decode.bind(this);return new Ae(this.requestManager,Lt,Yt)}attachToContract(_t){let Ft=this.execute.bind(this),Lt=this.displayName();_t.events[Lt]||(_t.events[Lt]=Ft),_t.events[Lt][this.typeName()]=this.execute.bind(this,_t)}}class Be{constructor(_t,Ft,Lt){this._requestManager=_t,this._json=Ft,this._address=Lt}encode(_t={}){let Ft={address:this._address};return void 0!==_t.fromBlock&&(Ft.fromBlock=Bt(_t.fromBlock)||void 0),void 0!==_t.toBlock&&(Ft.toBlock=Bt(_t.toBlock)||void 0),Ft}decode(_t){_t.data=_t.data||"";let Ft=bt(_t.topics)&&yt(_t.topics[0])?_t.topics[0].slice(2):"",Lt=this._json.filter((function(_t){return Ft===$(G(_t))}))[0];return Lt?new Ee(this._requestManager,Lt,this._address).decode(_t):Rt(_t)}async execute(_t){let Ft=this.encode(_t),Lt=this.decode.bind(this);return new Ae(this._requestManager,Ft,Lt)}getAllEventsFunction(){return this.execute.bind(this)}}class Oe{constructor(_t,Ft,Lt){var Yt;this.requestManager=_t,this.abi=Ft,this.address=Lt,this.events={},this.transactionHash=null,this.address=Lt,this.abi=Ft,(Yt=this).abi.filter((function(_t){return"function"===_t.type})).map((function(_t){return new xe(_t)})).forEach((function(_t){_t.attachToContract(Yt)})),this.allEvents=function(_t){let Ft=_t.abi.filter((function(_t){return"event"===_t.type})),Lt=new Be(_t.requestManager,Ft,_t.address);return Ft.map((function(Ft){return new Ee(_t.requestManager,Ft,_t.address)})).forEach((function(Ft){Ft.attachToContract(_t)})),Lt.getAllEventsFunction()}(this)}}_t.AbstractFilter=Te,_t.BigNumber=Ye,_t.Contract=Oe,_t.ContractFactory=class{constructor(_t,Ft){this.requestManager=_t,this.abi=Ft}async deploy(..._t){let Ft,Lt=_t[_t.length-1];if(wt(Lt)&&!bt(Lt)&&(Ft=_t.pop()),!Ft)throw new Error("Missing options object");if(!Ft.data||"string"!=typeof Ft.data)throw new Error("Invalid options.data");if(Z(Ft.value)>0&&!(this.abi.filter((function(Ft){return"constructor"===Ft.type&&Ft.inputs.length===_t.length}))[0]||{}).payable)throw new Error("Cannot send value to non-payable constructor");let Kt=(Zt=this.abi,le=_t,Zt.filter((function(_t){return"constructor"===_t.type&&_t.inputs&&_t.inputs.length===le.length})).map((function(_t){return _t.inputs||[]})).map((function(_t){return mn.encodeParams(_t,le)}))[0]||"");var Zt,le;Ft.data+=Kt,Ft.gas||(Ft.gas=await this.requestManager.eth_estimateGas(Ft));const ve=await this.requestManager.eth_sendTransaction(Ft);if(!ve)throw new Error("Error while sending contract creation transaction. A TxHash was not retrieved");const Ce=await async function(_t,Ft){const Lt=Yt();let Kt=0;const o=()=>{Kt++,Kt>50?Lt.reject(new Error("Contract transaction couldn't be found after 50 blocks")):_t.eth_getTransactionReceipt(Ft).then((_t=>{_t&&_t.blockHash?Lt.resolve(_t):setTimeout(o,1e3)}),(_t=>Lt.reject(_t)))};o();const Zt=await Lt,le=await _t.eth_getCode(Zt.contractAddress,"latest");if(le&&le.length>3)return Zt.contractAddress;throw Object.assign(new Error("The contract code couldn't be stored, please check your gas amount."),{response:le,receipt:Zt})}(this.requestManager,ve),Se=await this.at(Ce);return Se.transactionHash=ve,Se}async at(_t){if(!ht(_t))throw new TypeError(`Invalid address ${JSON.stringify(_t)}`);return new Oe(this.requestManager,this.abi,_t)}},_t.EthBlockFilter=class extends Ae{constructor(_t){super(_t,{})}async getNewFilter(){return this.requestManager.eth_newBlockFilter()}},_t.EthFilter=Ae,_t.EthPendingTransactionFilter=class extends Ae{constructor(_t){super(_t,{})}async getNewFilter(){return this.requestManager.eth_newPendingTransactionFilter()}},_t.HTTPProvider=class{constructor(_t,Ft={}){this.host=_t,this.options=Ft,this.debug=!1,this.host=_t||"http://localhost:8545"}send(){throw new Error("Sync requests are deprecated")}sendAsync(_t,Ft){try{let Lt=null;Lt=_t instanceof Array?_t.map((_t=>e(_t))):e(_t);const Yt=this.options.fetch||globalThis.fetch;if(void 0===Yt)throw new Error("There is no global fetch object nor it was provided. Please install and import isomorphic-fetch");const Kt={body:JSON.stringify(Lt),method:"POST",headers:Object.assign(Object.assign({},this.options.headers),{"Content-Type":"application/json"})};this.debug&&console.log("SEND >> "+Kt.body),Yt(this.host,Kt).then((async _t=>{if(_t.ok){const Lt=await _t.json();this.debug&&console.log("RECV << "+JSON.stringify(Lt)),Lt.error?Ft(Object.assign(new Error(Lt.error.json||Lt.error),Lt.error)):Ft(null,Lt)}else this.debug&&console.log("ERR << "+JSON.stringify(_t)),Ft(new Error("External error. response code: "+_t.status))}),(_t=>{this.debug&&console.log("ERR << "+JSON.stringify(_t)),Ft(_t)}))}catch(_t){this.debug&&console.log("ERR << "+JSON.stringify(_t)),Ft(_t)}}},_t.Method=qt,_t.Property=$t,_t.RequestManager=zt,_t.SHHFilter=class extends Te{constructor(_t,Ft){super(_t),this.requestManager=_t,this.options=Ft,this.options=this.options||{topics:[]},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(_t){return ke(_t)})),this.options={topics:this.options.topics,to:this.options.to}}async getMessages(){const _t=await this.filterId;return this.requestManager.shh_getMessages(_t)}async getNewFilter(){return this.requestManager.shh_newFilter(this.options)}async getChanges(){const _t=await this.filterId;return this.requestManager.shh_getFilterChanges(_t)}async uninstall(){const _t=await this.filterId;return this.requestManager.shh_uninstallFilter(_t)}},_t.SolidityEvent=Ee,_t.SolidityFunction=xe,_t.WebSocketProvider=class{constructor(_t,Ft={}){this.url=_t,this.options=Ft,this.isDisposed=!1,this.responseCallbacks=new Map,this.notificationCallbacks=new Set,this.debug=!1,this.lastChunk="",this.connect()}dispose(){this.isDisposed=!0;const _t=this.connection;this.timeout(new Error("Provider disposed.")),_t.then((_t=>_t.close()))}send(){throw new Error("Sync requests are deprecated")}sendAsync(_t,Ft){const Lt=[];let Kt;if(_t instanceof Array)Kt=Promise.all(_t.map((_t=>{const Ft=Yt();try{const Yt=e(_t);Lt.push(Yt),this.responseCallbacks.set(Yt.id,Ft)}catch(_t){Ft.reject(_t)}return Ft})));else{const Ft=Yt();try{const Yt=e(_t);Lt.push(Yt),this.responseCallbacks.set(Yt.id,Ft)}catch(_t){Ft.reject(_t)}Kt=Ft}Kt.then((_t=>Ft(null,_t)),(_t=>Ft(_t))),this.connection.then((_t=>{Lt.forEach((Ft=>{const Lt=JSON.stringify(Ft);this.debug&&console.log("SEND >> "+Lt),_t.send(Lt)}))}),(_t=>{Ft(_t)}))}parseResponse(_t){let Ft=[];return _t.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((_t=>{let Lt=_t;this.lastChunk&&(Lt=this.lastChunk+Lt);let Yt=null;try{Yt=JSON.parse(Lt)}catch(_t){return this.lastChunk=Lt,clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.timeout()}),15e3))}clearTimeout(this.lastChunkTimeout),this.lastChunk="",Yt&&Ft.push(Yt)})),Ft}processMessage(_t){if("id"in _t){const Ft=_t.id,Lt=this.responseCallbacks.get(Ft);if(!Lt)return void console.error("Error: Received a response for an unknown request",_t);this.responseCallbacks.delete(Ft),"error"in _t?Lt.reject(Object.assign(new Error(_t.error.message||_t.error),_t.error)):"result"in _t&&Lt.resolve(_t)}else this.notificationCallbacks.forEach((Ft=>Ft(null,_t)))}timeout(_t){this.connection&&this.connection.isPending||(this.connection=Yt());const Ft=_t||new Error("Connection timeout");this.responseCallbacks.forEach((_t=>_t.reject(Ft))),this.responseCallbacks.clear(),this.isDisposed||setTimeout((()=>this.connect()),1e3)}connect(){this.connection&&!this.connection.isPending&&this.connection.then((_t=>_t.close())),this.connection&&this.connection.isPending||(this.connection=Yt()),this.lastChunk="";let _t=this.options.WebSocketConstructor||("undefined"!=typeof WebSocket?WebSocket:void 0);if(!_t)throw new Error("Please provide a WebSocketConstructor");const Ft=new _t(this.url,this.options.protocol);Ft.onopen=()=>{this.connection.resolve(Ft)},Ft.onerror=_t=>{const Ft=new Error("Error in web socket");Ft.data=_t,this.timeout(Ft)},Ft.onclose=_t=>{this.timeout(new Error(`Connection closed (${_t&&_t.reason||"Unknown reason"})`))},Ft.onmessage=_t=>{let Ft="string"==typeof _t.data?_t.data:"";this.debug&&console.log("RECV << "+_t.data),this.parseResponse(Ft).forEach((_t=>{_t instanceof Array?_t.forEach((_t=>this.processMessage(_t))):this.processMessage(_t)}))}}},_t.bytesToHex=q,_t.bytesToUtf8String=R,_t.concatBytes=z,_t.default=zt,_t.extractDisplayName=W,_t.extractTypeName=V,_t.fromAscii=function(_t,Ft=0){let Lt="";for(let Ft=0;Ft<_t.length;Ft++){let Yt=_t.charCodeAt(Ft).toString(16);Lt+=Yt.length<2?"0"+Yt:Yt}return"0x"+Lt.padEnd(Ft,"0")},_t.fromDecimal=et,_t.fromTwosComplement=ut,_t.fromWei=function(_t,Ft){let Lt=ot(_t).dividedBy(rt(Ft));return mt(_t)?Lt:Lt.toString(10)},_t.getAddress=ct,_t.getValueOfUnit=rt,_t.hexToBytes=D,_t.isAddress=ht,_t.isArray=bt,_t.isBigNumber=mt,_t.isBloom=function(_t){return!!/^(0x)?[0-9a-f]{512}$/i.test(_t)&&!!/^(0x)?[0-9a-f]{512}$/i.test(_t)},_t.isBoolean=vt,_t.isChecksumAddress=pt,_t.isFunction=function(_t){return"function"==typeof _t},_t.isHex=function(_t){return"string"==typeof _t&&/^0x[0-9a-fA-F]+$/.test(_t)},_t.isJson=function(_t){try{return!!JSON.parse(_t)}catch(_t){return!1}},_t.isObject=wt,_t.isStrictAddress=lt,_t.isString=yt,_t.isTopic=function(_t){return!!/^(0x)?[0-9a-f]{64}$/i.test(_t)&&!!/^(0x)?[0-9a-f]{64}$/i.test(_t)},_t.isValidResponse=xt,_t.padLeft=H,_t.padRight=function(_t,Ft,Lt){return _t+new Array(Ft-_t.length+1).join(Lt||"0")},_t.sha3=$,_t.signedIsNegative=at,_t.stringToUtf8Bytes=M,_t.toAddress=gt,_t.toArray=dt,_t.toAscii=function(_t){let Ft="",Lt=0,Yt=_t.length;for("0x"===_t.substring(0,2)&&(Lt=2);Lt<Yt;Lt+=2){let Yt=parseInt(_t.substr(Lt,2),16);Ft+=String.fromCharCode(Yt)}return Ft},_t.toBatchPayload=function(_t){return _t.map((function(_t){return Nt(_t.method,_t.params)}))},_t.toBigNumber=ot,_t.toBoolean=tt,_t.toChecksumAddress=ft,_t.toData=X,_t.toDecimal=Z,_t.toHex=nt,_t.toJsonRpcRequest=Nt,_t.toNullDecimal=K,_t.toString=Y,_t.toStringData=Q,_t.toTwosComplement=st,_t.toWei=function(_t,Ft){let Lt=ot(_t).times(rt(Ft));return mt(_t)?Lt:Lt.toString(10)},_t.transformToFullName=G,Object.defineProperty(_t,"__esModule",{value:!0})})),define("dcl-access-area",["exports","@decentraland/EthereumController","@decentraland/web3-provider","@decentraland/Identity","@dcl/crypto-scene-utils","@dcl/ecs-scene-utils","@dcl/ui-scene-utils","@decentraland/EnvironmentAPI"],(function(_t,Ft,Lt,Yt,Kt,Zt,le,ve){function c(_t){if(_t&&_t.__esModule)return _t;var Ft=Object.create(null);return _t&&Object.keys(_t).forEach((function(Lt){if("default"!==Lt){var Yt=Object.getOwnPropertyDescriptor(_t,Lt);Object.defineProperty(Ft,Lt,Yt.get?Yt:{enumerable:!0,get:function(){return _t[Lt]}})}})),Ft.default=_t,Object.freeze(Ft)}var Ce=c(Ft),Se=c(Kt),Ie=c(Zt),Ne=c(le),f=function(_t,Ft){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Ft){_t.__proto__=Ft}||function(_t,Ft){for(var Lt in Ft)Object.prototype.hasOwnProperty.call(Ft,Lt)&&(_t[Lt]=Ft[Lt])},f(_t,Ft)};function d(_t,Ft,Lt,Yt){return new(Lt||(Lt=Promise))((function(Kt,Zt){function a(_t){try{c(Yt.next(_t))}catch(_t){Zt(_t)}}function s(_t){try{c(Yt.throw(_t))}catch(_t){Zt(_t)}}function c(_t){var Ft;_t.done?Kt(_t.value):(Ft=_t.value,Ft instanceof Lt?Ft:new Lt((function(_t){_t(Ft)}))).then(a,s)}c((Yt=Yt.apply(_t,Ft||[])).next())}))}function g(_t,Ft){var Lt,Yt,Kt,Zt,le={label:0,sent:function(){if(1&Kt[0])throw Kt[1];return Kt[1]},trys:[],ops:[]};return Zt={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(Zt[Symbol.iterator]=function(){return this}),Zt;function s(Zt){return function(ve){return function(Zt){if(Lt)throw new TypeError("Generator is already executing.");for(;le;)try{if(Lt=1,Yt&&(Kt=2&Zt[0]?Yt.return:Zt[0]?Yt.throw||((Kt=Yt.return)&&Kt.call(Yt),0):Yt.next)&&!(Kt=Kt.call(Yt,Zt[1])).done)return Kt;switch(Yt=0,Kt&&(Zt=[2&Zt[0],Kt.value]),Zt[0]){case 0:case 1:Kt=Zt;break;case 4:return le.label++,{value:Zt[1],done:!1};case 5:le.label++,Yt=Zt[1],Zt=[0];continue;case 7:Zt=le.ops.pop(),le.trys.pop();continue;default:if(!((Kt=(Kt=le.trys).length>0&&Kt[Kt.length-1])||6!==Zt[0]&&2!==Zt[0])){le=0;continue}if(3===Zt[0]&&(!Kt||Zt[1]>Kt[0]&&Zt[1]<Kt[3])){le.label=Zt[1];break}if(6===Zt[0]&&le.label<Kt[1]){le.label=Kt[1],Kt=Zt;break}if(Kt&&le.label<Kt[2]){le.label=Kt[2],le.ops.push(Zt);break}Kt[2]&&le.ops.pop(),le.trys.pop();continue}Zt=Ft.call(_t,le)}catch(_t){Zt=[6,_t],Yt=0}finally{Lt=Kt=0}if(5&Zt[0])throw Zt[1];return{value:Zt[0]?Zt[1]:void 0,done:!0}}([Zt,ve])}}}function m(_t){var Ft="function"==typeof Symbol&&Symbol.iterator,Lt=Ft&&_t[Ft],Yt=0;if(Lt)return Lt.call(_t);if(_t&&"number"==typeof _t.length)return{next:function(){return _t&&Yt>=_t.length&&(_t=void 0),{value:_t&&_t[Yt++],done:!_t}}};throw new TypeError(Ft?"Object is not iterable.":"Symbol.iterator is not defined.")}var Fe={exports:{}};!function(_t,Ft){!function(_t){function e(_t){if(_t.jsonrpc="2.0",!_t.id||"number"!=typeof _t.id||Math.floor(_t.id)!==_t.id)throw new Error(`Invalid RPC message(invalid id) message: ${JSON.stringify(_t)}`);if(!_t.method||"string"!=typeof _t.method||0===_t.method.trim().length)throw new Error(`Invalid RPC message(invalid method) message: ${JSON.stringify(_t)}`);if(!_t.params||"object"!=typeof _t.params)throw new Error(`Invalid RPC message(invalid params) message: ${JSON.stringify(_t)}`);return _t}function n(_t,Ft){return _t(Ft={exports:{}},Ft.exports),Ft.exports}var Ft,Lt=n((function(_t,Ft){function n(){let _t,Ft;const Lt=new Promise(((Yt,Kt)=>{_t=_t=>{Yt(_t),Lt.isPending=!1},Ft=_t=>{Kt(_t),Lt.isPending=!1}})).catch((_t=>Promise.reject(_t)));return Lt.resolve=_t,Lt.reject=Ft,"finally"in Lt||(Lt.finally=_t=>{Lt.then(_t),Lt.catch(_t)}),Lt.isPending=!0,Lt}Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.future=n,Ft.default=n}));(Ft=Lt)&&Ft.__esModule&&Object.prototype.hasOwnProperty.call(Ft,"default")&&Ft.default;var Yt=Lt.future,Kt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function s(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}var Zt=s,le=c;function h(_t){if(Zt===setTimeout)return setTimeout(_t,0);if((Zt===s||!Zt)&&setTimeout)return Zt=setTimeout,setTimeout(_t,0);try{return Zt(_t,0)}catch(Ft){try{return Zt.call(null,_t,0)}catch(Ft){return Zt.call(this,_t,0)}}}"function"==typeof Kt.setTimeout&&(Zt=setTimeout),"function"==typeof Kt.clearTimeout&&(le=clearTimeout);var ve,Ce=[],Se=!1,Ie=-1;function m(){Se&&ve&&(Se=!1,ve.length?Ce=ve.concat(Ce):Ie=-1,Ce.length&&y())}function y(){if(!Se){var _t=h(m);Se=!0;for(var Ft=Ce.length;Ft;){for(ve=Ce,Ce=[];++Ie<Ft;)ve&&ve[Ie].run();Ie=-1,Ft=Ce.length}ve=null,Se=!1,function(_t){if(le===clearTimeout)return clearTimeout(_t);if((le===c||!le)&&clearTimeout)return le=clearTimeout,clearTimeout(_t);try{le(_t)}catch(Ft){try{return le.call(null,_t)}catch(Ft){return le.call(this,_t)}}}(_t)}}function w(_t,Ft){this.fun=_t,this.array=Ft}function v(){}w.prototype.run=function(){this.fun.apply(null,this.array)};var Ne=v,Fe=v,Re=v,Pe=v,Le=v,Ue=v,He=v,qe=Kt.performance||{},We=qe.now||qe.mozNow||qe.msNow||qe.oNow||qe.webkitNow||function(){return(new Date).getTime()},Ge=new Date,Ve={nextTick:function(_t){var Ft=new Array(arguments.length-1);if(arguments.length>1)for(var Lt=1;Lt<arguments.length;Lt++)Ft[Lt-1]=arguments[Lt];Ce.push(new w(_t,Ft)),1!==Ce.length||Se||h(y)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Ne,addListener:Fe,once:Re,off:Pe,removeListener:Le,removeAllListeners:Ue,emit:He,binding:function(_t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(_t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(_t){var Ft=.001*We.call(qe),Lt=Math.floor(Ft),Yt=Math.floor(Ft%1*1e9);return _t&&(Lt-=_t[0],(Yt-=_t[1])<0&&(Lt--,Yt+=1e9)),[Lt,Yt]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Ge)/1e3}},$e=n((function(_t){!function(){var Ft="input is invalid type",Lt="object"==typeof window,Yt=Lt?window:{};Yt.JS_SHA3_NO_WINDOW&&(Lt=!1);var Zt=!Lt&&"object"==typeof self;!Yt.JS_SHA3_NO_NODE_JS&&"object"==typeof Ve&&Ve.versions&&Ve.versions.node?Yt=Kt:Zt&&(Yt=self);var le=!Yt.JS_SHA3_NO_COMMON_JS&&_t.exports,ve=!Yt.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,Ce="0123456789abcdef".split(""),Se=[4,1024,262144,67108864],Ie=[0,8,16,24],Ne=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],Fe=[224,256,384,512],Re=[128,256],Pe=["hex","buffer","arrayBuffer","array","digest"],Le={128:168,256:136};!Yt.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(_t){return"[object Array]"===Object.prototype.toString.call(_t)}),!ve||!Yt.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(_t){return"object"==typeof _t&&_t.buffer&&_t.buffer.constructor===ArrayBuffer});for(var m=function(_t,Ft,Lt){return function(Yt){return new C(_t,Ft,_t).update(Yt)[Lt]()}},y=function(_t,Ft,Lt){return function(Yt,Kt){return new C(_t,Ft,Kt).update(Yt)[Lt]()}},w=function(_t,Ft,Lt){return function(Ft,Yt,Kt,Zt){return He["cshake"+_t].update(Ft,Yt,Kt,Zt)[Lt]()}},v=function(_t,Ft,Lt){return function(Ft,Yt,Kt,Zt){return He["kmac"+_t].update(Ft,Yt,Kt,Zt)[Lt]()}},b=function(_t,Ft,Lt,Yt){for(var Kt=0;Kt<Pe.length;++Kt){var Zt=Pe[Kt];_t[Zt]=Ft(Lt,Yt,Zt)}return _t},_=function(_t,Ft){var Lt=m(_t,Ft,"hex");return Lt.create=function(){return new C(_t,Ft,_t)},Lt.update=function(_t){return Lt.create().update(_t)},b(Lt,m,_t,Ft)},Ue=[{name:"keccak",padding:[1,256,65536,16777216],bits:Fe,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:Fe,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:Re,createMethod:function(_t,Ft){var Lt=y(_t,Ft,"hex");return Lt.create=function(Lt){return new C(_t,Ft,Lt)},Lt.update=function(_t,Ft){return Lt.create(Ft).update(_t)},b(Lt,y,_t,Ft)}},{name:"cshake",padding:Se,bits:Re,createMethod:function(_t,Ft){var Lt=Le[_t],Yt=w(_t,0,"hex");return Yt.create=function(Yt,Kt,Zt){return Kt||Zt?new C(_t,Ft,Yt).bytepad([Kt,Zt],Lt):He["shake"+_t].create(Yt)},Yt.update=function(_t,Ft,Lt,Kt){return Yt.create(Ft,Lt,Kt).update(_t)},b(Yt,w,_t,Ft)}},{name:"kmac",padding:Se,bits:Re,createMethod:function(_t,Ft){var Lt=Le[_t],Yt=v(_t,0,"hex");return Yt.create=function(Yt,Kt,Zt){return new M(_t,Ft,Kt).bytepad(["KMAC",Zt],Lt).bytepad([Yt],Lt)},Yt.update=function(_t,Ft,Lt,Kt){return Yt.create(_t,Lt,Kt).update(Ft)},b(Yt,v,_t,Ft)}}],He={},qe=[],We=0;We<Ue.length;++We)for(var Ge=Ue[We],$e=Ge.bits,Xe=0;Xe<$e.length;++Xe){var Ye=Ge.name+"_"+$e[Xe];if(qe.push(Ye),He[Ye]=Ge.createMethod($e[Xe],Ge.padding),"sha3"!==Ge.name){var Je=Ge.name+$e[Xe];qe.push(Je),He[Je]=He[Ye]}}function C(_t,Ft,Lt){this.blocks=[],this.s=[],this.padding=Ft,this.outputBits=Lt,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(_t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=Lt>>5,this.extraBytes=(31&Lt)>>3;for(var Yt=0;Yt<50;++Yt)this.s[Yt]=0}function M(_t,Ft,Lt){C.call(this,_t,Ft,Lt)}C.prototype.update=function(_t){if(this.finalized)throw new Error("finalize already called");var Lt,Yt=typeof _t;if("string"!==Yt){if("object"!==Yt)throw new Error(Ft);if(null===_t)throw new Error(Ft);if(ve&&_t.constructor===ArrayBuffer)_t=new Uint8Array(_t);else if(!(Array.isArray(_t)||ve&&ArrayBuffer.isView(_t)))throw new Error(Ft);Lt=!0}for(var Kt,Zt,le=this.blocks,Ce=this.byteCount,Se=_t.length,Ne=this.blockCount,Fe=0,Re=this.s;Fe<Se;){if(this.reset)for(this.reset=!1,le[0]=this.block,Kt=1;Kt<Ne+1;++Kt)le[Kt]=0;if(Lt)for(Kt=this.start;Fe<Se&&Kt<Ce;++Fe)le[Kt>>2]|=_t[Fe]<<Ie[3&Kt++];else for(Kt=this.start;Fe<Se&&Kt<Ce;++Fe)(Zt=_t.charCodeAt(Fe))<128?le[Kt>>2]|=Zt<<Ie[3&Kt++]:Zt<2048?(le[Kt>>2]|=(192|Zt>>6)<<Ie[3&Kt++],le[Kt>>2]|=(128|63&Zt)<<Ie[3&Kt++]):Zt<55296||Zt>=57344?(le[Kt>>2]|=(224|Zt>>12)<<Ie[3&Kt++],le[Kt>>2]|=(128|Zt>>6&63)<<Ie[3&Kt++],le[Kt>>2]|=(128|63&Zt)<<Ie[3&Kt++]):(Zt=65536+((1023&Zt)<<10|1023&_t.charCodeAt(++Fe)),le[Kt>>2]|=(240|Zt>>18)<<Ie[3&Kt++],le[Kt>>2]|=(128|Zt>>12&63)<<Ie[3&Kt++],le[Kt>>2]|=(128|Zt>>6&63)<<Ie[3&Kt++],le[Kt>>2]|=(128|63&Zt)<<Ie[3&Kt++]);if(this.lastByteIndex=Kt,Kt>=Ce){for(this.start=Kt-Ce,this.block=le[Ne],Kt=0;Kt<Ne;++Kt)Re[Kt]^=le[Kt];I(Re),this.reset=!0}else this.start=Kt}return this},C.prototype.encode=function(_t,Ft){var Lt=255&_t,Yt=1,Kt=[Lt];for(Lt=255&(_t>>=8);Lt>0;)Kt.unshift(Lt),Lt=255&(_t>>=8),++Yt;return Ft?Kt.push(Yt):Kt.unshift(Yt),this.update(Kt),Kt.length},C.prototype.encodeString=function(_t){var Lt,Yt=typeof _t;if("string"!==Yt){if("object"!==Yt)throw new Error(Ft);if(null===_t)throw new Error(Ft);if(ve&&_t.constructor===ArrayBuffer)_t=new Uint8Array(_t);else if(!(Array.isArray(_t)||ve&&ArrayBuffer.isView(_t)))throw new Error(Ft);Lt=!0}var Kt=0,Zt=_t.length;if(Lt)Kt=Zt;else for(var le=0;le<_t.length;++le){var Ce=_t.charCodeAt(le);Ce<128?Kt+=1:Ce<2048?Kt+=2:Ce<55296||Ce>=57344?Kt+=3:(Ce=65536+((1023&Ce)<<10|1023&_t.charCodeAt(++le)),Kt+=4)}return Kt+=this.encode(8*Kt),this.update(_t),Kt},C.prototype.bytepad=function(_t,Ft){for(var Lt=this.encode(Ft),Yt=0;Yt<_t.length;++Yt)Lt+=this.encodeString(_t[Yt]);var Kt=Ft-Lt%Ft,Zt=[];return Zt.length=Kt,this.update(Zt),this},C.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var _t=this.blocks,Ft=this.lastByteIndex,Lt=this.blockCount,Yt=this.s;if(_t[Ft>>2]|=this.padding[3&Ft],this.lastByteIndex===this.byteCount)for(_t[0]=_t[Lt],Ft=1;Ft<Lt+1;++Ft)_t[Ft]=0;for(_t[Lt-1]|=2147483648,Ft=0;Ft<Lt;++Ft)Yt[Ft]^=_t[Ft];I(Yt)}},C.prototype.toString=C.prototype.hex=function(){this.finalize();for(var _t,Ft=this.blockCount,Lt=this.s,Yt=this.outputBlocks,Kt=this.extraBytes,Zt=0,le=0,ve="";le<Yt;){for(Zt=0;Zt<Ft&&le<Yt;++Zt,++le)_t=Lt[Zt],ve+=Ce[_t>>4&15]+Ce[15&_t]+Ce[_t>>12&15]+Ce[_t>>8&15]+Ce[_t>>20&15]+Ce[_t>>16&15]+Ce[_t>>28&15]+Ce[_t>>24&15];le%Ft==0&&(I(Lt),Zt=0)}return Kt&&(_t=Lt[Zt],ve+=Ce[_t>>4&15]+Ce[15&_t],Kt>1&&(ve+=Ce[_t>>12&15]+Ce[_t>>8&15]),Kt>2&&(ve+=Ce[_t>>20&15]+Ce[_t>>16&15])),ve},C.prototype.arrayBuffer=function(){this.finalize();var _t,Ft=this.blockCount,Lt=this.s,Yt=this.outputBlocks,Kt=this.extraBytes,Zt=0,le=0,ve=this.outputBits>>3;_t=Kt?new ArrayBuffer(Yt+1<<2):new ArrayBuffer(ve);for(var Ce=new Uint32Array(_t);le<Yt;){for(Zt=0;Zt<Ft&&le<Yt;++Zt,++le)Ce[le]=Lt[Zt];le%Ft==0&&I(Lt)}return Kt&&(Ce[Zt]=Lt[Zt],_t=_t.slice(0,ve)),_t},C.prototype.buffer=C.prototype.arrayBuffer,C.prototype.digest=C.prototype.array=function(){this.finalize();for(var _t,Ft,Lt=this.blockCount,Yt=this.s,Kt=this.outputBlocks,Zt=this.extraBytes,le=0,ve=0,Ce=[];ve<Kt;){for(le=0;le<Lt&&ve<Kt;++le,++ve)_t=ve<<2,Ft=Yt[le],Ce[_t]=255&Ft,Ce[_t+1]=Ft>>8&255,Ce[_t+2]=Ft>>16&255,Ce[_t+3]=Ft>>24&255;ve%Lt==0&&I(Yt)}return Zt&&(_t=ve<<2,Ft=Yt[le],Ce[_t]=255&Ft,Zt>1&&(Ce[_t+1]=Ft>>8&255),Zt>2&&(Ce[_t+2]=Ft>>16&255)),Ce},M.prototype=new C,M.prototype.finalize=function(){return this.encode(this.outputBits,!0),C.prototype.finalize.call(this)};var I=function(_t){var Ft,Lt,Yt,Kt,Zt,le,ve,Ce,Se,Ie,Fe,Re,Pe,Le,Ue,He,qe,We,Ge,Ve,$e,Xe,Ye,Je,Qe,Ze,tn,nn,rn,on,sn,an,cn,un,ln,dn,hn,pn,fn,mn,yn,gn,bn,vn,wn,Tn,xn,An,Cn,_n,Sn,En,kn,In,Nn,Bn,Fn,On,Rn,Pn,Mn,Ln,zn;for(Yt=0;Yt<48;Yt+=2)Kt=_t[0]^_t[10]^_t[20]^_t[30]^_t[40],Zt=_t[1]^_t[11]^_t[21]^_t[31]^_t[41],le=_t[2]^_t[12]^_t[22]^_t[32]^_t[42],ve=_t[3]^_t[13]^_t[23]^_t[33]^_t[43],Ce=_t[4]^_t[14]^_t[24]^_t[34]^_t[44],Se=_t[5]^_t[15]^_t[25]^_t[35]^_t[45],Ie=_t[6]^_t[16]^_t[26]^_t[36]^_t[46],Fe=_t[7]^_t[17]^_t[27]^_t[37]^_t[47],Ft=(Re=_t[8]^_t[18]^_t[28]^_t[38]^_t[48])^(le<<1|ve>>>31),Lt=(Pe=_t[9]^_t[19]^_t[29]^_t[39]^_t[49])^(ve<<1|le>>>31),_t[0]^=Ft,_t[1]^=Lt,_t[10]^=Ft,_t[11]^=Lt,_t[20]^=Ft,_t[21]^=Lt,_t[30]^=Ft,_t[31]^=Lt,_t[40]^=Ft,_t[41]^=Lt,Ft=Kt^(Ce<<1|Se>>>31),Lt=Zt^(Se<<1|Ce>>>31),_t[2]^=Ft,_t[3]^=Lt,_t[12]^=Ft,_t[13]^=Lt,_t[22]^=Ft,_t[23]^=Lt,_t[32]^=Ft,_t[33]^=Lt,_t[42]^=Ft,_t[43]^=Lt,Ft=le^(Ie<<1|Fe>>>31),Lt=ve^(Fe<<1|Ie>>>31),_t[4]^=Ft,_t[5]^=Lt,_t[14]^=Ft,_t[15]^=Lt,_t[24]^=Ft,_t[25]^=Lt,_t[34]^=Ft,_t[35]^=Lt,_t[44]^=Ft,_t[45]^=Lt,Ft=Ce^(Re<<1|Pe>>>31),Lt=Se^(Pe<<1|Re>>>31),_t[6]^=Ft,_t[7]^=Lt,_t[16]^=Ft,_t[17]^=Lt,_t[26]^=Ft,_t[27]^=Lt,_t[36]^=Ft,_t[37]^=Lt,_t[46]^=Ft,_t[47]^=Lt,Ft=Ie^(Kt<<1|Zt>>>31),Lt=Fe^(Zt<<1|Kt>>>31),_t[8]^=Ft,_t[9]^=Lt,_t[18]^=Ft,_t[19]^=Lt,_t[28]^=Ft,_t[29]^=Lt,_t[38]^=Ft,_t[39]^=Lt,_t[48]^=Ft,_t[49]^=Lt,Le=_t[0],Ue=_t[1],Tn=_t[11]<<4|_t[10]>>>28,xn=_t[10]<<4|_t[11]>>>28,nn=_t[20]<<3|_t[21]>>>29,rn=_t[21]<<3|_t[20]>>>29,Pn=_t[31]<<9|_t[30]>>>23,Mn=_t[30]<<9|_t[31]>>>23,gn=_t[40]<<18|_t[41]>>>14,bn=_t[41]<<18|_t[40]>>>14,un=_t[2]<<1|_t[3]>>>31,ln=_t[3]<<1|_t[2]>>>31,He=_t[13]<<12|_t[12]>>>20,qe=_t[12]<<12|_t[13]>>>20,An=_t[22]<<10|_t[23]>>>22,Cn=_t[23]<<10|_t[22]>>>22,on=_t[33]<<13|_t[32]>>>19,sn=_t[32]<<13|_t[33]>>>19,Ln=_t[42]<<2|_t[43]>>>30,zn=_t[43]<<2|_t[42]>>>30,In=_t[5]<<30|_t[4]>>>2,Nn=_t[4]<<30|_t[5]>>>2,dn=_t[14]<<6|_t[15]>>>26,hn=_t[15]<<6|_t[14]>>>26,We=_t[25]<<11|_t[24]>>>21,Ge=_t[24]<<11|_t[25]>>>21,_n=_t[34]<<15|_t[35]>>>17,Sn=_t[35]<<15|_t[34]>>>17,an=_t[45]<<29|_t[44]>>>3,cn=_t[44]<<29|_t[45]>>>3,Je=_t[6]<<28|_t[7]>>>4,Qe=_t[7]<<28|_t[6]>>>4,Bn=_t[17]<<23|_t[16]>>>9,Fn=_t[16]<<23|_t[17]>>>9,pn=_t[26]<<25|_t[27]>>>7,fn=_t[27]<<25|_t[26]>>>7,Ve=_t[36]<<21|_t[37]>>>11,$e=_t[37]<<21|_t[36]>>>11,En=_t[47]<<24|_t[46]>>>8,kn=_t[46]<<24|_t[47]>>>8,vn=_t[8]<<27|_t[9]>>>5,wn=_t[9]<<27|_t[8]>>>5,Ze=_t[18]<<20|_t[19]>>>12,tn=_t[19]<<20|_t[18]>>>12,On=_t[29]<<7|_t[28]>>>25,Rn=_t[28]<<7|_t[29]>>>25,mn=_t[38]<<8|_t[39]>>>24,yn=_t[39]<<8|_t[38]>>>24,Xe=_t[48]<<14|_t[49]>>>18,Ye=_t[49]<<14|_t[48]>>>18,_t[0]=Le^~He&We,_t[1]=Ue^~qe&Ge,_t[10]=Je^~Ze&nn,_t[11]=Qe^~tn&rn,_t[20]=un^~dn&pn,_t[21]=ln^~hn&fn,_t[30]=vn^~Tn&An,_t[31]=wn^~xn&Cn,_t[40]=In^~Bn&On,_t[41]=Nn^~Fn&Rn,_t[2]=He^~We&Ve,_t[3]=qe^~Ge&$e,_t[12]=Ze^~nn&on,_t[13]=tn^~rn&sn,_t[22]=dn^~pn&mn,_t[23]=hn^~fn&yn,_t[32]=Tn^~An&_n,_t[33]=xn^~Cn&Sn,_t[42]=Bn^~On&Pn,_t[43]=Fn^~Rn&Mn,_t[4]=We^~Ve&Xe,_t[5]=Ge^~$e&Ye,_t[14]=nn^~on&an,_t[15]=rn^~sn&cn,_t[24]=pn^~mn&gn,_t[25]=fn^~yn&bn,_t[34]=An^~_n&En,_t[35]=Cn^~Sn&kn,_t[44]=On^~Pn&Ln,_t[45]=Rn^~Mn&zn,_t[6]=Ve^~Xe&Le,_t[7]=$e^~Ye&Ue,_t[16]=on^~an&Je,_t[17]=sn^~cn&Qe,_t[26]=mn^~gn&un,_t[27]=yn^~bn&ln,_t[36]=_n^~En&vn,_t[37]=Sn^~kn&wn,_t[46]=Pn^~Ln&In,_t[47]=Mn^~zn&Nn,_t[8]=Xe^~Le&He,_t[9]=Ye^~Ue&qe,_t[18]=an^~Je&Ze,_t[19]=cn^~Qe&tn,_t[28]=gn^~un&dn,_t[29]=bn^~ln&hn,_t[38]=En^~vn&Tn,_t[39]=kn^~wn&xn,_t[48]=Ln^~In&Bn,_t[49]=zn^~Nn&Fn,_t[0]^=Ne[Yt],_t[1]^=Ne[Yt+1]};if(le)_t.exports=He;else for(We=0;We<qe.length;++We)Yt[qe[We]]=He[qe[We]]}()}));$e.keccak_224,$e.keccak224,$e.keccak_256;var Xe=$e.keccak256;$e.keccak_384,$e.keccak384,$e.keccak_512,$e.keccak512,$e.sha3_224,$e.sha3_256,$e.sha3_384,$e.sha3_512,$e.shake_128,$e.shake128,$e.shake_256,$e.shake256,$e.cshake_128,$e.cshake128,$e.cshake_256,$e.cshake256,$e.kmac_128,$e.kmac128,$e.kmac_256,$e.kmac256;var Ye=n((function(_t){!function(Ft){var Lt,Yt=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Kt=Math.ceil,Zt=Math.floor,le="[BigNumber Error] ",ve=le+"Number primitive has more than 15 significant digits: ",Ce=1e14,Se=14,Ie=9007199254740991,Ne=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Fe=1e7,Re=1e9;function d(_t){var Ft=0|_t;return _t>0||_t===Ft?Ft:Ft-1}function g(_t){for(var Ft,Lt,Yt=1,Kt=_t.length,Zt=_t[0]+"";Yt<Kt;){for(Ft=_t[Yt++]+"",Lt=Se-Ft.length;Lt--;Ft="0"+Ft);Zt+=Ft}for(Kt=Zt.length;48===Zt.charCodeAt(--Kt););return Zt.slice(0,Kt+1||1)}function m(_t,Ft){var Lt,Yt,Kt=_t.c,Zt=Ft.c,le=_t.s,ve=Ft.s,Ce=_t.e,Se=Ft.e;if(!le||!ve)return null;if(Lt=Kt&&!Kt[0],Yt=Zt&&!Zt[0],Lt||Yt)return Lt?Yt?0:-ve:le;if(le!=ve)return le;if(Lt=le<0,Yt=Ce==Se,!Kt||!Zt)return Yt?0:!Kt^Lt?1:-1;if(!Yt)return Ce>Se^Lt?1:-1;for(ve=(Ce=Kt.length)<(Se=Zt.length)?Ce:Se,le=0;le<ve;le++)if(Kt[le]!=Zt[le])return Kt[le]>Zt[le]^Lt?1:-1;return Ce==Se?0:Ce>Se^Lt?1:-1}function y(_t,Ft,Lt,Yt){if(_t<Ft||_t>Lt||_t!==Zt(_t))throw Error(le+(Yt||"Argument")+("number"==typeof _t?_t<Ft||_t>Lt?" out of range: ":" not an integer: ":" not a primitive number: ")+String(_t))}function w(_t){var Ft=_t.c.length-1;return d(_t.e/Se)==Ft&&_t.c[Ft]%2!=0}function v(_t,Ft){return(_t.length>1?_t.charAt(0)+"."+_t.slice(1):_t)+(Ft<0?"e":"e+")+Ft}function b(_t,Ft,Lt){var Yt,Kt;if(Ft<0){for(Kt=Lt+".";++Ft;Kt+=Lt);_t=Kt+_t}else if(++Ft>(Yt=_t.length)){for(Kt=Lt,Ft-=Yt;--Ft;Kt+=Lt);_t+=Kt}else Ft<Yt&&(_t=_t.slice(0,Ft)+"."+_t.slice(Ft));return _t}(Lt=function t(_t){var Ft,Lt,Pe,Le,Ue,He,qe,We,Ge,Ve,$e=$.prototype={constructor:$,toString:null,valueOf:null},Xe=new $(1),Ye=20,Je=4,Qe=-7,Ze=21,tn=-1e7,nn=1e7,rn=!1,on=1,sn=0,an={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},cn="0123456789abcdefghijklmnopqrstuvwxyz";function $(_t,Ft){var Kt,le,Ce,Ne,Fe,Re,Le,Ue,He=this;if(!(He instanceof $))return new $(_t,Ft);if(null==Ft){if(_t&&!0===_t._isBigNumber)return He.s=_t.s,void(!_t.c||_t.e>nn?He.c=He.e=null:_t.e<tn?He.c=[He.e=0]:(He.e=_t.e,He.c=_t.c.slice()));if((Re="number"==typeof _t)&&0*_t==0){if(He.s=1/_t<0?(_t=-_t,-1):1,_t===~~_t){for(Ne=0,Fe=_t;Fe>=10;Fe/=10,Ne++);return void(Ne>nn?He.c=He.e=null:(He.e=Ne,He.c=[_t]))}Ue=String(_t)}else{if(!Yt.test(Ue=String(_t)))return Pe(He,Ue,Re);He.s=45==Ue.charCodeAt(0)?(Ue=Ue.slice(1),-1):1}(Ne=Ue.indexOf("."))>-1&&(Ue=Ue.replace(".","")),(Fe=Ue.search(/e/i))>0?(Ne<0&&(Ne=Fe),Ne+=+Ue.slice(Fe+1),Ue=Ue.substring(0,Fe)):Ne<0&&(Ne=Ue.length)}else{if(y(Ft,2,cn.length,"Base"),10==Ft)return J(He=new $(_t),Ye+He.e+1,Je);if(Ue=String(_t),Re="number"==typeof _t){if(0*_t!=0)return Pe(He,Ue,Re,Ft);if(He.s=1/_t<0?(Ue=Ue.slice(1),-1):1,$.DEBUG&&Ue.replace(/^0\.0*|\./,"").length>15)throw Error(ve+_t)}else He.s=45===Ue.charCodeAt(0)?(Ue=Ue.slice(1),-1):1;for(Kt=cn.slice(0,Ft),Ne=Fe=0,Le=Ue.length;Fe<Le;Fe++)if(Kt.indexOf(le=Ue.charAt(Fe))<0){if("."==le){if(Fe>Ne){Ne=Le;continue}}else if(!Ce&&(Ue==Ue.toUpperCase()&&(Ue=Ue.toLowerCase())||Ue==Ue.toLowerCase()&&(Ue=Ue.toUpperCase()))){Ce=!0,Fe=-1,Ne=0;continue}return Pe(He,String(_t),Re,Ft)}Re=!1,(Ne=(Ue=Lt(Ue,Ft,10,He.s)).indexOf("."))>-1?Ue=Ue.replace(".",""):Ne=Ue.length}for(Fe=0;48===Ue.charCodeAt(Fe);Fe++);for(Le=Ue.length;48===Ue.charCodeAt(--Le););if(Ue=Ue.slice(Fe,++Le)){if(Le-=Fe,Re&&$.DEBUG&&Le>15&&(_t>Ie||_t!==Zt(_t)))throw Error(ve+He.s*_t);if((Ne=Ne-Fe-1)>nn)He.c=He.e=null;else if(Ne<tn)He.c=[He.e=0];else{if(He.e=Ne,He.c=[],Fe=(Ne+1)%Se,Ne<0&&(Fe+=Se),Fe<Le){for(Fe&&He.c.push(+Ue.slice(0,Fe)),Le-=Se;Fe<Le;)He.c.push(+Ue.slice(Fe,Fe+=Se));Fe=Se-(Ue=Ue.slice(Fe)).length}else Fe-=Le;for(;Fe--;Ue+="0");He.c.push(+Ue)}}else He.c=[He.e=0]}function G(_t,Ft,Lt,Yt){var Kt,Zt,le,ve,Ce;if(null==Lt?Lt=Je:y(Lt,0,8),!_t.c)return _t.toString();if(Kt=_t.c[0],le=_t.e,null==Ft)Ce=g(_t.c),Ce=1==Yt||2==Yt&&(le<=Qe||le>=Ze)?v(Ce,le):b(Ce,le,"0");else if(Zt=(_t=J(new $(_t),Ft,Lt)).e,ve=(Ce=g(_t.c)).length,1==Yt||2==Yt&&(Ft<=Zt||Zt<=Qe)){for(;ve<Ft;Ce+="0",ve++);Ce=v(Ce,Zt)}else if(Ft-=le,Ce=b(Ce,Zt,"0"),Zt+1>ve){if(--Ft>0)for(Ce+=".";Ft--;Ce+="0");}else if((Ft+=Zt-ve)>0)for(Zt+1==ve&&(Ce+=".");Ft--;Ce+="0");return _t.s<0&&Kt?"-"+Ce:Ce}function z(_t,Ft){for(var Lt,Yt=1,Kt=new $(_t[0]);Yt<_t.length;Yt++){if(!(Lt=new $(_t[Yt])).s){Kt=Lt;break}Ft.call(Kt,Lt)&&(Kt=Lt)}return Kt}function W(_t,Ft,Lt){for(var Yt=1,Kt=Ft.length;!Ft[--Kt];Ft.pop());for(Kt=Ft[0];Kt>=10;Kt/=10,Yt++);return(Lt=Yt+Lt*Se-1)>nn?_t.c=_t.e=null:Lt<tn?_t.c=[_t.e=0]:(_t.e=Lt,_t.c=Ft),_t}function J(_t,Ft,Lt,Yt){var le,ve,Ie,Fe,Re,Pe,Le,Ue=_t.c,He=Ne;if(Ue){t:{for(le=1,Fe=Ue[0];Fe>=10;Fe/=10,le++);if((ve=Ft-le)<0)ve+=Se,Ie=Ft,Le=(Re=Ue[Pe=0])/He[le-Ie-1]%10|0;else if((Pe=Kt((ve+1)/Se))>=Ue.length){if(!Yt)break t;for(;Ue.length<=Pe;Ue.push(0));Re=Le=0,le=1,Ie=(ve%=Se)-Se+1}else{for(Re=Fe=Ue[Pe],le=1;Fe>=10;Fe/=10,le++);Le=(Ie=(ve%=Se)-Se+le)<0?0:Re/He[le-Ie-1]%10|0}if(Yt=Yt||Ft<0||null!=Ue[Pe+1]||(Ie<0?Re:Re%He[le-Ie-1]),Yt=Lt<4?(Le||Yt)&&(0==Lt||Lt==(_t.s<0?3:2)):Le>5||5==Le&&(4==Lt||Yt||6==Lt&&(ve>0?Ie>0?Re/He[le-Ie]:0:Ue[Pe-1])%10&1||Lt==(_t.s<0?8:7)),Ft<1||!Ue[0])return Ue.length=0,Yt?(Ft-=_t.e+1,Ue[0]=He[(Se-Ft%Se)%Se],_t.e=-Ft||0):Ue[0]=_t.e=0,_t;if(0==ve?(Ue.length=Pe,Fe=1,Pe--):(Ue.length=Pe+1,Fe=He[Se-ve],Ue[Pe]=Ie>0?Zt(Re/He[le-Ie]%He[Ie])*Fe:0),Yt)for(;;){if(0==Pe){for(ve=1,Ie=Ue[0];Ie>=10;Ie/=10,ve++);for(Ie=Ue[0]+=Fe,Fe=1;Ie>=10;Ie/=10,Fe++);ve!=Fe&&(_t.e++,Ue[0]==Ce&&(Ue[0]=1));break}if(Ue[Pe]+=Fe,Ue[Pe]!=Ce)break;Ue[Pe--]=0,Fe=1}for(ve=Ue.length;0===Ue[--ve];Ue.pop());}_t.e>nn?_t.c=_t.e=null:_t.e<tn&&(_t.c=[_t.e=0])}return _t}function V(_t){var Ft,Lt=_t.e;return null===Lt?_t.toString():(Ft=g(_t.c),Ft=Lt<=Qe||Lt>=Ze?v(Ft,Lt):b(Ft,Lt,"0"),_t.s<0?"-"+Ft:Ft)}return $.clone=t,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(_t){var Ft,Lt;if(null!=_t){if("object"!=typeof _t)throw Error(le+"Object expected: "+_t);if(_t.hasOwnProperty(Ft="DECIMAL_PLACES")&&(y(Lt=_t[Ft],0,Re,Ft),Ye=Lt),_t.hasOwnProperty(Ft="ROUNDING_MODE")&&(y(Lt=_t[Ft],0,8,Ft),Je=Lt),_t.hasOwnProperty(Ft="EXPONENTIAL_AT")&&((Lt=_t[Ft])&&Lt.pop?(y(Lt[0],-Re,0,Ft),y(Lt[1],0,Re,Ft),Qe=Lt[0],Ze=Lt[1]):(y(Lt,-Re,Re,Ft),Qe=-(Ze=Lt<0?-Lt:Lt))),_t.hasOwnProperty(Ft="RANGE"))if((Lt=_t[Ft])&&Lt.pop)y(Lt[0],-Re,-1,Ft),y(Lt[1],1,Re,Ft),tn=Lt[0],nn=Lt[1];else{if(y(Lt,-Re,Re,Ft),!Lt)throw Error(le+Ft+" cannot be zero: "+Lt);tn=-(nn=Lt<0?-Lt:Lt)}if(_t.hasOwnProperty(Ft="CRYPTO")){if((Lt=_t[Ft])!==!!Lt)throw Error(le+Ft+" not true or false: "+Lt);if(Lt){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw rn=!Lt,Error(le+"crypto unavailable");rn=Lt}else rn=Lt}if(_t.hasOwnProperty(Ft="MODULO_MODE")&&(y(Lt=_t[Ft],0,9,Ft),on=Lt),_t.hasOwnProperty(Ft="POW_PRECISION")&&(y(Lt=_t[Ft],0,Re,Ft),sn=Lt),_t.hasOwnProperty(Ft="FORMAT")){if("object"!=typeof(Lt=_t[Ft]))throw Error(le+Ft+" not an object: "+Lt);an=Lt}if(_t.hasOwnProperty(Ft="ALPHABET")){if("string"!=typeof(Lt=_t[Ft])||/^.?$|[+\-.\s]|(.).*\1/.test(Lt))throw Error(le+Ft+" invalid: "+Lt);cn=Lt}}return{DECIMAL_PLACES:Ye,ROUNDING_MODE:Je,EXPONENTIAL_AT:[Qe,Ze],RANGE:[tn,nn],CRYPTO:rn,MODULO_MODE:on,POW_PRECISION:sn,FORMAT:an,ALPHABET:cn}},$.isBigNumber=function(_t){if(!_t||!0!==_t._isBigNumber)return!1;if(!$.DEBUG)return!0;var Ft,Lt,Yt=_t.c,Kt=_t.e,ve=_t.s;t:if("[object Array]"=={}.toString.call(Yt)){if((1===ve||-1===ve)&&Kt>=-Re&&Kt<=Re&&Kt===Zt(Kt)){if(0===Yt[0]){if(0===Kt&&1===Yt.length)return!0;break t}if((Ft=(Kt+1)%Se)<1&&(Ft+=Se),String(Yt[0]).length==Ft){for(Ft=0;Ft<Yt.length;Ft++)if((Lt=Yt[Ft])<0||Lt>=Ce||Lt!==Zt(Lt))break t;if(0!==Lt)return!0}}}else if(null===Yt&&null===Kt&&(null===ve||1===ve||-1===ve))return!0;throw Error(le+"Invalid BigNumber: "+_t)},$.maximum=$.max=function(){return z(arguments,$e.lt)},$.minimum=$.min=function(){return z(arguments,$e.gt)},$.random=(Le=9007199254740992,Ue=Math.random()*Le&2097151?function(){return Zt(Math.random()*Le)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(_t){var Ft,Lt,Yt,ve,Ce,Ie=0,Fe=[],Pe=new $(Xe);if(null==_t?_t=Ye:y(_t,0,Re),ve=Kt(_t/Se),rn)if(crypto.getRandomValues){for(Ft=crypto.getRandomValues(new Uint32Array(ve*=2));Ie<ve;)(Ce=131072*Ft[Ie]+(Ft[Ie+1]>>>11))>=9e15?(Lt=crypto.getRandomValues(new Uint32Array(2)),Ft[Ie]=Lt[0],Ft[Ie+1]=Lt[1]):(Fe.push(Ce%1e14),Ie+=2);Ie=ve/2}else{if(!crypto.randomBytes)throw rn=!1,Error(le+"crypto unavailable");for(Ft=crypto.randomBytes(ve*=7);Ie<ve;)(Ce=281474976710656*(31&Ft[Ie])+1099511627776*Ft[Ie+1]+4294967296*Ft[Ie+2]+16777216*Ft[Ie+3]+(Ft[Ie+4]<<16)+(Ft[Ie+5]<<8)+Ft[Ie+6])>=9e15?crypto.randomBytes(7).copy(Ft,Ie):(Fe.push(Ce%1e14),Ie+=7);Ie=ve/7}if(!rn)for(;Ie<ve;)(Ce=Ue())<9e15&&(Fe[Ie++]=Ce%1e14);for(ve=Fe[--Ie],_t%=Se,ve&&_t&&(Ce=Ne[Se-_t],Fe[Ie]=Zt(ve/Ce)*Ce);0===Fe[Ie];Fe.pop(),Ie--);if(Ie<0)Fe=[Yt=0];else{for(Yt=-1;0===Fe[0];Fe.splice(0,1),Yt-=Se);for(Ie=1,Ce=Fe[0];Ce>=10;Ce/=10,Ie++);Ie<Se&&(Yt-=Se-Ie)}return Pe.e=Yt,Pe.c=Fe,Pe}),$.sum=function(){for(var _t=1,Ft=arguments,Lt=new $(Ft[0]);_t<Ft.length;)Lt=Lt.plus(Ft[_t++]);return Lt},Lt=function(){var _t="0123456789";function e(_t,Ft,Lt,Yt){for(var Kt,Zt,le=[0],ve=0,Ce=_t.length;ve<Ce;){for(Zt=le.length;Zt--;le[Zt]*=Ft);for(le[0]+=Yt.indexOf(_t.charAt(ve++)),Kt=0;Kt<le.length;Kt++)le[Kt]>Lt-1&&(null==le[Kt+1]&&(le[Kt+1]=0),le[Kt+1]+=le[Kt]/Lt|0,le[Kt]%=Lt)}return le.reverse()}return function(Lt,Yt,Kt,Zt,le){var ve,Ce,Se,Ie,Ne,Fe,Re,Pe,Le=Lt.indexOf("."),Ue=Ye,He=Je;for(Le>=0&&(Ie=sn,sn=0,Lt=Lt.replace(".",""),Fe=(Pe=new $(Yt)).pow(Lt.length-Le),sn=Ie,Pe.c=e(b(g(Fe.c),Fe.e,"0"),10,Kt,_t),Pe.e=Pe.c.length),Se=Ie=(Re=e(Lt,Yt,Kt,le?(ve=cn,_t):(ve=_t,cn))).length;0==Re[--Ie];Re.pop());if(!Re[0])return ve.charAt(0);if(Le<0?--Se:(Fe.c=Re,Fe.e=Se,Fe.s=Zt,Re=(Fe=Ft(Fe,Pe,Ue,He,Kt)).c,Ne=Fe.r,Se=Fe.e),Le=Re[Ce=Se+Ue+1],Ie=Kt/2,Ne=Ne||Ce<0||null!=Re[Ce+1],Ne=He<4?(null!=Le||Ne)&&(0==He||He==(Fe.s<0?3:2)):Le>Ie||Le==Ie&&(4==He||Ne||6==He&&1&Re[Ce-1]||He==(Fe.s<0?8:7)),Ce<1||!Re[0])Lt=Ne?b(ve.charAt(1),-Ue,ve.charAt(0)):ve.charAt(0);else{if(Re.length=Ce,Ne)for(--Kt;++Re[--Ce]>Kt;)Re[Ce]=0,Ce||(++Se,Re=[1].concat(Re));for(Ie=Re.length;!Re[--Ie];);for(Le=0,Lt="";Le<=Ie;Lt+=ve.charAt(Re[Le++]));Lt=b(Lt,Se,ve.charAt(0))}return Lt}}(),Ft=function(){function t(_t,Ft,Lt){var Yt,Kt,Zt,le,ve=0,Ce=_t.length,Se=Ft%Fe,Ie=Ft/Fe|0;for(_t=_t.slice();Ce--;)ve=((Kt=Se*(Zt=_t[Ce]%Fe)+(Yt=Ie*Zt+(le=_t[Ce]/Fe|0)*Se)%Fe*Fe+ve)/Lt|0)+(Yt/Fe|0)+Ie*le,_t[Ce]=Kt%Lt;return ve&&(_t=[ve].concat(_t)),_t}function e(_t,Ft,Lt,Yt){var Kt,Zt;if(Lt!=Yt)Zt=Lt>Yt?1:-1;else for(Kt=Zt=0;Kt<Lt;Kt++)if(_t[Kt]!=Ft[Kt]){Zt=_t[Kt]>Ft[Kt]?1:-1;break}return Zt}function n(_t,Ft,Lt,Yt){for(var Kt=0;Lt--;)_t[Lt]-=Kt,Kt=_t[Lt]<Ft[Lt]?1:0,_t[Lt]=Kt*Yt+_t[Lt]-Ft[Lt];for(;!_t[0]&&_t.length>1;_t.splice(0,1));}return function(_t,Ft,Lt,Yt,Kt){var le,ve,Ie,Ne,Fe,Re,Pe,Le,Ue,He,qe,We,Ge,Ve,$e,Xe,Ye,Je=_t.s==Ft.s?1:-1,Qe=_t.c,Ze=Ft.c;if(!(Qe&&Qe[0]&&Ze&&Ze[0]))return new $(_t.s&&Ft.s&&(Qe?!Ze||Qe[0]!=Ze[0]:Ze)?Qe&&0==Qe[0]||!Ze?0*Je:Je/0:NaN);for(Ue=(Le=new $(Je)).c=[],Je=Lt+(ve=_t.e-Ft.e)+1,Kt||(Kt=Ce,ve=d(_t.e/Se)-d(Ft.e/Se),Je=Je/Se|0),Ie=0;Ze[Ie]==(Qe[Ie]||0);Ie++);if(Ze[Ie]>(Qe[Ie]||0)&&ve--,Je<0)Ue.push(1),Ne=!0;else{for(Ve=Qe.length,Xe=Ze.length,Ie=0,Je+=2,(Fe=Zt(Kt/(Ze[0]+1)))>1&&(Ze=t(Ze,Fe,Kt),Qe=t(Qe,Fe,Kt),Xe=Ze.length,Ve=Qe.length),Ge=Xe,qe=(He=Qe.slice(0,Xe)).length;qe<Xe;He[qe++]=0);Ye=Ze.slice(),Ye=[0].concat(Ye),$e=Ze[0],Ze[1]>=Kt/2&&$e++;do{if(Fe=0,(le=e(Ze,He,Xe,qe))<0){if(We=He[0],Xe!=qe&&(We=We*Kt+(He[1]||0)),(Fe=Zt(We/$e))>1)for(Fe>=Kt&&(Fe=Kt-1),Pe=(Re=t(Ze,Fe,Kt)).length,qe=He.length;1==e(Re,He,Pe,qe);)Fe--,n(Re,Xe<Pe?Ye:Ze,Pe,Kt),Pe=Re.length,le=1;else 0==Fe&&(le=Fe=1),Pe=(Re=Ze.slice()).length;if(Pe<qe&&(Re=[0].concat(Re)),n(He,Re,qe,Kt),qe=He.length,-1==le)for(;e(Ze,He,Xe,qe)<1;)Fe++,n(He,Xe<qe?Ye:Ze,qe,Kt),qe=He.length}else 0===le&&(Fe++,He=[0]);Ue[Ie++]=Fe,He[0]?He[qe++]=Qe[Ge]||0:(He=[Qe[Ge]],qe=1)}while((Ge++<Ve||null!=He[0])&&Je--);Ne=null!=He[0],Ue[0]||Ue.splice(0,1)}if(Kt==Ce){for(Ie=1,Je=Ue[0];Je>=10;Je/=10,Ie++);J(Le,Lt+(Le.e=Ie+ve*Se-1)+1,Yt,Ne)}else Le.e=ve,Le.r=+Ne;return Le}}(),He=/^(-?)0([xbo])(?=\w[\w.]*$)/i,qe=/^([^.]+)\.$/,We=/^\.([^.]+)$/,Ge=/^-?(Infinity|NaN)$/,Ve=/^\s*\+(?=[\w.])|^\s+|\s+$/g,Pe=function(_t,Ft,Lt,Yt){var Kt,Zt=Lt?Ft:Ft.replace(Ve,"");if(Ge.test(Zt))_t.s=isNaN(Zt)?null:Zt<0?-1:1;else{if(!Lt&&(Zt=Zt.replace(He,(function(_t,Ft,Lt){return Kt="x"==(Lt=Lt.toLowerCase())?16:"b"==Lt?2:8,Yt&&Yt!=Kt?_t:Ft})),Yt&&(Kt=Yt,Zt=Zt.replace(qe,"$1").replace(We,"0.$1")),Ft!=Zt))return new $(Zt,Kt);if($.DEBUG)throw Error(le+"Not a"+(Yt?" base "+Yt:"")+" number: "+Ft);_t.s=null}_t.c=_t.e=null},$e.absoluteValue=$e.abs=function(){var _t=new $(this);return _t.s<0&&(_t.s=1),_t},$e.comparedTo=function(_t,Ft){return m(this,new $(_t,Ft))},$e.decimalPlaces=$e.dp=function(_t,Ft){var Lt,Yt,Kt,Zt=this;if(null!=_t)return y(_t,0,Re),null==Ft?Ft=Je:y(Ft,0,8),J(new $(Zt),_t+Zt.e+1,Ft);if(!(Lt=Zt.c))return null;if(Yt=((Kt=Lt.length-1)-d(this.e/Se))*Se,Kt=Lt[Kt])for(;Kt%10==0;Kt/=10,Yt--);return Yt<0&&(Yt=0),Yt},$e.dividedBy=$e.div=function(_t,Lt){return Ft(this,new $(_t,Lt),Ye,Je)},$e.dividedToIntegerBy=$e.idiv=function(_t,Lt){return Ft(this,new $(_t,Lt),0,1)},$e.exponentiatedBy=$e.pow=function(_t,Ft){var Lt,Yt,ve,Ce,Ie,Ne,Fe,Re,Pe=this;if((_t=new $(_t)).c&&!_t.isInteger())throw Error(le+"Exponent not an integer: "+V(_t));if(null!=Ft&&(Ft=new $(Ft)),Ie=_t.e>14,!Pe.c||!Pe.c[0]||1==Pe.c[0]&&!Pe.e&&1==Pe.c.length||!_t.c||!_t.c[0])return Re=new $(Math.pow(+V(Pe),Ie?2-w(_t):+V(_t))),Ft?Re.mod(Ft):Re;if(Ne=_t.s<0,Ft){if(Ft.c?!Ft.c[0]:!Ft.s)return new $(NaN);(Yt=!Ne&&Pe.isInteger()&&Ft.isInteger())&&(Pe=Pe.mod(Ft))}else{if(_t.e>9&&(Pe.e>0||Pe.e<-1||(0==Pe.e?Pe.c[0]>1||Ie&&Pe.c[1]>=24e7:Pe.c[0]<8e13||Ie&&Pe.c[0]<=9999975e7)))return Ce=Pe.s<0&&w(_t)?-0:0,Pe.e>-1&&(Ce=1/Ce),new $(Ne?1/Ce:Ce);sn&&(Ce=Kt(sn/Se+2))}for(Ie?(Lt=new $(.5),Ne&&(_t.s=1),Fe=w(_t)):Fe=(ve=Math.abs(+V(_t)))%2,Re=new $(Xe);;){if(Fe){if(!(Re=Re.times(Pe)).c)break;Ce?Re.c.length>Ce&&(Re.c.length=Ce):Yt&&(Re=Re.mod(Ft))}if(ve){if(0===(ve=Zt(ve/2)))break;Fe=ve%2}else if(J(_t=_t.times(Lt),_t.e+1,1),_t.e>14)Fe=w(_t);else{if(0==(ve=+V(_t)))break;Fe=ve%2}Pe=Pe.times(Pe),Ce?Pe.c&&Pe.c.length>Ce&&(Pe.c.length=Ce):Yt&&(Pe=Pe.mod(Ft))}return Yt?Re:(Ne&&(Re=Xe.div(Re)),Ft?Re.mod(Ft):Ce?J(Re,sn,Je,void 0):Re)},$e.integerValue=function(_t){var Ft=new $(this);return null==_t?_t=Je:y(_t,0,8),J(Ft,Ft.e+1,_t)},$e.isEqualTo=$e.eq=function(_t,Ft){return 0===m(this,new $(_t,Ft))},$e.isFinite=function(){return!!this.c},$e.isGreaterThan=$e.gt=function(_t,Ft){return m(this,new $(_t,Ft))>0},$e.isGreaterThanOrEqualTo=$e.gte=function(_t,Ft){return 1===(Ft=m(this,new $(_t,Ft)))||0===Ft},$e.isInteger=function(){return!!this.c&&d(this.e/Se)>this.c.length-2},$e.isLessThan=$e.lt=function(_t,Ft){return m(this,new $(_t,Ft))<0},$e.isLessThanOrEqualTo=$e.lte=function(_t,Ft){return-1===(Ft=m(this,new $(_t,Ft)))||0===Ft},$e.isNaN=function(){return!this.s},$e.isNegative=function(){return this.s<0},$e.isPositive=function(){return this.s>0},$e.isZero=function(){return!!this.c&&0==this.c[0]},$e.minus=function(_t,Ft){var Lt,Yt,Kt,Zt,le=this,ve=le.s;if(Ft=(_t=new $(_t,Ft)).s,!ve||!Ft)return new $(NaN);if(ve!=Ft)return _t.s=-Ft,le.plus(_t);var Ie=le.e/Se,Ne=_t.e/Se,Fe=le.c,Re=_t.c;if(!Ie||!Ne){if(!Fe||!Re)return Fe?(_t.s=-Ft,_t):new $(Re?le:NaN);if(!Fe[0]||!Re[0])return Re[0]?(_t.s=-Ft,_t):new $(Fe[0]?le:3==Je?-0:0)}if(Ie=d(Ie),Ne=d(Ne),Fe=Fe.slice(),ve=Ie-Ne){for((Zt=ve<0)?(ve=-ve,Kt=Fe):(Ne=Ie,Kt=Re),Kt.reverse(),Ft=ve;Ft--;Kt.push(0));Kt.reverse()}else for(Yt=(Zt=(ve=Fe.length)<(Ft=Re.length))?ve:Ft,ve=Ft=0;Ft<Yt;Ft++)if(Fe[Ft]!=Re[Ft]){Zt=Fe[Ft]<Re[Ft];break}if(Zt&&(Kt=Fe,Fe=Re,Re=Kt,_t.s=-_t.s),(Ft=(Yt=Re.length)-(Lt=Fe.length))>0)for(;Ft--;Fe[Lt++]=0);for(Ft=Ce-1;Yt>ve;){if(Fe[--Yt]<Re[Yt]){for(Lt=Yt;Lt&&!Fe[--Lt];Fe[Lt]=Ft);--Fe[Lt],Fe[Yt]+=Ce}Fe[Yt]-=Re[Yt]}for(;0==Fe[0];Fe.splice(0,1),--Ne);return Fe[0]?W(_t,Fe,Ne):(_t.s=3==Je?-1:1,_t.c=[_t.e=0],_t)},$e.modulo=$e.mod=function(_t,Lt){var Yt,Kt,Zt=this;return _t=new $(_t,Lt),!Zt.c||!_t.s||_t.c&&!_t.c[0]?new $(NaN):!_t.c||Zt.c&&!Zt.c[0]?new $(Zt):(9==on?(Kt=_t.s,_t.s=1,Yt=Ft(Zt,_t,0,3),_t.s=Kt,Yt.s*=Kt):Yt=Ft(Zt,_t,0,on),(_t=Zt.minus(Yt.times(_t))).c[0]||1!=on||(_t.s=Zt.s),_t)},$e.multipliedBy=$e.times=function(_t,Ft){var Lt,Yt,Kt,Zt,le,ve,Ie,Ne,Re,Pe,Le,Ue,He,qe,We,Ge=this,Ve=Ge.c,$e=(_t=new $(_t,Ft)).c;if(!(Ve&&$e&&Ve[0]&&$e[0]))return!Ge.s||!_t.s||Ve&&!Ve[0]&&!$e||$e&&!$e[0]&&!Ve?_t.c=_t.e=_t.s=null:(_t.s*=Ge.s,Ve&&$e?(_t.c=[0],_t.e=0):_t.c=_t.e=null),_t;for(Yt=d(Ge.e/Se)+d(_t.e/Se),_t.s*=Ge.s,(Ie=Ve.length)<(Pe=$e.length)&&(He=Ve,Ve=$e,$e=He,Kt=Ie,Ie=Pe,Pe=Kt),Kt=Ie+Pe,He=[];Kt--;He.push(0));for(qe=Ce,We=Fe,Kt=Pe;--Kt>=0;){for(Lt=0,Le=$e[Kt]%We,Ue=$e[Kt]/We|0,Zt=Kt+(le=Ie);Zt>Kt;)Lt=((Ne=Le*(Ne=Ve[--le]%We)+(ve=Ue*Ne+(Re=Ve[le]/We|0)*Le)%We*We+He[Zt]+Lt)/qe|0)+(ve/We|0)+Ue*Re,He[Zt--]=Ne%qe;He[Zt]=Lt}return Lt?++Yt:He.splice(0,1),W(_t,He,Yt)},$e.negated=function(){var _t=new $(this);return _t.s=-_t.s||null,_t},$e.plus=function(_t,Ft){var Lt,Yt=this,Kt=Yt.s;if(Ft=(_t=new $(_t,Ft)).s,!Kt||!Ft)return new $(NaN);if(Kt!=Ft)return _t.s=-Ft,Yt.minus(_t);var Zt=Yt.e/Se,le=_t.e/Se,ve=Yt.c,Ie=_t.c;if(!Zt||!le){if(!ve||!Ie)return new $(Kt/0);if(!ve[0]||!Ie[0])return Ie[0]?_t:new $(ve[0]?Yt:0*Kt)}if(Zt=d(Zt),le=d(le),ve=ve.slice(),Kt=Zt-le){for(Kt>0?(le=Zt,Lt=Ie):(Kt=-Kt,Lt=ve),Lt.reverse();Kt--;Lt.push(0));Lt.reverse()}for((Kt=ve.length)-(Ft=Ie.length)<0&&(Lt=Ie,Ie=ve,ve=Lt,Ft=Kt),Kt=0;Ft;)Kt=(ve[--Ft]=ve[Ft]+Ie[Ft]+Kt)/Ce|0,ve[Ft]=Ce===ve[Ft]?0:ve[Ft]%Ce;return Kt&&(ve=[Kt].concat(ve),++le),W(_t,ve,le)},$e.precision=$e.sd=function(_t,Ft){var Lt,Yt,Kt,Zt=this;if(null!=_t&&_t!==!!_t)return y(_t,1,Re),null==Ft?Ft=Je:y(Ft,0,8),J(new $(Zt),_t,Ft);if(!(Lt=Zt.c))return null;if(Yt=(Kt=Lt.length-1)*Se+1,Kt=Lt[Kt]){for(;Kt%10==0;Kt/=10,Yt--);for(Kt=Lt[0];Kt>=10;Kt/=10,Yt++);}return _t&&Zt.e+1>Yt&&(Yt=Zt.e+1),Yt},$e.shiftedBy=function(_t){return y(_t,-9007199254740991,Ie),this.times("1e"+_t)},$e.squareRoot=$e.sqrt=function(){var _t,Lt,Yt,Kt,Zt,le=this,ve=le.c,Ce=le.s,Se=le.e,Ie=Ye+4,Ne=new $("0.5");if(1!==Ce||!ve||!ve[0])return new $(!Ce||Ce<0&&(!ve||ve[0])?NaN:ve?le:1/0);if(0==(Ce=Math.sqrt(+V(le)))||Ce==1/0?(((Lt=g(ve)).length+Se)%2==0&&(Lt+="0"),Ce=Math.sqrt(+Lt),Se=d((Se+1)/2)-(Se<0||Se%2),Yt=new $(Lt=Ce==1/0?"5e"+Se:(Lt=Ce.toExponential()).slice(0,Lt.indexOf("e")+1)+Se)):Yt=new $(Ce+""),Yt.c[0])for((Ce=(Se=Yt.e)+Ie)<3&&(Ce=0);;)if(Zt=Yt,Yt=Ne.times(Zt.plus(Ft(le,Zt,Ie,1))),g(Zt.c).slice(0,Ce)===(Lt=g(Yt.c)).slice(0,Ce)){if(Yt.e<Se&&--Ce,"9999"!=(Lt=Lt.slice(Ce-3,Ce+1))&&(Kt||"4999"!=Lt)){+Lt&&(+Lt.slice(1)||"5"!=Lt.charAt(0))||(J(Yt,Yt.e+Ye+2,1),_t=!Yt.times(Yt).eq(le));break}if(!Kt&&(J(Zt,Zt.e+Ye+2,0),Zt.times(Zt).eq(le))){Yt=Zt;break}Ie+=4,Ce+=4,Kt=1}return J(Yt,Yt.e+Ye+1,Je,_t)},$e.toExponential=function(_t,Ft){return null!=_t&&(y(_t,0,Re),_t++),G(this,_t,Ft,1)},$e.toFixed=function(_t,Ft){return null!=_t&&(y(_t,0,Re),_t=_t+this.e+1),G(this,_t,Ft)},$e.toFormat=function(_t,Ft,Lt){var Yt,Kt=this;if(null==Lt)null!=_t&&Ft&&"object"==typeof Ft?(Lt=Ft,Ft=null):_t&&"object"==typeof _t?(Lt=_t,_t=Ft=null):Lt=an;else if("object"!=typeof Lt)throw Error(le+"Argument not an object: "+Lt);if(Yt=Kt.toFixed(_t,Ft),Kt.c){var Zt,ve=Yt.split("."),Ce=+Lt.groupSize,Se=+Lt.secondaryGroupSize,Ie=Lt.groupSeparator||"",Ne=ve[0],Fe=ve[1],Re=Kt.s<0,Pe=Re?Ne.slice(1):Ne,Le=Pe.length;if(Se&&(Zt=Ce,Ce=Se,Se=Zt,Le-=Zt),Ce>0&&Le>0){for(Zt=Le%Ce||Ce,Ne=Pe.substr(0,Zt);Zt<Le;Zt+=Ce)Ne+=Ie+Pe.substr(Zt,Ce);Se>0&&(Ne+=Ie+Pe.slice(Zt)),Re&&(Ne="-"+Ne)}Yt=Fe?Ne+(Lt.decimalSeparator||"")+((Se=+Lt.fractionGroupSize)?Fe.replace(new RegExp("\\d{"+Se+"}\\B","g"),"$&"+(Lt.fractionGroupSeparator||"")):Fe):Ne}return(Lt.prefix||"")+Yt+(Lt.suffix||"")},$e.toFraction=function(_t){var Lt,Yt,Kt,Zt,ve,Ce,Ie,Fe,Re,Pe,Le,Ue,He=this,qe=He.c;if(null!=_t&&(!(Ie=new $(_t)).isInteger()&&(Ie.c||1!==Ie.s)||Ie.lt(Xe)))throw Error(le+"Argument "+(Ie.isInteger()?"out of range: ":"not an integer: ")+V(Ie));if(!qe)return new $(He);for(Lt=new $(Xe),Re=Yt=new $(Xe),Kt=Fe=new $(Xe),Ue=g(qe),ve=Lt.e=Ue.length-He.e-1,Lt.c[0]=Ne[(Ce=ve%Se)<0?Se+Ce:Ce],_t=!_t||Ie.comparedTo(Lt)>0?ve>0?Lt:Re:Ie,Ce=nn,nn=1/0,Ie=new $(Ue),Fe.c[0]=0;Pe=Ft(Ie,Lt,0,1),1!=(Zt=Yt.plus(Pe.times(Kt))).comparedTo(_t);)Yt=Kt,Kt=Zt,Re=Fe.plus(Pe.times(Zt=Re)),Fe=Zt,Lt=Ie.minus(Pe.times(Zt=Lt)),Ie=Zt;return Zt=Ft(_t.minus(Yt),Kt,0,1),Fe=Fe.plus(Zt.times(Re)),Yt=Yt.plus(Zt.times(Kt)),Fe.s=Re.s=He.s,Le=Ft(Re,Kt,ve*=2,Je).minus(He).abs().comparedTo(Ft(Fe,Yt,ve,Je).minus(He).abs())<1?[Re,Kt]:[Fe,Yt],nn=Ce,Le},$e.toNumber=function(){return+V(this)},$e.toPrecision=function(_t,Ft){return null!=_t&&y(_t,1,Re),G(this,_t,Ft,2)},$e.toString=function(_t){var Ft,Yt=this,Kt=Yt.s,Zt=Yt.e;return null===Zt?Kt?(Ft="Infinity",Kt<0&&(Ft="-"+Ft)):Ft="NaN":(null==_t?Ft=Zt<=Qe||Zt>=Ze?v(g(Yt.c),Zt):b(g(Yt.c),Zt,"0"):10===_t?Ft=b(g((Yt=J(new $(Yt),Ye+Zt+1,Je)).c),Yt.e,"0"):(y(_t,2,cn.length,"Base"),Ft=Lt(b(g(Yt.c),Zt,"0"),10,_t,Kt,!0)),Kt<0&&Yt.c[0]&&(Ft="-"+Ft)),Ft},$e.valueOf=$e.toJSON=function(){return V(this)},$e._isBigNumber=!0,null!=_t&&$.set(_t),$}()).default=Lt.BigNumber=Lt,_t.exports?_t.exports=Lt:(Ft||(Ft="undefined"!=typeof self&&self?self:window),Ft.BigNumber=Lt)}(this)})).BigNumber;const Je={ROUNDING_MODE:Ye.ROUND_DOWN};function R(_t){return(new TextEncoder).encode(_t)}function P(_t){return"string"==typeof _t?P(D(_t)):(new TextDecoder).decode(_t)}Ye.config(Je);const Qe="INVALID_ARGUMENT";function U(_t,Ft="UNKNOWN_ERROR",Lt={}){let Yt=[];Object.keys(Lt).forEach((_t=>{try{Yt.push(_t+"="+JSON.stringify(Lt[_t]))}catch(Ft){Yt.push(_t+"="+JSON.stringify(Lt[_t].toString()))}}));let Kt=_t;Yt.length&&(_t+=" ("+Yt.join(", ")+")");let Zt=new Error(_t);return Zt.reason=Kt,Zt.code=Ft,Object.keys(Lt).forEach((function(_t){Zt[_t]=Lt[_t]})),Zt}function D(_t){if("string"!=typeof _t)throw new Error("hexToBytes only accept strings, got: "+typeof _t);if("0x"===_t.substr(0,2))return D(_t.substr(2));const Ft=new Uint8Array(Math.ceil(_t.length/2));let Lt=0;for(let Yt=0;Yt<_t.length;Yt+=2){const Kt=parseInt(_t.substr(Yt,2),16);if(isNaN(Kt))throw new Error("Cannot read hex string:"+JSON.stringify(_t));Ft[Lt]=Kt,Lt++}return Ft}function L(_t){return Array.from(_t).map((_t=>_t.toString(16).padStart(2,"0"))).join("")}function q(_t,Ft){if("string"==typeof _t){if(Ft&&"hex"===Ft.encoding&&"string"==typeof _t){let Ft=_t;Ft.length>2&&"0x"===Ft.substr(0,2)&&(Ft=Ft.substr(2));const Lt=D(Ft);return Xe(Lt)}return Xe(R(_t))}return Xe(_t)}let Ze={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function $(_t,Ft,Lt){return new Array(Ft-_t.length+1).join(Lt||"0")+_t}function G(_t){return wt(_t)&&_t.name&&-1!==_t.name.indexOf("(")?_t.name:_t.name+"("+W(!1,_t.inputs||[]).join(",")+")"}function z(..._t){const Ft=_t.reduce(((_t,Ft)=>_t+Ft.length),0);var Lt=new Uint8Array(Ft);let Yt=0;for(let Ft of _t)Lt.set(Ft,Yt),Yt+=Ft.length;return Lt}function W(_t,Ft){const Lt=[];return Ft.forEach((function(Ft){if("object"==typeof Ft.components){if("tuple"!==Ft.type.substring(0,5))throw new Error("components found but type is not tuple; report on GitHub");var Yt="",Kt=Ft.type.indexOf("[");Kt>=0&&(Yt=Ft.type.substring(Kt));var Zt=W(_t,Ft.components);bt(Zt)&&_t?Lt.push("tuple("+Zt.join(",")+")"+Yt):_t?Lt.push("("+Zt+")"):Lt.push("("+Zt.join(",")+")"+Yt)}else Lt.push(Ft.type)})),Lt}function J(_t){let Ft=_t.indexOf("("),Lt=_t.indexOf(")");return-1!==Ft&&-1!==Lt?_t.substr(0,Ft):_t}function V(_t){let Ft=_t.indexOf("("),Lt=_t.indexOf(")");return-1!==Ft&&-1!==Lt?_t.substr(Ft+1,Lt-Ft-1).replace(" ",""):""}function Y(_t){return null==_t?_t:ot(_t).toNumber()}function K(_t){return ot(_t).toNumber()}function Z(_t){return mt(_t)?_t.toString(10):""+_t}function X(_t){return"string"==typeof _t&&!_t.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t)?"0x"+_t:nt(_t)}function Q(_t){if("string"==typeof _t)return _t.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t)?nt(_t):"0x"+L(R(_t));if(_t instanceof Uint8Array)return"0x"+L(_t);throw new Error(`toStringData: Error trying to convert ${_t} (${typeof _t}) to a hex string.`)}function tt(_t){return"boolean"==typeof _t?_t:0!==ot(_t).toNumber()}function et(_t){let Ft=ot(_t),Lt=Ft.toString(16);return Ft.isLessThan(0)?"-0x"+Lt.substr(1):"0x"+Lt}function nt(_t){if(vt(_t))return et(+_t);if(mt(_t))return et(_t);if(yt(_t)){const Ft=_t;if(0===Ft.indexOf("-0x"))return et(Ft);if(0===Ft.indexOf("0x"))return Ft;if(!isFinite(Ft))return L(R(Ft))}if(_t instanceof Uint8Array)return"0x"+L(_t);if(bt(_t)||wt(_t))throw new Error("toHex can only be called with scalar values, not objects or arrays");return et(_t)}function rt(_t){let Ft=_t?_t.toLowerCase():"ether",Lt=Ze[Ft];if(void 0===Lt)throw new Error("This unit doesn't exists, please use the one of the following units"+JSON.stringify(Ze,null,2));return new Ye(Lt,10)}function ot(_t){let Ft=_t||0;return mt(Ft)?Ft:("string"==typeof Ft&&(Ft=Ft.trim()),"string"!=typeof Ft||0!==Ft.indexOf("0x")&&0!==Ft.indexOf("-0x")?Ft instanceof Uint8Array?new Ye(L(Ft),16):new Ye(Ft,10):new Ye(Ft.replace("0x","").toLowerCase(),16))}function it(_t){return new Ye(new Array(_t).fill("1").join(""),2)}function at(_t,Ft=256){let Lt=ot(_t).integerValue();return Lt.isLessThan(0)?it(Ft).plus(Lt).plus(1):Lt}function st(_t,Ft){return"1"==$(_t.toString(2),Ft,"0")[0]}function ct(_t){if("string"!=typeof _t)throw U("invalid address",Qe,{arg:"address",value:_t});if(_t.trim().match(/^(0x)?[0-9a-fA-F]{40}$/))return"0x"!==_t.trim().substring(0,2)&&(_t="0x"+_t),ft(_t);throw U("invalid address",Qe,{arg:"address",value:_t})}function ut(_t,Ft=256){if(st(_t,Ft)){const Lt=it(Ft);return _t.minus(Lt).minus(1)}return _t}function lt(_t){return/^0x[0-9a-f]{40}$/i.test(_t)}function ht(_t){return!!/^(0x)?[0-9a-f]{40}$/i.test(_t)&&(!(!/^(0x)?[0-9a-f]{40}$/.test(_t)&&!/^(0x)?[0-9A-F]{40}$/.test(_t))||pt(_t))}function pt(_t){const Ft=_t.replace("0x","");let Lt=q(Ft.toLowerCase());for(let _t=0;_t<40;_t++)if(parseInt(Lt[_t],16)>7&&Ft[_t].toUpperCase()!==Ft[_t]||parseInt(Lt[_t],16)<=7&&Ft[_t].toLowerCase()!==Ft[_t])return!1;return!0}function ft(_t){if(void 0===_t)return"";const Ft=_t.toLowerCase().replace("0x",""),Lt=q(Ft);let Yt="0x";for(let _t=0;_t<Ft.length;_t++)parseInt(Lt[_t],16)>7?Yt+=Ft[_t].toUpperCase():Yt+=Ft[_t];return Yt}function dt(_t){if(!Array.isArray(_t))throw new Error(`Value was not an array: ${JSON.stringify(_t)}`);return _t}function gt(_t){return lt(_t)?_t:/^[0-9a-f]{40}$/.test(_t)?"0x"+_t:"0x"+$(nt(_t).substr(2),40)}function mt(_t){return _t instanceof Ye}function yt(_t){return"string"==typeof _t||_t&&_t.constructor&&"String"===_t.constructor.name}function wt(_t){return null!==_t&&!Array.isArray(_t)&&"object"==typeof _t}function vt(_t){return"boolean"==typeof _t}function bt(_t){return Array.isArray(_t)}var tn,nn,rn;function Tt(Ft,Lt){if(!Ft)throw new Error("jsonrpc method should be specified!");if("string"!=typeof Ft)throw new Error(`jsonrpc must be a string, got ${typeof Ft}!`);return _t.messageId++,{jsonrpc:"2.0",id:_t.messageId,method:Ft,params:Lt||[]}}function xt(_t){return Array.isArray(_t)?_t.every(e):e(_t);function e(_t){return!(!_t||"error"in _t||"2.0"!==_t.jsonrpc||"number"!=typeof _t.id||null==_t.result&&void 0===_t.result)}}function At(_t,Ft,Lt,Yt){var Kt,Zt=arguments.length,le=Zt<3?Ft:null===Yt?Yt=Object.getOwnPropertyDescriptor(Ft,Lt):Yt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(_t,Ft,Lt,Yt);else for(var ve=_t.length-1;ve>=0;ve--)(Kt=_t[ve])&&(le=(Zt<3?Kt(le):Zt>3?Kt(Ft,Lt,le):Kt(Ft,Lt))||le);return Zt>3&&le&&Object.defineProperty(Ft,Lt,le),le}function kt(_t,Ft){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(_t,Ft)}function Et(_t){return ot(_t)}function Bt(_t){return void 0===_t?"latest":Ot(_t)}function Ot(_t){return void 0===_t||null==_t?null:function(_t){return"latest"===_t||"pending"===_t||"earliest"===_t}(_t)?_t:nt(_t)}function St(_t){return _t.from=_t.from,_t.from&&(_t.from=Ut(_t.from)),_t.to&&(_t.to=Ut(_t.to)),void 0!==_t.gasPrice&&(_t.gasPrice=et(_t.gasPrice)),void 0!==_t.gas&&(_t.gas=et(_t.gas)),void 0!==_t.value&&(_t.value=et(_t.value)),void 0!==_t.nonce&&(_t.nonce=et(_t.nonce)),_t.data&&!_t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t.data)&&(_t.data="0x"+_t.data),_t}function Ct(_t){if("string"!=typeof _t)throw new Error("The provided input for transactionId is not a string, got: "+JSON.stringify(_t));if(0!==_t.indexOf("0x"))throw new Error("TransactionID must start with 0x, got: "+JSON.stringify(_t));if(66!==_t.length)throw new Error("TransactionID must be a 32 byte hex, got: "+JSON.stringify(_t));return _t}function Mt(_t){if("object"!=typeof _t)throw new Error("Did not provide transaction options");if(!_t.from)throw new Error('Missing "from" in transaction options');return _t.from=Ut(_t.from),_t.to&&(_t.to=Ut(_t.to)),void 0!==_t.gasPrice&&(_t.gasPrice=et(_t.gasPrice)),void 0!==_t.gas&&(_t.gas=et(_t.gas)),void 0!==_t.value&&(_t.value=et(_t.value)),void 0!==_t.nonce&&(_t.nonce=et(_t.nonce)),_t.data&&!_t.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(_t.data)&&(_t.data="0x"+_t.data),_t}function It(_t){return _t?(null!==_t.blockNumber&&(_t.blockNumber=K(_t.blockNumber)),null!==_t.transactionIndex&&(_t.transactionIndex=K(_t.transactionIndex)),_t.nonce=K(_t.nonce),_t.gas=K(_t.gas),_t.gasPrice=ot(_t.gasPrice),_t.value=ot(_t.value),_t):null}function Pt(_t){return _t?(_t.gasLimit=K(_t.gasLimit),_t.gasUsed=K(_t.gasUsed),_t.size=K(_t.size),_t.timestamp=K(_t.timestamp),null!==_t.number&&(_t.number=K(_t.number)),_t.difficulty=ot(_t.difficulty),_t.totalDifficulty=ot(_t.totalDifficulty),bt(_t.transactions)&&_t.transactions.forEach((function(Ft,Lt){yt(Ft)||(_t.transactions[Lt]=It(Ft)||_t.transactions[Lt])})),_t):null}function jt(_t){return _t?(_t.blockNumber&&(_t.blockNumber=K(_t.blockNumber)),_t.transactionIndex&&(_t.transactionIndex=K(_t.transactionIndex)),_t.logIndex&&(_t.logIndex=K(_t.logIndex)),_t):_t}function Ut(_t){if(lt(_t))return _t;if(ht(_t))return"0x"+_t;throw new Error(`Invalid address: ${JSON.stringify(_t)}`)}_t.TransactionStatus=void 0,(tn=_t.TransactionStatus||(_t.TransactionStatus={})).pending="pending",tn.confirmed="confirmed",tn.failed="failed",_t.TransactionType=void 0,(nn=_t.TransactionType||(_t.TransactionType={})).queued="queued",nn.dropped="dropped",nn.replaced="replaced",nn.pending="pending",nn.reverted="reverted",nn.confirmed="confirmed",_t.messageId=0;class qt{constructor(_t){this.callName=_t.callName,this.params=_t.params||0,this.inputFormatter=_t.inputFormatter||null,this.outputFormatter=_t.outputFormatter}validateArgs(_t){if(_t.length!==this.params)throw Ft=this.callName,Lt=_t.length,Yt=this.params,new Error(`Invalid number of input parameters to RPC method "${Ft}" given: ${Lt}, expected: ${Yt}`);var Ft,Lt,Yt}formatInput(_t){return this.inputFormatter?this.inputFormatter.map((function(Ft,Lt){return Ft?Ft(_t[Lt]):_t[Lt]})):_t}formatOutput(_t){return null!==_t?this.outputFormatter(_t):null}toPayload(_t){let Ft=this.formatInput(_t);return this.validateArgs(Ft),{method:this.callName,params:Ft}}async execute(_t,...Ft){let Lt=this.toPayload(Ft);if(!_t)throw new Error("Missing RequestManager in method#exec");const Yt=await _t.sendAsync(Lt);return this.formatOutput(Yt)}}class Ht{constructor(_t){this.getter=_t.getter,this.outputFormatter=_t.outputFormatter}formatOutput(_t){return this.outputFormatter(_t)}async execute(_t,...Ft){const Lt=await _t.sendAsync({method:this.getter,params:[]});return this.formatOutput(Lt)}}function $t(_t){return new Promise((Ft=>setTimeout(Ft,_t)))}function Gt(Ft,Lt){const Yt=_t.eth[Lt];if(!Yt)throw new Error(`Could not find the method/property named ${Lt.toString()}`);Object.defineProperty(Ft,Lt,{value:function(){return Yt.execute(this,...arguments)}})}_t.eth=void 0,(rn=_t.eth||(_t.eth={})).eth_getBalance=new qt({callName:"eth_getBalance",params:2,inputFormatter:[Ut,Bt],outputFormatter:Et}),rn.eth_getStorageAt=new qt({callName:"eth_getStorageAt",params:3,inputFormatter:[Ut,nt,Bt],outputFormatter:X}),rn.eth_getCode=new qt({callName:"eth_getCode",params:2,inputFormatter:[Ut,Bt],outputFormatter:X}),rn.eth_getBlockByHash=new qt({callName:"eth_getBlockByHash",params:2,inputFormatter:[Ot,function(_t){return!!_t}],outputFormatter:Pt}),rn.eth_getBlockByNumber=new qt({callName:"eth_getBlockByNumber",params:2,inputFormatter:[Ot,function(_t){return!!_t}],outputFormatter:Pt}),rn.eth_getUncleByBlockHashAndIndex=new qt({callName:"eth_getUncleByBlockHashAndIndex",params:2,inputFormatter:[Ot,nt],outputFormatter:Pt}),rn.eth_getUncleByBlockNumberAndIndex=new qt({callName:"eth_getUncleByBlockNumberAndIndex",params:2,inputFormatter:[Ot,nt],outputFormatter:Pt}),rn.eth_getBlockTransactionCountByHash=new qt({callName:"eth_getBlockTransactionCountByHash",params:1,inputFormatter:[Ot],outputFormatter:K}),rn.eth_getBlockTransactionCountByNumber=new qt({callName:"eth_getBlockTransactionCountByNumber",params:1,inputFormatter:[Ot],outputFormatter:K}),rn.eth_getUncleCountByBlockHash=new qt({callName:"eth_getUncleCountByBlockHash",params:1,inputFormatter:[Ot],outputFormatter:K}),rn.eth_getUncleCountByBlockNumber=new qt({callName:"eth_getUncleCountByBlockNumber",params:1,inputFormatter:[Ot],outputFormatter:K}),rn.eth_getTransactionByHash=new qt({callName:"eth_getTransactionByHash",params:1,inputFormatter:[Ct],outputFormatter:It}),rn.eth_getTransactionByBlockHashAndIndex=new qt({callName:"eth_getTransactionByBlockHashAndIndex",params:2,inputFormatter:[Ot,nt],outputFormatter:It}),rn.eth_getTransactionByBlockNumberAndIndex=new qt({callName:"eth_getTransactionByBlockNumberAndIndex",params:2,inputFormatter:[Ot,nt],outputFormatter:It}),rn.eth_getTransactionReceipt=new qt({callName:"eth_getTransactionReceipt",params:1,inputFormatter:[Ct],outputFormatter:function(_t){return _t?(null!==_t.blockNumber&&(_t.blockNumber=K(_t.blockNumber)),null!==_t.transactionIndex&&(_t.transactionIndex=K(_t.transactionIndex)),_t.cumulativeGasUsed=K(_t.cumulativeGasUsed),_t.gasUsed=K(_t.gasUsed),_t.logs&&bt(_t.logs)&&(_t.logs=_t.logs.map((function(_t){return jt(_t)}))),_t.status=K(_t.status||""),_t):null}}),rn.eth_getTransactionCount=new qt({callName:"eth_getTransactionCount",params:2,inputFormatter:[Ut,Bt],outputFormatter:K}),rn.eth_sendRawTransaction=new qt({callName:"eth_sendRawTransaction",params:1,inputFormatter:[null],outputFormatter:X}),rn.web3_sha3=new qt({callName:"web3_sha3",params:1,inputFormatter:[null],outputFormatter:X}),rn.eth_sendTransaction=new qt({callName:"eth_sendTransaction",params:1,inputFormatter:[Mt],outputFormatter:X}),rn.eth_sign=new qt({callName:"eth_sign",params:2,inputFormatter:[Ut,null],outputFormatter:X}),rn.eth_call=new qt({callName:"eth_call",params:2,inputFormatter:[St,Bt],outputFormatter:X}),rn.eth_estimateGas=new qt({callName:"eth_estimateGas",params:1,inputFormatter:[St],outputFormatter:K}),rn.eth_submitWork=new qt({callName:"eth_submitWork",params:3,inputFormatter:[null,null,null],outputFormatter:tt}),rn.eth_getWork=new qt({callName:"eth_getWork",params:0,inputFormatter:[],outputFormatter:dt}),rn.eth_coinbase=new Ht({getter:"eth_coinbase",outputFormatter:gt}),rn.eth_mining=new Ht({getter:"eth_mining",outputFormatter:tt}),rn.eth_hashrate=new Ht({getter:"eth_hashrate",outputFormatter:K}),rn.eth_syncing=new Ht({getter:"eth_syncing",outputFormatter:function(_t){return _t?(_t.startingBlock=K(_t.startingBlock),_t.currentBlock=K(_t.currentBlock),_t.highestBlock=K(_t.highestBlock),_t.knownStates&&(_t.knownStates=K(_t.knownStates),_t.pulledStates=K(_t.pulledStates)),_t):_t}}),rn.eth_gasPrice=new Ht({getter:"eth_gasPrice",outputFormatter:Et}),rn.eth_accounts=new Ht({getter:"eth_accounts",outputFormatter:dt}),rn.eth_blockNumber=new Ht({getter:"eth_blockNumber",outputFormatter:K}),rn.eth_protocolVersion=new Ht({getter:"eth_protocolVersion",outputFormatter:K}),rn.web3_clientVersion=new Ht({getter:"web3_clientVersion",outputFormatter:Z}),rn.net_version=new Ht({getter:"net_version",outputFormatter:Z}),rn.shh_version=new qt({callName:"shh_version",params:0,inputFormatter:[],outputFormatter:K}),rn.shh_post=new qt({callName:"shh_post",params:1,inputFormatter:[null],outputFormatter:tt}),rn.personal_newAccount=new qt({callName:"personal_newAccount",params:1,inputFormatter:[null],outputFormatter:gt}),rn.personal_importRawKey=new qt({callName:"personal_importRawKey",params:2,inputFormatter:[null,null],outputFormatter:gt}),rn.personal_sign=new qt({callName:"personal_sign",params:3,inputFormatter:[Q,Ut,null],outputFormatter:X}),rn.personal_ecRecover=new qt({callName:"personal_ecRecover",params:2,inputFormatter:[Q,null],outputFormatter:gt}),rn.personal_unlockAccount=new qt({callName:"personal_unlockAccount",params:3,inputFormatter:[Ut,null,Y],outputFormatter:tt}),rn.personal_sendTransaction=new qt({callName:"personal_sendTransaction",params:2,inputFormatter:[Mt,null],outputFormatter:X}),rn.personal_lockAccount=new qt({callName:"personal_lockAccount",params:1,inputFormatter:[Ut],outputFormatter:tt}),rn.personal_listAccounts=new Ht({getter:"personal_listAccounts",outputFormatter:dt}),rn.net_listening=new Ht({getter:"net_listening",outputFormatter:tt}),rn.net_peerCount=new Ht({getter:"net_peerCount",outputFormatter:K}),rn.eth_newFilter=new qt({callName:"eth_newFilter",params:1,inputFormatter:[function(_t){return _t}],outputFormatter:nt}),rn.eth_getLogs=new qt({callName:"eth_getLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),rn.eth_newBlockFilter=new qt({callName:"eth_newBlockFilter",params:0,inputFormatter:[],outputFormatter:nt}),rn.eth_newPendingTransactionFilter=new qt({callName:"eth_newPendingTransactionFilter",params:0,inputFormatter:[],outputFormatter:nt}),rn.eth_uninstallFilter=new qt({callName:"eth_uninstallFilter",params:1,inputFormatter:[nt],outputFormatter:tt}),rn.eth_getFilterLogs=new qt({callName:"eth_getFilterLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),rn.eth_getFilterChanges=new qt({callName:"eth_getFilterChanges",params:1,inputFormatter:[nt],outputFormatter:dt}),rn.eth_submitHashrate=new qt({callName:"eth_submitHashrate",params:2,inputFormatter:[null,null],outputFormatter:tt}),rn.shh_newIdentity=new qt({callName:"shh_newIdentity",params:0,inputFormatter:[],outputFormatter:X}),rn.shh_hasIdentity=new qt({callName:"shh_hasIdentity",params:1,inputFormatter:[null],outputFormatter:tt}),rn.shh_newGroup=new qt({callName:"shh_newGroup",params:0,inputFormatter:[],outputFormatter:X}),rn.shh_addToGroup=new qt({callName:"shh_addToGroup",params:1,inputFormatter:[null],outputFormatter:tt}),rn.shh_newFilter=new qt({callName:"shh_newFilter",params:1,inputFormatter:[null],outputFormatter:nt}),rn.shh_uninstallFilter=new qt({callName:"shh_uninstallFilter",params:1,inputFormatter:[null],outputFormatter:tt}),rn.shh_getLogs=new qt({callName:"shh_getLogs",params:1,inputFormatter:[null],outputFormatter:dt}),rn.shh_getFilterMessages=new qt({callName:"shh_getFilterMessages",params:1,inputFormatter:[null],outputFormatter:dt}),rn.shh_getFilterChanges=new qt({callName:"shh_getFilterChanges",params:1,inputFormatter:[null],outputFormatter:dt}),rn.shh_getMessages=new qt({callName:"shh_getMessages",params:1,inputFormatter:[null],outputFormatter:dt});class zt{constructor(_t){this.provider=_t,this.requests=new Map}async sendAsync(_t){const Ft=await this.provider;if(!Ft)throw new Error("Provider not set or invalid");let Lt=Tt(_t.method,_t.params);const Kt=Yt();return this.requests.set(Lt.id,Kt),Ft.sendAsync(Lt,((_t,Ft)=>{this.requests.delete(Lt.id),_t?Kt.reject(_t):xt(Ft)?Kt.resolve(Ft.result):Kt.reject(function(_t){let Ft=_t&&_t.error&&_t.error.message?_t.error.message:"Invalid JSON RPC response: "+JSON.stringify(_t);return new Error(Ft)}(Ft))})),Kt}setProvider(_t){this.provider=_t}async getConfirmedTransaction(_t){const Ft=await this.waitForCompletion(_t);if(this.isFailure(Ft))throw new Error(`Transaction "${_t}" failed`);return Ft}async waitForCompletion(Ft,Lt){const Yt=Ct(Ft);if(await this.isTxDropped(Yt,Lt)){const Ft=await this.getTransactionAndReceipt(Yt);return Object.assign(Object.assign({},Ft),{status:_t.TransactionStatus.failed})}for(;;){const Ft=await this.getTransactionAndReceipt(Yt);if(!this.isPending(Ft)&&Ft.receipt)return Object.assign(Object.assign({},Ft),{status:this.isFailure(Ft)?_t.TransactionStatus.failed:_t.TransactionStatus.confirmed});await $t(2e3)}}async getTransaction(Ft){let Lt,Yt=null;const Kt=Ct(Ft);try{const _t=(await this.eth_accounts())[0];_t&&(Yt=await this.eth_getTransactionCount(_t,"latest"))}catch(_t){Yt=null}try{if(Lt=await this.eth_getTransactionByHash(Kt),null==Lt)return null}catch(_t){return null}if(null==Lt.blockNumber){if(null!=Yt){if(Lt.nonce<Yt)return{hash:Kt,type:_t.TransactionType.replaced,nonce:Lt.nonce};if(Lt.nonce>Yt)return{hash:Kt,type:_t.TransactionType.queued,nonce:Lt.nonce}}return Object.assign({type:_t.TransactionType.pending},Lt)}let Zt;try{if(Zt=await this.eth_getTransactionReceipt(Kt),null==Zt||0===Zt.status)return Object.assign({type:_t.TransactionType.reverted},Lt)}catch(_t){return null}return Object.assign(Object.assign({type:_t.TransactionType.confirmed},Lt),{receipt:Zt})}async isTxDropped(_t,Ft=15){let Lt=Ft;for(;Lt>0;){if(null!==await this.getTransactionAndReceipt(_t))return!1;Lt-=1,await $t(2e3)}return!0}async getTransactionAndReceipt(_t){_t=Ct(_t);const[Ft,Lt]=await Promise.all([this.eth_getTransactionByHash(_t),this.eth_getTransactionReceipt(_t)]);return Object.assign(Object.assign({},Ft),{receipt:Lt})}isPending(_t){return _t&&null===_t.blockNumber}isFailure(_t){return _t&&(!_t.receipt||0===_t.receipt.status)}}function Wt(_t){return"slice"in _t&&_t.slice||(_t.slice=function(){var Ft=Array.prototype.slice.call(arguments);return new Uint8Array(Array.prototype.slice.apply(_t,Ft))}),_t}function Jt(_t){if(null==_t)throw U("cannot convert null value to array",Qe,{arg:"value",value:_t});if(_t instanceof Uint8Array)return Wt(new Uint8Array(_t));if("string"==typeof _t){let Yt=_t.match(/^(0x)?[0-9a-fA-F]*$/);if(!Yt)throw U("invalid hexidecimal string",Qe,{arg:"value",value:_t});if("0x"!==Yt[1])throw U("hex string must have 0x prefix",Qe,{arg:"value",value:_t});(_t=_t.substring(2)).length%2&&(_t="0"+_t);for(var Ft=[],Lt=0;Lt<_t.length;Lt+=2)Ft.push(parseInt(_t.substr(Lt,2),16));return Wt(new Uint8Array(Ft))}if(function(_t){if(!_t||parseInt(String(_t.length))!=_t.length||"string"==typeof _t)return!1;for(var Ft=0;Ft<_t.length;Ft++){var Lt=_t[Ft];if(Lt<0||Lt>=256||parseInt(String(Lt))!=Lt)return!1}return!0}(_t))return Wt(new Uint8Array(_t));throw U("invalid arrayify value",void 0,{arg:"value",value:_t,type:typeof _t})}function Vt(_t,Ft,Lt){Object.defineProperty(_t,Ft,{enumerable:!0,value:Lt,writable:!1})}At([Gt,kt("design:type",Function)],zt.prototype,"web3_clientVersion",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"web3_sha3",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"net_version",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"net_peerCount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"net_listening",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_protocolVersion",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_syncing",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_coinbase",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_mining",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_hashrate",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_gasPrice",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_accounts",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_blockNumber",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBalance",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getStorageAt",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionCount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByHash",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByNumber",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockHash",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockNumber",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getCode",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_sign",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_sendTransaction",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_sendRawTransaction",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_call",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_estimateGas",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBlockByHash",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getBlockByNumber",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionByHash",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockHashAndIndex",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockNumberAndIndex",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getTransactionReceipt",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getUncleByBlockHashAndIndex",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getUncleByBlockNumberAndIndex",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_newFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_newBlockFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_newPendingTransactionFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_uninstallFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getFilterChanges",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getFilterLogs",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getLogs",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_getWork",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_submitWork",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"eth_submitHashrate",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_post",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_version",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_newIdentity",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_hasIdentity",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_newGroup",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_addToGroup",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_newFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_uninstallFilter",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_getFilterChanges",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"shh_getMessages",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_unlockAccount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_newAccount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_listAccounts",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_lockAccount",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_importRawKey",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_sendTransaction",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_sign",void 0),At([Gt,kt("design:type",Function)],zt.prototype,"personal_ecRecover",void 0);const on=new Ye(-1),sn=new Ye(0),an=new Ye(1),cn=new Ye("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Qt(_t){return function(_t,Ft){function n(Ft){return new Error('unexpected character "'+_t[Ft]+'" at position '+Ft+' in "'+_t+'"')}for(var Lt={type:"",name:"",state:{allowType:!0}},Yt=Lt,Kt=0;Kt<_t.length;Kt++){var Zt=_t[Kt];switch(Zt){case"(":if(!Yt.state.allowParams)throw n(Kt);Yt.state.allowType=!1,Yt.type=te(Yt.type),Yt.components=[{type:"",name:"",parent:Yt,state:{allowType:!0}}],Yt=Yt.components[0];break;case")":delete Yt.state,"indexed"===Yt.name&&(Yt.indexed=!0,Yt.name=""),Yt.type=te(Yt.type);var le=Yt;if(!(Yt=Yt.parent))throw n(Kt);delete le.parent,Yt.state.allowParams=!1,Yt.state.allowName=!0,Yt.state.allowArray=!0;break;case",":delete Yt.state,"indexed"===Yt.name&&(Yt.indexed=!0,Yt.name=""),Yt.type=te(Yt.type);var ve={type:"",name:"",parent:Yt.parent,state:{allowType:!0}};Yt.parent.components.push(ve),delete Yt.parent,Yt=ve;break;case" ":Yt.state.allowType&&""!==Yt.type&&(Yt.type=te(Yt.type),delete Yt.state.allowType,Yt.state.allowName=!0,Yt.state.allowParams=!0),Yt.state.allowName&&""!==Yt.name&&("indexed"===Yt.name?(Yt.indexed=!0,Yt.name=""):Yt.state.allowName=!1);break;case"[":if(!Yt.state.allowArray)throw n(Kt);Yt.type+=Zt,Yt.state.allowArray=!1,Yt.state.allowName=!1,Yt.state.readArray=!0;break;case"]":if(!Yt.state.readArray)throw n(Kt);Yt.type+=Zt,Yt.state.readArray=!1,Yt.state.allowArray=!0,Yt.state.allowName=!0;break;default:if(Yt.state.allowType)Yt.type+=Zt,Yt.state.allowParams=!0,Yt.state.allowArray=!0;else if(Yt.state.allowName)Yt.name+=Zt,delete Yt.state.allowArray;else{if(!Yt.state.readArray)throw n(Kt);Yt.type+=Zt}}}if(Yt.parent)throw new Error("unexpected eof");return delete Lt.state,"indexed"===Yt.name&&(Yt.indexed=!0,Yt.name=""),Lt.type=te(Lt.type),Lt}(_t)}function te(_t){return _t.match(/^uint($|[^1-9])/)?_t="uint256"+_t.substring(4):_t.match(/^int($|[^1-9])/)&&(_t="int256"+_t.substring(3)),_t}const un=new RegExp(/^bytes([0-9]*)$/),ln=new RegExp(/^(u?int)([0-9]*)$/),dn=new RegExp(/^(.*)\[([0-9]*)\]$/),oe=function(_t,Ft){var Lt=_t.match(ln);return Lt&&parseInt(Lt[2])<=48?Ft.toNumber():Ft};class ie{constructor(_t,Ft,Lt,Yt="",Kt){this.coerceFunc=_t,this.name=Ft,this.type=Lt,this.localName=Yt,this.dynamic=Kt}}class ae extends ie{constructor(_t){super(_t.coerceFunc,_t.name,_t.type,void 0,_t.dynamic),Vt(this,"coder",_t)}encode(_t){return this.coder.encode(_t)}decode(_t,Ft){return this.coder.decode(_t,Ft)}}class se extends ie{constructor(_t,Ft){super(_t,"null","",Ft,!1)}encode(_t){return Jt([])}decode(_t,Ft){if(Ft>_t.length)throw new Error("invalid null");return{consumed:0,value:this.coerceFunc("null",void 0)}}}function ce(_t,Ft){return new Ye(_t.toString(2).substr(-Ft),2)}class ue extends ie{constructor(_t,Ft,Lt,Yt){const Kt=(Lt?"int":"uint")+8*Ft;super(_t,Kt,Kt,Yt,!1),this.size=Ft,this.signed=Lt}encode(_t){try{let Ft=ot(_t);if(this.signed){let _t=ce(cn,8*this.size-1);if(Ft.gt(_t))throw new Error("out-of-bounds");if(_t=_t.plus(an).multipliedBy(on),Ft.lt(_t))throw new Error("out-of-bounds")}else if(Ft.lt(sn)||Ft.gt(ce(cn,8*this.size)))throw new Error("out-of-bounds");Ft=ce(at(Ft,8*this.size),8*this.size),this.signed&&(Ft=at(ut(Ft,8*this.size),256));let Lt=$(at(Ft).toString(16),64);if(-1!=Lt.indexOf("NaN"))throw U("invalid number value, NaN",Qe,{arg:this.localName,coderType:this.name,value:_t,v:Ft,twosComplement:at(Ft),twosComplement16:at(Ft).toString(16),pad:$(at(Ft).toString(16),64),size:this.size});return D(Lt)}catch(Ft){throw U("invalid number value",Qe,{arg:this.localName,coderType:this.name,value:_t,message:Ft.toString()})}}decode(_t,Ft){if(_t.length<Ft+32)throw U("insufficient data for "+this.name+" type",Qe,{arg:this.localName,coderType:this.name,value:nt(_t.slice(Ft,Ft+32))});var Lt=32-this.size,Yt=new Ye(L(_t.slice(Ft+Lt,Ft+32)),16);return Yt=this.signed?ut(Yt,8*this.size):ce(Yt,8*this.size),{consumed:32,value:this.coerceFunc(this.name,Yt)}}}var hn=new ue((function(_t,Ft){return Ft}),32,!1,"none");class he extends ie{constructor(_t,Ft,Lt){const Yt="bytes"+Ft;super(_t,Yt,Yt,Lt,!1),this.length=Ft}encode(_t){var Ft=new Uint8Array(32);try{if("string"==typeof _t&&_t.length%2!=0)throw new Error("hex string cannot be odd-length");let Lt=Jt(_t);if(Lt.length>this.length)throw new Error("incorrect data length");Ft.set(Lt)}catch(Ft){throw U("invalid "+this.name+" value. Use hex strings or Uint8Array",Qe,{arg:this.localName,coderType:this.name,value:Ft.value||_t,details:Ft.message})}return Ft}decode(_t,Ft){if(_t.length<Ft+32)throw U("insufficient data for "+this.name+" type",Qe,{arg:this.localName,coderType:this.name,value:nt(_t.slice(Ft,Ft+32))});return{consumed:32,value:this.coerceFunc(this.name,_t.slice(Ft,Ft+this.length))}}}function pe(_t){var Ft=32*Math.ceil(_t.length/32),Lt=new Uint8Array(Ft-_t.length);return z(hn.encode(_t.length),_t,Lt)}function fe(_t,Ft,Lt){if(_t.length<Ft+32)throw U("insufficient data for dynamicBytes length",Qe,{arg:Lt,coderType:"dynamicBytes",value:nt(_t.slice(Ft,Ft+32))});var Yt=hn.decode(_t,Ft).value;try{Yt=Yt.toNumber()}catch(_t){throw _t("dynamic bytes count too large",Qe,{arg:Lt,coderType:"dynamicBytes",value:Yt.toString()})}if(_t.length<Ft+32+Yt)throw U("insufficient data for dynamicBytes type",Qe,{arg:Lt,coderType:"dynamicBytes",value:nt(_t.slice(Ft,Ft+32+Yt))});return{consumed:32+32*Math.ceil(Yt/32),value:_t.slice(Ft+32,Ft+32+Yt)}}function de(_t){return 32*Math.ceil(_t/32)}function ge(_t,Ft){if(Array.isArray(Ft));else{if(!Ft||"object"!=typeof Ft)throw U("invalid tuple value",Qe,{coderType:"tuple",value:Ft});var Lt=[];_t.forEach((function(_t){Lt.push(Ft[_t.localName])})),Ft=Lt}if(_t.length!==Ft.length)throw U("types/value length mismatch",Qe,{coderType:"tuple",value:Ft});var Yt=[];_t.forEach((function(_t,Lt){Yt.push({dynamic:_t.dynamic,value:_t.encode(Ft[Lt])})}));var Kt=0,Zt=0;Yt.forEach((function(_t){_t.dynamic?(Kt+=32,Zt+=de(_t.value.length)):Kt+=de(_t.value.length)}));var le=0,ve=Kt,Ce=new Uint8Array(Kt+Zt);return Yt.forEach((function(_t){_t.dynamic?(Ce.set(hn.encode(ve),le),le+=32,Ce.set(_t.value,ve),ve+=de(_t.value.length)):(Ce.set(_t.value,le),le+=de(_t.value.length))})),Ce}class me extends Array{}class ye extends ie{constructor(_t,Ft,Lt,Yt){super(_t,"array",Ft.type+"["+(Lt>=0?Lt:"")+"]",Yt,-1===Lt||Ft.dynamic),this.coder=Ft,this.length=Lt}encode(_t){if(!Array.isArray(_t))throw U("expected array value",Qe,{arg:this.localName,coderType:"array",value:_t});var Ft=this.length,Lt=new Uint8Array(0);-1===Ft&&(Ft=_t.length,Lt=hn.encode(Ft)),function(_t,Ft,Lt){if(Lt||(Lt=""),_t<Ft)throw U("missing argument"+Lt,"MISSING_ARGUMENT",{count:_t,expectedCount:Ft});if(_t>Ft)throw U("too many arguments"+Lt,"UNEXPECTED_ARGUMENT",{count:_t,expectedCount:Ft})}(Ft,_t.length,"in coder array"+(this.localName?" "+this.localName:""));for(var Yt=[],Kt=0;Kt<_t.length;Kt++)Yt.push(this.coder);return z(Lt,ge(Yt,_t))}decode(_t,Ft){var Lt=0,Yt=this.length;if(-1===Yt){try{var Kt=hn.decode(_t,Ft)}catch(_t){throw _t("insufficient data for dynamic array length",Qe,{arg:this.localName,coderType:"array",value:_t.value})}try{Yt=Kt.value.toNumber()}catch(_t){throw _t("array count too large",Qe,{arg:this.localName,coderType:"array",value:Kt.value.toString()})}Lt+=Kt.consumed,Ft+=Kt.consumed}for(var Zt=[],le=0;le<Yt;le++)Zt.push(new ae(this.coder));var ve=function(_t,Ft,Lt){var Yt=Lt,Kt=0,Zt=[];return _t.forEach((function(_t){if(_t.dynamic){var le=hn.decode(Ft,Lt);(ve=_t.decode(Ft,Yt+le.value.toNumber())).consumed=le.consumed}else var ve=_t.decode(Ft,Lt);null!=ve.value&&Zt.push(ve.value),Lt+=ve.consumed,Kt+=ve.consumed})),{value:Zt,consumed:Kt}}(Zt,_t,Ft);return ve.consumed+=Lt,ve.value=this.coerceFunc(this.type,ve.value),ve}}class we extends ie{constructor(_t,Ft,Lt){var Yt=!1,Kt=[];Ft.forEach((function(_t){_t.dynamic&&(Yt=!0),Kt.push(_t.type)})),super(_t,"tuple","tuple("+Kt.join(",")+")",Lt,Yt),this.coders=Ft}encode(_t){return ge(this.coders,_t)}decode(_t,Ft){var Lt=function(_t,Ft,Lt){var Yt=Lt,Kt=0,Zt=new me;return _t.forEach((function(_t){if(_t.dynamic){var le=hn.decode(Ft,Lt);(ve=_t.decode(Ft,Yt+le.value.toNumber())).consumed=le.consumed}else var ve=_t.decode(Ft,Lt);null!=ve.value&&Zt.push(ve.value),Lt+=ve.consumed,Kt+=ve.consumed})),_t.forEach((function(_t,Ft){let Lt=_t.localName;Lt&&("length"===Lt&&(Lt="_length"),null==Zt[Lt]&&(Zt[Lt]=Zt[Ft]))})),{value:Zt,consumed:Kt}}(this.coders,_t,Ft);return Lt.value=this.coerceFunc(this.type,Lt.value),Lt}}const pn={address:class extends ie{constructor(_t,Ft){super(_t,"address","address",Ft,!1)}encode(_t){let Ft=new Uint8Array(32);const Lt=_t.trim();if(!ht(Lt))throw U("invalid address format",Qe,{arg:this.localName,coderType:"address",value:_t});try{Ft.set(D(Ut(Lt)),12)}catch(Ft){throw U(`invalid address (${Ft.message})`,Qe,{arg:this.localName,coderType:"address",value:_t})}return Ft}decode(_t,Ft){if(_t.length<Ft+32)throw U("insufficuent data for address type",Qe,{arg:this.localName,coderType:"address",value:nt(_t.slice(Ft,Ft+32)),missingBytes:Ft+32-_t.length});return{consumed:32,value:this.coerceFunc("address",ct(nt(_t.slice(Ft+12,Ft+32))))}}},bool:class extends ie{constructor(_t,Ft){super(_t,"bool","bool",Ft,!1)}encode(_t){return hn.encode(_t?1:0)}decode(_t,Ft){try{var Lt=hn.decode(_t,Ft)}catch(_t){if("insufficient data for uint256 type"===_t.reason)throw U("insufficient data for boolean type",Qe,{arg:this.localName,coderType:"boolean",value:_t.value});throw _t}return{consumed:Lt.consumed,value:this.coerceFunc("bool",!Lt.value.isZero())}}},string:class extends ie{constructor(_t,Ft){super(_t,"string","string",Ft,!0)}encode(_t){if("string"!=typeof _t)throw U("invalid string value",Qe,{arg:this.localName,coderType:"string",value:_t});return pe(R(_t))}decode(_t,Ft){var Lt=fe(_t,Ft,this.localName);return Lt.value=this.coerceFunc("string",P(Lt.value)),Lt}},bytes:class extends ie{constructor(_t,Ft){super(_t,"bytes","bytes",Ft,!0)}encode(_t){try{return pe(Jt(_t))}catch(_t){throw _t("invalid bytes value",Qe,{arg:this.localName,coderType:"bytes",value:_t.value})}}decode(_t,Ft){var Lt=fe(_t,Ft,this.localName);return Lt.value=this.coerceFunc("bytes",Lt.value),Lt}},function:class extends he{constructor(_t,Ft){super(_t,24,Ft)}}};function be(_t,Ft){var Lt,Yt=pn[Ft.type];if(Yt)return new Yt(_t,Ft.name);if(Lt=Ft.type.match(ln)){let Yt=parseInt(Lt[2]||"256");if(0===Yt||Yt>256||Yt%8!=0)throw U("invalid "+Lt[1]+" bit length",Qe,{arg:"param",value:Ft});return new ue(_t,Yt/8,"int"===Lt[1],Ft.name)}if(Lt=Ft.type.match(un)){let Yt=parseInt(Lt[1]);if(0===Yt||Yt>32)throw U("invalid bytes length",Qe,{arg:"param",value:Ft});return new he(_t,Yt,Ft.name)}if(Lt=Ft.type.match(dn)){const Yt=Object.assign({},Ft);let Kt=parseInt(Lt[2]||"-1");return Yt.type=Lt[1],new ye(_t,be(_t,Yt),Kt,Ft.name)}if("tuple"===Ft.type.substring(0,5))return function(_t,Ft,Lt){Ft||(Ft=[]);var Yt=Ft.map((Ft=>be(_t,Ft)));return new we(_t,Yt,Lt)}(_t,Ft.components,Ft.name);if(""===Ft.type)return new se(_t,Ft.name);throw U("invalid type",Qe,{arg:"type",value:Ft.type,fullType:Ft})}class _e{constructor(_t){!function(_t,Ft){if(!(_t instanceof Ft))throw U("missing new","MISSING_NEW",{name:Ft.name})}(this,_e),_t||(_t=oe),Vt(this,"coerceFunc",_t)}encode(_t,Ft){if(_t.length!==Ft.length)throw U("types/values length mismatch",Qe,{count:{types:_t.length,values:Ft.length},value:{types:_t,values:Ft}});const Lt=_t.map((_t=>"string"==typeof _t?Qt(_t):_t)).map((_t=>be(this.coerceFunc,_t)));return new we(this.coerceFunc,Lt,"_").encode(Ft)}decode(_t,Ft){const Lt=_t.map((_t=>"string"==typeof _t?Qt(_t):_t)).map((_t=>be(this.coerceFunc,_t)));return new we(this.coerceFunc,Lt,"_").decode(Ft,0).value}}const fn=new _e;var mn;!function(_t){_t.encodeParams=function(_t,Ft){return L(fn.encode(_t,Ft))},_t.decodeParams=function(_t,Ft){if(_t.length>0&&(!Ft||"0x"===Ft||"0X"===Ft))throw new Error("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return fn.decode(_t,D("0x"+Ft.replace(/0x/i,"")))}}(mn||(mn={}));class Te{constructor(_t){this.json=_t,this._inputTypes=_t.inputs||[],this._outputTypes=_t.outputs||[],this._constant=!!_t.constant,this._payable=!!_t.payable||"payable"===_t.stateMutability,this.needsToBeTransaction=this._payable||"constant"in _t&&!_t.constant||"nonpayable"===_t.stateMutability,this._name=G(_t)}extractDefaultBlock(_t){return _t.length>this._inputTypes.length&&!wt(_t[_t.length-1])&&Bt(_t.pop())||"latest"}validateArgs(_t){if(_t.some((_t=>void 0===_t)))throw new Error("Invalid call, some arguments are undefined");let Ft=_t.filter((function(_t){return!(!0===wt(_t)&&!1===bt(_t)&&!1===mt(_t)&&!(_t instanceof Uint8Array))}));if(Ft.length!==this._inputTypes.length)throw Lt=Ft.length,Yt=this._inputTypes.length,new Error(`Invalid number of arguments to Solidity function. given: ${Lt}, expected: ${Yt}`);var Lt,Yt}toPayload(_t){let Ft={to:void 0,data:void 0,value:void 0,from:void 0};_t.length>this._inputTypes.length&&wt(_t[_t.length-1])&&(Ft=_t.pop()),this.validateArgs(_t);const Lt=this.signature();let Yt=mn.encodeParams(this._inputTypes,_t);return 0==Yt.indexOf("0x")&&(Yt=Yt.substr(2)),Ft.data="0x"+Lt+Yt,Ft}signature(){return q(this._name).slice(0,8)}unpackOutput(_t){if(!_t)return;const Ft=_t.length>=2?_t.slice(2):_t;let Lt=mn.decodeParams(this._outputTypes,Ft);return 1===Lt.length?Lt[0]:Lt}async execute(_t,Ft,...Lt){if(!_t)throw new Error(`Cannot call function ${this.displayName()} because there is no requestManager`);if(this.needsToBeTransaction){const Yt=this.toPayload(Lt);if(Yt.to=Ft,Yt.value>0&&!this._payable)throw new Error("Cannot send value to non-payable function");if(!Yt.from)throw new Error('Missing "from" in transaction options');return await _t.eth_sendTransaction(Yt)}{const Yt=this.extractDefaultBlock(Lt),Kt=this.toPayload(Lt);Kt.to=Ft;const Zt=await _t.eth_call(Kt,Yt);return this.unpackOutput(Zt)}}estimateGas(_t,Ft,...Lt){if(!(_t instanceof zt))throw new Error("estimateGas needs to receive a RequestManager as first argument");let Yt=this.toPayload(Lt);return Yt.to=Ft,_t.eth_estimateGas(Yt)}displayName(){return J(this._name)}typeName(){return V(this._name)||"void"}attachToContract(_t){let Ft=this.displayName();const Lt=Object.assign(((...Ft)=>this.execute(_t.requestManager,_t.address,...Ft)),{estimateGas:this.estimateGas.bind(this,_t.requestManager,_t.address),toPayload:(..._t)=>this.toPayload(_t)});_t[Ft]||(_t[Ft]=Lt),_t[Ft][this.typeName()]=Lt}}function xe(_t){if(null==_t)return null;const Ft=String(_t).toString();return 0===Ft.indexOf("0x")?Ft:L(R(Ft))}class Ae{constructor(_t){this.requestManager=_t,this.isStarted=!1,this.isDisposed=!1,this.formatter=_t=>_t,this.filterId=Yt(),this.callbacks=[],this.stopSemaphore=Yt()}async watch(_t){if(this.isDisposed)throw new Error("The filter was disposed");_t&&(this.callbacks.push(_t),this.isStarted||await this.start())}async start(){if(this.isDisposed)throw new Error("The filter was disposed");if(!this.isStarted){this.isStarted=!0;try{const _t=await this.getNewFilter();if(!_t)throw new Error("Could not create a filter, response: "+JSON.stringify(_t));this.filterId.resolve(_t)}catch(_t){throw _t}this.stopSemaphore=Yt(),await this.poll()}}async stop(){if(!this.isStarted)return;if(this.isDisposed)return;this.isDisposed=!0;const _t=await this.filterId;if(this.isStarted=!1,this.stopSemaphore&&await this.stopSemaphore,!0!==await this.uninstall())throw new Error(`Couldn't stop the eth filter: ${_t}`)}async poll(){if(this.isStarted){if(this.callbacks.length){const _t=await this.getChanges();this.callbacks.forEach((Ft=>{this.formatter?_t.forEach((_t=>{Ft(this.formatter(_t))})):_t.forEach((_t=>Ft(_t)))}))}this.stopSemaphore.resolve(1),this.isStarted&&(this.stopSemaphore=Yt(),setTimeout((_t=()=>this.poll(),function(){_t().catch((_t=>console.error(_t)))}),500))}else this.stopSemaphore.resolve(1);var _t}}class ke extends Ae{constructor(_t,Ft,Lt=(_t=>_t)){super(_t),this.requestManager=_t,this.options=Ft,this.formatter=Lt,this.options=this.options||{},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(_t){return xe(_t)})),this.options={topics:this.options.topics,address:this.options.address?this.options.address:void 0,fromBlock:"number"==typeof this.options.fromBlock||"string"==typeof this.options.fromBlock?Ot(this.options.fromBlock)||void 0:"latest",toBlock:"number"==typeof this.options.toBlock||"string"==typeof this.options.toBlock?Ot(this.options.toBlock)||void 0:"latest"}}async getLogs(){this.isStarted||await this.start();const _t=await this.filterId;return this.requestManager.eth_getFilterLogs(_t)}async getNewFilter(){return this.requestManager.eth_newFilter(this.options)}async getChanges(){const _t=await this.filterId;return this.requestManager.eth_getFilterChanges(_t)}async uninstall(){const _t=await this.filterId;return this.requestManager.eth_uninstallFilter(_t)}}class Ee{constructor(_t,Ft,Lt){this.requestManager=_t,this.address=Lt,this._anonymous=!1,this._params=Ft.inputs||[],this._name=G(Ft),this._anonymous=Ft.anonymous||!1}types(_t){return this._params.filter((function(Ft){return Ft.indexed===_t}))}displayName(){return J(this._name)}typeName(){return V(this._name)||"void"}signature(){return q(this._name)}encode(_t={},Ft={}){let Lt={topics:[],address:this.address};void 0!==Ft.fromBlock&&(Lt.fromBlock=Ot(Ft.fromBlock)||void 0),void 0!==Ft.toBlock&&(Lt.toBlock=Ot(Ft.toBlock)||void 0),Lt.topics=Lt.topics||[],this._anonymous||Lt.topics.push("0x"+this.signature());let Yt=this._params.filter((function(_t){return!0===_t.indexed})).map((function(Ft){let Lt=_t[Ft.name];return null==Lt?null:bt(Lt)?Lt.map((function(_t){return"0x"+mn.encodeParams([Ft],[_t])})):"0x"+mn.encodeParams([Ft],[Lt])}));return Lt.topics=Lt.topics.concat(Yt),Lt}decode(_t){_t.data=_t.data||"",_t.topics=_t.topics||[];let Ft=(this._anonymous?_t.topics:_t.topics.slice(1)).map((function(_t){return _t.slice(2)})).join(""),Lt=mn.decodeParams(this.types(!0),Ft),Yt=_t.data.slice(2),Kt=mn.decodeParams(this.types(!1),Yt);const Zt=this._params.reduce((function(_t,Ft){return _t[Ft.name]=Ft.indexed?Lt.shift():Kt.shift(),_t}),{});return Object.assign(Object.assign({},jt(_t)),{event:this.displayName(),address:_t.address,args:Zt})}async execute(_t,Ft){let Lt=this.encode(_t,Ft),Yt=this.decode.bind(this);return new ke(this.requestManager,Lt,Yt)}attachToContract(_t){let Ft=this.execute.bind(this),Lt=this.displayName();_t.events[Lt]||(_t.events[Lt]=Ft),_t.events[Lt][this.typeName()]=this.execute.bind(this,_t)}}class Be{constructor(_t,Ft,Lt){this._requestManager=_t,this._json=Ft,this._address=Lt}encode(_t={}){let Ft={address:this._address};return void 0!==_t.fromBlock&&(Ft.fromBlock=Ot(_t.fromBlock)||void 0),void 0!==_t.toBlock&&(Ft.toBlock=Ot(_t.toBlock)||void 0),Ft}decode(_t){_t.data=_t.data||"";let Ft=bt(_t.topics)&&yt(_t.topics[0])?_t.topics[0].slice(2):"",Lt=this._json.filter((function(_t){return Ft===q(G(_t))}))[0];return Lt?new Ee(this._requestManager,Lt,this._address).decode(_t):jt(_t)}async execute(_t){let Ft=this.encode(_t),Lt=this.decode.bind(this);return new ke(this._requestManager,Ft,Lt)}getAllEventsFunction(){return this.execute.bind(this)}}class Oe{constructor(_t,Ft,Lt){var Yt;this.requestManager=_t,this.abi=Ft,this.address=Lt,this.events={},this.transactionHash=null,this.address=Lt,this.abi=Ft,(Yt=this).abi.filter((function(_t){return"function"===_t.type})).map((function(_t){return new Te(_t)})).forEach((function(_t){_t.attachToContract(Yt)})),this.allEvents=function(_t){let Ft=_t.abi.filter((function(_t){return"event"===_t.type})),Lt=new Be(_t.requestManager,Ft,_t.address);return Ft.map((function(Ft){return new Ee(_t.requestManager,Ft,_t.address)})).forEach((function(Ft){Ft.attachToContract(_t)})),Lt.getAllEventsFunction()}(this)}}_t.AbstractFilter=Ae,_t.BigNumber=Ye,_t.Contract=Oe,_t.ContractFactory=class{constructor(_t,Ft){this.requestManager=_t,this.abi=Ft}async deploy(..._t){let Ft,Lt=_t[_t.length-1];if(wt(Lt)&&!bt(Lt)&&(Ft=_t.pop()),!Ft)throw new Error("Missing options object");if(!Ft.data||"string"!=typeof Ft.data)throw new Error("Invalid options.data");if(K(Ft.value)>0&&!(this.abi.filter((function(Ft){return"constructor"===Ft.type&&Ft.inputs.length===_t.length}))[0]||{}).payable)throw new Error("Cannot send value to non-payable constructor");let Kt=(Zt=this.abi,le=_t,Zt.filter((function(_t){return"constructor"===_t.type&&_t.inputs&&_t.inputs.length===le.length})).map((function(_t){return _t.inputs||[]})).map((function(_t){return mn.encodeParams(_t,le)}))[0]||"");var Zt,le;Ft.data+=Kt,Ft.gas||(Ft.gas=await this.requestManager.eth_estimateGas(Ft));const ve=await this.requestManager.eth_sendTransaction(Ft);if(!ve)throw new Error("Error while sending contract creation transaction. A TxHash was not retrieved");const Ce=await async function(_t,Ft){const Lt=Yt();let Kt=0;const o=()=>{Kt++,Kt>50?Lt.reject(new Error("Contract transaction couldn't be found after 50 blocks")):_t.eth_getTransactionReceipt(Ft).then((_t=>{_t&&_t.blockHash?Lt.resolve(_t):setTimeout(o,1e3)}),(_t=>Lt.reject(_t)))};o();const Zt=await Lt,le=await _t.eth_getCode(Zt.contractAddress,"latest");if(le&&le.length>3)return Zt.contractAddress;throw Object.assign(new Error("The contract code couldn't be stored, please check your gas amount."),{response:le,receipt:Zt})}(this.requestManager,ve),Se=await this.at(Ce);return Se.transactionHash=ve,Se}async at(_t){if(!ht(_t))throw new TypeError(`Invalid address ${JSON.stringify(_t)}`);return new Oe(this.requestManager,this.abi,_t)}},_t.EthBlockFilter=class extends ke{constructor(_t){super(_t,{})}async getNewFilter(){return this.requestManager.eth_newBlockFilter()}},_t.EthFilter=ke,_t.EthPendingTransactionFilter=class extends ke{constructor(_t){super(_t,{})}async getNewFilter(){return this.requestManager.eth_newPendingTransactionFilter()}},_t.HTTPProvider=class{constructor(_t,Ft={}){this.host=_t,this.options=Ft,this.debug=!1,this.host=_t||"http://localhost:8545"}send(){throw new Error("Sync requests are deprecated")}sendAsync(_t,Ft){try{let Lt=null;if(Lt=_t instanceof Array?_t.map((_t=>e(_t))):e(_t),"undefined"==typeof fetch)throw new Error("There is no global fetch object. Please install and import isomorphic-fetch");const Yt={body:JSON.stringify(Lt),method:"POST",headers:Object.assign(Object.assign({},this.options.headers),{"Content-Type":"application/json"})};this.debug&&console.log("SEND >> "+Yt.body),fetch(this.host,Yt).then((async _t=>{if(_t.ok){const Lt=await _t.json();this.debug&&console.log("RECV << "+JSON.stringify(Lt)),Lt.error?Ft(Object.assign(new Error(Lt.error.json||Lt.error),Lt.error)):Ft(null,Lt)}else this.debug&&console.log("ERR << "+JSON.stringify(_t)),Ft(new Error("External error. response code: "+_t.status))}),(_t=>{this.debug&&console.log("ERR << "+JSON.stringify(_t)),Ft(_t)}))}catch(_t){this.debug&&console.log("ERR << "+JSON.stringify(_t)),Ft(_t)}}},_t.Method=qt,_t.Property=Ht,_t.RequestManager=zt,_t.SHHFilter=class extends Ae{constructor(_t,Ft){super(_t),this.requestManager=_t,this.options=Ft,this.options=this.options||{topics:[]},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(_t){return xe(_t)})),this.options={topics:this.options.topics,to:this.options.to}}async getMessages(){const _t=await this.filterId;return this.requestManager.shh_getMessages(_t)}async getNewFilter(){return this.requestManager.shh_newFilter(this.options)}async getChanges(){const _t=await this.filterId;return this.requestManager.shh_getFilterChanges(_t)}async uninstall(){const _t=await this.filterId;return this.requestManager.shh_uninstallFilter(_t)}},_t.SolidityEvent=Ee,_t.SolidityFunction=Te,_t.WebSocketProvider=class{constructor(_t,Ft={}){this.url=_t,this.options=Ft,this.isDisposed=!1,this.responseCallbacks=new Map,this.notificationCallbacks=new Set,this.debug=!1,this.lastChunk="",this.connect()}dispose(){this.isDisposed=!0;const _t=this.connection;this.timeout(new Error("Provider disposed.")),_t.then((_t=>_t.close()))}send(){throw new Error("Sync requests are deprecated")}sendAsync(_t,Ft){const Lt=[];let Kt;if(_t instanceof Array)Kt=Promise.all(_t.map((_t=>{const Ft=Yt();try{const Yt=e(_t);Lt.push(Yt),this.responseCallbacks.set(Yt.id,Ft)}catch(_t){Ft.reject(_t)}return Ft})));else{const Ft=Yt();try{const Yt=e(_t);Lt.push(Yt),this.responseCallbacks.set(Yt.id,Ft)}catch(_t){Ft.reject(_t)}Kt=Ft}Kt.then((_t=>Ft(null,_t)),(_t=>Ft(_t))),this.connection.then((_t=>{Lt.forEach((Ft=>{const Lt=JSON.stringify(Ft);this.debug&&console.log("SEND >> "+Lt),_t.send(Lt)}))}),(_t=>{Ft(_t)}))}parseResponse(_t){let Ft=[];return _t.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((_t=>{let Lt=_t;this.lastChunk&&(Lt=this.lastChunk+Lt);let Yt=null;try{Yt=JSON.parse(Lt)}catch(_t){return this.lastChunk=Lt,clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.timeout()}),15e3))}clearTimeout(this.lastChunkTimeout),this.lastChunk="",Yt&&Ft.push(Yt)})),Ft}processMessage(_t){if("id"in _t){const Ft=_t.id,Lt=this.responseCallbacks.get(Ft);if(!Lt)return void console.error("Error: Received a response for an unknown request",_t);this.responseCallbacks.delete(Ft),"error"in _t?Lt.reject(Object.assign(new Error(_t.error.message||_t.error),_t.error)):"result"in _t&&Lt.resolve(_t)}else this.notificationCallbacks.forEach((Ft=>Ft(null,_t)))}timeout(_t){this.connection&&this.connection.isPending||(this.connection=Yt());const Ft=_t||new Error("Connection timeout");this.responseCallbacks.forEach((_t=>_t.reject(Ft))),this.responseCallbacks.clear(),this.isDisposed||this.connect()}connect(){this.connection&&!this.connection.isPending&&this.connection.then((_t=>_t.close())),this.connection&&this.connection.isPending||(this.connection=Yt()),this.lastChunk="";let _t=this.options.WebSocketConstructor||("undefined"!=typeof WebSocket?WebSocket:void 0);if(!_t)throw new Error("Please provide a WebSocketConstructor");const Ft=new _t(this.url,this.options.protocol);Ft.onopen=()=>{this.connection.resolve(Ft)},Ft.onerror=_t=>{const Ft=new Error("Error in web socket");Ft.data=_t,this.timeout(Ft)},Ft.onclose=_t=>{this.timeout(new Error(`Connection closed (${_t&&_t.reason||"Unknown reason"})`))},Ft.onmessage=_t=>{let Ft="string"==typeof _t.data?_t.data:"";this.debug&&console.log("RECV << "+_t.data),this.parseResponse(Ft).forEach((_t=>{_t instanceof Array?_t.forEach((_t=>this.processMessage(_t))):this.processMessage(_t)}))}}},_t.bytesToHex=L,_t.bytesToUtf8String=P,_t.concatBytes=z,_t.default=zt,_t.extractDisplayName=J,_t.extractTypeName=V,_t.fromAscii=function(_t,Ft=0){let Lt="";for(let Ft=0;Ft<_t.length;Ft++){let Yt=_t.charCodeAt(Ft).toString(16);Lt+=Yt.length<2?"0"+Yt:Yt}return"0x"+Lt.padEnd(Ft,"0")},_t.fromDecimal=et,_t.fromTwosComplement=ut,_t.fromWei=function(_t,Ft){let Lt=ot(_t).dividedBy(rt(Ft));return mt(_t)?Lt:Lt.toString(10)},_t.getAddress=ct,_t.getValueOfUnit=rt,_t.hexToBytes=D,_t.isAddress=ht,_t.isArray=bt,_t.isBigNumber=mt,_t.isBloom=function(_t){return!!/^(0x)?[0-9a-f]{512}$/i.test(_t)&&!!/^(0x)?[0-9a-f]{512}$/i.test(_t)},_t.isBoolean=vt,_t.isChecksumAddress=pt,_t.isFunction=function(_t){return"function"==typeof _t},_t.isHex=function(_t){return"string"==typeof _t&&/^0x[0-9a-fA-F]+$/.test(_t)},_t.isJson=function(_t){try{return!!JSON.parse(_t)}catch(_t){return!1}},_t.isObject=wt,_t.isStrictAddress=lt,_t.isString=yt,_t.isTopic=function(_t){return!!/^(0x)?[0-9a-f]{64}$/i.test(_t)&&!!/^(0x)?[0-9a-f]{64}$/i.test(_t)},_t.isValidResponse=xt,_t.padLeft=$,_t.padRight=function(_t,Ft,Lt){return _t+new Array(Ft-_t.length+1).join(Lt||"0")},_t.sha3=q,_t.signedIsNegative=st,_t.stringToUtf8Bytes=R,_t.toAddress=gt,_t.toArray=dt,_t.toAscii=function(_t){let Ft="",Lt=0,Yt=_t.length;for("0x"===_t.substring(0,2)&&(Lt=2);Lt<Yt;Lt+=2){let Yt=parseInt(_t.substr(Lt,2),16);Ft+=String.fromCharCode(Yt)}return Ft},_t.toBatchPayload=function(_t){return _t.map((function(_t){return Tt(_t.method,_t.params)}))},_t.toBigNumber=ot,_t.toBoolean=tt,_t.toChecksumAddress=ft,_t.toData=X,_t.toDecimal=K,_t.toHex=nt,_t.toJsonRpcRequest=Tt,_t.toNullDecimal=Y,_t.toString=Z,_t.toStringData=Q,_t.toTwosComplement=at,_t.toWei=function(_t,Ft){let Lt=ot(_t).times(rt(Ft));return mt(_t)?Lt:Lt.toString(10)},_t.transformToFullName=G,Object.defineProperty(_t,"__esModule",{value:!0})}(Ft)}(0,Fe.exports);var Re,Pe,Le,Ue,He=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"_balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"_owner",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],qe=[{constant:!0,inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"uint256",name:"_id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];_t.Type=void 0,(Re=_t.Type||(_t.Type={}))[Re.NFT=0]="NFT",Re[Re.HASWEARABLES=1]="HASWEARABLES",Re[Re.WEARABLESON=2]="WEARABLESON",Re[Re.ADDRESS=3]="ADDRESS",_t.Match=void 0,(Pe=_t.Match||(_t.Match={}))[Pe.ANY=0]="ANY",Pe[Pe.ALL=1]="ALL",_t.ChainType=void 0,(Le=_t.ChainType||(_t.ChainType={}))[Le.ETH=0]="ETH",Le[Le.POLYGON=1]="POLYGON",_t.NFTType=void 0,(Ue=_t.NFTType||(_t.NFTType={}))[Ue.ERC721=0]="ERC721",Ue[Ue.ERC1155=1]="ERC1155";var We=new BasicMaterial;We.texture=new Texture("https://lsnft.mypinata.cloud/ipfs/QmaqcRuouE6Tip9acZmjxMyBftEA5aHASRDjn8Bmad87Ld"),We.alphaTest=1;var Ge=new Material;Ge.albedoColor=new Color4(.2,.1,.9,.3);var Ve=function(_t){function e(Ft){var Lt=_t.call(this,Ft.name)||this;Lt.data=Ft,Lt.addComponent(new BoxShape),Lt.addComponent(new Transform(Ft.transform)),executeTask((function(){return d(Lt,void 0,void 0,(function(){var _t;return g(this,(function(Lt){switch(Lt.label){case 0:return(_t=Ft.debug)?[4,ve.isPreviewMode()]:[3,2];case 1:_t=Lt.sent(),Lt.label=2;case 2:return _t?(this.addComponent(Ge),this.getComponent(BoxShape).withCollisions=!1):this.addComponent(We),[2]}}))}))}));var Yt=Lt.getComponent(Transform).scale.clone();return Lt.addComponent(new Ie.TriggerComponent(new Ie.TriggerBoxShape(new Vector3(Yt.x+.7,Yt.y+.7,Yt.z+.7),new Vector3(0,0,0)),{enableDebug:!1,onCameraEnter:function(){Ft.deniedMessage&&Ne.displayAnnouncement(Ft.deniedMessage),Ft.onDenied&&Ft.onDenied()}})),Lt}return function(_t,Ft){if("function"!=typeof Ft&&null!==Ft)throw new TypeError("Class extends value "+String(Ft)+" is not a constructor or null");function n(){this.constructor=_t}f(_t,Ft),_t.prototype=null===Ft?Object.create(Ft):(n.prototype=Ft.prototype,new n)}(e,_t),e.prototype.updateDeniedAction=function(_t){this.data.onDenied=_t},e.prototype.updateDeniedMessage=function(_t){this.data.deniedMessage=_t},e}(Entity);function k(_t){return d(this,void 0,void 0,(function(){var Ft,Lt,Kt;return g(this,(function(Zt){switch(Zt.label){case 0:return[4,Yt.getUserData()];case 1:if(null==(Ft=Zt.sent())?void 0:Ft.hasConnectedWeb3){for(Lt=[],Kt=0;Kt<_t.allowedAddresses.length;Kt++)Lt.push(_t.allowedAddresses[Kt].toLowerCase());return-1!=Lt.indexOf(Ft.publicKey.toLowerCase())?[2,!0]:[2,!1]}return[2,!1]}}))}))}function E(Ft){return d(this,void 0,void 0,(function(){var Lt,Kt,Zt,le,ve,Ce,Ie,Ne,Fe,Re,Pe,Le,Ue,He,qe,We,Ge,Ve,$e,Xe,Ye;return g(this,(function(Je){switch(Je.label){case 0:return Lt=Ft.wearables?Ft.wearables:[],[4,Yt.getUserData()];case 1:return(null==(Kt=Je.sent())?void 0:Kt.hasConnectedWeb3)?Ft.type!=_t.Type.HASWEARABLES?[3,3]:[4,Se.avatar.getUserInventory(Kt.publicKey?Kt.publicKey:"")]:[3,5];case 2:if(Zt=Je.sent(),Ft.wearablesMatch!=_t.Match.ANY){for(Re=0,Pe=0;Pe<Lt.length;Pe++)try{for(We=void 0,Ce=m(Zt),Ie=Ce.next();!Ie.done;Ie=Ce.next())Ie.value===Lt[Pe]&&Re++}catch(_t){We={error:_t}}finally{try{Ie&&!Ie.done&&(Ge=Ce.return)&&Ge.call(Ce)}finally{if(We)throw We.error}}return Re>=Lt.length?[2,!0]:[2,!1]}for(Pe=0;Pe<Lt.length;Pe++)try{for(He=void 0,le=m(Zt),ve=le.next();!ve.done;ve=le.next())if(ve.value===Lt[Pe])return[2,!0]}catch(_t){He={error:_t}}finally{try{ve&&!ve.done&&(qe=le.return)&&qe.call(le)}finally{if(He)throw He.error}}return[3,4];case 3:if(log("Currently wearing: ",Kt.avatar.wearables),Ft.wearablesMatch!=_t.Match.ANY){for(Re=0,Pe=0;Pe<Lt.length;Pe++)try{for(Xe=void 0,Le=m(Kt.avatar.wearables),Ue=Le.next();!Ue.done;Ue=Le.next())Ue.value===Lt[Pe]&&Re++}catch(_t){Xe={error:_t}}finally{try{Ue&&!Ue.done&&(Ye=Le.return)&&Ye.call(Le)}finally{if(Xe)throw Xe.error}}return Re>=Lt.length?[2,!0]:[2,!1]}for(Pe=0;Pe<Lt.length;Pe++)try{for(Ve=void 0,Ne=m(Kt.avatar.wearables),Fe=Ne.next();!Fe.done;Fe=Ne.next())if(Fe.value===Lt[Pe])return[2,!0]}catch(_t){Ve={error:_t}}finally{try{Fe&&!Fe.done&&($e=Ne.return)&&$e.call(Ne)}finally{if(Ve)throw Ve.error}}Je.label=4;case 4:return[3,6];case 5:return[2,!1];case 6:return[2]}}))}))}function B(Ft){return d(this,void 0,void 0,(function(){var Yt,Kt,Zt,le,ve,Se,Ie;return g(this,(function(Ne){switch(Ne.label){case 0:return Ne.trys.push([0,11,,12]),log("checking L2 nft"),[4,Lt.getProvider()];case 1:return Yt=Ne.sent(),new Fe.exports.RequestManager(Yt),Kt=new Fe.exports.WebSocketProvider("wss://rpc-mainnet.matic.quiknode.pro"),[4,Ce.getUserAccount()];case 2:return Zt=Ne.sent(),le=new Fe.exports.RequestManager(Kt),[4,new Fe.exports.ContractFactory(le,Ft.nftType==_t.NFTType.ERC721?He:qe).at(Ft.contract?Ft.contract:"")];case 3:return ve=Ne.sent(),Se=void 0,Ft.tokenId?Ft.nftType!=_t.NFTType.ERC721?[3,5]:[4,ve.ownerOf(Ft.tokenId)]:[3,8];case 4:return(Se=Ne.sent()).toLowerCase()==Zt.toLowerCase()?[2,!0]:[2,!1];case 5:return[4,ve.balanceOf(Zt,Ft.tokenId)];case 6:case 9:return Se=Ne.sent(),log("L2 balance of is",Se),Se>0?[2,!0]:[2,!1];case 7:return[3,10];case 8:return[4,ve.balanceOf(Zt)];case 10:return[3,12];case 11:return Ie=Ne.sent(),log(Ie),[2,!1];case 12:return[2]}}))}))}function O(Ft){return d(this,void 0,void 0,(function(){var Yt,Kt,Zt,le,ve,Se;return g(this,(function(Ie){switch(Ie.label){case 0:log(Ft),Ie.label=1;case 1:return Ie.trys.push([1,12,,13]),[4,Ce.getUserAccount()];case 2:return Yt=Ie.sent(),[4,Lt.getProvider()];case 3:return Kt=Ie.sent(),Zt=new Fe.exports.RequestManager(Kt),[4,new Fe.exports.ContractFactory(Zt,Ft.nftType==_t.NFTType.ERC721?He:qe).at(Ft.contract?Ft.contract:"")];case 4:return le=Ie.sent(),ve=void 0,Ft.tokenId?Ft.nftType!=_t.NFTType.ERC721?[3,6]:[4,le.ownerOf(Ft.tokenId)]:[3,9];case 5:return(ve=Ie.sent()).toLowerCase()==Yt.toLowerCase()?[2,!0]:[2,!1];case 6:return[4,le.balanceOf(Yt,Ft.tokenId)];case 7:return ve=Ie.sent(),log("L1 balance of is",ve),ve>0?[2,!0]:[2,!1];case 8:return[3,11];case 9:return[4,le.balanceOf(Yt)];case 10:return ve=Ie.sent(),log("L1 balance of is",ve),ve>0?[2,!0]:[2,!1];case 11:return[3,13];case 12:return Se=Ie.sent(),log(Se),[2,!1];case 13:return[2]}}))}))}_t.createArea=function(Ft){var Lt=this,Yt=new Ve(Ft);return engine.addEntity(Yt),executeTask((function(){return d(Lt,void 0,void 0,(function(){var Lt;return g(this,(function(Kt){switch(Kt.label){case 0:switch(Kt.trys.push([0,12,,13]),Ft.type){case _t.Type.NFT:return[3,1];case _t.Type.ADDRESS:return[3,6];case _t.Type.HASWEARABLES:case _t.Type.WEARABLESON:return[3,9]}return[3,11];case 1:return log("checking nft"),Ft.chain!=_t.ChainType.ETH?[3,3]:[4,O(Ft)];case 2:return Lt=Kt.sent(),[3,5];case 3:return[4,B(Ft)];case 4:Lt=Kt.sent(),Kt.label=5;case 5:return Lt&&(log("we have nft holder"),engine.removeEntity(Yt)),[3,11];case 6:return log("checking Addresses"),Ft.allowedAddresses?[4,k(Ft)]:[3,8];case 7:Kt.sent()&&engine.removeEntity(Yt),Kt.label=8;case 8:return[3,11];case 9:return log("checking wearables"),[4,E(Ft)];case 10:return Kt.sent()&&engine.removeEntity(Yt),[3,11];case 11:return[3,13];case 12:return Kt.sent(),[3,13];case 13:return[2]}}))}))})),Yt},Object.defineProperty(_t,"__esModule",{value:!0})})),define("dcl-builder-hud",["exports","@decentraland/EnvironmentAPI"],(function(_t,Ft){function e(_t,Ft,Lt,Yt){return new(Lt||(Lt=Promise))((function(Kt,Zt){function a(_t){try{r(Yt.next(_t))}catch(_t){Zt(_t)}}function h(_t){try{r(Yt.throw(_t))}catch(_t){Zt(_t)}}function r(_t){var Ft;_t.done?Kt(_t.value):(Ft=_t.value,Ft instanceof Lt?Ft:new Lt((function(_t){_t(Ft)}))).then(a,h)}r((Yt=Yt.apply(_t,Ft||[])).next())}))}function n(_t,Ft){var Lt,Yt,Kt,Zt,le={label:0,sent:function(){if(1&Kt[0])throw Kt[1];return Kt[1]},trys:[],ops:[]};return Zt={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(Zt[Symbol.iterator]=function(){return this}),Zt;function h(Zt){return function(ve){return function(Zt){if(Lt)throw new TypeError("Generator is already executing.");for(;le;)try{if(Lt=1,Yt&&(Kt=2&Zt[0]?Yt.return:Zt[0]?Yt.throw||((Kt=Yt.return)&&Kt.call(Yt),0):Yt.next)&&!(Kt=Kt.call(Yt,Zt[1])).done)return Kt;switch(Yt=0,Kt&&(Zt=[2&Zt[0],Kt.value]),Zt[0]){case 0:case 1:Kt=Zt;break;case 4:return le.label++,{value:Zt[1],done:!1};case 5:le.label++,Yt=Zt[1],Zt=[0];continue;case 7:Zt=le.ops.pop(),le.trys.pop();continue;default:if(!((Kt=(Kt=le.trys).length>0&&Kt[Kt.length-1])||6!==Zt[0]&&2!==Zt[0])){le=0;continue}if(3===Zt[0]&&(!Kt||Zt[1]>Kt[0]&&Zt[1]<Kt[3])){le.label=Zt[1];break}if(6===Zt[0]&&le.label<Kt[1]){le.label=Kt[1],Kt=Zt;break}if(Kt&&le.label<Kt[2]){le.label=Kt[2],le.ops.push(Zt);break}Kt[2]&&le.ops.pop(),le.trys.pop();continue}Zt=Ft.call(_t,le)}catch(_t){Zt=[6,_t],Yt=0}finally{Lt=Kt=0}if(5&Zt[0])throw Zt[1];return{value:Zt[0]?Zt[1]:void 0,done:!0}}([Zt,ve])}}}var Lt=function(){function t(_t,Ft,Lt){this.direction=_t,this.mode=Ft,this.pos=Lt||0}return t=function(_t,Ft,Lt,Yt){var Kt,Zt=arguments.length,le=Zt<3?Ft:null===Yt?Yt=Object.getOwnPropertyDescriptor(Ft,Lt):Yt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(_t,Ft,Lt,Yt);else for(var ve=_t.length-1;ve>=0;ve--)(Kt=_t[ve])&&(le=(Zt<3?Kt(le):Zt>3?Kt(Ft,Lt,le):Kt(Ft,Lt))||le);return Zt>3&&le&&Object.defineProperty(Ft,Lt,le),le}([Component("moving")],t),t}(),Yt=engine.getComponentGroup(Lt),Kt=function(){function t(){this.positions=[]}return t.prototype.addCameraPosition=function(_t){this.positions.push(_t),log(this.positions)},t.prototype.update=function(){var _t,Ft;try{for(var Kt=function(_t){var Ft="function"==typeof Symbol&&Symbol.iterator,Lt=Ft&&_t[Ft],Yt=0;if(Lt)return Lt.call(_t);if(_t&&"number"==typeof _t.length)return{next:function(){return _t&&Yt>=_t.length&&(_t=void 0),{value:_t&&_t[Yt++],done:!_t}}};throw new TypeError(Ft?"Object is not iterable.":"Symbol.iterator is not defined.")}(Yt.entities),Zt=Kt.next();!Zt.done;Zt=Kt.next()){var le=Zt.value,ve=le.getComponent(Transform).position,Ce=le.getComponent(Lt).direction;switch(le.getComponent(Lt).mode){case"fixed":var Se=le.getComponent(Transform).position.clone(),Ie=le.getComponent(Lt).pos;Vector3.Distance(Se,this.positions[Ie])<.05?le.removeComponent(Lt):le.getComponent(Transform).position=Vector3.Lerp(Se,this.positions[Ie],.04);break;case"free":"up"==Ce&&ve.y<150&&(ve.y+=.1),"down"==Ce&&(ve.y>.2?ve.y-=.1:le.removeComponent(Lt)),"forward"==Ce&&(ve.z+=.1),"back"==Ce&&(ve.z>1?ve.z-=.1:le.removeComponent(Lt)),"right"==Ce&&(ve.x+=.1),"left"==Ce&&(ve.x>1?ve.x-=.1:le.removeComponent(Lt))}}}catch(Ft){_t={error:Ft}}finally{try{Zt&&!Zt.done&&(Ft=Kt.return)&&Ft.call(Kt)}finally{if(_t)throw _t.error}}},t}(),Zt=function(){function t(){var _t=this;this.isSetup=!1,this.entities=[],this.numEntities=0,this.selectedEntityIndex=-1,this.selectionPointerScale=1,this.selectionPointerElevation=1,this.newEntityScale=.1,this.modePOSITION=0,this.modeROTATION=1,this.modeSCALE=2,this.mode=this.modePOSITION,this.snap=0,this.snapPosScale=1,this.snapRot=90,this.uiMaximized=!1,this.engineEntities=[],this.showingColliders=!1,this.transparent=new Texture("https://lsnft.mypinata.cloud/ipfs/QmaqcRuouE6Tip9acZmjxMyBftEA5aHASRDjn8Bmad87Ld"),this.scaffoldScale=new Vector3(1.2,1,1.2),this.transparentMat=new BasicMaterial,this.transparentMat.alphaTest=1,this.transparentMat.texture=this.transparent,this.scaffolding=new Entity,this.scaffolding.addComponent(new Transform({position:new Vector3(1,.3,1),scale:Vector3.Zero()})),engine.addEntity(this.scaffolding);var Lt=new Entity;Lt.addComponent(new Transform({position:new Vector3(-.5,1,-.5),scale:Vector3.One()})),Lt.setParent(this.scaffolding);var Yt=new Entity;Yt.addComponent(new BoxShape),Yt.addComponent(new Transform({position:new Vector3(2,0,.1),scale:new Vector3(4,.1,.1)})),Yt.setParent(Lt),Yt.getComponent(BoxShape).withCollisions=!1,Yt.addComponent(new Material),Yt.getComponent(Material).albedoColor=Color4.Red();var Zt=new Entity;Zt.addComponent(new TextShape("X")),Zt.addComponent(new Transform({position:new Vector3(3,.5,.4)})),Zt.addComponent(new Billboard(!1,!0,!1)),Zt.setParent(Lt);var le=new Entity;le.addComponent(new BoxShape),le.addComponent(new Transform({position:new Vector3(.1,2,.1),scale:new Vector3(.1,4,.1)})),le.setParent(Lt),le.getComponent(BoxShape).withCollisions=!1,le.addComponent(new Material),le.getComponent(Material).albedoColor=Color4.Green();var Ce=new Entity;Ce.addComponent(new TextShape("Y")),Ce.addComponent(new Transform({position:new Vector3(.5,3,.5)})),Ce.addComponent(new Billboard(!1,!0,!1)),Ce.setParent(Lt);var Se=new Entity;Se.addComponent(new BoxShape),Se.addComponent(new Transform({position:new Vector3(.1,0,2),scale:new Vector3(.1,.1,4)})),Se.setParent(Lt),Se.addComponent(new Material),Se.getComponent(BoxShape).withCollisions=!1,Se.getComponent(Material).albedoColor=Color4.Blue();var Ie=new Entity;Ie.addComponent(new TextShape("Z")),Ie.addComponent(new Transform({position:new Vector3(.4,1,4)})),Ie.addComponent(new Billboard(!1,!0,!1)),Ie.setParent(Lt),this.scaffloor=new Entity,this.scaffloor.addComponent(new PlaneShape),this.scaffloor.addComponent(new Transform({position:new Vector3(0,0,0),rotation:Quaternion.Euler(90,0,0),scale:Vector3.One()})),this.scaffloor.addComponent(new Material),engine.addEntity(this.scaffloor),this.scaffloor.setParent(this.scaffolding),this.leftWall=new Entity,this.leftWall.addComponent(new PlaneShape),this.leftWall.addComponent(new Transform({position:new Vector3(0,-4.5,.6),rotation:Quaternion.Euler(0,180,0),scale:Vector3.Zero()})),this.leftWall.addComponent(this.transparentMat),this.leftWall.setParent(this.scaffolding),this.rightWall=new Entity,this.rightWall.addComponent(new PlaneShape),this.rightWall.addComponent(new Transform({position:new Vector3(0,-4.5,-.6),rotation:Quaternion.Euler(0,180,0),scale:Vector3.Zero()})),this.rightWall.addComponent(this.transparentMat),this.rightWall.setParent(this.scaffolding),this.frontWall=new Entity,this.frontWall.addComponent(new PlaneShape),this.frontWall.addComponent(new Transform({position:new Vector3(.6,-4.5,0),rotation:Quaternion.Euler(0,270,0),scale:Vector3.Zero()})),this.frontWall.addComponent(this.transparentMat),this.frontWall.setParent(this.scaffolding),this.backWall=new Entity,this.backWall.addComponent(new PlaneShape),this.backWall.addComponent(new Transform({position:new Vector3(-.6,-4.5,0),rotation:Quaternion.Euler(0,270,0),scale:Vector3.One()})),this.backWall.addComponent(this.transparentMat),this.backWall.setParent(this.scaffolding),this.selectionPointer=new Entity,this.selectionPointer.addComponent(new PlaneShape),this.selectionPointer.getComponent(PlaneShape).withCollisions=!1,this.selectionPointer.addComponent(new BasicMaterial),this.selectionPointer.getComponent(BasicMaterial).texture=new Texture("https://lsnft.mypinata.cloud/ipfs/QmWbKQtJjsLjgDFinoH6fvmbUoetLZd7LanChC1R4QkA2e"),this.selectionPointer.addComponent(new Transform({rotation:Quaternion.Euler(0,0,180),scale:Vector3.One()})),this.selectionPointer.addComponent(new Billboard(!1,!0,!1)),this.setupUI(),executeTask((function(){return e(_t,void 0,void 0,(function(){return n(this,(function(_t){switch(_t.label){case 0:return[4,Ft.isPreviewMode()];case 1:return _t.sent()?(log("in preview mode"),ve.uiMinimizedContainer.visible=!0):(log("not in preview mode"),ve.uiMinimizedContainer.visible=!1,ve.uiMaximizedContainer.visible=!1,engine.removeEntity(this.selectionPointer)),[2]}}))}))})),this.unsavedContainer=new UIContainerRect(this.uiMaximizedContainer),this.unsavedContainer.hAlign="center",this.unsavedContainer.vAlign="center",this.unsavedContainer.width=160,this.unsavedContainer.height=20,this.unsavedContainer.positionY=225,this.unsavedContainer.positionX=0,this.unsavedContainer.color=Color4.Red(),this.unsavedContainer.visible=!1;var Ne=new UIText(this.unsavedContainer);Ne.hAlign="center",Ne.vAlign="center",Ne.positionY=0,Ne.positionX=0,Ne.height=10,Ne.fontSize=12,Ne.hTextAlign="center",Ne.value="** Unsaved Changes **",this.movingSystem=new Kt,engine.addSystem(this.movingSystem)}return t.prototype.setDefaultParent=function(_t){this.defaultParent=_t},t.prototype.setupUI=function(){return e(this,void 0,void 0,(function(){var _t,Ft,Lt,Yt,Kt=this;return n(this,(function(Zt){return this.isSetup=!0,_t=new Texture("https://lsnft.mypinata.cloud/ipfs/QmYyDWc67svskJWxQrZNJxjwNsvsXyG9dvVzXvJtYtmgAr"),this.canvas=new UICanvas,this.canvas.hAlign="center",this.canvas.vAlign="bottom",this.uiMinimizedContainer=new UIContainerRect(this.canvas),this.uiMinimizedContainer.hAlign="right",this.uiMinimizedContainer.vAlign="bottom",this.uiMinimizedContainer.width=70,this.uiMinimizedContainer.height=80,this.uiMinimizedContainer.positionY=100,this.uiMinimizedContainer.positionX=0,this.uiMinimizedContainer.color=new Color4(0,0,0,0),this.uiMinimizedContainer.visible=!1,this.maximizeButton=new UIImage(this.uiMinimizedContainer,_t),this.maximizeButton.sourceLeft=826,this.maximizeButton.sourceTop=544,this.maximizeButton.sourceWidth=74,this.maximizeButton.sourceHeight=74,this.maximizeButton.hAlign="right",this.maximizeButton.vAlign="bottom",this.maximizeButton.positionX=-15,this.maximizeButton.positionY=30,this.maximizeButton.width=40,this.maximizeButton.height=40,this.maximizeButton.isPointerBlocker=!0,this.maximizeButton.onClick=new OnClick((function(){Kt.maximizeUI()})),this.uiMaximizedContainer=new UIContainerRect(this.canvas),this.uiMaximizedContainer.hAlign="right",this.uiMaximizedContainer.vAlign="bottom",this.uiMaximizedContainer.width=160,this.uiMaximizedContainer.height=430,this.uiMaximizedContainer.positionX=0,this.uiMaximizedContainer.positionY=100,this.uiMaximizedContainer.color=new Color4(0,0,0,.75),(Ft=new UIImage(this.uiMaximizedContainer,_t)).sourceLeft=826,Ft.sourceTop=184,Ft.sourceWidth=74,Ft.sourceHeight=74,Ft.hAlign="right",Ft.vAlign="top",Ft.positionX=-60,Ft.positionY=-10,Ft.width=40,Ft.height=40,Ft.isPointerBlocker=!0,Ft.onClick=new OnClick((function(){Kt.toggleLift.sourceLeft=503,Kt.toggleColliders(!0),engine.addSystem(new Ce(Ft))})),this.toggleLift=new UIImage(this.uiMaximizedContainer,_t),this.toggleLift.sourceLeft=584,this.toggleLift.sourceTop=544,this.toggleLift.sourceWidth=74,this.toggleLift.sourceHeight=74,this.toggleLift.hAlign="right",this.toggleLift.vAlign="top",this.toggleLift.positionX=-15,this.toggleLift.positionY=-10,this.toggleLift.width=40,this.toggleLift.height=40,this.toggleLift.isPointerBlocker=!0,this.toggleLift.onClick=new OnClick((function(){Kt.toggleColliders(!1),engine.addSystem(new Ce(Kt.toggleLift))})),this.toggleCamera=new UIImage(this.uiMaximizedContainer,_t),this.toggleCamera.sourceLeft=16,this.toggleCamera.sourceTop=94,this.toggleCamera.sourceWidth=74,this.toggleCamera.sourceHeight=74,this.toggleCamera.hAlign="right",this.toggleCamera.vAlign="top",this.toggleCamera.positionX=-105,this.toggleCamera.positionY=-10,this.toggleCamera.width=40,this.toggleCamera.height=40,this.toggleCamera.isPointerBlocker=!0,this.toggleCamera.onClick=new OnClick((function(){Kt.toggleCameraOptions(),engine.addSystem(new Ce(Kt.toggleCamera))})),this.toggleCamera.visible=!1,this.scaffoldB=new UIImage(this.uiMaximizedContainer,_t),this.scaffoldB.sourceLeft=340,this.scaffoldB.sourceTop=544,this.scaffoldB.sourceWidth=74,this.scaffoldB.sourceHeight=74,this.scaffoldB.hAlign="right",this.scaffoldB.vAlign="bottom",this.scaffoldB.positionX=-105,this.scaffoldB.positionY=335,this.scaffoldB.width=40,this.scaffoldB.height=40,this.scaffoldB.isPointerBlocker=!0,this.scaffoldB.onClick=new OnClick((function(){Kt.moveScaffold("q"),engine.addSystem(new Ce(Kt.scaffoldB))})),this.scaffoldU=new UIImage(this.uiMaximizedContainer,_t),this.scaffoldU.sourceLeft=178,this.scaffoldU.sourceTop=544,this.scaffoldU.sourceWidth=74,this.scaffoldU.sourceHeight=74,this.scaffoldU.hAlign="right",this.scaffoldU.vAlign="bottom",this.scaffoldU.positionX=-60,this.scaffoldU.positionY=335,this.scaffoldU.width=40,this.scaffoldU.height=40,this.scaffoldU.isPointerBlocker=!0,this.scaffoldU.onClick=new OnClick((function(){Kt.moveScaffold("w"),engine.addSystem(new Ce(Kt.scaffoldU))})),this.scaffoldF=new UIImage(this.uiMaximizedContainer,_t),this.scaffoldF.sourceLeft=422,this.scaffoldF.sourceTop=544,this.scaffoldF.sourceWidth=74,this.scaffoldF.sourceHeight=74,this.scaffoldF.hAlign="right",this.scaffoldF.vAlign="bottom",this.scaffoldF.positionX=-15,this.scaffoldF.positionY=335,this.scaffoldF.width=40,this.scaffoldF.height=40,this.scaffoldF.isPointerBlocker=!0,this.scaffoldF.onClick=new OnClick((function(){Kt.moveScaffold("e"),engine.addSystem(new Ce(Kt.scaffoldF))})),this.scaffoldL=new UIImage(this.uiMaximizedContainer,_t),this.scaffoldL.sourceLeft=16,this.scaffoldL.sourceTop=544,this.scaffoldL.sourceWidth=74,this.scaffoldL.sourceHeight=74,this.scaffoldL.hAlign="right",this.scaffoldL.vAlign="bottom",this.scaffoldL.positionX=-105,this.scaffoldL.positionY=290,this.scaffoldL.width=40,this.scaffoldL.height=40,this.scaffoldL.isPointerBlocker=!0,this.scaffoldL.onClick=new OnClick((function(){Kt.moveScaffold("a"),engine.addSystem(new Ce(Kt.scaffoldL))})),this.scaffoldD=new UIImage(this.uiMaximizedContainer,_t),this.scaffoldD.sourceLeft=259,this.scaffoldD.sourceTop=544,this.scaffoldD.sourceWidth=74,this.scaffoldD.sourceHeight=74,this.scaffoldD.hAlign="right",this.scaffoldD.vAlign="bottom",this.scaffoldD.positionX=-60,this.scaffoldD.positionY=290,this.scaffoldD.width=40,this.scaffoldD.height=40,this.scaffoldD.isPointerBlocker=!0,this.scaffoldD.onClick=new OnClick((function(){Kt.moveScaffold("s"),engine.addSystem(new Ce(Kt.scaffoldD))})),this.scaffoldR=new UIImage(this.uiMaximizedContainer,_t),this.scaffoldR.sourceLeft=97,this.scaffoldR.sourceTop=544,this.scaffoldR.sourceWidth=74,this.scaffoldR.sourceHeight=74,this.scaffoldR.hAlign="right",this.scaffoldR.vAlign="bottom",this.scaffoldR.positionX=-15,this.scaffoldR.positionY=290,this.scaffoldR.width=40,this.scaffoldR.height=40,this.scaffoldR.isPointerBlocker=!0,this.scaffoldR.onClick=new OnClick((function(){Kt.moveScaffold("d"),engine.addSystem(new Ce(Kt.scaffoldR))})),this.displayName=new UIText(this.uiMaximizedContainer),this.displayName.hAlign="center",this.displayName.vAlign="top",this.displayName.positionY=-180,this.displayName.positionX=0,this.displayName.height=10,this.displayName.fontSize=12,this.displayName.hTextAlign="center",(Lt=new UIText(this.uiMaximizedContainer)).hAlign="center",Lt.vAlign="top",Lt.positionY=-160,Lt.positionX=0,Lt.height=10,Lt.fontSize=12,Lt.hTextAlign="center",Lt.value="Entity Label",this.displayPRS=new UIText(this.uiMaximizedContainer),this.displayPRS.hAlign="center",this.displayPRS.vAlign="top",this.displayPRS.positionY=-200,this.displayPRS.positionX=0,this.displayPRS.height=10,this.displayPRS.fontSize=12,this.displayPRS.hTextAlign="center",this.displayPRS.value="(0,0,0)",this.scaffoldTitle=new UIText(this.uiMaximizedContainer),this.scaffoldTitle.hAlign="center",this.scaffoldTitle.vAlign="top",this.scaffoldTitle.positionY=-25,this.scaffoldTitle.positionX=-45,this.scaffoldTitle.height=10,this.scaffoldTitle.fontSize=8,this.scaffoldTitle.hTextAlign="center",this.scaffoldTitle.value="Scaffold",this.selectPreviousButton=new UIImage(this.uiMaximizedContainer,_t),this.selectPreviousButton.sourceLeft=16,this.selectPreviousButton.sourceTop=184,this.selectPreviousButton.sourceWidth=74,this.selectPreviousButton.sourceHeight=74,this.selectPreviousButton.hAlign="right",this.selectPreviousButton.vAlign="bottom",this.selectPreviousButton.positionX=-105,this.selectPreviousButton.positionY=30,this.selectPreviousButton.width=40,this.selectPreviousButton.height=40,this.selectPreviousButton.isPointerBlocker=!0,this.selectPreviousButton.onClick=new OnClick((function(){Kt.selectPrevious(),engine.addSystem(new Ce(Kt.selectPreviousButton))})),this.selectNextButton=new UIImage(this.uiMaximizedContainer,_t),this.selectNextButton.sourceLeft=97,this.selectNextButton.sourceTop=184,this.selectNextButton.sourceWidth=74,this.selectNextButton.sourceHeight=74,this.selectNextButton.hAlign="right",this.selectNextButton.vAlign="bottom",this.selectNextButton.positionX=-60,this.selectNextButton.positionY=30,this.selectNextButton.width=40,this.selectNextButton.height=40,this.selectNextButton.isPointerBlocker=!0,this.selectNextButton.onClick=new OnClick((function(){Kt.selectNext(),engine.addSystem(new Ce(Kt.selectNextButton))})),this.saveButton=new UIImage(this.uiMaximizedContainer,_t),this.saveButton.sourceLeft=745,this.saveButton.sourceTop=184,this.saveButton.sourceWidth=74,this.saveButton.sourceHeight=74,this.saveButton.hAlign="right",this.saveButton.vAlign="bottom",this.saveButton.positionX=-15,this.saveButton.positionY=75,this.saveButton.width=40,this.saveButton.height=40,this.saveButton.isPointerBlocker=!0,this.saveButton.onClick=new OnClick((function(){Kt.dump(),engine.addSystem(new Ce(Kt.saveButton))})),this.qButton=new UIImage(this.uiMaximizedContainer,_t),this.qButton.sourceLeft=340,this.qButton.sourceTop=544,this.qButton.sourceWidth=74,this.qButton.sourceHeight=74,this.qButton.hAlign="right",this.qButton.vAlign="bottom",this.qButton.positionX=-105,this.qButton.positionY=165,this.qButton.width=40,this.qButton.height=40,this.qButton.isPointerBlocker=!0,this.qButton.onClick=new OnClick((function(_t){Kt.adjustTransform("q"),engine.addSystem(new Ce(Kt.qButton))})),this.wButton=new UIImage(this.uiMaximizedContainer,_t),this.wButton.sourceLeft=178,this.wButton.sourceTop=544,this.wButton.sourceWidth=74,this.wButton.sourceHeight=74,this.wButton.hAlign="right",this.wButton.vAlign="bottom",this.wButton.positionX=-60,this.wButton.positionY=165,this.wButton.width=40,this.wButton.height=40,this.wButton.isPointerBlocker=!0,this.wButton.onClick=new OnClick((function(){Kt.adjustTransform("w"),engine.addSystem(new Ce(Kt.wButton))})),this.eButton=new UIImage(this.uiMaximizedContainer,_t),this.eButton.sourceLeft=422,this.eButton.sourceTop=544,this.eButton.sourceWidth=74,this.eButton.sourceHeight=74,this.eButton.hAlign="right",this.eButton.vAlign="bottom",this.eButton.positionX=-15,this.eButton.positionY=165,this.eButton.width=40,this.eButton.height=40,this.eButton.isPointerBlocker=!0,this.eButton.onClick=new OnClick((function(){Kt.adjustTransform("e"),engine.addSystem(new Ce(Kt.eButton))})),this.aButton=new UIImage(this.uiMaximizedContainer,_t),this.aButton.sourceLeft=16,this.aButton.sourceTop=544,this.aButton.sourceWidth=74,this.aButton.sourceHeight=74,this.aButton.hAlign="right",this.aButton.vAlign="bottom",this.aButton.positionX=-105,this.aButton.positionY=120,this.aButton.width=40,this.aButton.height=40,this.aButton.isPointerBlocker=!0,this.aButton.onClick=new OnClick((function(){Kt.adjustTransform("a"),engine.addSystem(new Ce(Kt.aButton))})),this.sButton=new UIImage(this.uiMaximizedContainer,_t),this.sButton.sourceLeft=259,this.sButton.sourceTop=544,this.sButton.sourceWidth=74,this.sButton.sourceHeight=74,this.sButton.hAlign="right",this.sButton.vAlign="bottom",this.sButton.positionX=-60,this.sButton.positionY=120,this.sButton.width=40,this.sButton.height=40,this.sButton.isPointerBlocker=!0,this.sButton.onClick=new OnClick((function(){Kt.adjustTransform("s"),engine.addSystem(new Ce(Kt.sButton))})),this.dButton=new UIImage(this.uiMaximizedContainer,_t),this.dButton.sourceLeft=97,this.dButton.sourceTop=544,this.dButton.sourceWidth=74,this.dButton.sourceHeight=74,this.dButton.hAlign="right",this.dButton.vAlign="bottom",this.dButton.positionX=-15,this.dButton.positionY=120,this.dButton.width=40,this.dButton.height=40,this.dButton.isPointerBlocker=!0,this.dButton.onClick=new OnClick((function(){Kt.adjustTransform("d"),engine.addSystem(new Ce(Kt.dButton))})),this.modeButton=new UIImage(this.uiMaximizedContainer,_t),this.modeButton.sourceLeft=259,this.modeButton.sourceTop=94,this.modeButton.sourceWidth=74,this.modeButton.sourceHeight=74,this.modeButton.hAlign="right",this.modeButton.vAlign="bottom",this.modeButton.positionX=-105,this.modeButton.positionY=75,this.modeButton.width=40,this.modeButton.height=40,this.modeButton.isPointerBlocker=!0,this.modeButton.onClick=new OnClick((function(){Kt.mode+=1,Kt.mode>Kt.modeSCALE&&(Kt.mode=Kt.modePOSITION),Kt.snap=0,Kt.setSnaps(),Kt.applyModeAndSnapLabels(),engine.addSystem(new Ce(Kt.modeButton))})),this.modeLabel=new UIText(this.modeButton),this.modeLabel.color=Color4.White(),this.modeLabel.hAlign="center",this.modeLabel.vAlign="bottom",this.modeLabel.paddingTop=0,this.modeLabel.paddingBottom=12,this.modeLabel.positionX=-30,this.modeLabel.paddingLeft=0,this.modeLabel.fontSize=12,this.modeLabel.fontWeight="bold",this.modeLabel.isPointerBlocker=!1,this.modeLabel.hTextAlign="center",this.snapButton=new UIImage(this.uiMaximizedContainer,_t),this.snapButton.sourceLeft=259,this.snapButton.sourceTop=93,this.snapButton.sourceWidth=74,this.snapButton.sourceHeight=74,this.snapButton.hAlign="right",this.snapButton.vAlign="bottom",this.snapButton.positionX=-60,this.snapButton.positionY=75,this.snapButton.width=40,this.snapButton.height=40,this.snapButton.isPointerBlocker=!0,this.snapButton.onClick=new OnClick((function(){Kt.snap+=1,Kt.snap>3&&(Kt.snap=0),Kt.setSnaps(),Kt.applyModeAndSnapLabels(),engine.addSystem(new Ce(Kt.snapButton))})),this.snapLabel=new UIText(this.snapButton),this.snapLabel.color=Color4.White(),this.snapLabel.hAlign="right",this.snapLabel.vAlign="bottom",this.snapLabel.positionX=-30,this.snapLabel.paddingTop=0,this.snapLabel.paddingBottom=12,this.snapLabel.paddingLeft=0,this.snapLabel.fontSize=12,this.snapLabel.fontWeight="bold",this.snapLabel.hTextAlign="center",this.snapLabel.isPointerBlocker=!1,this.applyModeAndSnapLabels(!0),this.minimizeButton=new UIImage(this.uiMaximizedContainer,_t),this.minimizeButton.sourceLeft=908,this.minimizeButton.sourceTop=544,this.minimizeButton.sourceWidth=74,this.minimizeButton.sourceHeight=74,this.minimizeButton.hAlign="right",this.minimizeButton.vAlign="bottom",this.minimizeButton.positionX=-15,this.minimizeButton.positionY=30,this.minimizeButton.width=40,this.minimizeButton.height=40,this.minimizeButton.isPointerBlocker=!0,this.minimizeButton.onClick=new OnClick((function(){Kt.minimizeUI(),engine.addSystem(new Ce(Kt.minimizeButton))})),(Yt=new UIText(this.uiMaximizedContainer)).value="Builder HUD",Yt.color=Color4.White(),Yt.hAlign="center",Yt.vAlign="bottom",Yt.paddingTop=0,Yt.paddingBottom=5,Yt.paddingLeft=15,Yt.fontSize=12,Yt.isPointerBlocker=!1,this.minimizeUI(),[2]}))}))},t.prototype.setSnaps=function(){switch(this.snap){case 0:this.snapPosScale=1,this.snapRot=90;break;case 1:this.snapPosScale=.1,this.snapRot=15;break;case 2:this.snapPosScale=.01,this.snapRot=5;break;case 3:this.snapPosScale=.001,this.snapRot=1}},t.prototype.applyModeAndSnapLabels=function(_t){switch(this.mode){case this.modePOSITION:this.modeLabel.value="P";break;case this.modeROTATION:this.modeLabel.value="R";break;case this.modeSCALE:this.modeLabel.value="S";break;default:this.modeLabel.value="ERR"}switch(!_t&&this.updateDisplayPRS(),this.snap){case 0:this.mode==this.modeROTATION?this.snapLabel.value="90":this.snapLabel.value="1";break;case 1:this.mode==this.modeROTATION?this.snapLabel.value="15":this.snapLabel.value="0.1";break;case 2:this.mode==this.modeROTATION?this.snapLabel.value="5":this.snapLabel.value="0.01";break;case 3:this.mode==this.modeROTATION?this.snapLabel.value="1":this.snapLabel.value="0.001";break;default:this.snapLabel.value="ERR"}},t.prototype.countDecimals=function(_t){return Math.floor(_t)===_t?0:_t.toString().split(".")[1].length||0},t.prototype.updateDisplayPRS=function(){switch(this.mode){case this.modePOSITION:this.displayPRS.value="POS: ("+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).position.x.toFixed(this.countDecimals(this.snapPosScale))+","+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).position.y.toFixed(this.countDecimals(this.snapPosScale))+","+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).position.z.toFixed(this.countDecimals(this.snapPosScale))+")";break;case this.modeROTATION:this.displayPRS.value="ROT: ("+Math.ceil(this.entities[this.selectedEntityIndex].entity.getComponent(Transform).rotation.eulerAngles.x)+","+Math.ceil(this.entities[this.selectedEntityIndex].entity.getComponent(Transform).rotation.eulerAngles.y)+","+Math.ceil(this.entities[this.selectedEntityIndex].entity.getComponent(Transform).rotation.eulerAngles.z)+")";break;case this.modeSCALE:this.displayPRS.value="SCL: ("+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).scale.x.toFixed(this.countDecimals(this.snapPosScale))+","+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).scale.y.toFixed(this.countDecimals(this.snapPosScale))+","+this.entities[this.selectedEntityIndex].entity.getComponent(Transform).scale.z.toFixed(this.countDecimals(this.snapPosScale))+")"}},t.prototype.maximizeUI=function(){this.uiMinimizedContainer.visible=!1,this.uiMaximizedContainer.visible=!0,this.uiMaximized=!0,this.selectedEntityIndex>=0&&this.numEntities>0&&engine.addEntity(this.selectionPointer),this.mode=this.modePOSITION,this.applyModeAndSnapLabels(),this.displayName.value=this.entities[this.selectedEntityIndex].entity.name,this.updateDisplayPRS(),this.scaffolding.getComponent(Transform).scale=this.scaffoldScale},t.prototype.minimizeUI=function(){this.uiMaximizedContainer.visible=!1,this.uiMinimizedContainer.visible=!0,this.uiMaximized=!1,this.selectedEntityIndex>=0&&this.numEntities>0&&engine.removeEntity(this.selectionPointer),this.scaffolding.getComponent(Transform).scale=Vector3.Zero()},t.prototype.showUI=function(){this.canvas.visible=!0,this.canvas.isPointerBlocker=!0},t.prototype.hideUI=function(){this.canvas.visible=!1,this.canvas.isPointerBlocker=!1},t.prototype.updateSelectionPointerPOS=function(_t){var Ft=_t.position.clone();this.selectionPointer.getComponent(Transform).position=new Vector3(Ft.x,Ft.y+this.selectionPointerElevation,Ft.z)},t.prototype.selectEntity=function(_t){this.selectedEntityIndex=_t,null!=this.entities[_t].entity&&(this.displayName.value=this.entities[this.selectedEntityIndex].entity.name,this.updateSelectionPointerPOS(this.entities[_t].entity.getComponent(Transform)))},t.prototype.selectPrevious=function(){this.selectedEntityIndex>0&&this.selectEntity(this.selectedEntityIndex-1),this.updateDisplayPRS()},t.prototype.selectNext=function(){this.selectedEntityIndex<this.numEntities-1&&this.selectEntity(this.selectedEntityIndex+1),this.updateDisplayPRS()},t.prototype.discardSelected=function(){log("Discard Selected Entity isn't implemented at this time.")},t.prototype.toggleCameraOptions=function(){this.movingSystem.addCameraPosition(new Vector3(8,8,8)),log(this.movingSystem.positions),this.scaffolding.addComponent(new Lt("","fixed",0))},t.prototype.toggleColliders=function(_t){584==this.toggleLift.sourceLeft?(this.toggleLift.sourceLeft=503,this.scaffloor.getComponent(Material).albedoColor=new Color4(.97,.27,.34),this.backWall.getComponent(Transform).scale=this.scaffoldScale,this.backWall.getComponent(Transform).position=new Vector3(-.6,1.5,0),this.frontWall.getComponent(Transform).scale=this.scaffoldScale,this.frontWall.getComponent(Transform).position=new Vector3(.6,1.5,0),this.leftWall.getComponent(Transform).scale=this.scaffoldScale,this.leftWall.getComponent(Transform).position=new Vector3(0,1.5,.6),this.rightWall.getComponent(Transform).scale=this.scaffoldScale,this.rightWall.getComponent(Transform).position=new Vector3(0,1.5,-.6)):(this.toggleLift.sourceLeft=584,this.backWall.getComponent(Transform).scale=Vector3.Zero(),this.frontWall.getComponent(Transform).scale=Vector3.Zero(),this.leftWall.getComponent(Transform).scale=Vector3.Zero(),this.rightWall.getComponent(Transform).scale=Vector3.Zero(),this.rightWall.getComponent(Transform).position=new Vector3(0,-41.5,-.6),this.backWall.getComponent(Transform).position=new Vector3(0,-4.5,-.6),this.frontWall.getComponent(Transform).position=new Vector3(0,-4.5,-.6),this.leftWall.getComponent(Transform).position=new Vector3(0,-4.5,-.6),this.scaffloor.getComponent(Material).albedoColor=Color4.White()),_t&&(this.scaffolding.getComponent(Transform).position=new Vector3(1,.3,1))},t.prototype.moveScaffold=function(_t){var Ft=this.scaffolding.getComponent(Transform);if(this.mode===this.modePOSITION)switch(Ft.position,_t){case"a":this.scaffolding.hasComponent(Lt)?this.scaffolding.removeComponent(Lt):this.scaffolding.addComponent(new Lt("left","free"));break;case"s":this.scaffolding.hasComponent(Lt)?this.scaffolding.removeComponent(Lt):this.scaffolding.addComponent(new Lt("down","free"));break;case"d":this.scaffolding.hasComponent(Lt)?this.scaffolding.removeComponent(Lt):this.scaffolding.addComponent(new Lt("right","free"));break;case"q":this.scaffolding.hasComponent(Lt)?this.scaffolding.removeComponent(Lt):this.scaffolding.addComponent(new Lt("back","free"));break;case"w":this.scaffolding.hasComponent(Lt)?this.scaffolding.removeComponent(Lt):this.scaffolding.addComponent(new Lt("up","free"));break;case"e":this.scaffolding.hasComponent(Lt)?this.scaffolding.removeComponent(Lt):this.scaffolding.addComponent(new Lt("forward","free"))}},t.prototype.adjustTransform=function(_t){this.unsavedContainer.visible=!0;var Ft=this.entities[this.selectedEntityIndex].entity.getComponent(Transform);switch(this.mode){case this.modePOSITION:var Lt=Ft.position;switch(_t){case"a":Lt.x-=this.snapPosScale;break;case"s":Lt.y-=this.snapPosScale;break;case"d":Lt.x+=this.snapPosScale;break;case"q":Lt.z-=this.snapPosScale;break;case"w":Lt.y+=this.snapPosScale;break;case"e":Lt.z+=this.snapPosScale}this.updateSelectionPointerPOS(Ft);break;case this.modeROTATION:switch(_t){case"a":Ft.rotate(Vector3.Left(),-this.snapRot);break;case"s":Ft.rotate(Vector3.Up(),this.snapRot);break;case"d":Ft.rotate(Vector3.Left(),this.snapRot);break;case"q":Ft.rotate(Vector3.Forward(),-this.snapRot);break;case"w":Ft.rotate(Vector3.Up(),-this.snapRot);break;case"e":Ft.rotate(Vector3.Forward(),this.snapRot)}break;case this.modeSCALE:var Yt=Ft.scale;switch(_t){case"a":Yt.x-=this.snapPosScale;break;case"s":Yt.y-=this.snapPosScale;break;case"d":Yt.x+=this.snapPosScale;break;case"q":Yt.z-=this.snapPosScale;break;case"w":Yt.y+=this.snapPosScale;break;case"e":Yt.z+=this.snapPosScale}}this.updateDisplayPRS()},t.prototype.attachToEntity=function(_t,Ft){return void 0===Ft&&(Ft=!0),e(this,void 0,void 0,(function(){return n(this,(function(Lt){return null==_t?log("BuilderHUD attachToEntity called with a null entity"):ve.isSetup&&(this.entities[this.numEntities]={entity:_t,transform:_t.getComponent(Transform),preexisting:Ft},Ft?(this.selectedEntityIndex=-1)&&this.selectEntity(0):this.selectEntity(this.numEntities),this.numEntities++),[2]}))}))},t.prototype.newEntity=function(){var _t=Camera.instance,Ft=_t.rotation.eulerAngles.y;Ft>=180?Ft-=180:Ft+=180;var Lt=0,Yt=0,Kt=0,Zt=1,le=1,ve=1;if(null!=this.defaultParent){var Ce=this.defaultParent.getComponent(Transform);Lt=Ce.position.x,Yt=Ce.position.y,Kt=Ce.position.z,Ce.rotation.eulerAngles.x,Ce.rotation.eulerAngles.y,Ce.rotation.eulerAngles.z,Zt=Ce.scale.x,le=Ce.scale.y,ve=Ce.scale.z}var Se=new Transform({position:new Vector3((_t.position.x-Lt)/Zt,(0-Yt)/le,(_t.position.z-Kt)/ve),rotation:Quaternion.Euler(0,0,0),scale:new Vector3(this.newEntityScale/Zt,this.newEntityScale/le,this.newEntityScale/ve)});Se.rotate(Vector3.Up(),-Ft);var Ie=new Entity;if(Ie.name="Entity"+this.numEntities,Ie.addComponent(Se),null==this.newEntityShape)try{this.newEntityShape=new GLTFShape("models/xyz/xyzLeftHand.glb")}catch(Ie){this.newEntityShape=new BoxShape,(new Material).albedoColor=Color3.Green()}Ie.addComponent(this.newEntityShape),null!=this.defaultParent&&Ie.setParent(this.defaultParent),engine.addEntity(Ie),this.attachToEntity(Ie,!1)},t.prototype.round=function(_t){return Math.floor(1e3*(_t+49e-5))/1e3},t.prototype.dump=function(){for(var _t in this.unsavedContainer.visible=!1,log("--------------- BuilderHUD entities -------------"),this.entities){var Ft=null==this.entities[_t].entity.name?"Existing":""+this.entities[_t].entity.name,Lt=this.entities[_t].transform,Yt=Lt.position,Kt=Lt.rotation.eulerAngles,Zt=Lt.scale,le="position: new Vector3("+this.round(Yt.x)+","+this.round(Yt.y)+","+this.round(Yt.z)+"), rotation: Quaternion.Euler("+this.round(Kt.x)+","+this.round(Kt.y)+","+this.round(Kt.z)+"), scale: new Vector3("+this.round(Zt.x)+","+this.round(Zt.y)+","+this.round(Zt.z)+")";log(Ft+" {"+le+"}")}log("-------------------------------------------------")},t.prototype.destroy=function(){for(var _t in this.dump(),this.entities)this.entities[_t].preexisting||(this.entities[_t].entity.setParent(null),engine.removeEntity(this.entities[_t].entity));this.entities=[],this.numEntities=0,this.refreshDisplay()},t.prototype.refreshDisplay=function(){},t}(),le=function(){function t(_t){this.timer=4,this.entities=[],this.hud=_t}return t.prototype.pendingEntity=function(_t){this.entities.push(_t)},t.prototype.update=function(_t){if(this.timer>0)this.timer-=_t;else{this.timer=4;for(var Ft=0;Ft<this.entities.length;Ft++)log("here"),this.hud.attachToEntity(this.entities[Ft],!0);this.entities=[]}},t}(),ve=new Zt;ve.pendingEntityAdd=new le(ve),engine.addSystem(ve.pendingEntityAdd);var Ce=function(){function t(_t){this.timer=.1,this.uiIMage=_t}return t.prototype.update=function(_t){this.timer>0?(this.uiIMage.opacity-=.3,this.timer-=_t):(this.timer=.1,this.uiIMage.opacity=1,engine.removeSystem(this))},t}();_t.hud=ve,Object.defineProperty(_t,"__esModule",{value:!0})})),define("game",["require","exports","dcl-access-area","dcl-builder-hud","@dcl/ecs-scene-utils"],(function(_t,Ft,Lt,Yt,Kt){Object.defineProperty(Ft,"__esModule",{value:!0});var Zt=new Entity("_scene");engine.addEntity(Zt);var le=new Transform({position:new Vector3(0,0,0),rotation:new Quaternion(0,0,0,1),scale:new Vector3(1,1,1)});Zt.addComponentOrReplace(le);var ve=new Entity("bermudaGrass");engine.addEntity(ve),ve.setParent(Zt);var Ce=new GLTFShape("c9b17021-765c-4d9a-9966-ce93a9c323d1/FloorBaseGrass_01/FloorBaseGrass_01.glb");Ce.withCollisions=!0,Ce.isPointerBlocker=!0,Ce.visible=!0,ve.addComponentOrReplace(Ce);var Se=new Transform({position:new Vector3(8,0,8),rotation:new Quaternion(0,0,0,1),scale:new Vector3(1,1,1)});ve.addComponentOrReplace(Se);var Ie=new Entity("bermudaGrass2");engine.addEntity(Ie),Ie.setParent(Zt),Ie.addComponentOrReplace(Ce);var Ne=new Transform({position:new Vector3(8,0,24),rotation:new Quaternion(0,0,0,1),scale:new Vector3(1,1,1)});Ie.addComponentOrReplace(Ne);var Fe=new Entity("domeGreenhouse");engine.addEntity(Fe),Fe.setParent(Zt);var Re=new Transform({position:new Vector3(8,-.5,5),rotation:new Quaternion(0,180,0,1),scale:new Vector3(.75,1,1.2)});Fe.addComponentOrReplace(Re);var Pe=new GLTFShape("66a1b927-de0d-4114-9ae0-e8b485601040/GreenHouse_01/GreenHouse_01.glb");Pe.withCollisions=!0,Pe.isPointerBlocker=!0,Pe.visible=!0,Fe.addComponentOrReplace(Pe),Yt.hud.attachToEntity(Fe);var Le=new Entity("domeTrigger");Le.addComponent(new Transform({position:new Vector3(6,0,-9.5),rotation:Quaternion.Euler(0,0,0),scale:new Vector3(1,1,1)})),Le.setParent(Zt),Le.addComponent(new Kt.TriggerComponent(new Kt.TriggerBoxShape(new Vector3(5,3,1),new Vector3(2,1.5,0)),{enableDebug:!1,onCameraEnter:function(){Fe.addComponent(new Kt.ScaleTransformComponent(new Vector3(1,1,1),new Vector3(1,2.5,1),.5)),engine.removeEntity(Le)}})),Yt.hud.attachToEntity(Le);var Ue=new Entity("domeGreenhouse2");engine.addEntity(Ue),Ue.setParent(Zt);var He=new Transform({position:new Vector3(8,-.6,2),rotation:new Quaternion(0,180,0,1),scale:new Vector3(1.5,3,3)});Ue.addComponentOrReplace(He);var qe=new GLTFShape("66a1b927-de0d-4114-9ae0-e8b485601040/GreenHouse_01/GreenHouse_01.glb");qe.withCollisions=!0,qe.isPointerBlocker=!0,qe.visible=!0,Ue.addComponentOrReplace(qe),Yt.hud.attachToEntity(Ue);var We=Lt.createArea({transform:{position:new Vector3(8,1,1),scale:new Vector3(3,5,1)},debug:!1,type:Lt.Type.NFT,nftType:Lt.NFTType.ERC721,chain:Lt.ChainType.ETH,contract:"0xBC4CA0EdA7647A8aB7C2061c2E118A18a936f13D",name:"wall1",deniedMessage:"You need a BAYC to enter. Peasant!"});Yt.hud.attachToEntity(We)}));